(()=>{"use strict";var t,e={969:(t,e,i)=>{var n,o=i(437),r=i(264),s=i(385),h=function(){function t(){}return t.loadFont=function(){var t=this;return new Promise((function(e,i){t.font?e():(new r.J).load(t.FONT_DIR,(function(i){t.font=i;var n=t.buildTextMesh("M",0,0,.1,new o.V9B({color:t.COLOR_PALETTE.get("LIGHT")}));if(n.geometry.computeBoundingBox(),!n.geometry.boundingBox)throw new Error("Font bounding box not found");t.baseTextHeight=n.geometry.boundingBox.max.y-n.geometry.boundingBox.min.y,t.baseTextWidth=n.geometry.boundingBox.max.x-n.geometry.boundingBox.min.x,e()}),void 0,i)}))},t.buildQuadrilateralMesh=function(t,e,i,n){void 0===t&&(t=1),void 0===e&&(e=1);var r=new o.bdM(t,e),s=new o.eaF(r,i);return s.position.set(n.x,n.y,0),s},t.buildTextMesh=function(t,e,i,n,r,h,a){if(void 0===h&&(h=!0),void 0===a&&(a=0),!this.font)throw new Error("Font not loaded");var u=new s._(t,{font:this.font,size:n,height:.05}),c=new o.eaF(u,r);return c.position.set(e,i,0),h&&c.geometry.center(),0!==a&&(c.geometry.center().rotateZ(a),c.position.set(e,i,0)),c},t.updateText=function(e,i,n){void 0===n&&(n=!0),e.geometry.dispose(),e.geometry=new s._(i,{font:t.font,size:e.geometry instanceof s._?e.geometry.parameters.options.size:.1,height:.1}),n&&e.geometry.center()},t.updateMaterial=function(t,e){t.material.dispose(),t.material=e},t.drawGrid=function(e){var i=t.COLOR_PALETTE.get("DARKER"),n=new o.fTw(100,1e3,i,i);n.rotateX(Math.PI/2),n.material.depthWrite=!1,n.position.set(0,0,-.2),e.add(n)},t.buildTriangleMesh=function(t,e){var i=Math.sqrt(3)/2*t,n=new o.LoY,r=new Float32Array([-t/2,-i/2,0,t/2,-i/2,0,0,i/2,0]);n.setAttribute("position",new o.THS(r,3));var s=e instanceof o.imn?e:new o.V9B({color:e});return new o.eaF(n,s)},t.buildImageMesh=function(e,i,n){return r=this,s=void 0,a=function(){var r,s,h;return function(t,e){var i,n,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=h(0),s.throw=h(1),s.return=h(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function h(h){return function(a){return function(h){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,h[0]&&(r=0)),r;)try{if(i=1,n&&(o=2&h[0]?n.return:h[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,h[1])).done)return o;switch(n=0,o&&(h=[2&h[0],o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,n=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==h[0]&&2!==h[0])){r=0;continue}if(3===h[0]&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(6===h[0]&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(t){h=[6,t],n=0}finally{i=o=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,a])}}}(this,(function(a){switch(a.label){case 0:return r=new o.bdM(i,n),[4,new Promise((function(i,n){t.textureLoader.load(e,i,void 0,n)}))];case 1:return s=a.sent(),h=new o.V9B({map:s,transparent:!0}),[2,new o.eaF(r,h)]}}))},new((h=void 0)||(h=Promise))((function(t,e){function i(t){try{o(a.next(t))}catch(t){e(t)}}function n(t){try{o(a.throw(t))}catch(t){e(t)}}function o(e){var o;e.done?t(e.value):(o=e.value,o instanceof h?o:new h((function(t){t(o)}))).then(i,n)}o((a=a.apply(r,s||[])).next())}));var r,s,h,a},t.addBackgroundMesh=function(e,i,n,r){if(void 0===r&&(r=.05),e.geometry.computeBoundingBox(),!e.geometry.boundingBox)throw new Error("Bounding box not found");var s=t.buildQuadrilateralMesh(e.geometry.boundingBox.getSize(new o.Pq0).x+r,e.geometry.boundingBox.getSize(new o.Pq0).y+.03,n,new o.I9Y(i.x+e.geometry.boundingBox.getSize(new o.Pq0).x/2,i.y+e.geometry.boundingBox.getSize(new o.Pq0).y/2));return s.position.x=i.x+e.geometry.boundingBox.getSize(new o.Pq0).x/2,s.position.y=i.y+e.geometry.boundingBox.getSize(new o.Pq0).y/2,s},t.buildLineMesh=function(t,e,i){var n=new o.LoY,r=new Float32Array([t.x,t.y,0,e.x,e.y,0]);n.setAttribute("position",new o.THS(r,3));var s=new o.mrM({color:i});return new o.N1A(n,s)},t.disposeMeshes=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];e.forEach((function(e){return t.disposeMesh(e)}))},t.disposeMesh=function(t){t.geometry&&t.geometry.dispose(),t.material&&(Array.isArray(t.material)?t.material.forEach((function(t){return t.dispose()})):t.material.dispose())},t.toHex=function(t){return"0x".concat(t.toString(16).toUpperCase().padStart(4,"0"))},t.COLOR_PALETTE=new Map([["DARKEST","#0F0D1B"],["DARKER","#1F1B2C"],["DARK","#352F44"],["MEDIUM_DARK","#5C5470"],["MEDIUM_LIGHT","#B9B4C7"],["LIGHT","#dee7e8"],["GOLDEN_YELLOW","#FFC569"],["LIGHT_GREEN","#27CB72"],["LIGHT_RED","#D95252"],["LIGHT_BLUE","#3CB2FC"]]),t.textureLoader=new o.Tap,t.FONT_DIR="res/Courier_New_Bold.json",t}(),a=i(566);!function(t){t[t.LEFT=0]="LEFT",t[t.RIGHT=1]="RIGHT",t[t.TOP=2]="TOP",t[t.BOTTOM=3]="BOTTOM"}(n||(n={}));var u,c,p=function(){function t(t,e,i){this.clockFrequency=1,this.position={x:t[0],y:t[1]},this.scene=e,this.clockFrequency=i,this.pinPositions=new Map,this.pinGeometries=new Map,this.pinsMeshes=new Map,this.traces=new Map}return t.prototype.getClockFrequency=function(){return this.clockFrequency},t.prototype.getHitBoxMesh=function(){return this.bodyMesh},t.prototype.select=function(){return this.scene.add(this.selectedMesh),this},t.prototype.deselect=function(){this.scene.remove(this.selectedMesh)},t.prototype.drawPins=function(e,i,r){var s=e.geometry instanceof o.bdM?e.geometry.parameters.width:0,h=e.geometry instanceof o.bdM?e.geometry.parameters.height:0,u=i===n.TOP||i===n.BOTTOM,c=((u?s-2*t.PIN_MARGIN:h-2*t.PIN_MARGIN)-r*(2*t.PIN_WIDTH))/(r-1);this.pinPositions.set(i,[]),this.pinGeometries.set(i,[]);for(var p=0;p<r;p++){var d=p*(2*t.PIN_WIDTH+c),l=u?this.position.x-s/2+t.PIN_MARGIN+t.PIN_WIDTH+d:i===n.LEFT?this.position.x-s/2-t.PIN_WIDTH-.01:this.position.x+s/2+t.PIN_WIDTH+.01,f=u?i===n.TOP?this.position.y+h/2+t.PIN_WIDTH+.01:this.position.y-h/2-t.PIN_WIDTH-.01:this.position.y-h/2+t.PIN_MARGIN+t.PIN_WIDTH+d,y=new o.bdM(t.PIN_WIDTH,2*t.PIN_WIDTH);u||y.rotateZ(Math.PI/2),y.translate(l,f,0),this.pinGeometries.get(i).push(y),this.pinPositions.get(i).push(new o.I9Y(l,f))}var g=a.pP(this.pinGeometries.get(i));if(!g)throw new Error("Failed to merge geometries");var m=new o.eaF(g,t.PIN_MATERIAL);this.scene.add(m),this.pinsMeshes.set(i,m)},t.prototype.buildTrace=function(e,i,r,s,h,a){var u=this.calculateExtendedPoint(e,i,h),c=this.calculateExtendedPoint(r,s,2*t.PIN_WIDTH),p=new o.I9Y(i===n.TOP||i===n.BOTTOM?c.x:u.x,i===n.TOP||i===n.BOTTOM?u.y:c.y),d=[new o.Pq0(e.x,e.y,0),new o.Pq0(u.x,u.y,0),new o.Pq0(p.x,p.y,0),new o.Pq0(c.x,c.y,0),new o.Pq0(r.x,r.y,0)],l=(new o.LoY).setFromPoints(d),f=new o.mrM({color:a?a.color:t.PIN_MATERIAL.color});return new o.N1A(l,f)},t.prototype.drawTrace=function(t,e,i,n,o,r,s,h){var a=this.pinPositions.get(i),u=n.pinPositions.get(o),c=0,p=0;a[c][h]>=u[p][h]?c=a.length-1:a[c][h]<u[p][h]&&(p=u.length-1);var d=t>=c?t:c-(c-t),l=t>=p?t:p-(p-t);d=Math.min(d,a.length-1),l=Math.min(l,u.length-1);var f="x"===h?r+(s*(a.length-1)-s*Math.abs(d-c)):r+s*Math.abs(d-c);return this.buildTrace(a[d],i,u[l],o,f,e)},t.prototype.drawTraces=function(e,i,n,r,s,h){for(var a=new o.YJl,u=0;u<this.pinPositions.get(e).length;u++)a.add(this.drawTrace(u,t.PIN_MATERIAL,e,i,n,r,s,h));this.traces.set(e,a),this.scene.add(a)},t.prototype.clearTracesAndPins=function(t){var e;this.pinsMeshes.get(t)&&(h.disposeMesh(this.pinsMeshes.get(t)),this.scene.remove(this.pinsMeshes.get(t)),this.traces.get(t)&&(this.scene.remove(this.traces.get(t)),null===(e=this.traces.get(t))||void 0===e||e.children.forEach((function(t){return h.disposeMesh(t)}))))},t.prototype.calculateExtendedPoint=function(t,e,i){switch(e){case n.LEFT:return new o.I9Y(t.x-i,t.y);case n.RIGHT:return new o.I9Y(t.x+i,t.y);case n.TOP:return new o.I9Y(t.x,t.y+i);case n.BOTTOM:return new o.I9Y(t.x,t.y-i);default:return t}},t.prototype.buildBodyMesh=function(e,i){this.bodyMesh=new o.eaF(new o.bdM(e,i),t.BODY_MATERIAL),this.bodyMesh.position.set(this.position.x,this.position.y,0),this.scene.add(this.bodyMesh),this.buildSelectedMesh()},t.prototype.disposeBodyMesh=function(){this.bodyMesh&&this.selectedMesh&&(this.scene.remove(this.bodyMesh),this.scene.remove(this.selectedMesh),h.disposeMesh(this.bodyMesh),h.disposeMesh(this.selectedMesh),this.bodyMesh=void 0,this.selectedMesh=void 0)},t.prototype.updateClock=function(t){return this.clockFrequency=t,this.clockFrequency},t.prototype.buildSelectedMesh=function(){if(this.bodyMesh){var e=this.bodyMesh.geometry instanceof o.bdM?this.bodyMesh.geometry.parameters.height:0,i=this.bodyMesh.geometry instanceof o.bdM?this.bodyMesh.geometry.parameters.width:0;this.selectedMesh=new o.eaF(new o.bdM(i+.01,e+.01),t.HUD_TEXT_MATERIAL),this.selectedMesh.position.set(this.position.x,this.position.y,-.01)}},t.TEXT_SIZE=.05,t.PIN_MARGIN=.05,t.PIN_WIDTH=.02,t.CONTENTS_MARGIN=.03,t.INNER_SPACING=.01,t.BODY_MATERIAL=new o.V9B({color:h.COLOR_PALETTE.get("DARK")}),t.HUD_TEXT_MATERIAL=new o.V9B({color:h.COLOR_PALETTE.get("MEDIUM_LIGHT")}),t.PIN_MATERIAL=new o.V9B({color:h.COLOR_PALETTE.get("MEDIUM_DARK")}),t.MAX_CLOCK_FREQUENCY=120,t}(),d=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},l=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},f=function(){function t(t){void 0===t&&(t=1/0);for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.items=e,this.maxSize=t}return t.of=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return new(t.bind.apply(t,l([void 0,1/0],d(e),!1)))},t.prototype.toArray=function(){return this.items.slice()},t.prototype.enqueue=function(t){if(this.isFull())throw new Error("Queue overflow error: attempting to enqueue to a full queue.");this.items.push(t)},t.prototype.dequeue=function(){return this.items.shift()},t.prototype.isEmpty=function(){return 0===this.items.length},t.prototype.isFull=function(){return this.items.length>=this.maxSize},t.prototype.size=function(){return this.items.length},t.prototype.clear=function(){this.items=[]},t.prototype.get=function(t){if(!(t<0||t>=this.items.length))return this.items[t]},t.prototype.remove=function(t){if(!(t<0||t>=this.items.length))return this.items.splice(t,1)[0]},t.prototype.peek=function(){return this.items[0]},t.prototype.moveTo=function(t,e){void 0===e&&(e=this.size());for(var i=0;i<Math.min(e,t.maxSize)&&!this.isEmpty()&&!t.isFull();++i)t.enqueue(this.dequeue())},t.prototype.contains=function(t){return this.items.includes(t)},t.prototype.some=function(t){return this.items.some(t)},t.prototype.every=function(t){return this.items.every(t)},t.prototype.filter=function(e){return new(t.bind.apply(t,l([void 0,this.maxSize],d(this.items.filter(e)),!1)))},t.prototype.slice=function(e,i){if(void 0===e&&(e=0),void 0===i&&(i=this.size()),0==this.size())return new t(this.maxSize);if(e<0||e>=this.size()||i<0||i>this.size())throw new Error("Index out of bounds error: attempting to slice queue outside of bounds.");if(e>i)throw new Error("Invalid index error: start index must be less than or equal to end index.");return new(t.bind.apply(t,l([void 0,this.maxSize],d(this.items.slice(e,i)),!1)))},t.prototype[Symbol.iterator]=function(){var t=0,e=this.items;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0,value:null}}}},t.prototype.toString=function(){return this.items.toString()},t}(),y=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},g=function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},m=function(){function t(t,e,i){this.staticMeshes=[],this.liveMeshes=[],this.highlightMeshes=[],this.parent=t,this.scene=t.scene,this.position={x:t.position.x+e,y:t.position.y+i}}return t.prototype.dispose=function(){var t=this;this.clearHighlights(),g(g(g([],y(this.staticMeshes),!1),y(this.liveMeshes),!1),y(this.highlightMeshes),!1).forEach((function(e){t.scene.remove(e),e.geometry.dispose()}))},t.prototype.addStaticMesh=function(t){this.staticMeshes.push(t),this.scene.add(t)},t.prototype.addStaticMeshes=function(){for(var t,e,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];(t=this.staticMeshes).push.apply(t,g([],y(i),!1)),(e=this.scene).add.apply(e,g([],y(i),!1))},t.prototype.addLiveMesh=function(t){this.liveMeshes.push(t),this.scene.add(t)},t.prototype.addHighlightMesh=function(t){this.highlightMeshes.push(t),this.scene.add(t)},t.prototype.clearHighlights=function(){var t=this;this.highlightMeshes.forEach((function(e){t.scene.remove(e),e.geometry.dispose()})),this.highlightMeshes=[]},t.prototype.instructionMaterial=function(e){return e.isMemoryOperation()?t.MEMORY_MATERIAL:e.isArithmetic()?t.ALU_MATERIAL:t.BRANCH_MATERIAL},t.BODY_MATERIAL=new o.V9B({color:h.COLOR_PALETTE.get("DARK")}),t.COMPONENT_MATERIAL=new o.V9B({color:h.COLOR_PALETTE.get("DARKER")}),t.TEXT_MATERIAL=new o.V9B({color:h.COLOR_PALETTE.get("LIGHT")}),t.MEMORY_MATERIAL=new o.V9B({color:h.COLOR_PALETTE.get("LIGHT_GREEN")}),t.ALU_MATERIAL=new o.V9B({color:h.COLOR_PALETTE.get("LIGHT_RED")}),t.BRANCH_MATERIAL=new o.V9B({color:h.COLOR_PALETTE.get("LIGHT_BLUE")}),t.TEXT_SIZE=.05,t}(),M=(u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},u(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),I=function(t){function e(i,n,r,s,a,u,c,p,d){void 0===r&&(r=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===u&&(u=!1),void 0===c&&(c=!1),void 0===p&&(p=e.BUFFER_BASE_WIDTH),void 0===d&&(d=e.INNER_SPACING);var l=t.call(this,i,r,s)||this;l.bufferMeshOffsets=[],l.highlightedBufferMeshes=[],l.readyToBeRead=!1,l.readTimeout=0,l.storedInstructions=new f(n),l.size=n,l.delay=a,l.reversed=u,l.horizontal=c;var y=e.BUFFER_HEIGHT*n+e.INNER_SPACING*(n-1);l.width=l.horizontal?y:p,l.height=l.horizontal?p:y,l.spacing=d;var g=l.spacing*(l.size-1);return l.rectangleSize=((l.horizontal?l.width:l.height)-g)/l.size,l.noOpMesh=h.buildTextMesh("NOP",0,0,m.TEXT_SIZE,m.BODY_MATERIAL,!0,l.horizontal?Math.PI/2:0),l.bufferHighlightGeometry=new o.bdM(l.horizontal?l.rectangleSize:l.width,l.horizontal?l.height:l.rectangleSize),l}return M(e,t),e.dimensions=function(t,i,n){void 0===n&&(n=e.INNER_SPACING);var o=e.BUFFER_HEIGHT*t+n*(t-1);return{width:i?o:e.BUFFER_BASE_WIDTH,height:i?e.BUFFER_BASE_WIDTH:o}},e.prototype.setPosition=function(t){this.position={x:t[0],y:t[1]}},e.prototype.isFull=function(){return this.storedInstructions.size()===this.size},e.prototype.clear=function(){this.storedInstructions.clear(),this.shiftMeshesDown(1),this.clearHighlights(),this.readyToBeRead=!1},e.prototype.isReadyToBeRead=function(){if(0==this.delay)throw new Error("No delay instruction buffers are always ready to be read");return this.readyToBeRead},e.prototype.peek=function(){return this.clearHighlights(),this.storedInstructions.peek()&&this.highlightBuffer(0),this.storedInstructions.peek()},e.prototype.askForInstructions=function(t,e){if(0==this.delay)throw new Error("There is no need to ask for instructions when there is no delay");if(!(this.readTimeout>0)){for(var i=0;i<e;++i)this.storedInstructions.get(i)&&this.highlightBuffer(i);this.readTimeout=t.getClockFrequency()/this.parent.getClockFrequency()*this.delay}},e.prototype.read=function(t){if(0!=this.delay&&!this.isReadyToBeRead())throw new Error("Instruction buffer from ".concat(this.parent.displayName()," is not ready to be read"));if(t>this.size)throw new Error("Cannot read more instructions than the size of the buffer");if(t>this.storedInstructions.size())return new f(0);var e=new f(t);return this.storedInstructions.moveTo(e,t),this.shiftMeshesDown(t),this.clearHighlights(),this.readyToBeRead=!1,e},e.prototype.write=function(t,e){if(void 0===e&&(e=t.size()),e>this.size)throw new Error("Cannot write more instructions than the size of the buffer");var i=this.storedInstructions.size();t.moveTo(this.storedInstructions,e);for(var n=i;n<this.storedInstructions.size();++n)this.scene.remove(this.liveMeshes[n]),this.liveMeshes[n]=this.buildBufferTextMesh(n),this.scene.add(this.liveMeshes[n])},e.prototype.update=function(){if(0==this.delay)throw new Error("No delay instruction buffers do not need to be updated");this.readTimeout>0&&this.storedInstructions.size()>0&&(--this.readTimeout,this.readyToBeRead=this.readTimeout<=0)},e.prototype.initializeGraphics=function(){this.addStaticMesh(this.buildBuffersMesh());for(var t=0;t<this.size;++t)this.liveMeshes[t]=this.buildBufferTextMesh(t),this.scene.add(this.liveMeshes[t])},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.bufferHighlightGeometry.dispose(),this.noOpMesh.geometry.dispose()},e.prototype.buildBufferTextMesh=function(t,e){if(t<0||t>=this.size)throw new Error("Index out of bounds");var i=this.horizontal?this.bufferMeshOffsets[t]:this.position.x,n=this.horizontal?this.position.y:this.bufferMeshOffsets[t];if(this.storedInstructions.get(t)){var o=this.storedInstructions.get(t).isMemoryOperation()?m.MEMORY_MATERIAL:this.storedInstructions.get(t).isArithmetic()?m.ALU_MATERIAL:m.BRANCH_MATERIAL;return h.buildTextMesh(e||this.storedInstructions.get(t).toString(),i,n,m.TEXT_SIZE,o,!0,this.horizontal?Math.PI/2:0)}return this.noOpMesh.clone().translateX(i).translateY(n)},e.prototype.shiftMeshesDown=function(t){var e=this;if(t<=0)throw new Error("Cannot shift down by a negative number of positions");if(t>this.size)throw new Error("Cannot shift down by more than the size of the buffer");this.liveMeshes.splice(0,t).forEach((function(t){e.scene.remove(t),t.geometry.dispose()})),this.horizontal?this.liveMeshes.forEach((function(i,n){return i.translateX(-e.bufferMeshOffsets[n+t]+e.bufferMeshOffsets[n])})):this.liveMeshes.forEach((function(i,n){return i.translateY(-e.bufferMeshOffsets[n+t]+e.bufferMeshOffsets[n])}));for(var i=this.size-1;i>this.size-t-1;--i)this.liveMeshes[i]=this.noOpMesh.clone().translateX(this.horizontal?this.bufferMeshOffsets[i]:this.position.x).translateY(this.horizontal?this.position.y:this.bufferMeshOffsets[i]),this.scene.add(this.liveMeshes[i])},e.prototype.highlightBuffer=function(t){if(t<0||t>=this.size)throw new Error("Index out of bounds");this.clearHighlights();var e=this.instructionMaterial(this.storedInstructions.get(t)),i=new o.eaF(this.bufferHighlightGeometry,e);i.position.set(this.horizontal?this.bufferMeshOffsets[t]:this.position.x,this.horizontal?this.position.y:this.bufferMeshOffsets[t],.01),this.highlightMeshes.push(i),this.scene.add(i),this.liveMeshes[t].material=m.COMPONENT_MATERIAL,this.storedInstructions.get(t)&&this.highlightedBufferMeshes.push(t)},e.prototype.clearHighlights=function(){var e=this;t.prototype.clearHighlights.call(this),this.highlightedBufferMeshes.forEach((function(t){null!=e.storedInstructions.get(t)&&(e.liveMeshes[t].material=e.instructionMaterial(e.storedInstructions.get(t)))})),this.highlightedBufferMeshes=[]},e.prototype.buildBuffersMesh=function(){for(var t=this.horizontal?this.position.x+(this.reversed?-1:1)*(this.rectangleSize/2-this.width/2):this.position.y+(this.reversed?-1:1)*(this.rectangleSize/2-this.height/2),e=[],i=0;i<this.size;++i){var n=t+(this.reversed?-1:1)*i*(this.rectangleSize+this.spacing),r=this.bufferHighlightGeometry.clone();this.horizontal?r.translate(n,this.position.y,0):r.translate(this.position.x,n,0),this.bufferMeshOffsets.push(n),e.push(r)}var s=a.pP(e,!1);if(!s)throw new Error("Failed to merge geometries");return new o.eaF(s,m.COMPONENT_MATERIAL)},e.BUFFER_HEIGHT=.11,e.BUFFER_BASE_WIDTH=.8,e.INNER_SPACING=.01,e}(m),v=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),E=function(t){function e(i,n,r,s){void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=e.WIDTH);var h=t.call(this,i,n,r)||this;return h.count=0,h.height=I.BUFFER_HEIGHT,h.highlighted=!1,h.width=s,h.highlightGeometry=new o.bdM(h.width,h.height),h}return v(e,t),e.dimensions=function(){return{width:this.WIDTH,height:I.BUFFER_HEIGHT}},e.prototype.get=function(){return this.count},e.prototype.set=function(t){this.count=t,h.updateText(this.liveMeshes[0],h.toHex(this.count),!0),this.highlighted=!0,this.highlight()},e.prototype.update=function(t){this.highlighted&&this.clearHighlights(),t||h.updateText(this.liveMeshes[0],h.toHex(this.count++),!0)},e.prototype.initializeGraphics=function(){var t=new o.eaF(this.highlightGeometry,e.COMPONENT_MATERIAL);t.position.set(this.position.x,this.position.y,0),this.addStaticMesh(t),this.liveMeshes.push(h.buildTextMesh(h.toHex(this.count),this.position.x,this.position.y,m.TEXT_SIZE,m.TEXT_MATERIAL,!1)),this.liveMeshes[0].geometry.center(),this.scene.add(this.liveMeshes[0])},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.highlightGeometry.dispose()},e.prototype.clearHighlights=function(){t.prototype.clearHighlights.call(this),this.highlighted=!1,this.liveMeshes[0]&&(this.liveMeshes[0].material=m.TEXT_MATERIAL)},e.prototype.highlight=function(){var t=new o.eaF(this.highlightGeometry,m.BRANCH_MATERIAL);t.position.set(this.position.x,this.position.y,0),this.highlightMeshes.push(t),this.scene.add(t),this.liveMeshes[0].material=m.COMPONENT_MATERIAL,this.highlighted=!0},e.WIDTH=.3,e}(m),w=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),T=function(t){function e(i,n,o,r,s){void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=e.WIDTH);var h=t.call(this,i,n,o)||this;h.fetchingAddress=-1,h.iCache=s,h.height=I.BUFFER_HEIGHT,h.width=r,h.pc=new E(i,n-h.width/2+E.dimensions().width/2,o);var a=h.width-E.dimensions().width-e.SPACING;return h.instructionBuffer=new I(i,1,n+h.width/2-a/2,o,0,!1,!1,a),h}return w(e,t),e.prototype.setInstructionMemory=function(t){this.instructionMemory=t},e.prototype.flush=function(){this.instructionBuffer.clear(),this.fetchingAddress=-1,this.pc.set(0),this.pc.update()},e.prototype.read=function(){var t=this.instructionBuffer.read(1);return t?t.dequeue():void 0},e.prototype.setProgramCounter=function(t){this.pc.set(t),this.fetchingAddress!=t&&this.instructionBuffer.read(1)},e.prototype.next=function(){if(!this.instructionBuffer.isFull()){if(!this.checkMemoryIsReady(this.pc.get()))return this.fetchingAddress=this.pc.get(),void this.askForInstructionsAt(this.pc.get());var t=this.fetchInstructionAt(this.pc.get());if(t){var e=new f(1);e.enqueue(t),this.instructionBuffer.write(e,1),this.pc.update()}}},e.prototype.checkMemoryIsReady=function(t){return this.iCache?this.iCache.isReadyToBeRead(t):null!=this.instructionMemory&&this.instructionMemory.isReadyToBeRead()},e.prototype.askForInstructionsAt=function(t){if(null!=this.instructionMemory){var e=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s}(this.iCache?this.iCache.askForInstructionAt(t):this.instructionMemory.askForInstructionsAt(this.parent,1,t),2),i=e[0],n=e[1];-1!=i&&this.parent instanceof it&&this.parent.highlightInstructionMemoryTrace(i,n)}},e.prototype.fetchInstructionAt=function(t){if(null==this.instructionMemory)throw new Error("Instruction memory not set");return this.iCache?this.iCache.fetchInstructionAt(t):this.instructionMemory.fetchInstructionAt(t)},e.prototype.initializeGraphics=function(){this.instructionBuffer.initializeGraphics(),this.pc.initializeGraphics()},e.prototype.update=function(){throw new Error("Instruction fetcher should not be updated manually")},e.WIDTH=.9,e.SPACING=.01,e}(m),_=function(){function t(){}return t.ALU_OPCODES=["ADD","SUB","MUL","AND","OR","GT","LT"],t.ALU_IMM_OPCODES=["ADDI","SUBI","MULI"],t.MEMORY_OPCODES=["LOAD","STORE"],t.BRANCH_OPCODES=["BGT","BLT"],t.REGISTER_COUNT=12,t.ZERO_REGISTER=0,t.MAX_BYTE_VALUE=Math.pow(2,16)-1,t}(),O=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),A=function(t){function e(i,n,r,s,h){void 0===r&&(r=0),void 0===s&&(s=0),void 0===h&&(h=e.WIDTH);var a=t.call(this,i,r,s)||this;return a.height=I.BUFFER_HEIGHT,a.textSize=.03,a.highlighted=!1,a.branchStalling=!1,a.instruction=null,a.registers=n,a.width=h,a.highlightGeometry=new o.bdM(a.width,a.height),a}return O(e,t),e.dimensions=function(){return{width:e.WIDTH,height:I.BUFFER_HEIGHT}},e.prototype.flush=function(){this.instruction=null,this.branchStalling=!1,this.highlighted&&this.clearHighlights()},e.prototype.isReady=function(){return null==this.instruction},e.prototype.compute=function(t,e){function i(t,e,i){switch(i){case"ADDI":case"ADD":return t+e;case"SUBI":case"SUB":return t-e;case"MULI":case"MUL":return t*e;case"AND":return t&e;case"OR":return t|e;case"BGT":case"GT":return t>e?1:0;case"BLT":case"LT":return t<e?1:0;default:throw new Error("Invalid ALU opcode: "+i)}}if(this.instruction=e,null!=e){this.drawALUText(),this.highlight();var n=this.read(e.getOp1Reg()),o=e.isImmediate()?e.getImmediate():this.read(e.getOp2Reg());if(this.branchStalling){var r=i(n,o,e.getOpcode());return t.takeBranch(1==r),this.instruction=null,void(this.branchStalling=!1)}if(e.isBranch())return this.branchStalling=!0,void(this.decoder=t);var s=this.preventOverflow(i(n,o,e.getOpcode()));this.write(e.getResultReg(),s),this.parent instanceof it&&this.parent.notifyInstructionRetired(),this.instruction=null}},e.prototype.update=function(){this.highlighted&&this.clearHighlights(),this.branchStalling&&this.compute(this.decoder,this.instruction)},e.prototype.initializeGraphics=function(){var t=new o.eaF(this.highlightGeometry,e.COMPONENT_MATERIAL);t.position.set(this.position.x,this.position.y,0),this.addStaticMesh(t),this.noOpMesh=h.buildTextMesh("NOP",this.position.x,this.position.y,m.TEXT_SIZE,m.BODY_MATERIAL,!0),this.scene.add(this.noOpMesh)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.highlightGeometry.dispose()},e.prototype.clearHighlights=function(){var e=this;t.prototype.clearHighlights.call(this),this.liveMeshes.forEach((function(t){return e.scene.remove(t)})),this.liveMeshes=[],this.highlighted=!1,this.noOpMesh.visible=!0},e.prototype.highlight=function(){var t=new o.eaF(this.highlightGeometry,m.ALU_MATERIAL);t.position.set(this.position.x,this.position.y,0),this.highlightMeshes.push(t),this.scene.add(t),this.liveMeshes[0].material=m.COMPONENT_MATERIAL,this.highlighted=!0},e.prototype.drawALUText=function(){var t=this,i=function(i,n,o){var r=h.buildTextMesh(i,t.position.x+n,t.position.y+o,t.textSize,e.COMPONENT_MATERIAL);t.liveMeshes.push(r),t.scene.add(r)};this.noOpMesh.visible=!1,null!=this.instruction&&(i(function(t){switch(t){case"ADD":case"ADDI":return"+";case"SUB":case"SUBI":return"-";case"MUL":case"MULI":return"x";case"AND":return"&";case"OR":return"v";case"BGT":case"GT":return">";case"BLT":case"LT":return"<";default:throw new Error("Invalid ALU opcode: "+t)}}(this.instruction.getOpcode()),0,e.OP_Y_OFFSET),i("R"+this.instruction.getOp1Reg(),e.DISTANCE_TO_CENTER,e.OP_Y_OFFSET),i(this.instruction.isImmediate()?this.instruction.getImmediate().toString():"R"+this.instruction.getOp2Reg(),-e.DISTANCE_TO_CENTER,e.OP_Y_OFFSET),i(this.instruction.isBranch()?"DECODER":"R"+this.instruction.getResultReg(),0,e.RES_Y_OFFSET))},e.prototype.preventOverflow=function(t){var e=t%_.MAX_BYTE_VALUE;return e>=0?e:e+_.MAX_BYTE_VALUE},e.prototype.read=function(t){var e=this.registers[0].getSize(),i=Math.floor(t/e);return this.registers[i].read(t%e)},e.prototype.write=function(t,e){var i=this.registers[0].getSize(),n=Math.floor(t/i);this.registers[n].write(t%i,e,this)},e.WIDTH=.6,e.DISTANCE_TO_CENTER=.07,e.OP_Y_OFFSET=-.03,e.RES_Y_OFFSET=.02,e}(m),C=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),R=function(t){function e(i,n,r,s,h,a,u,c){void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=4),void 0===h&&(h=0);var p=t.call(this,i,n,r)||this;return p.initialTextMaterial=m.TEXT_MATERIAL.clone(),p.recentlyUpdatedMeshes=[],p.cellPositions=[],p.ready=!1,p.highlightedMemoryCell=-1,p.memoryOperationTimeout=0,p.numberOfWords=s,p.delay=h,p.zeroRegister=a,p.bankName=c,p.registerNames=u,p.memoryArray=new Array(p.numberOfWords).fill(e.INITIAL_REG_VALUE),p.width=e.BUFFER_WIDTH,p.height=e.BUFFER_HEIGHT*s+e.INNER_SPACING*(s-1),p.cellHighlightGeometry=new o.bdM(e.BUFFER_WIDTH,e.BUFFER_HEIGHT),p.initialTextMaterial.transparent=!0,p.initialTextMaterial.opacity=.2,p}return C(e,t),e.dimensions=function(t){return{width:e.BUFFER_WIDTH,height:e.BUFFER_HEIGHT*t+e.INNER_SPACING*(t-1)}},e.prototype.getSize=function(){return this.memoryArray.length},e.prototype.isReady=function(){return 0==this.delay||this.ready},e.prototype.askForMemoryOperation=function(t,e){if(0==this.delay)throw new Error("There is no need to ask for memory operations when there is no delay");this.memoryOperationTimeout>0||(this.ready=!1,this.highlightCell(e),this.memoryOperationTimeout=t.getClockFrequency()/this.parent.getClockFrequency())},e.prototype.read=function(t){return this.ensureAddressIsInBounds(t),this.checkIfReady(),this.ready=!1,this.clearHighlights(),this.memoryArray[t]},e.prototype.write=function(t,e,i){this.ensureAddressIsInBounds(t),this.checkIfReady(),t!==this.zeroRegister&&(this.memoryArray[t]=e,h.updateText(this.liveMeshes[t],h.toHex(e),!0),this.clearHighlights(),0==this.delay&&this.highlightCell(t,i),this.ready=!1)},e.prototype.update=function(){var t=this;if(this.memoryOperationTimeout>0&&(this.memoryOperationTimeout--,this.ready=this.memoryOperationTimeout<=0),0==this.delay&&this.highlightMeshes.length>0&&this.clearHighlights(),this.recentlyUpdatedMeshes.length>0){var e=[];this.recentlyUpdatedMeshes.forEach((function(i,n){var o=i.material;o.transparent||(o.transparent=!0),o.opacity-=.01,o.opacity<=t.initialTextMaterial.opacity&&(o.opacity=t.initialTextMaterial.opacity,e.push(n)),h.updateMaterial(i,o)})),e.forEach((function(e){return t.recentlyUpdatedMeshes.splice(e,1)}))}},e.prototype.initializeGraphics=function(){this.addStaticMeshes.apply(this,function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}([],function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s}(this.buildDataCellMeshes(this.registerNames)),!1)),this.bankName&&this.addStaticMesh(h.buildTextMesh(this.bankName,this.position.x,this.position.y+this.height/2+h.baseTextHeight/2,e.TEXT_SIZE,m.TEXT_MATERIAL,!0));for(var t=0;t<this.memoryArray.length;t++)this.addLiveMesh(this.buildDataCellContentsMesh(t))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.cellHighlightGeometry.dispose()},e.prototype.clearHighlights=function(){t.prototype.clearHighlights.call(this),this.highlightedMemoryCell>=0&&this.liveMeshes[this.highlightedMemoryCell]&&(this.liveMeshes[this.highlightedMemoryCell].material=m.TEXT_MATERIAL.clone(),this.recentlyUpdatedMeshes.includes(this.liveMeshes[this.highlightedMemoryCell])||this.recentlyUpdatedMeshes.push(this.liveMeshes[this.highlightedMemoryCell]),this.highlightedMemoryCell=-1)},e.prototype.buildDataCellContentsMesh=function(t){if(t<0||t>=this.memoryArray.length)throw new Error("Index out of bounds");if(this.memoryArray[t]==e.INITIAL_REG_VALUE){var i=this.cellPositions[t],n=h.buildTextMesh(h.toHex(this.memoryArray[t]),i[0],i[1]-e.BUFFER_HEIGHT/2+h.baseTextHeight/2,e.TEXT_SIZE,this.initialTextMaterial.clone(),!1);return n.geometry.center(),n}throw new Error("No valid data to display (poor initialization ?)")},e.prototype.highlightCell=function(t,e){if(t<0||t>=this.memoryArray.length)throw new Error("Index out of bounds");this.clearHighlights();var i=e&&e instanceof A?m.ALU_MATERIAL:m.MEMORY_MATERIAL,n=new o.eaF(this.cellHighlightGeometry,i),r=this.cellPositions[t];n.position.set(r[0],r[1],0),this.liveMeshes[t].material=m.BODY_MATERIAL,this.highlightedMemoryCell=t,this.addHighlightMesh(n)},e.prototype.buildDataCellMeshes=function(t){var e=this.getStartPositionX(),i=this.getStartPositionY(),n=[],r=[];this.generateGeometries(n,r,t,e,i);var s=a.pP(n,!0),h=a.pP(r,!0);if(!s||!h)throw new Error("Failed to merge geometries");return[new o.eaF(s,m.COMPONENT_MATERIAL),new o.eaF(h,m.BODY_MATERIAL)]},e.prototype.getStartPositionX=function(){return this.position.x-this.width/2+e.BUFFER_WIDTH/2},e.prototype.getStartPositionY=function(){return this.position.y-this.height/2+e.BUFFER_HEIGHT/2},e.prototype.generateGeometries=function(t,i,n,o,r){for(var s=0;s<this.numberOfWords;s++){var h=r+s*(e.BUFFER_HEIGHT+e.INNER_SPACING);this.createCellGeometry(t,o,h),this.createNameGeometry(i,n,s,o,h),this.cellPositions.push([o,h])}},e.prototype.createCellGeometry=function(t,e,i){var n=this.cellHighlightGeometry.clone();n.translate(e,i,0),t.push(n)},e.prototype.createNameGeometry=function(t,i,n,o,r){var s=i?i[n]:h.toHex(n),a=h.buildTextMesh(s,0,0,e.TEXT_SIZE/2,e.BODY_MATERIAL).geometry.center().translate(o,r+e.BUFFER_HEIGHT/2-h.baseTextHeight/4,0);t.push(a)},e.prototype.ensureAddressIsInBounds=function(t){if(t>=this.memoryArray.length||t<0)throw new Error("Address "+t+" is out of bounds for data array from "+this.parent.displayName())},e.prototype.checkIfReady=function(){if(0!==this.delay&&!this.ready)throw new Error("Data array from "+this.parent.displayName()+" is not ready to be read")},e.BUFFER_HEIGHT=.11,e.BUFFER_WIDTH=.3,e.INNER_SPACING=.01,e.INITIAL_REG_VALUE=0,e}(m),S=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),b=function(t){function e(i,n,o,r,s,h,a,u){void 0===s&&(s=0),void 0===h&&(h=0),void 0===a&&(a=e.BUFFER_BASE_WIDTH),void 0===u&&(u=!1);var c=t.call(this,i,1,s,h,0,!1,u,a,0)||this;return c.pipelined=!1,c.fetcher=n,c.alu=o,c.io=r,c}return S(e,t),e.prototype.setPipelined=function(){this.pipelined=!0},e.prototype.flush=function(){this.clear()},e.prototype.takeBranch=function(t){t?this.fetcher.setProgramCounter(this.storedInstructions.dequeue().getAddress()):this.storedInstructions.dequeue(),this.parent instanceof it&&this.parent.notifyInstructionRetired()},e.prototype.decode=function(){var t=this.alu.isReady()&&this.io.isReady();if(this.storedInstructions.isEmpty()){if(!this.pipelined&&!t)return;var e=this.fetcher.read();if(!e)return void this.fetcher.next();this.enqueueInstruction(e)}this.pipelined&&!this.storedInstructions.get(0).isBranch()&&this.fetcher.next(),t&&this.decodeInstruction()},e.prototype.enqueueInstruction=function(t){this.storedInstructions.enqueue(t),this.liveMeshes[0]&&this.scene.remove(this.liveMeshes[0]);var e=this.buildBufferTextMesh(0);this.liveMeshes[0]=e,this.scene.add(e)},e.prototype.decodeInstruction=function(){var t=this.storedInstructions.peek();t&&(t.isArithmetic()?this.alu.compute(this,this.storedInstructions.dequeue()):t.isMemoryOperation()?this.io.processIO(this.storedInstructions.dequeue()):t.isBranch()&&this.alu.compute(this,t))},e.prototype.update=function(){this.liveMeshes[0]&&this.storedInstructions.isEmpty()&&(this.scene.remove(this.liveMeshes[0]),this.liveMeshes[0].geometry.dispose(),this.liveMeshes[0]=this.buildBufferTextMesh(0),this.scene.add(this.liveMeshes[0])),this.decode()},e.prototype.read=function(t){throw new Error("Decoder should not be read from")},e}(I),N=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),B=function(t){function e(i,n,o,r,s,h){void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=e.BUFFER_BASE_WIDTH),void 0===h&&(h=!0);var a=t.call(this,i,1,o,r,0,!1,h,s,0)||this;return a.registers=n,a}return N(e,t),e.prototype.setWorkingMemory=function(t){this.memory=t},e.prototype.flush=function(){this.clear()},e.prototype.isReady=function(){return this.storedInstructions.isEmpty()},e.prototype.processIO=function(t){if(null!=t&&null!=this.memory){this.isReady()&&this.enqueueInstruction(t);var i=this.storedInstructions.peek();null!=i&&(this.memory.isReady(i.getAddress())?this.executeInstruction(i):(this.memory.askForMemoryOperation(this.parent,i.getAddress()),this.parent instanceof it&&this.parent.highlightMainMemoryTrace(Math.floor(i.getAddress()),e.MEMORY_MATERIAL)))}},e.prototype.update=function(){this.storedInstructions.isEmpty()?this.parent instanceof it&&this.parent.clearHighlightedTraces():this.processIO(this.storedInstructions.peek())},e.prototype.read=function(t){throw new Error("Decoder should not be read from.")},e.prototype.write=function(t,e){throw void 0===e&&(e=t.size()),new Error("Decoder should not be written to, use processIO() instead.")},e.prototype.enqueueInstruction=function(t){this.storedInstructions.enqueue(t),this.liveMeshes[0]&&this.scene.remove(this.liveMeshes[0]);var e=this.buildBufferTextMesh(0,this.shortMemoryInstruction(t));this.liveMeshes[0]=e,this.scene.add(e),this.highlightBuffer(0)},e.prototype.executeInstruction=function(t){if(null!=this.memory){var e=t.getResultReg();if("LOAD"==t.getOpcode()){var i=this.registers[0].getSize();this.registers[Math.floor(e/i)].write(e%i,this.memory.read(t.getAddress()))}else"STORE"==t.getOpcode()&&this.memory.write(t.getAddress(),e);this.storedInstructions.dequeue(),this.parent instanceof it&&this.parent.notifyInstructionRetired(),this.updateBufferText()}},e.prototype.updateBufferText=function(){this.scene.remove(this.liveMeshes[0]),this.liveMeshes=[],this.clearHighlights();var t=this.buildBufferTextMesh(0);this.liveMeshes[0]=t,this.scene.add(t)},e.prototype.shortMemoryInstruction=function(t){return("LOAD"==t.getOpcode()?"LD ":"ST ")+"["+h.toHex(t.getAddress())+"]"},e}(I),P=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),x=function(t){function e(e,i,n,o){void 0===i&&(i=0),void 0===n&&(n=0);var r=t.call(this,e,i,n)||this;return r.registers=[],r.iCache=o,r}return P(e,t),e.dimensions=function(){return{width:B.BUFFER_HEIGHT+4*R.dimensions(_.REGISTER_COUNT/4).width+3*e.INNER_SPACING_L,height:3*A.dimensions().height+4*e.INNER_SPACING_L+R.dimensions(_.REGISTER_COUNT/4).height}},e.prototype.setInstructionMemory=function(t){null==t?this.instructionFetcher.setInstructionMemory(void 0):this.instructionFetcher.setInstructionMemory(t.getInstructionBuffer())},e.prototype.setWorkingMemory=function(t){this.IOInterface.setWorkingMemory(t)},e.prototype.setPipelined=function(){this.decoder.setPipelined()},e.prototype.flushPipeline=function(){this.instructionFetcher.flush(),this.decoder.flush(),this.alu.flush(),this.IOInterface.flush()},e.prototype.initializeGraphics=function(){var t=A.dimensions(),i=R.dimensions(_.REGISTER_COUNT/4),n=4*i.width+3*e.INNER_SPACING_L;this.height=3*t.height+e.INNER_SPACING_L*(_.REGISTER_COUNT/4)+i.height,this.width=B.BUFFER_HEIGHT+4*i.width+4*e.INNER_SPACING_L;for(var o=new Array(_.REGISTER_COUNT).fill(0).map((function(t,e){return"R".concat(e)})),r=0;r<4;r++){var s=new R(this.parent,this.position.x-this.width/2+B.BUFFER_HEIGHT+e.INNER_SPACING_L+i.width/2+r*(i.width+e.INNER_SPACING_L),this.position.y+this.height/2-i.height/2,_.REGISTER_COUNT/4,0,_.ZERO_REGISTER,o.slice(r*(_.REGISTER_COUNT/4),(r+1)*(_.REGISTER_COUNT/4)));this.registers.push(s)}var h=i.height+t.height+e.INNER_SPACING_L;this.IOInterface=new B(this.parent,this.registers,this.position.x-this.width/2+B.BUFFER_HEIGHT/2,this.position.y+this.height/2-h/2,h,!0),this.alu=new A(this.parent,this.registers,this.position.x+this.width/2-n/2,this.position.y-this.height/2+2*t.height+2*e.INNER_SPACING_L+t.height/2,n),this.instructionFetcher=new T(this.parent,this.position.x,this.position.y-this.height/2+t.height/2,this.width,this.iCache),this.decoder=new b(this.parent,this.instructionFetcher,this.alu,this.IOInterface,this.position.x,this.position.y-this.height/2+t.height/2+e.INNER_SPACING_L+t.height,this.width),this.instructionFetcher.initializeGraphics(),this.registers.forEach((function(t){return t.initializeGraphics()})),this.alu.initializeGraphics(),this.IOInterface.initializeGraphics(),this.decoder.initializeGraphics()},e.prototype.update=function(){this.registers.forEach((function(t){return t.update()})),this.alu.update(),this.IOInterface.update(),this.decoder.update()},e.INNER_SPACING_L=.02,e}(m),L=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),F=function(t){function e(i,n,o,r){void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=e.WIDTH);var s=t.call(this,i,n,o)||this;s.valid=!1,s.height=I.BUFFER_HEIGHT,s.width=r,s.addressTag=new E(i,n-s.width/2+E.dimensions().width/2,o);var h=s.width-E.dimensions().width-e.SPACING;return s.instructionBuffer=new I(i,1,n+s.width/2-h/2,o,0,!1,!1,h),s}return L(e,t),e.dimensions=function(){return{width:e.WIDTH,height:I.BUFFER_HEIGHT}},e.prototype.clear=function(){this.valid=!1,this.addressTag.set(0),this.instructionBuffer.clear()},e.prototype.isValid=function(){return this.valid},e.prototype.getAddressTag=function(){return this.addressTag.get()},e.prototype.read=function(){if(!this.valid)throw new Error("Invalid cache line read");return this.instructionBuffer.peek()},e.prototype.write=function(t,e){this.valid=!0,this.addressTag.set(e),this.instructionBuffer.clear(),this.instructionBuffer.write(f.of(t)),this.instructionBuffer.peek()},e.prototype.invalidate=function(){this.valid=!1},e.prototype.clearHighlights=function(){this.addressTag.clearHighlights(),this.instructionBuffer.clearHighlights()},e.prototype.initializeGraphics=function(){this.addressTag.initializeGraphics(),this.instructionBuffer.initializeGraphics()},e.prototype.update=function(){this.addressTag.update(!0)},e.WIDTH=.9,e.SPACING=.01,e}(m),H=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),G=function(t){function e(i,n,o,r,s,h){void 0===n&&(n=0),void 0===o&&(o=0),void 0===r&&(r=4),void 0===s&&(s=.9),void 0===h&&(h=1);var a=t.call(this,i,n,o)||this;a.readTimeout=0,a.readyToBeRead=!1,a.requestedAddress=-1,a.delay=h,a.cacheLines=[];for(var u=F.dimensions().height,c=o-(r*u+(r-1)*e.INNER_SPACING)/2+u/2,p=0;p<r;p++)a.cacheLines.push(new F(i,n,c+p*(u+e.INNER_SPACING),s));return a}return H(e,t),e.prototype.setInstructionMemory=function(t){this.instructionMemory=t},e.prototype.flush=function(){this.cacheLines.forEach((function(t){return t.clear()}))},e.prototype.isReadyToBeRead=function(t){if(0==this.delay)throw new Error("No delay instruction buffers are always ready to be read");return this.readyToBeRead&&null!=this.cacheLineContaining(t)},e.prototype.askForInstructionAt=function(t){if(0==this.delay)throw new Error("No delay instruction buffers are always ready to be read");if(t==this.requestedAddress&&this.readTimeout>0)return[-1,null];if(this.requestedAddress=t,null!=this.cacheLineContaining(t))this.readTimeout=this.delay;else{if(!this.instructionMemory.isReadyToBeRead())return this.cacheLines.forEach((function(t){return t.clearHighlights()})),this.instructionMemory.askForInstructionsAt(this.parent,1,t);this.cacheLines[0].write(this.instructionMemory.fetchInstructionAt(t),t),this.cacheLines.push(this.cacheLines.shift())}return[-1,null]},e.prototype.fetchInstructionAt=function(t){if(0!=this.delay&&!this.isReadyToBeRead(t))throw new Error("Instruction buffer from ".concat(this.parent.displayName()," is not ready to be read"));var e=this.cacheLineContaining(t);if(null==e)throw new Error("Address ".concat(t," not found in cache"));return this.readyToBeRead=!1,this.cacheLines.forEach((function(t){return t.clearHighlights()})),this.cacheLines.push(this.cacheLines.splice(e,1)[0]),this.cacheLines[e].read()},e.dimensions=function(t){void 0===t&&(t=4);var i=F.dimensions();return{width:i.width,height:t*i.height+(t-1)*e.INNER_SPACING}},e.prototype.initializeGraphics=function(){this.cacheLines.forEach((function(t){return t.initializeGraphics()})),this.width=F.dimensions().width,this.height=e.dimensions(this.cacheLines.length).height},e.prototype.update=function(){this.cacheLines.forEach((function(t){return t.update()})),this.readTimeout>0&&(--this.readTimeout,this.readTimeout<=0&&(this.requestedAddress=-1,this.readyToBeRead=!0))},e.prototype.cacheLineContaining=function(t){for(var e=0;e<this.cacheLines.length;e++)if(this.cacheLines[e].isValid()&&this.cacheLines[e].getAddressTag()==t)return e},e.INNER_SPACING=.01,e}(m),k=function(t,e){this.stats=t,this.upgradeOptions=e};!function(t){t[t.None=0]="None",t[t.NumberSelection=1]="NumberSelection",t[t.SingleValueSelection=2]="SingleValueSelection"}(c||(c={}));var D,U=function(){function t(t,e,i,n,o,r,s,h){if(this.name=t,this.cost=e,this.type=i,this.description=n,this.currentValue=o,this.nestedOptions=r,this.type===c.NumberSelection){if(!s)throw new Error("onIncrease is required for NumberSelection type");if(this.onIncrease=s,!h)throw new Error("onDecrease is required for NumberSelection type");this.onDecrease=h}}return t.createNumberSelection=function(e,i,n,o,r,s){return new t(e,i,c.NumberSelection,n,o,void 0,r,s)},t.createSingleValueSelection=function(e,i,n,o){return new t(e,i,c.SingleValueSelection,n,o)},t}(),z=function(t,e,i,n){this.name=t,this.value=e,this.unit=i,this.button=n},q=function(){function t(t){this.scene=t}return t.prototype.isClickable=function(){return void 0!==this.onClick},t.prototype.isHoverable=function(){return!(void 0===this.onHover||void 0===this.onUnhover)},t.prototype.destroy=function(){this.scene.remove(this.getHitbox()),h.disposeMesh(this.getHitbox())},t}(),Y=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),W=function(t){function e(i,n,r,s,u){var c=t.call(this,i)||this;c.isPaused=!0,c.hitbox=h.buildQuadrilateralMesh(.1,.1,r,n),c.hitbox.visible=!1,c.runMesh=h.buildTriangleMesh(.1,r).translateX(n.x).translateY(n.y).rotateZ(-Math.PI/2);var p=new o.bdM(.03,.1),d=(0,a.pP)([p.clone().translate(.025,0,0),p.clone().translate(-.025,0,0)]);return c.pauseMesh=new o.eaF(d,r),c.pauseMesh.position.set(n.x,n.y,0),s?(c.runMesh.visible=!0,c.pauseMesh.visible=!1):(c.runMesh.visible=!1,c.pauseMesh.visible=!0),c.scene.add(c.runMesh,c.pauseMesh,c.hitbox),c.onClick=function(){c.isPaused=!c.isPaused,c.runMesh.visible=!c.isPaused,c.pauseMesh.visible=c.isPaused,u()},c.onHover=function(){var t=c.isPaused?c.pauseMesh:c.runMesh;e.changeMeshAppearance(t,J.HOVER_COLOR,J.HOVER_SCALE_FACTOR)},c.onUnhover=function(){var t=c.isPaused?c.pauseMesh:c.runMesh;e.changeMeshAppearance(t,r,1)},c}return Y(e,t),e.prototype.getHitbox=function(){return this.hitbox},e.changeMeshAppearance=function(t,e,i){t.material=e,i&&t.scale.set(i,i,i)},e}(q),X=function(){function t(t,e,i,n){var r=this;this.hud=t,this.app=e,this.hudCamera=i,this.buttons=n,this.raycaster=new o.tBo,this.mouse=new o.I9Y,this.mouseDown=!1,this.initialMousePosition=new o.I9Y,this.chipMenuButtons=[],this.onMouseDown=function(t){r.mouseDown=!0,r.initialMousePosition.set(t.clientX,t.clientY)},this.onMouseUp=function(){r.mouseDown=!1},this.onMouseWheel=function(t){r.app.camera.zoom+=t.deltaY*-J.ZOOM_FACTOR,r.app.camera.zoom=Math.max(J.MAX_ZOOM,r.app.camera.zoom),r.app.camera.zoom=Math.min(J.MIN_ZOOM,r.app.camera.zoom),r.app.camera.updateProjectionMatrix()},this.onMouseDrag=function(t){if(r.mouseDown){var e=(t.clientX-r.initialMousePosition.x)/window.innerWidth,i=(t.clientY-r.initialMousePosition.y)/window.innerHeight;r.moveCamera(e,i),r.initialMousePosition.set(t.clientX,t.clientY)}},document.addEventListener("click",this.onMouseClick.bind(this),!1),document.addEventListener("mousemove",this.onMouseMove.bind(this),!1),document.addEventListener("mousedown",this.onMouseDown),document.addEventListener("mousemove",this.onMouseDrag),document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("wheel",this.onMouseWheel),document.addEventListener("touchstart",this.onTouchStart.bind(this),!1),document.addEventListener("touchmove",this.onTouchMove.bind(this),!1),document.addEventListener("touchend",this.onTouchEnd.bind(this),!1),window.addEventListener("resize",(function(){return r.onWindowResize()}))}return t.prototype.updateMouseCoordinates=function(t){this.mouse.x=t.clientX/window.innerWidth*2-1,this.mouse.y=-t.clientY/window.innerHeight*2+1},t.prototype.onMouseClick=function(t){var e=this;this.updateMouseCoordinates(t),this.raycaster.setFromCamera(this.mouse,this.hudCamera),this.chipMenuButtons.forEach((function(t){t.isClickable()&&e.raycaster.intersectObject(t.getHitbox()).length>0&&t.onClick()})),this.buttons.forEach((function(t){t.isClickable()&&e.raycaster.intersectObject(t.getHitbox()).length>0&&t.onClick()})),this.raycaster.intersectObject(this.hud.getComputerChipMenu().backgroundMeshHitbox()).length>0||(this.raycaster.setFromCamera(this.mouse,this.app.camera),this.app.gameActors.forEach((function(t){e.raycaster.intersectObject(t.getHitBoxMesh()).length>0&&e.hud.selectActor(t)})))},t.prototype.onMouseMove=function(t){this.updateMouseCoordinates(t),this.checkHoverState()},t.prototype.checkHoverState=function(){var t=this;this.raycaster.setFromCamera(this.mouse,this.hudCamera),this.buttons.concat(this.chipMenuButtons).forEach((function(e){e.isHoverable()&&(t.raycaster.intersectObject(e.getHitbox()).length>0?e.onHover():e.onUnhover())}))},t.prototype.onTouchStart=function(t){t.preventDefault();var e=t.touches[0];this.mouseDown=!0,this.initialMousePosition.set(e.clientX,e.clientY),this.onMouseDown({clientX:e.clientX,clientY:e.clientY})},t.prototype.onTouchMove=function(t){if(this.mouseDown){t.preventDefault();var e=t.touches[0],i=(e.clientX-this.initialMousePosition.x)/window.innerWidth,n=(e.clientY-this.initialMousePosition.y)/window.innerHeight;this.moveCamera(i,n),this.initialMousePosition.set(e.clientX,e.clientY)}},t.prototype.onTouchEnd=function(){this.mouseDown=!1,this.onMouseUp()},t.prototype.onWindowResize=function(){var t=window.innerWidth/window.innerHeight;this.app.camera.left=-t,this.app.camera.right=t,this.hudCamera.left=-t,this.hudCamera.right=t,this.app.camera.updateProjectionMatrix(),this.hudCamera.updateProjectionMatrix(),this.app.renderer.setSize(window.innerWidth,window.innerHeight),this.hud.reset()},t.prototype.moveCamera=function(t,e){var i=window.innerWidth/window.innerHeight*J.SCROLL_SPEED/this.app.camera.zoom,n=J.SCROLL_SPEED/this.app.camera.zoom;this.app.camera.position.x-=t*i,this.app.camera.position.x=Math.max(-J.MAX_CAMERA_POSITION_X,this.app.camera.position.x),this.app.camera.position.x=Math.min(J.MAX_CAMERA_POSITION_X,this.app.camera.position.x),this.app.camera.position.y+=e*n,this.app.camera.position.y=Math.max(-J.MAX_CAMERA_POSITION_Y,this.app.camera.position.y),this.app.camera.position.y=Math.min(J.MAX_CAMERA_POSITION_Y,this.app.camera.position.y)},t}(),j=function(){function t(t,e,i){this.cpus=i;var n=this.ipcString();this.ipcStringLength=n.length,this.IPCMesh=h.buildTextMesh("IPC: "+n,e.x,e.y,J.TEXT_SIZE,J.BASE_COLOR,!1),this.IPCMeshBackground=h.addBackgroundMesh(this.IPCMesh,e,J.MENU_COLOR);var r=this.ipsString();this.ipsStringLength=r.length,this.IPSMesh=h.buildTextMesh("IPS: "+r,e.x,e.y+.1,J.TEXT_SIZE,J.BASE_COLOR,!1),this.IPSMeshBackground=h.addBackgroundMesh(this.IPSMesh,new o.I9Y(e.x,e.y+.1),J.MENU_COLOR);var s=this.retiredInstructionsString();this.totalExecutedInstructionsStringLength=s.length,this.totalExecutedInstructions=h.buildTextMesh("Retired instructions: "+s,e.x,e.y+.2,J.TEXT_SIZE,J.BASE_COLOR,!1),this.totalExecutedInstructionsBackground=h.addBackgroundMesh(this.totalExecutedInstructions,new o.I9Y(e.x,e.y+.2),J.MENU_COLOR),t.add(this.IPCMesh,this.IPSMesh,this.totalExecutedInstructions,this.IPCMeshBackground,this.IPSMeshBackground,this.totalExecutedInstructionsBackground),this.scene=t,this.position=e}return t.prototype.update=function(){var t=this.cpus.reduce((function(t,e){return t+e.getIPC()}),0).toFixed(2);h.updateText(this.IPCMesh,"IPC: "+t,!1),t.length>this.ipcStringLength&&(this.scene.remove(this.IPCMeshBackground),this.IPCMeshBackground=h.addBackgroundMesh(this.IPCMesh,this.position,J.MENU_COLOR),this.scene.add(this.IPCMeshBackground),this.ipcStringLength=t.length);var e=this.cpus.reduce((function(t,e){return t+e.getAccRetiredInstructionsCount()}),0);h.updateText(this.totalExecutedInstructions,"Retired instructions: "+e,!1),e.toString().length>this.totalExecutedInstructionsStringLength&&(this.scene.remove(this.totalExecutedInstructionsBackground),this.totalExecutedInstructionsBackground=h.addBackgroundMesh(this.totalExecutedInstructions,new o.I9Y(this.position.x,this.position.y+.2),J.MENU_COLOR),this.scene.add(this.totalExecutedInstructionsBackground),this.totalExecutedInstructionsStringLength=e.toString().length);var i=this.cpus.reduce((function(t,e){return t+e.getIPS()}),0).toFixed(2);h.updateText(this.IPSMesh,"IPS: "+i,!1),i.length>this.ipsStringLength&&(this.scene.remove(this.IPSMeshBackground),this.IPSMeshBackground=h.addBackgroundMesh(this.IPSMesh,new o.I9Y(this.position.x,this.position.y+.1),J.MENU_COLOR),this.scene.add(this.IPSMeshBackground),this.ipsStringLength=i.length)},t.prototype.clear=function(){this.scene.remove(this.IPCMesh,this.IPSMesh,this.totalExecutedInstructions,this.IPCMeshBackground,this.IPSMeshBackground,this.totalExecutedInstructions),h.disposeMeshes(this.IPCMesh,this.IPSMesh,this.totalExecutedInstructions,this.IPCMeshBackground,this.IPSMeshBackground,this.totalExecutedInstructionsBackground)},t.prototype.ipcString=function(){return this.cpus.reduce((function(t,e){return t+e.getIPC()}),0).toFixed(2)},t.prototype.ipsString=function(){return this.cpus.reduce((function(t,e){return t+e.getIPS()}),0).toFixed(2)},t.prototype.retiredInstructionsString=function(){return this.cpus.reduce((function(t,e){return t+e.getAccRetiredInstructionsCount()}),0).toString()},t}(),Z=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},V=function(){function t(e,i,n){this.scene=e,this.hudCamera=i,this.buttons=[],this.chipMenuMeshes=[],this.chipMenuButtons=[],this.rightmostStatX=0;var r=this.hudCamera.right-.2,s=this.hudCamera.bottom+.5;this.menuMesh=h.buildQuadrilateralMesh(2*i.right,.8*i.top,t.MENU_COLOR,new o.I9Y(this.hudCamera.position.x,this.hudCamera.position.y-.8*this.hudCamera.top)),this.menuMesh.visible=!1,this.title=h.buildTextMesh("undefined",this.hudCamera.left+.1,s,J.TEXT_SIZE,J.HOVER_COLOR,!1),this.title.visible=!1,this.closeButton=new $(this.scene,"[X]",new o.I9Y(r,s),(function(){return n()})),this.closeButton.mesh.visible=!1,this.buttons.push(this.closeButton),this.scene.add(this.menuMesh,this.title)}return t.prototype.getButtons=function(){return this.buttons},t.prototype.getMenuButtons=function(){return this.chipMenuButtons},t.prototype.backgroundMeshHitbox=function(){return this.menuMesh},t.prototype.showMenu=function(t){h.updateText(this.title,t?t.displayName():"undefined",!1),this.title.position.x=this.hudCamera.left+.1,this.menuMesh.visible=!0,this.title.visible=!0,this.closeButton.mesh.visible=!0,this.renderChipMenu(t.getMenuOptions())},t.prototype.hideMenu=function(){this.menuMesh.visible=!1,this.title.visible=!1,this.closeButton.mesh.visible=!1,this.clearMenu(),this.rightmostStatX=0},t.prototype.renderChipMenu=function(t){var e=this;this.renderStats(t),t.upgradeOptions.forEach((function(i,n){return e.renderUpgradeOption(i,n,t.upgradeOptions.length)}))},t.prototype.clearMenu=function(){var t=this;this.chipMenuMeshes.forEach((function(e){return t.scene.remove(e)})),this.chipMenuMeshes=[],this.chipMenuButtons.forEach((function(t){return t.dispose()})),this.chipMenuButtons=[]},t.prototype.renderUpgradeOption=function(t,e,i){var n=Z(this.renderOptionTitle(t,e,i),2),o=n[0],r=n[1];switch(this.renderDescription(t.description,o,r),t.type){case c.NumberSelection:this.renderNumberSelection(t,o,r);break;case c.SingleValueSelection:this.renderSingleValueSelection(t,o,r);break;default:throw new Error("Unknown upgrade option type: ".concat(t.type))}},t.prototype.renderStats=function(t){var e=this;t.stats.forEach((function(t,i){var n="".concat(t.name,": ").concat(t.value?t.value:"").concat(t.unit?t.unit:""),r=e.title.position.y-.05-.06*(i+1),s=e.hudCamera.left+.1,a=h.buildTextMesh(n,s,r,J.TEXT_SIZE/2,J.HOVER_COLOR,!1);if(a.geometry.computeBoundingBox(),null===a.geometry.boundingBox)throw new Error("Bounding box is null");var u=a.geometry.boundingBox.max.x;u>e.rightmostStatX&&(e.rightmostStatX=u);var c=a.geometry.boundingBox.min.x;if(t.button){var p=t.button.withScene(e.scene).withPosition(new o.I9Y(s+u-c+.05,r)).withTextSize(J.TEXT_SIZE/2).withCentered(!1).build();if(e.chipMenuButtons.push(p),p.mesh.geometry.computeBoundingBox(),null===p.mesh.geometry.boundingBox)throw new Error("Bounding box is null");var d=p.mesh.geometry.boundingBox.max.x;d>e.rightmostStatX&&(e.rightmostStatX=d)}e.scene.add(a),e.chipMenuMeshes.push(a)}))},t.prototype.renderOptionTitle=function(t,e,i){var n=t.name,o=this.hudCamera.right-this.hudCamera.left-this.rightmostStatX,r=this.hudCamera.bottom+.4,s=this.rightmostStatX+.1;if(1===i)s+=this.hudCamera.left+o/2;else{var a=.4*o/(i-1);s+=this.hudCamera.left+.3*o+e*a}var u=h.buildTextMesh(n,s,r,J.TEXT_SIZE/2,J.HOVER_COLOR,!1);return u.geometry.center(),this.scene.add(u),this.chipMenuMeshes.push(u),[s,r]},t.prototype.renderDescription=function(t,e,i){for(var n=this,o=[],r=0;r<t.length;r+=20){var s=t.substring(r,r+20);if(20===s.length){var a=s.lastIndexOf(" ");s=s.substring(0,a),r-=20-a}o.push(s)}o.forEach((function(t,o){var r=i-.15-.035*(o+1),s=h.buildTextMesh(t,e,r,J.TEXT_SIZE/2,J.HOVER_COLOR,!1);s.geometry.center(),n.scene.add(s),n.chipMenuMeshes.push(s)}))},t.prototype.renderNumberSelection=function(t,e,i){var n=h.buildTextMesh(t.currentValue.toString(),e,i-.1,J.TEXT_SIZE,J.HOVER_COLOR,!1);n.geometry.center(),this.scene.add(n),this.chipMenuMeshes.push(n);var r=new $(this.scene,"[+]",new o.I9Y(e+.1,i-.1),(function(){t.currentValue=t.onIncrease(),h.updateText(n,t.currentValue.toString(),!0)})),s=new $(this.scene,"[-]",new o.I9Y(e-.1,i-.1),(function(){t.currentValue=t.onDecrease(),h.updateText(n,t.currentValue.toString(),!0)}));this.chipMenuButtons.push(r,s)},t.prototype.renderSingleValueSelection=function(t,e,i){},t.prototype.destroy=function(){var t=this;this.scene.remove(this.menuMesh,this.title),this.closeButton.dispose(),this.buttons.forEach((function(t){return t.dispose()})),this.chipMenuButtons.forEach((function(t){return t.dispose()})),this.chipMenuMeshes.forEach((function(e){return t.scene.remove(e)})),h.disposeMeshes.apply(h,function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}([this.menuMesh,this.title],Z(this.chipMenuMeshes),!1))},t.MENU_COLOR=new o.V9B({color:h.COLOR_PALETTE.get("MEDIUM_DARK")}),t}(),K=function(){function t(e,i){this.scene=e,this.position=i,this.dirtyMesh=!1,this.power=t.INITIAL_POWER,this.initializeGraphics().then()}return t.prototype.initializeGraphics=function(){return e=this,i=void 0,r=function(){var e;return function(t,e){var i,n,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=h(0),s.throw=h(1),s.return=h(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function h(h){return function(a){return function(h){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,h[0]&&(r=0)),r;)try{if(i=1,n&&(o=2&h[0]?n.return:h[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,h[1])).done)return o;switch(n=0,o&&(h=[2&h[0],o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,n=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==h[0]&&2!==h[0])){r=0;continue}if(3===h[0]&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(6===h[0]&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(t){h=[6,t],n=0}finally{i=o=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,a])}}}(this,(function(i){switch(i.label){case 0:return e=this,[4,h.buildImageMesh(t.POWER_IMG,.1,.1)];case 1:if(e.powerImg=i.sent(),this.valueMesh=h.buildTextMesh(this.power.toString(),this.position.x,this.position.y,J.TEXT_SIZE,J.BASE_COLOR,!1),this.valueMesh.geometry.computeBoundingBox(),null===this.valueMesh.geometry.boundingBox)throw new Error("Bounding box is null");return this.powerImg.position.set(this.valueMesh.position.x+this.valueMesh.geometry.boundingBox.max.x-this.valueMesh.geometry.boundingBox.min.x+.05,this.valueMesh.position.y+(this.valueMesh.geometry.boundingBox.max.y-this.valueMesh.geometry.boundingBox.min.y)/2,0),this.bgMesh=h.addBackgroundMesh(this.valueMesh,new o.I9Y(this.valueMesh.position.x+.04,this.valueMesh.position.y),J.MENU_COLOR,.1),this.scene.add(this.powerImg,this.valueMesh,this.bgMesh),[2]}}))},new((n=void 0)||(n=Promise))((function(t,o){function s(t){try{a(r.next(t))}catch(t){o(t)}}function h(t){try{a(r.throw(t))}catch(t){o(t)}}function a(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n((function(t){t(i)}))).then(s,h)}a((r=r.apply(e,i||[])).next())}));var e,i,n,r},t.prototype.update=function(){this.dirtyMesh&&(h.updateText(this.valueMesh,this.power.toString(),!1),this.dirtyMesh=!1)},t.prototype.getPower=function(){return this.power},t.prototype.destroy=function(){this.scene.remove(this.powerImg,this.valueMesh,this.bgMesh),h.disposeMeshes(this.powerImg,this.valueMesh,this.bgMesh)},t.INITIAL_POWER=100,t.POWER_IMG="res/power.png",t}(),J=function(){function t(t){this.app=t,this.buttons=[],this.initializeHUDScene(),this.eventHandler=new X(this,this.app,this.hudCamera,this.buttons)}return t.prototype.getHUDScene=function(){return this.hudScene},t.prototype.getHUDCamera=function(){return this.hudCamera},t.prototype.update=function(){this.HUDProcessorStats.update()},t.prototype.getComputerChipMenu=function(){return this.menu},t.prototype.selectActor=function(t){this.selectedActor&&(this.selectedActor.deselect(),this.hideMenu()),this.selectedActor=t.select(),this.showMenu()},t.prototype.togglePauseState=function(){this.app.paused=!this.app.paused},t.prototype.initializeHUDScene=function(){var e,i=this;return this.hudScene=new o.Z58,this.initializeCamera(),this.HUDProcessorStats=new j(this.hudScene,this.statsPosition(),this.app.cpus),this.menu=new V(this.hudScene,this.hudCamera,(function(){return i.hideMenu()})),(e=this.buttons).push.apply(e,function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}([new W(this.hudScene,this.pauseButtonPosition(),t.BASE_COLOR,this.app.paused,(function(){return i.togglePauseState()}))],function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s}(this.menu.getButtons()),!1)),this.playerStats=new K(this.hudScene,this.playerStatsPosition()),this},t.prototype.reset=function(){this.HUDProcessorStats.clear(),this.buttons.forEach((function(t){return t.destroy()})),this.menu.destroy(),this.initializeHUDScene()},t.prototype.initializeCamera=function(){var t=window.innerWidth/window.innerHeight;this.hudCamera=new o.qUd(-t,t,1,-1,1,3),this.hudCamera.position.set(0,0,2)},t.prototype.showMenu=function(){this.selectedActor&&(this.menu.showMenu(this.selectedActor),this.eventHandler.chipMenuButtons=this.menu.getMenuButtons())},t.prototype.hideMenu=function(){var t;this.menu.hideMenu(),this.selectedActor=null===(t=this.selectedActor)||void 0===t?void 0:t.deselect(),this.eventHandler.chipMenuButtons=[]},t.prototype.statsPosition=function(){return new o.I9Y(this.hudCamera.left+.1,this.hudCamera.top-.3)},t.prototype.playerStatsPosition=function(){return new o.I9Y(this.hudCamera.right-.4,this.hudCamera.top-.12-(this.isMobileRatio()?.1:0))},t.prototype.pauseButtonPosition=function(){return new o.I9Y(this.hudCamera.right-.1,this.hudCamera.top-.1-(this.isMobileRatio()?.1:0))},t.prototype.isMobileRatio=function(){return window.innerWidth/window.innerHeight<.8},t.BASE_COLOR=new o.V9B({color:h.COLOR_PALETTE.get("MEDIUM_LIGHT")}),t.HOVER_COLOR=new o.V9B({color:h.COLOR_PALETTE.get("LIGHT")}),t.MENU_COLOR=new o.V9B({color:h.COLOR_PALETTE.get("MEDIUM_DARK")}),t.HOVER_SCALE_FACTOR=1.1,t.TEXT_SIZE=.05,t.ZOOM_FACTOR=1e-4,t.MAX_ZOOM=.2,t.MIN_ZOOM=1,t.MAX_CAMERA_POSITION_X=4,t.MAX_CAMERA_POSITION_Y=4,t.SCROLL_SPEED=2,t}(),Q=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$=function(t){function e(e,i,n,r,s,a){void 0===s&&(s=J.TEXT_SIZE),void 0===a&&(a=!0);var u=t.call(this,e)||this;if(u.mesh=h.buildTextMesh(i,n.x,n.y,s,J.BASE_COLOR,a),u.mesh.geometry.computeBoundingBox(),null===u.mesh.geometry.boundingBox)throw new Error("Bounding box is null");return u.hitbox=h.buildQuadrilateralMesh(u.mesh.geometry.boundingBox.max.x-u.mesh.geometry.boundingBox.min.x,u.mesh.geometry.boundingBox.max.y-u.mesh.geometry.boundingBox.min.y,J.BASE_COLOR,new o.I9Y(n.x,n.y)),a||(u.mesh.geometry.computeBoundingBox(),u.hitbox.position.set(n.x+(u.mesh.geometry.boundingBox.max.x-u.mesh.geometry.boundingBox.min.x)/2+.01,n.y+(u.mesh.geometry.boundingBox.max.y-u.mesh.geometry.boundingBox.min.y)/2-.005,0)),u.hitbox.visible=!1,e.add(u.mesh,u.hitbox),u.onClick=function(){return r()},u.onHover=function(){return u.mesh.material=J.HOVER_COLOR},u.onUnhover=function(){return u.mesh.material=J.BASE_COLOR},u}return Q(e,t),e.prototype.getHitbox=function(){return this.hitbox},e.prototype.dispose=function(){this.scene.remove(this.mesh,this.hitbox)},e}(q),tt=function(){function t(){}return t.prototype.build=function(){return new $(this.scene,this.text,this.position,this.onClick,this.textSize,this.centered)},t.prototype.withScene=function(t){return this.scene=t,this},t.prototype.withText=function(t){return this.text=t,this},t.prototype.withPosition=function(t){return this.position=t,this},t.prototype.withOnClick=function(t){return this.onClick=t,this},t.prototype.withTextSize=function(t){return this.textSize=t,this},t.prototype.withCentered=function(t){return this.centered=t,this},t}(),et=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),it=function(t){function e(i,n,o,r){void 0===r&&(r=0);var s=t.call(this,i,n,o)||this;if(s.cacheSize=r,s.previousRetiredInstructionCounts=new f(50),s.retiredInstructionCount=0,s.accumulatedInstructionCount=0,s.IPC=0,s.IPS=0,s.highlightedTraces=[],s.safeIncrementClock=function(){return s.getClockFrequency()<p.MAX_CLOCK_FREQUENCY?s.updateClock(s.getClockFrequency()+1):s.getClockFrequency()},s.safeDecrementClock=function(){return s.getClockFrequency()>1&&(null==s.instructionMemory||s.getClockFrequency()>3*s.instructionMemory.getClockFrequency())&&(null==s.workingMemory||s.getClockFrequency()>3*s.workingMemory.getClockFrequency())?s.updateClock(s.getClockFrequency()-1):s.getClockFrequency()},r>0){var h=x.dimensions(),a=G.dimensions(r),u=h.height+a.height+2*e.CONTENTS_MARGIN+e.COMPONENT_SPACING;s.iCache=new G(s,0,-u/2+a.height/2+e.CONTENTS_MARGIN,r,h.width),s.core=new x(s,0,u/2-h.height/2-e.CONTENTS_MARGIN,s.iCache)}else s.core=new x(s,0,0);return s.initializeGraphics(),s}return et(e,t),e.prototype.connectToInstructionMemory=function(t){this.instructionMemory=t,this.iCache&&this.iCache.setInstructionMemory(t.getInstructionBuffer()),this.core.setInstructionMemory(t);var i=this.instructionMemory.size;this.drawPins(this.bodyMesh,n.RIGHT,i);var o=this.pinPositions.get(n.RIGHT)[0],r=i*e.TRACE_SPACING+2*e.TRACE_OFFSET+3*p.PIN_WIDTH,s=this.instructionMemory.dimensions();t.setPosition([o.x+r+s.width/2,o.y+s.height/2-p.PIN_MARGIN-p.PIN_WIDTH]),t.initializeGraphics(),this.drawTraces(n.RIGHT,this.instructionMemory,n.LEFT,e.TRACE_OFFSET,e.TRACE_SPACING,"y")},e.prototype.disconnectInstructionMemory=function(){var t=this;null!=this.instructionMemory&&(this.instructionMemory.disposeGraphics(),this.instructionMemory=void 0,this.core.setInstructionMemory(void 0),this.clearTracesAndPins(n.RIGHT),this.highlightedTraces.forEach((function(e){return t.scene.remove(e)})),this.core.flushPipeline(),this.iCache&&this.iCache.flush())},e.prototype.connectToWorkingMemory=function(t){this.workingMemory=t,this.core.setWorkingMemory(t);var i=t.numberOfBanks;this.drawPins(this.bodyMesh,n.TOP,i);var o=this.pinPositions.get(n.TOP)[i-1],r=i*e.TRACE_SPACING+2*e.TRACE_OFFSET+3*p.PIN_WIDTH,s=t.dimensions();t.setPosition([o.x-s.width/2+p.PIN_MARGIN+p.PIN_WIDTH,o.y+r+s.height/2]),t.initializeGraphics(),this.drawTraces(n.TOP,this.workingMemory,n.BOTTOM,e.TRACE_OFFSET,e.TRACE_SPACING,"x")},e.prototype.disconnectWorkingMemory=function(){var t=this;this.workingMemory&&(this.workingMemory.disposeGraphics(),this.workingMemory=void 0,this.core.setWorkingMemory(void 0),this.clearTracesAndPins(n.TOP),this.highlightedTraces.forEach((function(e){return t.scene.remove(e)})),this.core.flushPipeline(),this.iCache&&this.iCache.flush())},e.prototype.getMenuOptions=function(){if(!this.chipMenuOptions){this.disconnectInstructionMemory=this.disconnectInstructionMemory.bind(this);var t=(new tt).withText("[Disconnect]").withOnClick(this.disconnectInstructionMemory);this.disconnectWorkingMemory=this.disconnectWorkingMemory.bind(this);var e=(new tt).withText("[Disconnect]").withOnClick(this.disconnectWorkingMemory),i=[new z("Power Consumption",String(50),"W"),new z("Instruction Memory connected",this.instructionMemory?"True":"False",void 0,t),new z("Working Memory connected",this.workingMemory?"True":"False",void 0,e)],n=[U.createNumberSelection("Clock Frequency",0,"The clock frequency of the processor.",this.getClockFrequency(),this.safeIncrementClock,this.safeDecrementClock),U.createNumberSelection("Cache Size",0,"The size of the cache memory.",this.cacheSize,this.increaseCacheSize,this.decreaseCacheSize)];this.chipMenuOptions=new k(i,n)}return this.chipMenuOptions},e.prototype.notifyInstructionRetired=function(){this.retiredInstructionCount++},e.prototype.highlightMainMemoryTrace=function(t,i){var r=this;this.workingMemory&&(this.highlightedTraces.push((new o.YJl).add(new o.eaF(this.pinGeometries.get(n.TOP)[t],i),new o.eaF(this.workingMemory.pinGeometries.get(n.BOTTOM)[t],i),this.drawTrace(t,i,n.TOP,this.workingMemory,n.BOTTOM,e.TRACE_OFFSET,e.TRACE_SPACING,"x"))),this.highlightedTraces.forEach((function(t){return r.scene.add(t)})))},e.prototype.highlightInstructionMemoryTrace=function(t,i){var r=this;this.instructionMemory&&(this.highlightedTraces.push((new o.YJl).add(new o.eaF(this.pinGeometries.get(n.RIGHT)[t],i),new o.eaF(this.instructionMemory.pinGeometries.get(n.LEFT)[t],i),this.drawTrace(t,i,n.RIGHT,this.instructionMemory,n.LEFT,e.TRACE_OFFSET,e.TRACE_SPACING,"y"))),this.highlightedTraces.forEach((function(t){return r.scene.add(t)})))},e.prototype.clearHighlightedTraces=function(){var t=this;this.highlightedTraces.forEach((function(e){return t.scene.remove(e)})),this.highlightedTraces=[]},e.prototype.getIPC=function(){return this.IPC},e.prototype.getIPS=function(){return this.IPS},e.prototype.getAccRetiredInstructionsCount=function(){return this.accumulatedInstructionCount},e.prototype.displayName=function(){return"CPU"},e.prototype.update=function(){var t;this.core.update(),null===(t=this.iCache)||void 0===t||t.update(),this.updateRetiredInstructionCounters(),this.IPC=this.calculateAverageInstructionCount(),this.IPS=this.IPC*this.getClockFrequency()},e.prototype.initializeGraphics=function(){var t;this.core.initializeGraphics(),null===(t=this.iCache)||void 0===t||t.initializeGraphics();var i=this.core.width+2*e.CONTENTS_MARGIN,n=this.core.height+2*e.CONTENTS_MARGIN;this.iCache&&(i=Math.max(i,this.iCache.width),n+=this.iCache.height+e.COMPONENT_SPACING),this.buildBodyMesh(i,n)},e.prototype.updateRetiredInstructionCounters=function(){this.previousRetiredInstructionCounts.isFull()&&this.previousRetiredInstructionCounts.dequeue(),this.previousRetiredInstructionCounts.enqueue(this.retiredInstructionCount),this.accumulatedInstructionCount+=this.retiredInstructionCount,this.retiredInstructionCount=0},e.prototype.calculateAverageInstructionCount=function(){var t=0,e=this.previousRetiredInstructionCounts.size();if(0===e)return 0;for(var i=0;i<e;++i)t+=this.previousRetiredInstructionCounts.get(i);return t/e},e.prototype.increaseCacheSize=function(){return this.cacheSize},e.prototype.decreaseCacheSize=function(){return this.cacheSize},e.TRACE_OFFSET=.1,e.TRACE_SPACING=.03,e.COMPONENT_SPACING=.05,e}(p),nt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ot=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s},rt=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},st=function(t){function e(){var e=t.apply(this,function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}([],ot(arguments),!1))||this;return e.addressMeshes=[],e.iterateMode=!1,e.requestedInstructionAddress=-1,e.jumpInstructions=new Map,e.highlightedJumpPCs=[],e.flaggedBuffers=[],e.flaggedBufferMeshes=[],e}return nt(e,t),e.prototype.highestInstructionAddress=function(){return this.addressReached-this.storedInstructions.maxSize+this.storedInstructions.size()},e.prototype.setJumpInstruction=function(t,e){this.jumpInstructions.set(t,e)},e.prototype.askForInstructionsAt=function(t,e,i){if(0==this.delay)throw new Error("There is no need to ask for instructions when there is no delay");this.connectedChip=t;var n=this.toLocalAddress(i);if(i==this.requestedInstructionAddress&&this.readTimeout>0)return[-1,null];if(!this.storedInstructions.get(n))return[-1,null];this.requestedInstructionAddress=i;for(var o=n;o<n+e;++o)this.storedInstructions.get(o)&&this.highlightBuffer(o);return this.readTimeout=this.delay,[n,this.instructionMaterial(this.storedInstructions.get(n))]},e.prototype.fetchInstructionAt=function(t){if(0!=this.delay&&!this.isReadyToBeRead())throw new Error("Instruction buffer from ".concat(this.parent.displayName()," is not ready to be read"));var e=this.toLocalAddress(t),i=this.storedInstructions.get(e);if(i)return this.clearHighlights(),this.updateJumpInstructionGraphics(),this.iterateMode||(this.storedInstructions.remove(e),this.shiftMeshesDown(1)),this.lowestAddressIsJumpTarget(t)||(!this.iterateMode&&e>0?this.handleForwardBranch(t):this.clearJumpInstruction()),this.readyToBeRead=!1,this.requestedInstructionAddress=-1,i},e.prototype.handleForwardBranch=function(t){for(var e=this.toLocalAddress(t)+1,i=0;i<e;++i)this.storedInstructions.dequeue();this.shiftMeshesDown(e)},e.prototype.clearJumpInstruction=function(){if(this.iterateMode){this.iterateMode=!1;for(var t=this.firstInstructionTargetingLowestAddress(),e=this.toLocalAddress(t)+1,i=0;i<e;++i)this.storedInstructions.dequeue();this.shiftMeshesDown(e)}},e.prototype.write=function(e,i){void 0===i&&(i=e.size()),t.prototype.write.call(this,e,i)},e.prototype.initializeGraphics=function(){if(this.horizontal)throw new Error("Horizontal instruction buffers are not supported for AddressedInstructionBuffer");t.prototype.initializeGraphics.call(this);for(var e=0;e<this.size;e++){var i=h.buildTextMesh(h.toHex(e),this.position.x-this.width/2-.6*ct.ADDRESS_MARGIN,this.bufferMeshOffsets[e],.8*m.TEXT_SIZE,m.TEXT_MATERIAL,!0);this.addressMeshes[e]=i,this.scene.add(i)}this.addressReached=this.size},e.prototype.shiftMeshesDown=function(e){var i=this;t.prototype.shiftMeshesDown.call(this,e),this.addressMeshes.splice(0,e).forEach((function(t){i.scene.remove(t),t.geometry.dispose()})),this.addressMeshes.forEach((function(t,n){return t.translateY(i.bufferMeshOffsets[n]-i.bufferMeshOffsets[n+e])})),this.flaggedBuffers=this.flaggedBuffers.map((function(t){return t-e})),this.flaggedBufferMeshes.forEach((function(t,e){if(null!==t){var n=i.flaggedBuffers[e];n>=0?t.position.y=i.bufferMeshOffsets[n]:(i.scene.remove(t),t.geometry.dispose(),i.flaggedBufferMeshes[e]=null)}})),this.flaggedBuffers=this.flaggedBuffers.filter((function(t){return t>=0})),this.flaggedBufferMeshes=this.flaggedBufferMeshes.filter((function(t){return null!==t}));for(var n=this.size-e;n<this.size;++n){var o=h.buildTextMesh(h.toHex(this.addressReached++),this.position.x-this.width/2-.6*ct.ADDRESS_MARGIN,this.bufferMeshOffsets[n],.8*m.TEXT_SIZE,m.TEXT_MATERIAL,!0);this.addressMeshes[n]=o,this.scene.add(o)}},e.prototype.dispose=function(){var e=this;t.prototype.dispose.call(this);for(var i=0;i<this.addressMeshes.length;i++){var n=this.addressMeshes[i];this.scene.remove(n),n.geometry.dispose()}this.addressMeshes=[],this.jumpInstructions.clear(),this.highlightedJumpPCs=[],this.flaggedBuffers=[],this.flaggedBufferMeshes.forEach((function(t){null!==t&&(e.scene.remove(t),t.geometry.dispose())}))},e.prototype.highlightFlaggedBuffer=function(t){this.clearHighlights();var e=new o.V9B({color:m.BRANCH_MATERIAL.color,transparent:!0,opacity:.1}),i=new o.eaF(this.bufferHighlightGeometry,e);i.position.set(this.horizontal?this.bufferMeshOffsets[t]:this.position.x,this.horizontal?this.position.y:this.bufferMeshOffsets[t],.01),this.flaggedBufferMeshes.push(i),this.flaggedBuffers.push(t),this.scene.add(i)},e.prototype.highlightJumpAddress=function(t){this.addressMeshes[t].material=m.BRANCH_MATERIAL},e.prototype.toLocalAddress=function(t){return this.size-this.addressReached+t},e.prototype.updateJumpInstructionGraphics=function(){var t=this;this.jumpInstructions.forEach((function(e,i){var n=t.toLocalAddress(i),o=t.toLocalAddress(e.getAddress());!t.highlightedJumpPCs.includes(i)&&t.isAddressInRange(n)&&t.isAddressInRange(o)&&(t.highlightedJumpPCs.push(i),t.highlightJumpAddress(o),t.highlightIntermediateAddresses(o,n))}))},e.prototype.isAddressInRange=function(t){return t<this.addressMeshes.length&&t>=0&&t<this.storedInstructions.size()},e.prototype.highlightIntermediateAddresses=function(t,e){for(var i=Math.min(t,e),n=Math.max(t,e),o=i;o<=n;++o)this.isAddressInRange(o)&&!this.flaggedBuffers.includes(o)&&this.highlightFlaggedBuffer(o)},e.prototype.lowestAddressIsJumpTarget=function(t){var e,i,n=this.addressReached-this.storedInstructions.maxSize;try{for(var o=rt(this.jumpInstructions),r=o.next();!r.done;r=o.next()){var s=ot(r.value,2),h=s[0],a=s[1];if(t<=h&&a.getAddress()===n)return this.iterateMode=!0,!0}}catch(t){e={error:t}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}return!1},e.prototype.firstInstructionTargetingLowestAddress=function(){var t,e,i=this.addressReached-this.storedInstructions.maxSize;try{for(var n=rt(this.jumpInstructions),o=n.next();!o.done;o=n.next()){var r=ot(o.value,2),s=r[0];if(r[1].getAddress()===i)return s}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}throw new Error("No instruction targets the lowest address in the instruction buffer")},e.prototype.askForInstructions=function(t,e){throw new Error("Method not implemented for AddressedInstructionBuffer, use askForInstructionsAt instead")},e}(I);!function(t){t.ALU="ALU",t.ALU_IMM="ALU_IMM",t.MEMORY="MEMORY",t.BRANCH="BRANCH"}(D||(D={}));var ht=function(){function t(t,e,i,n,o,r){if(this.opcode=t,_.MEMORY_OPCODES.includes(t))this.validateMemoryOperation(e,i,n,o),this.type=D.MEMORY,this.resultReg=e,this.address=o;else if(_.ALU_OPCODES.includes(t))this.validateAluOperation(e,i,n,o),this.type=D.ALU,this.op1Reg=i,this.op2Reg=n,this.resultReg=e;else if(_.ALU_IMM_OPCODES.includes(t))this.validateAluImmOperation(e,i,n,o,r),this.type=D.ALU_IMM,this.resultReg=e,this.op1Reg=i,this.immediate=r;else{if(!_.BRANCH_OPCODES.includes(t))throw new Error("Invalid opcode: ".concat(t));this.validateBranchOperation(e,i,n,o),this.type=D.BRANCH,this.op1Reg=i,this.op2Reg=n,this.address=o}}return t.memory=function(e,i,n){return new t(e,i,void 0,void 0,n)},t.alu=function(e,i,n,o){return new t(e,i,n,o)},t.branch=function(e,i,n,o){return new t(e,void 0,i,n,o)},t.aluImm=function(e,i,n,o){return new t(e,i,n,void 0,void 0,o)},t.prototype.isMemoryOperation=function(){return this.type===D.MEMORY},t.prototype.isArithmetic=function(){return this.type===D.ALU||this.type===D.ALU_IMM},t.prototype.isImmediate=function(){return this.type===D.ALU_IMM},t.prototype.isBranch=function(){return this.type===D.BRANCH},t.prototype.toString=function(){switch(this.type){case D.MEMORY:return"".concat(this.opcode," R").concat(this.resultReg,", [").concat(h.toHex(this.address),"]");case D.ALU:return"".concat(this.opcode," R").concat(this.resultReg,", R").concat(this.op1Reg,", R").concat(this.op2Reg);case D.BRANCH:return"".concat(this.opcode," R").concat(this.op1Reg,", R").concat(this.op2Reg,", ").concat(h.toHex(this.address));case D.ALU_IMM:return"".concat(this.opcode," R").concat(this.resultReg,", R").concat(this.op1Reg,", ").concat(this.immediate);default:throw new Error("Invalid instruction type")}},t.prototype.getOpcode=function(){return this.opcode},t.prototype.getOp1Reg=function(){return this.type!==D.MEMORY?this.op1Reg:void 0},t.prototype.getOp2Reg=function(){return this.type!==D.MEMORY?this.op2Reg:void 0},t.prototype.getImmediate=function(){return this.type===D.ALU_IMM?this.immediate:void 0},t.prototype.getResultReg=function(){return this.resultReg},t.prototype.getAddress=function(){return this.type!==D.ALU?this.address:void 0},t.prototype.validateMemoryOperation=function(t,e,i,n,o){if(void 0===n)throw new Error("Missing memory address for MEMORY operation");if(void 0===t)throw new Error("Missing result register for MEMORY operation");if(void 0!==e||void 0!==i)throw new Error("Cannot have operand registers for MEMORY operation");if(void 0!==o)throw new Error("Cannot have immediate value for MEMORY operation")},t.prototype.validateAluOperation=function(t,e,i,n,o){if(void 0===e||void 0===i)throw new Error("Missing operand register for ALU operation");if(void 0===t)throw new Error("Missing result register for ALU operation");if(void 0!==n)throw new Error("Cannot have address for ALU operation");if(void 0!==o)throw new Error("Cannot have immediate value for ALU operation")},t.prototype.validateBranchOperation=function(t,e,i,n,o){if(void 0===e||void 0===i||void 0===n)throw new Error("Missing parameters for BRANCH operation");if(void 0!==t)throw new Error("Cannot have result register for BRANCH operation");if(void 0!==o)throw new Error("Cannot have immediate value for BRANCH operation")},t.prototype.validateAluImmOperation=function(t,e,i,n,o){if(void 0===e||void 0===o)throw new Error("Missing operand register or immediate value for ALU_IMM operation");if(void 0===t)throw new Error("Missing result register for ALU_IMM operation");if(void 0!==i||void 0!==n)throw new Error("Cannot have second operand register or address for ALU_IMM operation")},t}(),at=function(){function t(t,e,i){this.size=t,this.instructionBuffer=e,this.workingMemorySize=i,this.forLoopProbability=.3,this.branchProbability=.2,this.doubleForLoopProbability=.1,this.initializeRegistersProbability=.3,this.instructionStream=new f}return t.prototype.getInstructionStream=function(){return this.instructionStream},t.prototype.updateInstructionStream=function(){if(this.instructionStream.isEmpty())for(var e=0;this.instructionStream.size()<2*this.size;){if(Math.random()<this.doubleForLoopProbability){var i=t.MIN_DOUBLED_LOOP_SIZE+Math.floor(Math.random()*(t.MAX_DOUBLED_LOOP_SIZE-t.MIN_DOUBLED_LOOP_SIZE));this.doubleForLoop(e,i).moveTo(this.instructionStream),e+=i}if(Math.random()<this.forLoopProbability){if(Math.random()<this.initializeRegistersProbability){var n=_.REGISTER_COUNT-1;this.initializeRegistersWorkload(n).moveTo(this.instructionStream),e+=n}i=t.MIN_LOOP_SIZE+Math.floor(Math.random()*(t.MAX_LOOP_SIZE-t.MIN_LOOP_SIZE)),this.typicalForLoop(e,i).moveTo(this.instructionStream),e+=i}else Math.random()<this.branchProbability?(i=t.MIN_BRANCH_SIZE+Math.floor(Math.random()*(t.MAX_BRANCH_SIZE-t.MIN_BRANCH_SIZE)),this.conditionalBranchWorkload(e,i).moveTo(this.instructionStream),e+=i):(i=t.MIN_SEQUENCE_SIZE+Math.floor(Math.random()*(t.MAX_SEQUENCE_SIZE-t.MIN_SEQUENCE_SIZE)),this.typicalInstructionSequence(i).moveTo(this.instructionStream),e+=i)}},t.prototype.typicalInstructionSequence=function(t,e){var i=new f(t),n=this.loadConsecutiveAddresses(i,t,e),o=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,o,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return s}(this.computeOnGivenRegisters(i,t,n,e),2),r=o[0],s=o[1];return this.storeResults(i,t-n.length-s,r),i},t.prototype.loadConsecutiveAddresses=function(t,e,i){for(var n=this.getRandom(Math.floor(.6*e),2),o=this.randomConsecutiveRegs(n,i),r=this.randomConsecutiveAddresses(n),s=0;s<n;++s)t.enqueue(ht.memory("LOAD",o[s],r[s]));return o},t.prototype.computeOnGivenRegisters=function(t,e,i,n){for(var o=this.getRandom(Math.floor(.5*e),1),r=new Set,s=0;s<o;++s){var h=this.randomReg(n);r.add(h),t.enqueue(ht.alu(this.randomFrom(_.ALU_OPCODES),h,this.randomFrom(i),this.randomFrom(i)))}return[r,o]},t.prototype.storeResults=function(t,e,i){for(var n=0;n<e;++n){var o=this.randomFromSet(i);t.enqueue(ht.memory("STORE",o,this.getRandom(this.workingMemorySize))),i.size>1&&i.delete(o)}},t.prototype.typicalForLoop=function(e,i){var n=new f(i),o=this.randomReg(),r=this.randomReg([o]);n.enqueue(ht.aluImm("ADDI",o,o,0));var s=i-3;if(s>t.MIN_SEQUENCE_SIZE)this.typicalInstructionSequence(s,[o,r]).moveTo(n);else for(var h=0;h<s;++h)n.enqueue(ht.alu(this.randomFrom(_.ALU_OPCODES),this.randomReg([o,r]),this.randomReg(),this.randomReg()));n.enqueue(ht.aluImm("ADDI",o,o,1));var a=this.instructionBuffer.highestInstructionAddress()+e+1,u=ht.branch(this.randomFrom(_.BRANCH_OPCODES),o,r,a);return n.enqueue(u),this.instructionBuffer.setJumpInstruction(a+i-2,u),n},t.prototype.conditionalBranchWorkload=function(e,i){var n=new f(i),o=this.randomReg(),r=this.instructionBuffer.highestInstructionAddress()+e+i-1,s=ht.branch(this.randomFrom(_.BRANCH_OPCODES),o,this.randomReg([o]),r);n.enqueue(s);var h=i-1;if(h>t.MIN_SEQUENCE_SIZE)this.typicalInstructionSequence(h).moveTo(n);else for(var a=0;a<h;++a)n.enqueue(ht.alu(this.randomFrom(_.ALU_OPCODES),this.randomReg(),this.randomReg(),this.randomReg()));return this.instructionBuffer.setJumpInstruction(this.instructionBuffer.highestInstructionAddress()+e,s),n},t.prototype.doubleForLoop=function(t,e){var i=new f(e),n=this.randomReg(),o=this.randomReg([n]),r=this.randomReg([n,o]),s=this.randomReg([n,o,r]);i.enqueue(ht.aluImm("ADDI",r,r,0)),i.enqueue(ht.aluImm("ADDI",n,n,0));for(var h=e-6,a=this.instructionBuffer.highestInstructionAddress()+t+1,u=a+1,c=0;c<h;++c)i.enqueue(ht.alu(this.randomFrom(_.ALU_OPCODES),this.randomReg([n,r]),this.randomReg(),this.randomReg()));i.enqueue(ht.aluImm("ADDI",n,n,1));var p=ht.branch(this.randomFrom(_.BRANCH_OPCODES),n,o,u);i.enqueue(p),this.instructionBuffer.setJumpInstruction(u+h+1,p),i.enqueue(ht.aluImm("ADDI",r,r,1));var d=ht.branch(this.randomFrom(_.BRANCH_OPCODES),r,s,a);return i.enqueue(d),this.instructionBuffer.setJumpInstruction(a+h+4,d),i},t.prototype.initializeRegistersWorkload=function(t){for(var e=new f(t),i=this.randomConsecutiveRegs(t),n=0;n<t;++n)e.enqueue(ht.aluImm("ADDI",i[n],0,this.getRandom(_.MAX_BYTE_VALUE,1)));return e},t.prototype.randomFrom=function(t){return t[Math.floor(Math.random()*t.length)]},t.prototype.randomFromSet=function(t){var e,i,n=Math.floor(Math.random()*t.size),o=0;try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),s=r.next();!s.done;s=r.next()){var h=s.value;if(o===n)return h;++o}}catch(t){e={error:t}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}return t.values().next().value},t.prototype.randomReg=function(t){var e,i=0;do{if(i++>=100)throw new Error("Max attempts reached in randomReg");e=this.getRandom(_.REGISTER_COUNT,1)}while(t&&t.includes(e));return e},t.prototype.randomConsecutiveRegs=function(t,e){for(var i=this.randomReg(e),n=[],o=0;o<t;)e&&e.includes(i)||(n.push(i),o++),i=(i+1)%_.REGISTER_COUNT;return n},t.prototype.randomConsecutiveAddresses=function(t){for(var e=this.getRandom(this.workingMemorySize),i=[],n=0;n<t;++n)i.push((e+n)%this.workingMemorySize);return i},t.prototype.getRandom=function(t,e){return void 0===e&&(e=0),e+Math.floor(Math.random()*(t-e))},t.MIN_DOUBLED_LOOP_SIZE=7,t.MAX_DOUBLED_LOOP_SIZE=9,t.MIN_LOOP_SIZE=4,t.MAX_LOOP_SIZE=6,t.MIN_BRANCH_SIZE=4,t.MAX_BRANCH_SIZE=8,t.MIN_SEQUENCE_SIZE=4,t.MAX_SEQUENCE_SIZE=7,t}(),ut=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ct=function(t){function e(i,n,o,r,s){void 0===s&&(s=16);var h=t.call(this,[0,0],i.scene,n)||this;return h.app=i,h.size=s,h.instructionBuffer=new st(h,s,.6*e.ADDRESS_MARGIN+e.INNER_SPACING-e.CONTENTS_MARGIN,0,o),h.CodeGen=new at(s,h.instructionBuffer,r),h}return ut(e,t),e.prototype.getInstructionBuffer=function(){return this.instructionBuffer},e.prototype.dimensions=function(){return{width:this.instructionBuffer.width+2*e.CONTENTS_MARGIN,height:this.instructionBuffer.height+2*e.CONTENTS_MARGIN}},e.prototype.setPosition=function(t){this.position={x:t[0],y:t[1]},this.instructionBuffer.setPosition([t[0]+.6*e.ADDRESS_MARGIN+e.INNER_SPACING-e.CONTENTS_MARGIN,t[1]])},e.prototype.getMenuOptions=function(){var t=this;if(!this.chipMenuOptions){var e=[U.createNumberSelection("Clock Frequency",0,"The clock frequency of the chip.",this.getClockFrequency(),(function(){return t.safeIncrementClock()}),(function(){return t.safeDecrementClock()}))];this.chipMenuOptions=new k([],e)}return this.chipMenuOptions},e.prototype.displayName=function(){return"Instruction Memory"},e.prototype.update=function(){this.instructionBuffer.update(),this.CodeGen.updateInstructionStream(),Math.random()<.2&&this.instructionBuffer.write(this.CodeGen.getInstructionStream(),1)},e.prototype.initializeGraphics=function(){var t=this.instructionBuffer.height+2*e.CONTENTS_MARGIN,i=this.instructionBuffer.width+2*e.CONTENTS_MARGIN+e.ADDRESS_MARGIN;this.buildBodyMesh(i,t),this.drawPins(this.bodyMesh,n.LEFT,this.size),this.instructionBuffer.initializeGraphics()},e.prototype.disposeGraphics=function(){t.prototype.disposeBodyMesh.call(this),this.clearTracesAndPins(n.LEFT),this.instructionBuffer.dispose(),this.app.removeGameActor(this)},e.prototype.safeIncrementClock=function(){return this.instructionBuffer.connectedChip&&this.getClockFrequency()<this.instructionBuffer.connectedChip.getClockFrequency()/3?this.updateClock(this.getClockFrequency()+1):this.getClockFrequency()},e.prototype.safeDecrementClock=function(){return this.getClockFrequency()>1?this.updateClock(this.getClockFrequency()-1):this.getClockFrequency()},e.ADDRESS_MARGIN=.2,e}(p),pt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dt=function(t){function e(e,i,n,o){void 0===n&&(n=2),void 0===o&&(o=4);var r=t.call(this,[0,0],e.scene,i)||this;return r.app=e,r.dataBanks=[],r.numberOfWords=o,r.numberOfBanks=n,r.size=n*o,r}return pt(e,t),e.prototype.dimensions=function(){var t=R.dimensions(this.numberOfWords);return{width:t.width*this.numberOfBanks+e.BANK_SPACING*(this.numberOfBanks-1)+2*e.CONTENTS_MARGIN,height:t.height+2*e.CONTENTS_MARGIN+e.INNER_SPACING+e.TEXT_SIZE}},e.prototype.setPosition=function(t){this.position={x:t[0],y:t[1]}},e.prototype.isReady=function(t){return this.bankOf(t).isReady()},e.prototype.askForMemoryOperation=function(t,e){this.connectedChip=t,this.bankOf(e).askForMemoryOperation(t,e%this.bankOf(e).getSize())},e.prototype.read=function(t){return this.bankOf(t).read(t%this.bankOf(t).getSize())},e.prototype.write=function(t,e){this.bankOf(t).write(t%this.bankOf(t).getSize(),e)},e.prototype.getMenuOptions=function(){var t=this;if(!this.chipMenuOptions){var e=[U.createNumberSelection("Clock Frequency",0,"The clock frequency of the chip.",this.getClockFrequency(),(function(){return t.safeIncrementClock()}),(function(){return t.safeDecrementClock()}))];this.chipMenuOptions=new k([],e)}return this.chipMenuOptions},e.prototype.displayName=function(){return"Main Memory"},e.prototype.update=function(){this.dataBanks.forEach((function(t){return t.update()}))},e.prototype.initializeGraphics=function(){for(var t=R.dimensions(this.numberOfWords),i=t.height+2*e.CONTENTS_MARGIN+e.INNER_SPACING+e.TEXT_SIZE,o=t.width*this.numberOfBanks+2*e.CONTENTS_MARGIN+(this.numberOfBanks-1)*e.BANK_SPACING,r=-o/2+t.width/2+e.CONTENTS_MARGIN,s=this.numberOfWords,a=0;a<this.numberOfBanks;a++){for(var u=[],c=0;c<s;c++)u.push(h.toHex(a*s+c));var p=new R(this,r+a*(t.width+e.BANK_SPACING),(-e.INNER_SPACING-e.TEXT_SIZE)/2,this.numberOfWords,e.DELAY,void 0,u,"DB".concat(a));p.initializeGraphics(),this.dataBanks[a]=p}this.buildBodyMesh(o,i),this.drawPins(this.bodyMesh,n.BOTTOM,this.numberOfBanks)},e.prototype.disposeGraphics=function(){t.prototype.disposeBodyMesh.call(this),this.clearTracesAndPins(n.BOTTOM),this.dataBanks.forEach((function(t){return t.dispose()})),this.app.removeGameActor(this)},e.prototype.bankOf=function(t){return this.dataBanks[Math.floor(t/this.numberOfWords)]},e.prototype.safeIncrementClock=function(){return this.connectedChip&&this.getClockFrequency()<this.connectedChip.getClockFrequency()/3?this.updateClock(this.getClockFrequency()+1):this.getClockFrequency()},e.prototype.safeDecrementClock=function(){return this.getClockFrequency()>1?this.updateClock(this.getClockFrequency()-1):this.getClockFrequency()},e.BANK_SPACING=.04,e.DELAY=10,e}(p);new(function(){function t(){var t=this;this.scene=new o.Z58,this.paused=!1,this.cpus=[],this.gameActors=[],this.loadResources().then((function(){t.renderer=t.setupRenderer(),t.setupCamera(),t.loadGame(),t.animate(),t.startGameLoop()}))}return t.prototype.loadResources=function(){return t=this,e=void 0,n=function(){return function(t,e){var i,n,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=h(0),s.throw=h(1),s.return=h(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function h(h){return function(a){return function(h){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,h[0]&&(r=0)),r;)try{if(i=1,n&&(o=2&h[0]?n.return:h[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,h[1])).done)return o;switch(n=0,o&&(h=[2&h[0],o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,n=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==h[0]&&2!==h[0])){r=0;continue}if(3===h[0]&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(6===h[0]&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(t){h=[6,t],n=0}finally{i=o=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([h,a])}}}(this,(function(t){switch(t.label){case 0:return[4,h.loadFont()];case 1:return t.sent(),[2]}}))},new((i=void 0)||(i=Promise))((function(o,r){function s(t){try{a(n.next(t))}catch(t){r(t)}}function h(t){try{a(n.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,h)}a((n=n.apply(t,e||[])).next())}));var t,e,i,n},t.prototype.setupRenderer=function(){return this.renderer=new o.JeP({antialias:!0,alpha:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(h.COLOR_PALETTE.get("DARKEST"),1),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.autoClear=!1,document.body.appendChild(this.renderer.domElement),this.renderer},t.prototype.setupCamera=function(){var t=window.innerWidth/window.innerHeight;this.camera=new o.qUd(-t,t,1,-1,1,3),this.camera.position.set(0,.8,2),this.camera.zoom=.4,this.camera.updateProjectionMatrix()},t.prototype.animate=function(){var t=this;requestAnimationFrame((function(){return t.animate()})),this.renderer.clear(),this.renderer.render(this.scene,this.camera),this.renderer.clearDepth(),this.renderer.render(this.hud.getHUDScene(),this.hud.getHUDCamera())},t.prototype.startGameLoop=function(){var e=this;setInterval((function(){e.paused||(e.gameActors.forEach((function(e){var i=Math.round(t.FPS/e.getClockFrequency());t.frameCount%i==0&&e.update()})),e.hud.update(),t.frameCount++)}),t.ONE_SECOND/t.FPS)},t.prototype.loadGame=function(){if(this.addGameActors(),0===this.cpus.length)throw new Error("No CPUs found in the simulation.");this.hud=new J(this),h.drawGrid(this.scene)},t.prototype.addGameActors=function(){var e=new dt(this,t.MEMORY_CLOCK_FREQUENCY,t.MEMORY_BANKS,t.MEMORY_WORDS_PER_BANK),i=t.MEMORY_BANKS*t.MEMORY_WORDS_PER_BANK,n=new ct(this,t.INSTRUCTION_MEMORY_CLOCK_FREQUENCY,t.INSTRUCTION_MEMORY_DELAY,i,t.INSTRUCTION_MEMORY_SIZE),o=new it(t.CPU_POSITION,this.scene,t.CPU_CLOCK_FREQUENCY,t.CPU_CACHE_SIZE);o.connectToInstructionMemory(n),o.connectToWorkingMemory(e),this.cpus.push(o),this.gameActors.push(o,n,e)},t.prototype.removeGameActor=function(t){var e=this.gameActors.indexOf(t);e>-1&&this.gameActors.splice(e,1)},t.ONE_SECOND=1e3,t.FPS=60,t.frameCount=0,t.CPU_POSITION=[0,0],t.CPU_CLOCK_FREQUENCY=30,t.CPU_CACHE_SIZE=6,t.INSTRUCTION_MEMORY_CLOCK_FREQUENCY=5,t.INSTRUCTION_MEMORY_DELAY=3,t.INSTRUCTION_MEMORY_SIZE=32,t.MEMORY_CLOCK_FREQUENCY=5,t.MEMORY_BANKS=12,t.MEMORY_WORDS_PER_BANK=16,t}())}},i={};function n(t){var o=i[t];if(void 0!==o)return o.exports;var r=i[t]={exports:{}};return e[t](r,r.exports,n),r.exports}n.m=e,t=[],n.O=(e,i,o,r)=>{if(!i){var s=1/0;for(c=0;c<t.length;c++){for(var[i,o,r]=t[c],h=!0,a=0;a<i.length;a++)(!1&r||s>=r)&&Object.keys(n.O).every((t=>n.O[t](i[a])))?i.splice(a--,1):(h=!1,r<s&&(s=r));if(h){t.splice(c--,1);var u=o();void 0!==u&&(e=u)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[i,o,r]},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={792:0};n.O.j=e=>0===t[e];var e=(e,i)=>{var o,r,[s,h,a]=i,u=0;if(s.some((e=>0!==t[e]))){for(o in h)n.o(h,o)&&(n.m[o]=h[o]);if(a)var c=a(n)}for(e&&e(i);u<s.length;u++)r=s[u],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(c)},i=self.webpackChunkminicpu=self.webpackChunkminicpu||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var o=n.O(void 0,[387],(()=>n(969)));o=n.O(o)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVMvcUIsT0FBUWpDLElBQ3pCbXVCLEVBQVVuQixFQUFTaHRCLEdBQ2hCd3NCLEVBQW9Ca0IsRUFBRVEsRUFBaUJDLElBQVlELEVBQWdCQyxJQUNyRUQsRUFBZ0JDLEdBQVMsS0FFMUJELEVBQWdCQyxHQUFXLEVBRTVCLE9BQU8zQixFQUFvQk8sRUFBRXZnQixFQUFPLEVBR2pDa2lCLEVBQXFCQyxLQUEwQixvQkFBSUEsS0FBMEIscUJBQUssR0FDdEZELEVBQW1CM3dCLFFBQVFxd0IsRUFBcUIxVyxLQUFLLEtBQU0sSUFDM0RnWCxFQUFtQnJ1QixLQUFPK3RCLEVBQXFCMVcsS0FBSyxLQUFNZ1gsRUFBbUJydUIsS0FBS3FYLEtBQUtnWCxHLEtDN0N2RixJQUFJRSxFQUFzQnBDLEVBQW9CTyxPQUFFcnlCLEVBQVcsQ0FBQyxNQUFNLElBQU84eEIsRUFBb0IsT0FDN0ZvQyxFQUFzQnBDLEVBQW9CTyxFQUFFNkIsRSIsInNvdXJjZXMiOlsid2VicGFjazovL21pbmljcHUvd2VicGFjay9ydW50aW1lL2NodW5rIGxvYWRlZCIsIndlYnBhY2s6Ly9taW5pY3B1Ly4vc3JjL2FjdG9ycy9Db21wdXRlckNoaXAudHMiLCJ3ZWJwYWNrOi8vbWluaWNwdS8uL3NyYy9EcmF3VXRpbHMudHMiLCJ3ZWJwYWNrOi8vbWluaWNwdS8uL3NyYy9kYXRhU3RydWN0dXJlcy9VcGdyYWRlT3B0aW9uLnRzIiwid2VicGFjazovL21pbmljcHUvLi9zcmMvZGF0YVN0cnVjdHVyZXMvUXVldWUudHMiLCJ3ZWJwYWNrOi8vbWluaWNwdS8uL3NyYy9hY3RvcnMvbWFjcm9zL3ByaW1pdGl2ZXMvQ29tcHV0ZXJDaGlwTWFjcm8udHMiLCJ3ZWJwYWNrOi8vbWluaWNwdS8uL3NyYy9hY3RvcnMvbWFjcm9zL3ByaW1pdGl2ZXMvSW5zdHJ1Y3Rpb25CdWZmZXIudHMiLCJ3ZWJwYWNrOi8vbWluaWNwdS8uL3NyYy9hY3RvcnMvbWFjcm9zL3ByaW1pdGl2ZXMvQ291bnRlci50cyIsIndlYnBhY2s6Ly9taW5pY3B1Ly4vc3JjL2FjdG9ycy9tYWNyb3MvSW5zdHJ1Y3Rpb25GZXRjaGVyLnRzIiwid2VicGFjazovL21pbmljcHUvLi9zcmMvZGF0YVN0cnVjdHVyZXMvSVNBLnRzIiwid2VicGFjazovL21pbmljcHUvLi9zcmMvYWN0b3JzL21hY3Jvcy9wcmltaXRpdmVzL0FMVS50cyIsIndlYnBhY2s6Ly9taW5pY3B1Ly4vc3JjL2FjdG9ycy9tYWNyb3MvcHJpbWl0aXZlcy9EYXRhQ2VsbEFycmF5LnRzIiwid2VicGFjazovL21pbmljcHUvLi9zcmMvYWN0b3JzL21hY3Jvcy9EZWNvZGVyLnRzIiwid2VicGFjazovL21pbmljcHUvLi9zcmMvYWN0b3JzL21hY3Jvcy9JT0ludGVyZmFjZS50cyIsIndlYnBhY2s6Ly9taW5pY3B1Ly4vc3JjL2FjdG9ycy9tYWNyb3MvU0lTRENvcmUudHMiLCJ3ZWJwYWNrOi8vbWluaWNwdS8uL3NyYy9hY3RvcnMvbWFjcm9zL0luc3RydWN0aW9uQ2FjaGVMaW5lLnRzIiwid2VicGFjazovL21pbmljcHUvLi9zcmMvYWN0b3JzL21hY3Jvcy9JbnN0cnVjdGlvbkNhY2hlLnRzIiwid2VicGFjazovL21pbmljcHUvLi9zcmMvZGF0YVN0cnVjdHVyZXMvQ2hpcE1lbnVPcHRpb25zLnRzIiwid2VicGFjazovL21pbmljcHUvLi9zcmMvZGF0YVN0cnVjdHVyZXMvSW5zdHJ1Y3Rpb24udHMiLCJ3ZWJwYWNrOi8vbWluaWNwdS8uL3NyYy9kYXRhU3RydWN0dXJlcy9TdGF0LnRzIiwid2VicGFjazovL21pbmljcHUvLi9zcmMvaHVkRWxlbWVudHMvQWJzdHJhY3RCdXR0b24udHMiLCJ3ZWJwYWNrOi8vbWluaWNwdS8uL3NyYy9odWRFbGVtZW50cy9QYXVzZUJ1dHRvbi50cyIsIndlYnBhY2s6Ly9taW5pY3B1Ly4vc3JjL2h1ZEVsZW1lbnRzL0hVREV2ZW50SGFuZGxlci50cyIsIndlYnBhY2s6Ly9taW5pY3B1Ly4vc3JjL2h1ZEVsZW1lbnRzL0hVRFByb2Nlc3NvclN0YXRzLnRzIiwid2VicGFjazovL21pbmljcHUvLi9zcmMvaHVkRWxlbWVudHMvQ29tcHV0ZXJDaGlwTWVudS50cyIsIndlYnBhY2s6Ly9taW5pY3B1Ly4vc3JjL2h1ZEVsZW1lbnRzL1BsYXllclN0YXRzLnRzIiwid2VicGFjazovL21pbmljcHUvLi9zcmMvSFVELnRzIiwid2VicGFjazovL21pbmljcHUvLi9zcmMvaHVkRWxlbWVudHMvVGV4dEJ1dHRvbi50cyIsIndlYnBhY2s6Ly9taW5pY3B1Ly4vc3JjL2h1ZEVsZW1lbnRzL1RleHRCdXR0b25CdWlsZGVyLnRzIiwid2VicGFjazovL21pbmljcHUvLi9zcmMvYWN0b3JzL1NJU0RQcm9jZXNzb3IudHMiLCJ3ZWJwYWNrOi8vbWluaWNwdS8uL3NyYy9hY3RvcnMvbWFjcm9zL0FkZHJlc3NlZEluc3RydWN0aW9uQnVmZmVyLnRzIiwid2VicGFjazovL21pbmljcHUvLi9zcmMvZGF0YVN0cnVjdHVyZXMvQ29kZUdlbmVyYXRvci50cyIsIndlYnBhY2s6Ly9taW5pY3B1Ly4vc3JjL2FjdG9ycy9JbnN0cnVjdGlvbk1lbW9yeS50cyIsIndlYnBhY2s6Ly9taW5pY3B1Ly4vc3JjL2FjdG9ycy9Xb3JraW5nTWVtb3J5LnRzIiwid2VicGFjazovL21pbmljcHUvLi9zcmMvYXBwLnRzIiwid2VicGFjazovL21pbmljcHUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbWluaWNwdS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vbWluaWNwdS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL21pbmljcHUvd2VicGFjay9ydW50aW1lL2pzb25wIGNodW5rIGxvYWRpbmciLCJ3ZWJwYWNrOi8vbWluaWNwdS93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGRlZmVycmVkID0gW107XG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8gPSAocmVzdWx0LCBjaHVua0lkcywgZm4sIHByaW9yaXR5KSA9PiB7XG5cdGlmKGNodW5rSWRzKSB7XG5cdFx0cHJpb3JpdHkgPSBwcmlvcml0eSB8fCAwO1xuXHRcdGZvcih2YXIgaSA9IGRlZmVycmVkLmxlbmd0aDsgaSA+IDAgJiYgZGVmZXJyZWRbaSAtIDFdWzJdID4gcHJpb3JpdHk7IGktLSkgZGVmZXJyZWRbaV0gPSBkZWZlcnJlZFtpIC0gMV07XG5cdFx0ZGVmZXJyZWRbaV0gPSBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV07XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBub3RGdWxmaWxsZWQgPSBJbmZpbml0eTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBbY2h1bmtJZHMsIGZuLCBwcmlvcml0eV0gPSBkZWZlcnJlZFtpXTtcblx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcblx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGNodW5rSWRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRpZiAoKHByaW9yaXR5ICYgMSA9PT0gMCB8fCBub3RGdWxmaWxsZWQgPj0gcHJpb3JpdHkpICYmIE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uTykuZXZlcnkoKGtleSkgPT4gKF9fd2VicGFja19yZXF1aXJlX18uT1trZXldKGNodW5rSWRzW2pdKSkpKSB7XG5cdFx0XHRcdGNodW5rSWRzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZnVsZmlsbGVkID0gZmFsc2U7XG5cdFx0XHRcdGlmKHByaW9yaXR5IDwgbm90RnVsZmlsbGVkKSBub3RGdWxmaWxsZWQgPSBwcmlvcml0eTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYoZnVsZmlsbGVkKSB7XG5cdFx0XHRkZWZlcnJlZC5zcGxpY2UoaS0tLCAxKVxuXHRcdFx0dmFyIHIgPSBmbigpO1xuXHRcdFx0aWYgKHIgIT09IHVuZGVmaW5lZCkgcmVzdWx0ID0gcjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn07IiwiaW1wb3J0IHtcclxuICAgIEJ1ZmZlckdlb21ldHJ5LFxyXG4gICAgR3JvdXAsXHJcbiAgICBMaW5lLFxyXG4gICAgTGluZUJhc2ljTWF0ZXJpYWwsXHJcbiAgICBNZXNoLFxyXG4gICAgTWVzaEJhc2ljTWF0ZXJpYWwsXHJcbiAgICBQbGFuZUdlb21ldHJ5LFxyXG4gICAgU2NlbmUsXHJcbiAgICBWZWN0b3IyLFxyXG4gICAgVmVjdG9yM1xyXG59IGZyb20gXCJ0aHJlZVwiO1xyXG5pbXBvcnQge0RyYXdVdGlsc30gZnJvbSBcIi4uL0RyYXdVdGlsc1wiO1xyXG5pbXBvcnQgKiBhcyBCdWZmZXJHZW9tZXRyeVV0aWxzIGZyb20gXCJ0aHJlZS9leGFtcGxlcy9qc20vdXRpbHMvQnVmZmVyR2VvbWV0cnlVdGlsc1wiO1xyXG5pbXBvcnQge0NoaXBNZW51T3B0aW9uc30gZnJvbSBcIi4uL2RhdGFTdHJ1Y3R1cmVzL0NoaXBNZW51T3B0aW9uc1wiO1xyXG5cclxuLyoqXHJcbiAqIEVudW1lcmF0aW9uIGZvciB0aGUgc2lkZXMgb2YgYSBjb21wdXRlciBjaGlwXHJcbiAqIEBlbnVtXHJcbiAqL1xyXG5leHBvcnQgZW51bSBTaWRlIHtcclxuICAgIExFRlQsXHJcbiAgICBSSUdIVCxcclxuICAgIFRPUCxcclxuICAgIEJPVFRPTVxyXG59XHJcblxyXG4vKipcclxuICogQWJzdHJhY3QgY2xhc3MgZm9yIGNvbXB1dGVyIGNoaXBzXHJcbiAqIEBhYnN0cmFjdFxyXG4gKiBAY2xhc3NcclxuICogQHByb3BlcnR5IHtzdHJpbmd9IGlkIFRoZSBpZCBvZiB0aGUgY2hpcFxyXG4gKiBAcHJvcGVydHkge3t4OiBudW1iZXIsIHk6IG51bWJlcn19IHBvc2l0aW9uIFRoZSBwb3NpdGlvbiBvZiB0aGUgY2hpcFxyXG4gKiBAcHJvcGVydHkge1NjZW5lfSBzY2VuZSBUaGUgc2NlbmUgdG8gYWRkIHRoZSBjaGlwIHRvXHJcbiAqL1xyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ29tcHV0ZXJDaGlwIHtcclxuICAgIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgVEVYVF9TSVpFOiBudW1iZXIgPSAwLjA1O1xyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBQSU5fTUFSR0lOID0gMC4wNTtcclxuICAgIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgUElOX1dJRFRIID0gMC4wMjtcclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IENPTlRFTlRTX01BUkdJTiA9IDAuMDM7XHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IElOTkVSX1NQQUNJTkcgPSAwLjAxO1xyXG5cclxuICAgIC8qKiBUaGUgY29sb3IgcGFsZXR0ZSB1c2VkIGZvciB0aGUgY29tcHV0ZXIgY2hpcCAqL1xyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBCT0RZX01BVEVSSUFMOiBNZXNoQmFzaWNNYXRlcmlhbCA9IG5ldyBNZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IERyYXdVdGlscy5DT0xPUl9QQUxFVFRFLmdldChcIkRBUktcIil9KTtcclxuICAgIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgSFVEX1RFWFRfTUFURVJJQUw6IE1lc2hCYXNpY01hdGVyaWFsID0gbmV3IE1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogRHJhd1V0aWxzLkNPTE9SX1BBTEVUVEUuZ2V0KFwiTUVESVVNX0xJR0hUXCIpfSk7XHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IFBJTl9NQVRFUklBTDogTWVzaEJhc2ljTWF0ZXJpYWwgPSBuZXcgTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiBEcmF3VXRpbHMuQ09MT1JfUEFMRVRURS5nZXQoXCJNRURJVU1fREFSS1wiKX0pO1xyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgTUFYX0NMT0NLX0ZSRVFVRU5DWSA9IDEyMDtcclxuICAgIC8vIFRoZSBiYXNpYyBtZXNoZXMgb2YgYSBjb21wdXRlciBjaGlwXHJcbiAgICBwcm90ZWN0ZWQgYm9keU1lc2g6IE1lc2ggfCB1bmRlZmluZWQ7XHJcbiAgICBwcm90ZWN0ZWQgc2VsZWN0ZWRNZXNoOiBNZXNoIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIC8vIFRoZSBwb3NpdGlvbnMgb2YgdGhlIHBpbnMgb24gdGhlIGNoaXAgcGVyIHNpZGVcclxuICAgIHB1YmxpYyByZWFkb25seSBwaW5Qb3NpdGlvbnM6IE1hcDxTaWRlLCBWZWN0b3IyW10+O1xyXG4gICAgcHVibGljIHJlYWRvbmx5IHBpbkdlb21ldHJpZXM6IE1hcDxTaWRlLCBCdWZmZXJHZW9tZXRyeVtdPjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgcGluc01lc2hlczogTWFwPFNpZGUsIE1lc2g+O1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSB0cmFjZXM6IE1hcDxTaWRlLCBHcm91cD47XHJcblxyXG4gICAgcHVibGljIHJlYWRvbmx5IHNjZW5lOiBTY2VuZTtcclxuICAgIHBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH07XHJcbiAgICBwcml2YXRlIGNsb2NrRnJlcXVlbmN5OiBudW1iZXIgPSAxO1xyXG4gICAgcHJvdGVjdGVkIGNoaXBNZW51T3B0aW9uczogQ2hpcE1lbnVPcHRpb25zO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNvbnN0cnVjdG9yXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcltdfSBwb3NpdGlvbiBUaGUgcG9zaXRpb24gb2YgdGhlIGNoaXBcclxuICAgICAqIEBwYXJhbSB7U2NlbmV9IHNjZW5lIFRoZSBzY2VuZSB0byBhZGQgdGhlIGNoaXAgdG9cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjbG9ja0ZyZXF1ZW5jeSBUaGUgY2xvY2sgZnJlcXVlbmN5IG9mIHRoZSBjaGlwXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3Rvcihwb3NpdGlvbjogW251bWJlciwgbnVtYmVyXSwgc2NlbmU6IFNjZW5lLCBjbG9ja0ZyZXF1ZW5jeTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHt4OiBwb3NpdGlvblswXSwgeTogcG9zaXRpb25bMV19O1xyXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcclxuICAgICAgICB0aGlzLmNsb2NrRnJlcXVlbmN5ID0gY2xvY2tGcmVxdWVuY3k7XHJcbiAgICAgICAgdGhpcy5waW5Qb3NpdGlvbnMgPSBuZXcgTWFwPFNpZGUsIFZlY3RvcjJbXT4oKTtcclxuICAgICAgICB0aGlzLnBpbkdlb21ldHJpZXMgPSBuZXcgTWFwPFNpZGUsIEJ1ZmZlckdlb21ldHJ5W10+KCk7XHJcbiAgICAgICAgdGhpcy5waW5zTWVzaGVzID0gbmV3IE1hcDxTaWRlLCBNZXNoPigpO1xyXG4gICAgICAgIHRoaXMudHJhY2VzID0gbmV3IE1hcDxTaWRlLCBHcm91cD4oKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGRpc3BsYXkgbmFtZSBvZiB0aGUgY2hpcFxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBkaXNwbGF5IG5hbWVcclxuICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAqL1xyXG4gICAgYWJzdHJhY3QgZGlzcGxheU5hbWUoKTogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgY2hpcFxyXG4gICAgICogSXMgY2FsbGVkIGluIHRoZSB1cGRhdGUgbG9vcCBvZiBhbGwgY29tcHV0ZXIgY2hpcHNcclxuICAgICAqXHJcbiAgICAgKiBAcHJvdGVjdGVkXHJcbiAgICAgKi9cclxuICAgIGFic3RyYWN0IHVwZGF0ZSgpOiB2b2lkO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZXMgdGhlIGdyYXBoaWNzIG9mIHRoZSBjaGlwXHJcbiAgICAgKlxyXG4gICAgICogQHByb3RlY3RlZFxyXG4gICAgICovXHJcbiAgICBhYnN0cmFjdCBpbml0aWFsaXplR3JhcGhpY3MoKTogdm9pZDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGNoaXAgbWVudSBvcHRpb25zXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge0NoaXBNZW51T3B0aW9uc30gVGhlIG1lbnUgb3B0aW9uc1xyXG4gICAgICogQHByb3RlY3RlZFxyXG4gICAgICovXHJcbiAgICBhYnN0cmFjdCBnZXRNZW51T3B0aW9ucygpOiBDaGlwTWVudU9wdGlvbnM7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBjbG9jayBmcmVxdWVuY3kgb2YgdGhlIGNoaXBcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBUaGUgY2xvY2sgZnJlcXVlbmN5XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRDbG9ja0ZyZXF1ZW5jeSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNsb2NrRnJlcXVlbmN5O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB0aGUgaGl0IGJveCBtZXNoIG9mIHRoZSBjaGlwXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRIaXRCb3hNZXNoKCk6IE1lc2gge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJvZHlNZXNoITtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlbGVjdHMgdGhlIGNoaXAgYW5kIHNob3dzIHRoZSBzZWxlY3RlZCBtZXNoXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZWxlY3QoKTogQ29tcHV0ZXJDaGlwIHtcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLnNlbGVjdGVkTWVzaCEpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVzZWxlY3RzIHRoZSBjaGlwIGFuZCBoaWRlcyB0aGUgc2VsZWN0ZWQgbWVzaFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGVzZWxlY3QoKTogdW5kZWZpbmVkIHtcclxuICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZSh0aGlzLnNlbGVjdGVkTWVzaCEpO1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3cyB0aGUgcGlucyBvZiB0aGUgY2hpcFxyXG4gICAgICogQHBhcmFtIHBhcmVudCBUaGUgcGFyZW50IG1lc2ggdG8gZHJhdyB0aGUgcGlucyBvblxyXG4gICAgICogQHBhcmFtIHNpZGUgVGhlIHNpZGUgdG8gZHJhdyB0aGUgcGlucyBvblxyXG4gICAgICogQHBhcmFtIHBpbkNvdW50IFRoZSBudW1iZXIgb2YgcGlucyB0byBkcmF3XHJcbiAgICAgKiBAcHJvdGVjdGVkXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBkcmF3UGlucyhwYXJlbnQ6IE1lc2gsIHNpZGU6IFNpZGUsIHBpbkNvdW50OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB3aWR0aCA9IHBhcmVudC5nZW9tZXRyeSBpbnN0YW5jZW9mIFBsYW5lR2VvbWV0cnkgPyBwYXJlbnQuZ2VvbWV0cnkucGFyYW1ldGVycy53aWR0aCA6IDA7XHJcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gcGFyZW50Lmdlb21ldHJ5IGluc3RhbmNlb2YgUGxhbmVHZW9tZXRyeSA/IHBhcmVudC5nZW9tZXRyeS5wYXJhbWV0ZXJzLmhlaWdodCA6IDA7XHJcbiAgICAgICAgY29uc3QgaG9yaXpvbnRhbCA9IHNpZGUgPT09IFNpZGUuVE9QIHx8IHNpZGUgPT09IFNpZGUuQk9UVE9NO1xyXG5cclxuICAgICAgICBjb25zdCBzcGFjZVRvRmlsbCA9IGhvcml6b250YWwgPyB3aWR0aCAtIDIgKiBDb21wdXRlckNoaXAuUElOX01BUkdJTiA6IGhlaWdodCAtIDIgKiBDb21wdXRlckNoaXAuUElOX01BUkdJTjtcclxuICAgICAgICBjb25zdCBwaW5TcGFjaW5nID0gKHNwYWNlVG9GaWxsIC0gcGluQ291bnQgKiAoMiAqIENvbXB1dGVyQ2hpcC5QSU5fV0lEVEgpKSAvIChwaW5Db3VudCAtIDEpO1xyXG4gICAgICAgIHRoaXMucGluUG9zaXRpb25zLnNldChzaWRlLCBbXSk7XHJcbiAgICAgICAgdGhpcy5waW5HZW9tZXRyaWVzLnNldChzaWRlLCBbXSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGluQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBpICogKDIgKiBDb21wdXRlckNoaXAuUElOX1dJRFRIICsgcGluU3BhY2luZyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHhPZmZzZXQgPSBob3Jpem9udGFsID9cclxuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueCAtIHdpZHRoIC8gMiArIENvbXB1dGVyQ2hpcC5QSU5fTUFSR0lOICsgQ29tcHV0ZXJDaGlwLlBJTl9XSURUSCArIG9mZnNldCA6XHJcbiAgICAgICAgICAgICAgICAoc2lkZSA9PT0gU2lkZS5MRUZUID8gdGhpcy5wb3NpdGlvbi54IC0gd2lkdGggLyAyIC0gQ29tcHV0ZXJDaGlwLlBJTl9XSURUSCAtIDAuMDEgOiB0aGlzLnBvc2l0aW9uLnggKyB3aWR0aCAvIDIgKyBDb21wdXRlckNoaXAuUElOX1dJRFRIICsgMC4wMSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHlPZmZzZXQgPSBob3Jpem9udGFsID9cclxuICAgICAgICAgICAgICAgIChzaWRlID09PSBTaWRlLlRPUCA/IHRoaXMucG9zaXRpb24ueSArIGhlaWdodCAvIDIgKyBDb21wdXRlckNoaXAuUElOX1dJRFRIICsgMC4wMSA6IHRoaXMucG9zaXRpb24ueSAtIGhlaWdodCAvIDIgLSBDb21wdXRlckNoaXAuUElOX1dJRFRIIC0gMC4wMSlcclxuICAgICAgICAgICAgICAgIDogdGhpcy5wb3NpdGlvbi55IC0gaGVpZ2h0IC8gMiArIENvbXB1dGVyQ2hpcC5QSU5fTUFSR0lOICsgQ29tcHV0ZXJDaGlwLlBJTl9XSURUSCArIG9mZnNldDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHBpbkdlb21ldHJ5ID0gbmV3IFBsYW5lR2VvbWV0cnkoQ29tcHV0ZXJDaGlwLlBJTl9XSURUSCwgQ29tcHV0ZXJDaGlwLlBJTl9XSURUSCAqIDIpO1xyXG4gICAgICAgICAgICBpZiAoIWhvcml6b250YWwpIHBpbkdlb21ldHJ5LnJvdGF0ZVooTWF0aC5QSSAvIDIpOyAvLyBSb3RhdGUgZm9yIGxlZnQvcmlnaHQgc2lkZXNcclxuICAgICAgICAgICAgcGluR2VvbWV0cnkudHJhbnNsYXRlKHhPZmZzZXQsIHlPZmZzZXQsIDApO1xyXG4gICAgICAgICAgICB0aGlzLnBpbkdlb21ldHJpZXMuZ2V0KHNpZGUpIS5wdXNoKHBpbkdlb21ldHJ5KTtcclxuICAgICAgICAgICAgdGhpcy5waW5Qb3NpdGlvbnMuZ2V0KHNpZGUpIS5wdXNoKG5ldyBWZWN0b3IyKHhPZmZzZXQsIHlPZmZzZXQpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTWVyZ2UgcGluIGdlb21ldHJpZXMgYW5kIGFkZCB0byB0aGUgc2NlbmVcclxuICAgICAgICBjb25zdCBtZXJnZWRHZW9tZXRyeSA9IEJ1ZmZlckdlb21ldHJ5VXRpbHMubWVyZ2VHZW9tZXRyaWVzKHRoaXMucGluR2VvbWV0cmllcy5nZXQoc2lkZSkhKTtcclxuICAgICAgICBpZiAoIW1lcmdlZEdlb21ldHJ5KSB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gbWVyZ2UgZ2VvbWV0cmllc1wiKTtcclxuICAgICAgICBjb25zdCBtZXJnZWRNZXNoID0gbmV3IE1lc2gobWVyZ2VkR2VvbWV0cnksIENvbXB1dGVyQ2hpcC5QSU5fTUFURVJJQUwpO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkKG1lcmdlZE1lc2gpO1xyXG4gICAgICAgIHRoaXMucGluc01lc2hlcy5zZXQoc2lkZSwgbWVyZ2VkTWVzaCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCdWlsZHMgYSB0cmFjZSBiZXR3ZWVuIHR3byBwaW5zXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBpblBvc2l0aW9uMSBUaGUgcG9zaXRpb24gb2YgdGhlIGZpcnN0IHBpblxyXG4gICAgICogQHBhcmFtIHNpZGUxIFRoZSBzaWRlIG9mIHRoZSBmaXJzdCBwaW5cclxuICAgICAqIEBwYXJhbSBwaW5Qb3NpdGlvbjIgVGhlIHBvc2l0aW9uIG9mIHRoZSBzZWNvbmQgcGluXHJcbiAgICAgKiBAcGFyYW0gc2lkZTIgVGhlIHNpZGUgb2YgdGhlIHNlY29uZCBwaW5cclxuICAgICAqIEBwYXJhbSBvZmZzZXQgVGhlIG9mZnNldCBvZiB0aGUgdHJhY2VcclxuICAgICAqIEBwYXJhbSBtYXRlcmlhbCBUaGUgbWF0ZXJpYWwgb2YgdGhlIHRyYWNlLCBvcHRpb25hbFxyXG4gICAgICogQHByb3RlY3RlZFxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgYnVpbGRUcmFjZShwaW5Qb3NpdGlvbjE6IFZlY3RvcjIsIHNpZGUxOiBTaWRlLCBwaW5Qb3NpdGlvbjI6IFZlY3RvcjIsIHNpZGUyOiBTaWRlLCBvZmZzZXQ6IG51bWJlciwgbWF0ZXJpYWwgPzogTWVzaEJhc2ljTWF0ZXJpYWwpOiBMaW5lIHtcclxuICAgICAgICAvLyBDYWxjdWxhdGUgZXh0ZW5kZWQgc3RhcnQgYW5kIGVuZCBwb2ludHNcclxuICAgICAgICBjb25zdCBleHRlbmRlZFN0YXJ0ID0gdGhpcy5jYWxjdWxhdGVFeHRlbmRlZFBvaW50KHBpblBvc2l0aW9uMSwgc2lkZTEsIG9mZnNldCk7XHJcbiAgICAgICAgY29uc3QgZXh0ZW5kZWRFbmQgPSB0aGlzLmNhbGN1bGF0ZUV4dGVuZGVkUG9pbnQocGluUG9zaXRpb24yLCBzaWRlMiwgQ29tcHV0ZXJDaGlwLlBJTl9XSURUSCAqIDIpO1xyXG4gICAgICAgIGNvbnN0IGludGVybWVkaWF0ZVBvaW50ID0gbmV3IFZlY3RvcjIoXHJcbiAgICAgICAgICAgIHNpZGUxID09PSBTaWRlLlRPUCB8fCBzaWRlMSA9PT0gU2lkZS5CT1RUT00gPyBleHRlbmRlZEVuZC54IDogZXh0ZW5kZWRTdGFydC54LFxyXG4gICAgICAgICAgICBzaWRlMSA9PT0gU2lkZS5UT1AgfHwgc2lkZTEgPT09IFNpZGUuQk9UVE9NID8gZXh0ZW5kZWRTdGFydC55IDogZXh0ZW5kZWRFbmQueVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBtZXJnZWQgZ2VvbWV0cnkgZm9yIGFsbCBsaW5lIHNlZ21lbnRzXHJcbiAgICAgICAgY29uc3QgcG9pbnRzID0gW1xyXG4gICAgICAgICAgICBuZXcgVmVjdG9yMyhwaW5Qb3NpdGlvbjEueCwgcGluUG9zaXRpb24xLnksIDApLCAvLyBTdGFydCB0byBleHRlbmRlZCBzdGFydFxyXG4gICAgICAgICAgICBuZXcgVmVjdG9yMyhleHRlbmRlZFN0YXJ0LngsIGV4dGVuZGVkU3RhcnQueSwgMCksIC8vIEV4dGVuZGVkIHN0YXJ0IHRvIGludGVybWVkaWF0ZVxyXG5cclxuICAgICAgICAgICAgbmV3IFZlY3RvcjMoaW50ZXJtZWRpYXRlUG9pbnQueCwgaW50ZXJtZWRpYXRlUG9pbnQueSwgMCksIC8vIEludGVybWVkaWF0ZSB0byBleHRlbmRlZCBlbmRcclxuXHJcbiAgICAgICAgICAgIG5ldyBWZWN0b3IzKGV4dGVuZGVkRW5kLngsIGV4dGVuZGVkRW5kLnksIDApLCAvLyBFeHRlbmRlZCBlbmQgdG8gZW5kXHJcbiAgICAgICAgICAgIG5ldyBWZWN0b3IzKHBpblBvc2l0aW9uMi54LCBwaW5Qb3NpdGlvbjIueSwgMClcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IG5ldyBCdWZmZXJHZW9tZXRyeSgpLnNldEZyb21Qb2ludHMocG9pbnRzKTtcclxuICAgICAgICBjb25zdCBsaW5lTWF0ZXJpYWwgPSBuZXcgTGluZUJhc2ljTWF0ZXJpYWwoe2NvbG9yOiBtYXRlcmlhbCA/IG1hdGVyaWFsLmNvbG9yIDogQ29tcHV0ZXJDaGlwLlBJTl9NQVRFUklBTC5jb2xvcn0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgTGluZShnZW9tZXRyeSwgbGluZU1hdGVyaWFsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXdzIGEgdHJhY2UgYmV0d2VlbiB0d28gcGluc1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIHBpblxyXG4gICAgICogQHBhcmFtIG1hdGVyaWFsIFRoZSBtYXRlcmlhbCBvZiB0aGUgdHJhY2VcclxuICAgICAqIEBwYXJhbSB0aGlzU2lkZSBUaGUgc2lkZSBvZiB0aGUgY3VycmVudCBjaGlwXHJcbiAgICAgKiBAcGFyYW0gb3RoZXIgVGhlIG90aGVyIGNoaXBcclxuICAgICAqIEBwYXJhbSBvdGhlclNpZGUgVGhlIHNpZGUgb2YgdGhlIG90aGVyIGNoaXBcclxuICAgICAqIEBwYXJhbSBiYXNlT2Zmc2V0IFRoZSBiYXNlIG9mZnNldCBmb3IgdGhlIHRyYWNlXHJcbiAgICAgKiBAcGFyYW0gcGluU3BhY2luZyBUaGUgc3BhY2luZyBiZXR3ZWVuIHRoZSBwaW5zXHJcbiAgICAgKiBAcGFyYW0gZGltZW5zaW9uIFRoZSBkaW1lbnNpb24gdG8gZHJhdyB0aGUgdHJhY2UgaW5cclxuICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGRyYXdUcmFjZShpbmRleDogbnVtYmVyLCBtYXRlcmlhbDogTWVzaEJhc2ljTWF0ZXJpYWwsIHRoaXNTaWRlOiBTaWRlLCBvdGhlcjogQ29tcHV0ZXJDaGlwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdGhlclNpZGU6IFNpZGUsIGJhc2VPZmZzZXQ6IG51bWJlciwgcGluU3BhY2luZzogbnVtYmVyLCBkaW1lbnNpb246ICd4JyB8ICd5Jyk6IExpbmUge1xyXG4gICAgICAgIGNvbnN0IHRoaXNQaW5zID0gdGhpcy5waW5Qb3NpdGlvbnMuZ2V0KHRoaXNTaWRlKSE7XHJcbiAgICAgICAgY29uc3Qgb3RoZXJQaW5zID0gb3RoZXIucGluUG9zaXRpb25zLmdldChvdGhlclNpZGUpITtcclxuICAgICAgICBsZXQgc3RhcnRJbmRleFRoaXNTaWRlID0gMDtcclxuICAgICAgICBsZXQgc3RhcnRJbmRleE90aGVyU2lkZSA9IDA7XHJcblxyXG4gICAgICAgIGlmICh0aGlzUGluc1tzdGFydEluZGV4VGhpc1NpZGVdW2RpbWVuc2lvbl0gPj0gb3RoZXJQaW5zW3N0YXJ0SW5kZXhPdGhlclNpZGVdW2RpbWVuc2lvbl0pIHtcclxuICAgICAgICAgICAgc3RhcnRJbmRleFRoaXNTaWRlID0gdGhpc1BpbnMubGVuZ3RoIC0gMTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXNQaW5zW3N0YXJ0SW5kZXhUaGlzU2lkZV1bZGltZW5zaW9uXSA8IG90aGVyUGluc1tzdGFydEluZGV4T3RoZXJTaWRlXVtkaW1lbnNpb25dKSB7XHJcbiAgICAgICAgICAgIHN0YXJ0SW5kZXhPdGhlclNpZGUgPSBvdGhlclBpbnMubGVuZ3RoIC0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBhZGp1c3RlZEluZGV4VGhpc1NpZGUgPSBpbmRleCA+PSBzdGFydEluZGV4VGhpc1NpZGUgPyBpbmRleCA6IHN0YXJ0SW5kZXhUaGlzU2lkZSAtIChzdGFydEluZGV4VGhpc1NpZGUgLSBpbmRleCk7XHJcbiAgICAgICAgbGV0IGFkanVzdGVkSW5kZXhPdGhlclNpZGUgPSBpbmRleCA+PSBzdGFydEluZGV4T3RoZXJTaWRlID8gaW5kZXggOiBzdGFydEluZGV4T3RoZXJTaWRlIC0gKHN0YXJ0SW5kZXhPdGhlclNpZGUgLSBpbmRleCk7XHJcbiAgICAgICAgYWRqdXN0ZWRJbmRleFRoaXNTaWRlID0gTWF0aC5taW4oYWRqdXN0ZWRJbmRleFRoaXNTaWRlLCB0aGlzUGlucy5sZW5ndGggLSAxKTtcclxuICAgICAgICBhZGp1c3RlZEluZGV4T3RoZXJTaWRlID0gTWF0aC5taW4oYWRqdXN0ZWRJbmRleE90aGVyU2lkZSwgb3RoZXJQaW5zLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgIGNvbnN0IG9mZnNldCA9IGRpbWVuc2lvbiA9PT0gJ3gnID9cclxuICAgICAgICAgICAgYmFzZU9mZnNldCArIChwaW5TcGFjaW5nICogKHRoaXNQaW5zLmxlbmd0aCAtIDEpIC0gcGluU3BhY2luZyAqIE1hdGguYWJzKGFkanVzdGVkSW5kZXhUaGlzU2lkZSAtIHN0YXJ0SW5kZXhUaGlzU2lkZSkpXHJcbiAgICAgICAgICAgIDogYmFzZU9mZnNldCArIChwaW5TcGFjaW5nICogTWF0aC5hYnMoYWRqdXN0ZWRJbmRleFRoaXNTaWRlIC0gc3RhcnRJbmRleFRoaXNTaWRlKSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVHJhY2UodGhpc1BpbnNbYWRqdXN0ZWRJbmRleFRoaXNTaWRlXSwgdGhpc1NpZGUsIG90aGVyUGluc1thZGp1c3RlZEluZGV4T3RoZXJTaWRlXSwgb3RoZXJTaWRlLCBvZmZzZXQsIG1hdGVyaWFsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXdzIHRoZSB0cmFjZXMgYmV0d2VlbiB0aGUgcGlucyBvZiB0d28gY2hpcHNcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdGhpc1NpZGUgVGhlIHNpZGUgb2YgdGhlIGN1cnJlbnQgY2hpcFxyXG4gICAgICogQHBhcmFtIG90aGVyIFRoZSBvdGhlciBjaGlwXHJcbiAgICAgKiBAcGFyYW0gb3RoZXJTaWRlIFRoZSBzaWRlIG9mIHRoZSBvdGhlciBjaGlwXHJcbiAgICAgKiBAcGFyYW0gYmFzZU9mZnNldCBUaGUgYmFzZSBvZmZzZXQgZm9yIHRoZSB0cmFjZXNcclxuICAgICAqIEBwYXJhbSBwaW5TcGFjaW5nIFRoZSBzcGFjaW5nIGJldHdlZW4gdGhlIHBpbnNcclxuICAgICAqIEBwYXJhbSBkaW1lbnNpb24gVGhlIGRpbWVuc2lvbiB0byBkcmF3IHRoZSB0cmFjZXMgaW5cclxuICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGRyYXdUcmFjZXModGhpc1NpZGU6IFNpZGUsIG90aGVyOiBDb21wdXRlckNoaXAsIG90aGVyU2lkZTogU2lkZSwgYmFzZU9mZnNldDogbnVtYmVyLCBwaW5TcGFjaW5nOiBudW1iZXIsIGRpbWVuc2lvbjogJ3gnIHwgJ3knKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgdHJhY2VzID0gbmV3IEdyb3VwKCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBpblBvc2l0aW9ucy5nZXQodGhpc1NpZGUpIS5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgdHJhY2VzLmFkZCh0aGlzLmRyYXdUcmFjZShpLCBDb21wdXRlckNoaXAuUElOX01BVEVSSUFMLCB0aGlzU2lkZSwgb3RoZXIsIG90aGVyU2lkZSwgYmFzZU9mZnNldCwgcGluU3BhY2luZywgZGltZW5zaW9uKSk7XHJcbiAgICAgICAgdGhpcy50cmFjZXMuc2V0KHRoaXNTaWRlLCB0cmFjZXMpO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkKHRyYWNlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhcnMgdGhlIHRyYWNlcyBhbmQgcGlucyBmb3IgYSBnaXZlbiBzaWRlXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNpZGUgVGhlIHNpZGUgdG8gY2xlYXJcclxuICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGNsZWFyVHJhY2VzQW5kUGlucyhzaWRlOiBTaWRlKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnBpbnNNZXNoZXMuZ2V0KHNpZGUpKSByZXR1cm47XHJcbiAgICAgICAgRHJhd1V0aWxzLmRpc3Bvc2VNZXNoKHRoaXMucGluc01lc2hlcy5nZXQoc2lkZSkhKTtcclxuICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZSh0aGlzLnBpbnNNZXNoZXMuZ2V0KHNpZGUpISk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRyYWNlcy5nZXQoc2lkZSkpIHJldHVybjtcclxuICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZSh0aGlzLnRyYWNlcy5nZXQoc2lkZSkhKTtcclxuICAgICAgICB0aGlzLnRyYWNlcy5nZXQoc2lkZSkhPy5jaGlsZHJlbi5mb3JFYWNoKHRyYWNlID0+IERyYXdVdGlscy5kaXNwb3NlTWVzaCh0cmFjZSBhcyBNZXNoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGVzIHRoZSBleHRlbmRlZCBwb2ludCBmb3IgYSBnaXZlbiBwb3NpdGlvbiBhbmQgc2lkZSwgd2hpY2ggaXMgdXNlZCB0byBkcmF3IHRyYWNlc1xyXG4gICAgICogQHBhcmFtIHBvc2l0aW9uIFRoZSBwb3NpdGlvbiB0byBleHRlbmRcclxuICAgICAqIEBwYXJhbSBzaWRlIFRoZSBzaWRlIHRvIGV4dGVuZCB0b1xyXG4gICAgICogQHBhcmFtIGxlbmd0aCBUaGUgbGVuZ3RoIHRvIGV4dGVuZCBieVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVFeHRlbmRlZFBvaW50KHBvc2l0aW9uOiBWZWN0b3IyLCBzaWRlOiBTaWRlLCBsZW5ndGg6IG51bWJlcik6IFZlY3RvcjIge1xyXG4gICAgICAgIHN3aXRjaCAoc2lkZSkge1xyXG4gICAgICAgICAgICBjYXNlIFNpZGUuTEVGVDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yMihwb3NpdGlvbi54IC0gbGVuZ3RoLCBwb3NpdGlvbi55KTtcclxuICAgICAgICAgICAgY2FzZSBTaWRlLlJJR0hUOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHBvc2l0aW9uLnggKyBsZW5ndGgsIHBvc2l0aW9uLnkpO1xyXG4gICAgICAgICAgICBjYXNlIFNpZGUuVE9QOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHBvc2l0aW9uLngsIHBvc2l0aW9uLnkgKyBsZW5ndGgpO1xyXG4gICAgICAgICAgICBjYXNlIFNpZGUuQk9UVE9NOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHBvc2l0aW9uLngsIHBvc2l0aW9uLnkgLSBsZW5ndGgpO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvc2l0aW9uO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEJ1aWxkcyB0aGUgYm9keSBtZXNoIG9mIHRoZSBjaGlwXHJcbiAgICAgKlxyXG4gICAgICogQHByb3RlY3RlZFxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGJvZHlXaWR0aCBUaGUgd2lkdGggb2YgdGhlIGJvZHlcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBib2R5SGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIGJvZHlcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGJ1aWxkQm9keU1lc2goYm9keVdpZHRoOiBudW1iZXIsIGJvZHlIZWlnaHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYm9keU1lc2ggPSBuZXcgTWVzaChuZXcgUGxhbmVHZW9tZXRyeShib2R5V2lkdGgsIGJvZHlIZWlnaHQpLCBDb21wdXRlckNoaXAuQk9EWV9NQVRFUklBTCk7XHJcbiAgICAgICAgdGhpcy5ib2R5TWVzaC5wb3NpdGlvbi5zZXQodGhpcy5wb3NpdGlvbi54LCB0aGlzLnBvc2l0aW9uLnksIDApO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkKHRoaXMuYm9keU1lc2gpO1xyXG4gICAgICAgIHRoaXMuYnVpbGRTZWxlY3RlZE1lc2goKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZGlzcG9zZUJvZHlNZXNoKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5ib2R5TWVzaCB8fCAhdGhpcy5zZWxlY3RlZE1lc2gpIHJldHVybjtcclxuICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZSh0aGlzLmJvZHlNZXNoKTtcclxuICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZSh0aGlzLnNlbGVjdGVkTWVzaCk7XHJcbiAgICAgICAgRHJhd1V0aWxzLmRpc3Bvc2VNZXNoKHRoaXMuYm9keU1lc2gpO1xyXG4gICAgICAgIERyYXdVdGlscy5kaXNwb3NlTWVzaCh0aGlzLnNlbGVjdGVkTWVzaCk7XHJcbiAgICAgICAgdGhpcy5ib2R5TWVzaCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkTWVzaCA9IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIGNsb2NrIGZyZXF1ZW5jeSBvZiB0aGUgY2hpcFxyXG4gICAgICpcclxuICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuZXdWYWx1ZSBUaGUgbmV3IGNsb2NrIGZyZXF1ZW5jeVxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgdXBkYXRlQ2xvY2sobmV3VmFsdWU6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgdGhpcy5jbG9ja0ZyZXF1ZW5jeSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNsb2NrRnJlcXVlbmN5O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQnVpbGRzIHRoZSBzZWxlY3RlZCBtZXNoLCB3aGljaCBpcyBhIHNsaWdodGx5IGxhcmdlciBtZXNoIHRoYXQgaXMgdXNlZCB0byBpbmRpY2F0ZSB0aGF0IHRoZSBjaGlwIGlzIHNlbGVjdGVkXHJcbiAgICAgKlxyXG4gICAgICogQHByb3RlY3RlZFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGJ1aWxkU2VsZWN0ZWRNZXNoKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5ib2R5TWVzaCkgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGJvZHlIZWlnaHQgPSB0aGlzLmJvZHlNZXNoLmdlb21ldHJ5IGluc3RhbmNlb2YgUGxhbmVHZW9tZXRyeSA/IHRoaXMuYm9keU1lc2guZ2VvbWV0cnkucGFyYW1ldGVycy5oZWlnaHQgOiAwO1xyXG4gICAgICAgIGNvbnN0IGJvZHlXaWR0aCA9IHRoaXMuYm9keU1lc2guZ2VvbWV0cnkgaW5zdGFuY2VvZiBQbGFuZUdlb21ldHJ5ID8gdGhpcy5ib2R5TWVzaC5nZW9tZXRyeS5wYXJhbWV0ZXJzLndpZHRoIDogMDtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkTWVzaCA9IG5ldyBNZXNoKG5ldyBQbGFuZUdlb21ldHJ5KGJvZHlXaWR0aCArIDAuMDEsIGJvZHlIZWlnaHQgKyAwLjAxKSwgQ29tcHV0ZXJDaGlwLkhVRF9URVhUX01BVEVSSUFMKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkTWVzaC5wb3NpdGlvbi5zZXQodGhpcy5wb3NpdGlvbi54LCB0aGlzLnBvc2l0aW9uLnksIC0wLjAxKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7XHJcbiAgICBCdWZmZXJBdHRyaWJ1dGUsXHJcbiAgICBCdWZmZXJHZW9tZXRyeSxcclxuICAgIENvbG9yLFxyXG4gICAgR3JpZEhlbHBlcixcclxuICAgIExpbmUsXHJcbiAgICBMaW5lQmFzaWNNYXRlcmlhbCxcclxuICAgIE1hdGVyaWFsLFxyXG4gICAgTWVzaCxcclxuICAgIE1lc2hCYXNpY01hdGVyaWFsLFxyXG4gICAgUGxhbmVHZW9tZXRyeSxcclxuICAgIFNjZW5lLCBUZXh0dXJlLFxyXG4gICAgVGV4dHVyZUxvYWRlcixcclxuICAgIFZlY3RvcjIsIFZlY3RvcjNcclxufSBmcm9tIFwidGhyZWVcIjtcclxuaW1wb3J0IHtGb250LCBGb250TG9hZGVyfSBmcm9tIFwidGhyZWUvZXhhbXBsZXMvanNtL2xvYWRlcnMvRm9udExvYWRlclwiO1xyXG5pbXBvcnQge1RleHRHZW9tZXRyeX0gZnJvbSBcInRocmVlL2V4YW1wbGVzL2pzbS9nZW9tZXRyaWVzL1RleHRHZW9tZXRyeVwiO1xyXG5cclxuLyoqXHJcbiAqIEEgdXRpbGl0eSBjbGFzcyBwcm92aWRpbmcgc3RhdGljIG1ldGhvZHMgZm9yIGNyZWF0aW5nIHZhcmlvdXMgM0Qgb2JqZWN0cyBhbmQgdGV4dCBmb3IgdGhlIGFwcGxpY2F0aW9uLlxyXG4gKiBUaGlzIGNsYXNzIGNhbm5vdCBiZSBpbnN0YW50aWF0ZWQgYW5kIGFsbCBtZXRob2RzIGFyZSBtZWFudCB0byBiZSBhY2Nlc3NlZCBkaXJlY3RseSB2aWEgdGhlIGNsYXNzIG5hbWUuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRHJhd1V0aWxzIHtcclxuICAgIC8qKiBBIHByZWRlZmluZWQgc2V0IG9mIGNvbG9ycyB1c2VkIHRocm91Z2hvdXQgdGhlIGFwcGxpY2F0aW9uLiAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBDT0xPUl9QQUxFVFRFOiBNYXA8c3RyaW5nLCBzdHJpbmc+ID0gbmV3IE1hcChbXHJcbiAgICAgICAgW1wiREFSS0VTVFwiLCBcIiMwRjBEMUJcIl0sXHJcbiAgICAgICAgW1wiREFSS0VSXCIsIFwiIzFGMUIyQ1wiXSxcclxuICAgICAgICBbXCJEQVJLXCIsIFwiIzM1MkY0NFwiXSxcclxuICAgICAgICBbXCJNRURJVU1fREFSS1wiLCBcIiM1QzU0NzBcIl0sXHJcbiAgICAgICAgW1wiTUVESVVNX0xJR0hUXCIsIFwiI0I5QjRDN1wiXSxcclxuICAgICAgICBbXCJMSUdIVFwiLCBcIiNkZWU3ZThcIl0sXHJcbiAgICAgICAgW1wiR09MREVOX1lFTExPV1wiLCBcIiNGRkM1NjlcIl0sXHJcbiAgICAgICAgW1wiTElHSFRfR1JFRU5cIiwgXCIjMjdDQjcyXCJdLFxyXG4gICAgICAgIFtcIkxJR0hUX1JFRFwiLCBcIiNEOTUyNTJcIl0sXHJcbiAgICAgICAgW1wiTElHSFRfQkxVRVwiLCBcIiMzQ0IyRkNcIl1cclxuICAgIF0pO1xyXG5cclxuICAgIC8qKiBVc2VkIGZvciBsb2FkaW5nIHRleHR1cmVzIGZyb20gaW1hZ2VzLiAqL1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgdGV4dHVyZUxvYWRlciA9IG5ldyBUZXh0dXJlTG9hZGVyKCk7XHJcblxyXG4gICAgLyoqIFRoZSBkaXJlY3RvcnkgcGF0aCB0byB0aGUgZm9udCB1c2VkIGluIHRoZSBhcHBsaWNhdGlvbi4gKi9cclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IEZPTlRfRElSOiBzdHJpbmcgPSBcInJlcy9Db3VyaWVyX05ld19Cb2xkLmpzb25cIjtcclxuXHJcbiAgICAvKiogVGhlIGZvbnQgb2JqZWN0IGxvYWRlZCBhbmQgdXNlZCBmb3IgcmVuZGVyaW5nIHRleHQuICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGZvbnQ6IEZvbnQ7XHJcblxyXG4gICAgLyoqIFRoZSBiYXNlIGhlaWdodCBvZiB0aGUgdGV4dCwgY2FsY3VsYXRlZCBhZnRlciB0aGUgZm9udCBpcyBsb2FkZWQuICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGJhc2VUZXh0SGVpZ2h0OiBudW1iZXI7XHJcblxyXG4gICAgLyoqIFRoZSBiYXNlIHdpZHRoIG9mIHRoZSB0ZXh0LCBjYWxjdWxhdGVkIGFmdGVyIHRoZSBmb250IGlzIGxvYWRlZC4gKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYmFzZVRleHRXaWR0aDogbnVtYmVyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXN5bmNocm9ub3VzbHkgbG9hZHMgdGhlIGZvbnQgdXNlZCBmb3IgdGV4dCBpbiB0aGUgYXBwbGljYXRpb24uXHJcbiAgICAgKiBUaGlzIG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkIGJlZm9yZSBhbnkgdGV4dCByZW5kZXJpbmcgZnVuY3Rpb25zLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBmb250IGlzIGxvYWRlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBsb2FkRm9udCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5mb250KSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5ldyBGb250TG9hZGVyKCkubG9hZCh0aGlzLkZPTlRfRElSLCAoZm9udDogRm9udCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mb250ID0gZm9udDtcclxuICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBiYXNlIHRleHQgaGVpZ2h0IGFuZCB3aWR0aCB1c2luZyBhIHNhbXBsZSBjaGFyYWN0ZXIuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNoID1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1aWxkVGV4dE1lc2goXCJNXCIsIDAsIDAsIDAuMSwgbmV3IE1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogdGhpcy5DT0xPUl9QQUxFVFRFLmdldChcIkxJR0hUXCIpfSkpO1xyXG4gICAgICAgICAgICAgICAgbWVzaC5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKTtcclxuICAgICAgICAgICAgICAgIGlmICghbWVzaC5nZW9tZXRyeS5ib3VuZGluZ0JveCkgdGhyb3cgbmV3IEVycm9yKFwiRm9udCBib3VuZGluZyBib3ggbm90IGZvdW5kXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iYXNlVGV4dEhlaWdodCA9IG1lc2guZ2VvbWV0cnkuYm91bmRpbmdCb3gubWF4LnkgLSBtZXNoLmdlb21ldHJ5LmJvdW5kaW5nQm94Lm1pbi55O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iYXNlVGV4dFdpZHRoID0gbWVzaC5nZW9tZXRyeS5ib3VuZGluZ0JveC5tYXgueCAtIG1lc2guZ2VvbWV0cnkuYm91bmRpbmdCb3gubWluLng7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH0sIHVuZGVmaW5lZCwgcmVqZWN0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBxdWFkcmlsYXRlcmFsIG1lc2ggd2l0aCBzcGVjaWZpZWQgZGltZW5zaW9ucyBhbmQgbWF0ZXJpYWwuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIC0gVGhlIHdpZHRoIG9mIHRoZSBxdWFkcmlsYXRlcmFsLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCAtIFRoZSBoZWlnaHQgb2YgdGhlIHF1YWRyaWxhdGVyYWwuXHJcbiAgICAgKiBAcGFyYW0ge01hdGVyaWFsfSBtYXRlcmlhbCAtIFRoZSBtYXRlcmlhbCB0byBhcHBseSB0byB0aGUgcXVhZHJpbGF0ZXJhbC5cclxuICAgICAqIEBwYXJhbSB7VmVjdG9yMn0gcG9zaXRpb24gLSBUaGUgcG9zaXRpb24gb2YgdGhlIHF1YWRyaWxhdGVyYWwgaW4gdGhlIHNjZW5lLlxyXG4gICAgICogQHJldHVybnMge01lc2h9IFRoZSBjcmVhdGVkIHF1YWRyaWxhdGVyYWwgbWVzaC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBidWlsZFF1YWRyaWxhdGVyYWxNZXNoKHdpZHRoOiBudW1iZXIgPSAxLCBoZWlnaHQ6IG51bWJlciA9IDEsIG1hdGVyaWFsOiBNYXRlcmlhbCwgcG9zaXRpb246IFZlY3RvcjIpOiBNZXNoIHtcclxuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IG5ldyBQbGFuZUdlb21ldHJ5KHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgIGNvbnN0IG1lc2ggPSBuZXcgTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpO1xyXG4gICAgICAgIG1lc2gucG9zaXRpb24uc2V0KHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIDApO1xyXG4gICAgICAgIHJldHVybiBtZXNoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHRleHQgbWVzaCB3aXRoIHRoZSBzcGVjaWZpZWQgcGFyYW1ldGVycy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFRoZSB0ZXh0IHRvIGRpc3BsYXkuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geE9mZnNldCAtIFRoZSB4IG9mZnNldCBmcm9tIHRoZSBvcmlnaW4uXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geU9mZnNldCAtIFRoZSB5IG9mZnNldCBmcm9tIHRoZSBvcmlnaW4uXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2l6ZSAtIFRoZSBzaXplIG9mIHRoZSB0ZXh0LlxyXG4gICAgICogQHBhcmFtIHtNYXRlcmlhbH0gbWF0ZXJpYWwgLSBUaGUgbWF0ZXJpYWwgdG8gYXBwbHkgdG8gdGhlIHRleHQuXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtjZW50ZXJlZD10cnVlXSAtIFdoZXRoZXIgdG8gY2VudGVyIHRoZSB0ZXh0IGFyb3VuZCBpdHMgcG9zaXRpb24uXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3pSb3RhdGlvbj0wXSAtIFRoZSByb3RhdGlvbiBhcm91bmQgdGhlIHotYXhpcywgaW4gcmFkaWFucy5cclxuICAgICAqIEByZXR1cm5zIHtNZXNofSBUaGUgY3JlYXRlZCB0ZXh0IG1lc2guXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYnVpbGRUZXh0TWVzaCh0ZXh0OiBzdHJpbmcsIHhPZmZzZXQ6IG51bWJlciwgeU9mZnNldDogbnVtYmVyLCBzaXplOiBudW1iZXIsIG1hdGVyaWFsOiBNYXRlcmlhbCwgY2VudGVyZWQ6IGJvb2xlYW4gPSB0cnVlLCB6Um90YXRpb246IG51bWJlciA9IDApOiBNZXNoIHtcclxuICAgICAgICBpZiAoIXRoaXMuZm9udCkgdGhyb3cgbmV3IEVycm9yKFwiRm9udCBub3QgbG9hZGVkXCIpO1xyXG5cclxuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IG5ldyBUZXh0R2VvbWV0cnkodGV4dCwge1xyXG4gICAgICAgICAgICBmb250OiB0aGlzLmZvbnQsXHJcbiAgICAgICAgICAgIHNpemU6IHNpemUsXHJcbiAgICAgICAgICAgIGhlaWdodDogMC4wNSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgbWVzaCA9IG5ldyBNZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCk7XHJcbiAgICAgICAgbWVzaC5wb3NpdGlvbi5zZXQoeE9mZnNldCwgeU9mZnNldCwgMCk7XHJcbiAgICAgICAgaWYgKGNlbnRlcmVkKVxyXG4gICAgICAgICAgICBtZXNoLmdlb21ldHJ5LmNlbnRlcigpO1xyXG5cclxuICAgICAgICBpZiAoelJvdGF0aW9uICE9PSAwKSB7XHJcbiAgICAgICAgICAgIG1lc2guZ2VvbWV0cnkuY2VudGVyKCkucm90YXRlWih6Um90YXRpb24pO1xyXG4gICAgICAgICAgICBtZXNoLnBvc2l0aW9uLnNldCh4T2Zmc2V0LCB5T2Zmc2V0LCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBtZXNoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgdGV4dCBvZiBhIGdpdmVuIG1lc2ggd2l0aCBuZXcgY29udGVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge01lc2h9IG1lc2ggLSBUaGUgbWVzaCB3aG9zZSB0ZXh0IG5lZWRzIHRvIGJlIHVwZGF0ZWQuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIFRoZSBuZXcgdGV4dCBjb250ZW50LlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbY2VudGVyZWQ9dHJ1ZV0gLSBTcGVjaWZpZXMgd2hldGhlciB0aGUgdGV4dCBzaG91bGQgYmUgY2VudGVyZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgdXBkYXRlVGV4dChtZXNoOiBNZXNoLCB0ZXh0OiBzdHJpbmcsIGNlbnRlcmVkOiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xyXG4gICAgICAgIG1lc2guZ2VvbWV0cnkuZGlzcG9zZSgpOyAgLy8gRGlzcG9zZSBvZiB0aGUgY3VycmVudCBnZW9tZXRyeSB0byBwcmV2ZW50IG1lbW9yeSBsZWFrcy5cclxuICAgICAgICBtZXNoLmdlb21ldHJ5ID0gbmV3IFRleHRHZW9tZXRyeSh0ZXh0LCB7XHJcbiAgICAgICAgICAgIGZvbnQ6IERyYXdVdGlscy5mb250LFxyXG4gICAgICAgICAgICBzaXplOiBtZXNoLmdlb21ldHJ5IGluc3RhbmNlb2YgVGV4dEdlb21ldHJ5ID8gbWVzaC5nZW9tZXRyeS5wYXJhbWV0ZXJzLm9wdGlvbnMuc2l6ZSA6IDAuMSxcclxuICAgICAgICAgICAgaGVpZ2h0OiAwLjEsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGNlbnRlcmVkKVxyXG4gICAgICAgICAgICBtZXNoLmdlb21ldHJ5LmNlbnRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgbWF0ZXJpYWwgb2YgYSBnaXZlbiB0ZXh0IG1lc2ggd2l0aCBhIG5ldyBtYXRlcmlhbC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge01lc2h9IG1lc2ggLSBUaGUgbWVzaCB3aG9zZSBtYXRlcmlhbCBuZWVkcyB0byBiZSB1cGRhdGVkLlxyXG4gICAgICogQHBhcmFtIHtNYXRlcmlhbH0gbWF0ZXJpYWwgLSBUaGUgbmV3IG1hdGVyaWFsIHRvIGFwcGx5IHRvIHRoZSBtZXNoLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHVwZGF0ZU1hdGVyaWFsKG1lc2g6IE1lc2gsIG1hdGVyaWFsOiBNYXRlcmlhbCk6IHZvaWQge1xyXG4gICAgICAgIChtZXNoLm1hdGVyaWFsIGFzIE1hdGVyaWFsKS5kaXNwb3NlKCk7ICAvLyBEaXNwb3NlIG9mIHRoZSBjdXJyZW50IG1hdGVyaWFsIHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzLlxyXG4gICAgICAgIG1lc2gubWF0ZXJpYWwgPSBtYXRlcmlhbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXdzIGEgZ3JpZCBoZWxwZXIgaW4gdGhlIGdpdmVuIHNjZW5lLCB1c2VmdWwgZm9yIHZpc3VhbGl6aW5nIHRoZSBncm91bmQgcGxhbmUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTY2VuZX0gc2NlbmUgLSBUaGUgc2NlbmUgd2hlcmUgdGhlIGdyaWQgc2hvdWxkIGJlIGFkZGVkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGRyYXdHcmlkKHNjZW5lOiBTY2VuZSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGdyaWRDb2xvciA9IERyYXdVdGlscy5DT0xPUl9QQUxFVFRFLmdldChcIkRBUktFUlwiKTtcclxuICAgICAgICBjb25zdCBzaXplID0gMTAwOyAgLy8gQSBsYXJnZSBzaXplIHRvIHNpbXVsYXRlIGFuIGluZmluaXRlIGdyb3VuZCBwbGFuZS5cclxuICAgICAgICBjb25zdCBkaXZpc2lvbnMgPSAxMDAwOyAgLy8gRGVuc2UgZGl2aXNpb25zIHRvIGdpdmUgYSBkZXRhaWxlZCBncmlkLlxyXG4gICAgICAgIGNvbnN0IGdyaWRIZWxwZXIgPSBuZXcgR3JpZEhlbHBlcihzaXplLCBkaXZpc2lvbnMsIGdyaWRDb2xvciwgZ3JpZENvbG9yKTtcclxuICAgICAgICBncmlkSGVscGVyLnJvdGF0ZVgoTWF0aC5QSSAvIDIpOyAgLy8gUm90YXRlIHRvIGxheSBmbGF0IG9uIHRoZSBncm91bmQuXHJcbiAgICAgICAgZ3JpZEhlbHBlci5tYXRlcmlhbC5kZXB0aFdyaXRlID0gZmFsc2U7ICAvLyBQcmV2ZW50IGdyaWQgbGluZXMgZnJvbSBpbnRlcmZlcmluZyB3aXRoIGRlcHRoIGNhbGN1bGF0aW9ucy5cclxuICAgICAgICBncmlkSGVscGVyLnBvc2l0aW9uLnNldCgwLCAwLCAtMC4yKTsgIC8vIFNsaWdodGx5IGJlbG93IHk9MCB0byBhdm9pZCB6LWZpZ2h0aW5nIHdpdGggb3RoZXIgZ3JvdW5kIGVsZW1lbnRzLlxyXG4gICAgICAgIHNjZW5lLmFkZChncmlkSGVscGVyKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSB0cmlhbmdsZSBtZXNoIGJhc2VkIG9uIHRoZSBnaXZlbiBzaWRlIGxlbmd0aCBhbmQgY29sb3IvbWF0ZXJpYWwuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpZGUgLSBUaGUgbGVuZ3RoIG9mIGVhY2ggc2lkZSBvZiB0aGUgZXF1aWxhdGVyYWwgdHJpYW5nbGUuXHJcbiAgICAgKiBAcGFyYW0ge0NvbG9yIHwgTWF0ZXJpYWx9IGNvbG9yIC0gVGhlIGNvbG9yIG9yIG1hdGVyaWFsIHRvIGFwcGx5IHRvIHRoZSB0cmlhbmdsZS5cclxuICAgICAqIEByZXR1cm5zIHtNZXNofSBUaGUgY3JlYXRlZCB0cmlhbmdsZSBtZXNoLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGJ1aWxkVHJpYW5nbGVNZXNoKHNpZGU6IG51bWJlciwgY29sb3I6IENvbG9yIHwgTWF0ZXJpYWwpOiBNZXNoIHtcclxuICAgICAgICBjb25zdCBoZWlnaHQgPSBNYXRoLnNxcnQoMykgLyAyICogc2lkZTsgIC8vIENhbGN1bGF0ZSBoZWlnaHQgb2YgYW4gZXF1aWxhdGVyYWwgdHJpYW5nbGUuXHJcbiAgICAgICAgY29uc3QgZ2VvbWV0cnkgPSBuZXcgQnVmZmVyR2VvbWV0cnkoKTsgIC8vIFVzZSBCdWZmZXJHZW9tZXRyeSBmb3IgZWZmaWNpZW50IG1lbW9yeSB1c2FnZS5cclxuICAgICAgICBjb25zdCB2ZXJ0aWNlcyA9IG5ldyBGbG9hdDMyQXJyYXkoW1xyXG4gICAgICAgICAgICAtc2lkZSAvIDIsIC1oZWlnaHQgLyAyLCAwLCAgLy8gVmVydGV4IDFcclxuICAgICAgICAgICAgc2lkZSAvIDIsIC1oZWlnaHQgLyAyLCAwLCAgIC8vIFZlcnRleCAyXHJcbiAgICAgICAgICAgIDAsIGhlaWdodCAvIDIsIDAgICAgICAgICAgICAvLyBWZXJ0ZXggM1xyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIGdlb21ldHJ5LnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBuZXcgQnVmZmVyQXR0cmlidXRlKHZlcnRpY2VzLCAzKSk7ICAvLyBEZWZpbmUgdGhlIHBvc2l0aW9uIGF0dHJpYnV0ZS5cclxuXHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBjb2xvciBpbnN0YW5jZW9mIE1hdGVyaWFsID8gY29sb3IgOiBuZXcgTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiBjb2xvcn0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpOyAgLy8gQ3JlYXRlIGFuZCByZXR1cm4gdGhlIG1lc2guXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb2FkcyBhbiBpbWFnZSB0ZXh0dXJlIGFuZCBhcHBsaWVzIGl0IHRvIGEgbWVzaCBvZiB0aGUgc3BlY2lmaWVkIGRpbWVuc2lvbnMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGltYWdlIC0gVGhlIFVSTCBvZiB0aGUgaW1hZ2UgdGV4dHVyZS5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCAtIFRoZSB3aWR0aCBvZiB0aGUgcmVzdWx0aW5nIG1lc2guXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IC0gVGhlIGhlaWdodCBvZiB0aGUgcmVzdWx0aW5nIG1lc2guXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxNZXNoPn0gLSBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBjcmVhdGVkIG1lc2guXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgYnVpbGRJbWFnZU1lc2goaW1hZ2U6IHN0cmluZywgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiBQcm9taXNlPE1lc2g+IHtcclxuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IG5ldyBQbGFuZUdlb21ldHJ5KHdpZHRoLCBoZWlnaHQpOyAgLy8gQ3JlYXRlIGEgcGxhbmUgZ2VvbWV0cnkgd2l0aCB0aGUgZ2l2ZW4gZGltZW5zaW9ucy5cclxuXHJcbiAgICAgICAgLy8gV3JhcCB0aGUgdGV4dHVyZSBsb2FkaW5nIGluIGEgUHJvbWlzZVxyXG4gICAgICAgIGNvbnN0IHRleHR1cmUgPSBhd2FpdCBuZXcgUHJvbWlzZTxUZXh0dXJlPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIERyYXdVdGlscy50ZXh0dXJlTG9hZGVyLmxvYWQoaW1hZ2UsIHJlc29sdmUsIHVuZGVmaW5lZCwgcmVqZWN0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgTWVzaEJhc2ljTWF0ZXJpYWwoe1xyXG4gICAgICAgICAgICBtYXA6IHRleHR1cmUsXHJcbiAgICAgICAgICAgIHRyYW5zcGFyZW50OiB0cnVlLCAgLy8gQWxsb3cgZm9yIFBORyB0cmFuc3BhcmVuY3kuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIGJhY2tncm91bmQgbWVzaCB0byBhIGdpdmVuIG1lc2ggd2l0aCBhIHNwZWNpZmllZCBtYXRlcmlhbC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge01lc2h9IG1lc2ggLSBUaGUgbWVzaCB0byBhZGQgYSBiYWNrZ3JvdW5kIHRvLlxyXG4gICAgICogQHBhcmFtIHtWZWN0b3IyfSBwb3NpdGlvbiAtIFRoZSBwb3NpdGlvbiBvZiB0aGUgbWVzaC5cclxuICAgICAqIEBwYXJhbSB7TWVzaEJhc2ljTWF0ZXJpYWx9IG1hdGVyaWFsIC0gVGhlIG1hdGVyaWFsIHRvIHVzZSBmb3IgdGhlIGJhY2tncm91bmQuXHJcbiAgICAgKiBAcGFyYW0gcGFkZGluZyAtIFRoZSBwYWRkaW5nIHRvIGFkZCBhcm91bmQgdGhlIG1lc2guXHJcbiAgICAgKiBAcmV0dXJucyB7TWVzaH0gVGhlIGNyZWF0ZWQgYmFja2dyb3VuZCBtZXNoLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFkZEJhY2tncm91bmRNZXNoKG1lc2g6IE1lc2gsIHBvc2l0aW9uOiBWZWN0b3IyLCBtYXRlcmlhbDogTWVzaEJhc2ljTWF0ZXJpYWwsIHBhZGRpbmc6IG51bWJlciA9IDAuMDUpOiBNZXNoIHtcclxuICAgICAgICBtZXNoLmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpO1xyXG4gICAgICAgIGlmICghbWVzaC5nZW9tZXRyeS5ib3VuZGluZ0JveCkgdGhyb3cgbmV3IEVycm9yKFwiQm91bmRpbmcgYm94IG5vdCBmb3VuZFwiKTtcclxuICAgICAgICBjb25zdCBiYWNrZ3JvdW5kID0gRHJhd1V0aWxzLmJ1aWxkUXVhZHJpbGF0ZXJhbE1lc2goXHJcbiAgICAgICAgICAgIG1lc2guZ2VvbWV0cnkuYm91bmRpbmdCb3guZ2V0U2l6ZShuZXcgVmVjdG9yMygpKS54ICsgcGFkZGluZyxcclxuICAgICAgICAgICAgbWVzaC5nZW9tZXRyeS5ib3VuZGluZ0JveC5nZXRTaXplKG5ldyBWZWN0b3IzKCkpLnkgKyAwLjAzLCBtYXRlcmlhbCxcclxuICAgICAgICAgICAgbmV3IFZlY3RvcjIocG9zaXRpb24ueCArIG1lc2guZ2VvbWV0cnkuYm91bmRpbmdCb3guZ2V0U2l6ZShuZXcgVmVjdG9yMygpKS54IC8gMixcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uLnkgKyBtZXNoLmdlb21ldHJ5LmJvdW5kaW5nQm94LmdldFNpemUobmV3IFZlY3RvcjMoKSkueSAvIDIpKTtcclxuICAgICAgICBiYWNrZ3JvdW5kLnBvc2l0aW9uLnggPSBwb3NpdGlvbi54ICsgbWVzaC5nZW9tZXRyeS5ib3VuZGluZ0JveC5nZXRTaXplKG5ldyBWZWN0b3IzKCkpLnggLyAyO1xyXG4gICAgICAgIGJhY2tncm91bmQucG9zaXRpb24ueSA9IHBvc2l0aW9uLnkgKyBtZXNoLmdlb21ldHJ5LmJvdW5kaW5nQm94LmdldFNpemUobmV3IFZlY3RvcjMoKSkueSAvIDI7XHJcbiAgICAgICAgcmV0dXJuIGJhY2tncm91bmQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbGluZSBtZXNoIGJldHdlZW4gdHdvIHBvaW50cyB3aXRoIHRoZSBzcGVjaWZpZWQgY29sb3IuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtWZWN0b3IyfSB2MSAtIFRoZSBzdGFydCBwb2ludCBvZiB0aGUgbGluZS5cclxuICAgICAqIEBwYXJhbSB7VmVjdG9yMn0gdjIgLSBUaGUgZW5kIHBvaW50IG9mIHRoZSBsaW5lLlxyXG4gICAgICogQHBhcmFtIHtDb2xvcn0gY29sb3IgLSBUaGUgY29sb3Igb2YgdGhlIGxpbmUuXHJcbiAgICAgKiBAcmV0dXJucyB7TGluZX0gVGhlIGNyZWF0ZWQgbGluZSBtZXNoLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGJ1aWxkTGluZU1lc2godjE6IFZlY3RvcjIsIHYyOiBWZWN0b3IyLCBjb2xvcjogQ29sb3IpOiBMaW5lIHtcclxuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IG5ldyBCdWZmZXJHZW9tZXRyeSgpOyAgLy8gVXNlIEJ1ZmZlckdlb21ldHJ5IGZvciBlZmZpY2llbnQgbWVtb3J5IHVzYWdlLlxyXG4gICAgICAgIGNvbnN0IHZlcnRpY2VzID0gbmV3IEZsb2F0MzJBcnJheShbXHJcbiAgICAgICAgICAgIHYxLngsIHYxLnksIDAsXHJcbiAgICAgICAgICAgIHYyLngsIHYyLnksIDBcclxuICAgICAgICBdKTtcclxuICAgICAgICBnZW9tZXRyeS5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgbmV3IEJ1ZmZlckF0dHJpYnV0ZSh2ZXJ0aWNlcywgMykpOyAgLy8gRGVmaW5lIHRoZSBwb3NpdGlvbiBhdHRyaWJ1dGUuXHJcblxyXG4gICAgICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IExpbmVCYXNpY01hdGVyaWFsKHtjb2xvcjogY29sb3J9KTtcclxuICAgICAgICByZXR1cm4gbmV3IExpbmUoZ2VvbWV0cnksIG1hdGVyaWFsKTsgIC8vIENyZWF0ZSBhbmQgcmV0dXJuIHRoZSBsaW5lLlxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGlzcG9zZXMgb2YgdGhlIGdlb21ldHJ5IGFuZCBtYXRlcmlhbCBvZiBhIGxpc3Qgb2YgbWVzaGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Li4uTWVzaFtdfSBtZXNoZXMgLSBUaGUgbWVzaGVzIHRvIGRpc3Bvc2Ugb2YuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZGlzcG9zZU1lc2hlcyguLi5tZXNoZXM6IE1lc2hbXSk6IHZvaWQge1xyXG4gICAgICAgIG1lc2hlcy5mb3JFYWNoKG1lc2ggPT4gdGhpcy5kaXNwb3NlTWVzaChtZXNoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNwb3NlcyBvZiB0aGUgZ2VvbWV0cnkgYW5kIG1hdGVyaWFsIG9mIGEgc2luZ2xlIG1lc2guXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtNZXNofSBtZXNoIC0gVGhlIG1lc2ggdG8gZGlzcG9zZSBvZi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBkaXNwb3NlTWVzaChtZXNoOiBNZXNoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gRGlzcG9zZSBnZW9tZXRyeVxyXG4gICAgICAgIGlmIChtZXNoLmdlb21ldHJ5KSB7XHJcbiAgICAgICAgICAgIG1lc2guZ2VvbWV0cnkuZGlzcG9zZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRGlzcG9zZSBtYXRlcmlhbFxyXG4gICAgICAgIGlmIChtZXNoLm1hdGVyaWFsKSB7XHJcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG1lc2gubWF0ZXJpYWwpKSB7XHJcbiAgICAgICAgICAgICAgICBtZXNoLm1hdGVyaWFsLmZvckVhY2gobWF0ZXJpYWwgPT4gbWF0ZXJpYWwuZGlzcG9zZSgpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG1lc2gubWF0ZXJpYWwuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29udmVydHMgYSBudW1lcmljIHZhbHVlIHRvIGEgaGV4YWRlY2ltYWwgc3RyaW5nIHJlcHJlc2VudGF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAtIFRoZSBudW1iZXIgdG8gY29udmVydCB0byBoZXguXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgaGV4YWRlY2ltYWwgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyB0b0hleCh2YWx1ZTogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gYDB4JHt2YWx1ZS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKS5wYWRTdGFydCg0LCBcIjBcIil9YDtcclxuICAgIH1cclxufSIsIi8qKiBSZXByZXNlbnRzIHRoZSBkaWZmZXJlbnQgdHlwZXMgb2YgdXBncmFkZSBvcHRpb25zIGF2YWlsYWJsZS4gKi9cclxuZXhwb3J0IGVudW0gVXBncmFkZU9wdGlvblR5cGUge1xyXG4gICAgTm9uZSxcclxuICAgIE51bWJlclNlbGVjdGlvbiwgLy8gVXNlZCB0byBzZWxlY3QgYSBudW1iZXIgZnJvbSBhIGdpdmVuIHJhbmdlLlxyXG4gICAgU2luZ2xlVmFsdWVTZWxlY3Rpb24sIC8vIFVzZWQgdG8gc2VsZWN0IGEgc2luZ2xlIHZhbHVlIGZyb20gYSBsaXN0IG9mIHZhbHVlcy5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFVwZ3JhZGVPcHRpb24ge1xyXG4gICAgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xyXG4gICAgcmVhZG9ubHkgY29zdDogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgdHlwZTogVXBncmFkZU9wdGlvblR5cGU7XHJcbiAgICByZWFkb25seSBkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gICAgcmVhZG9ubHkgbmVzdGVkT3B0aW9uczogVXBncmFkZU9wdGlvbltdIHwgdW5kZWZpbmVkO1xyXG4gICAgcmVhZG9ubHkgb25JbmNyZWFzZTogKCkgPT4gbnVtYmVyIHwgYm9vbGVhbjtcclxuICAgIHJlYWRvbmx5IG9uRGVjcmVhc2U6ICgpID0+IG51bWJlciB8IGJvb2xlYW47XHJcbiAgICBjdXJyZW50VmFsdWU6IG51bWJlciB8IGJvb2xlYW47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgVXBncmFkZU9wdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSB0aGUgbmFtZSBvZiB0aGUgdXBncmFkZSBvcHRpb25cclxuICAgICAqIEBwYXJhbSBjb3N0IHRoZSBjb3N0IG9mIHRoZSB1cGdyYWRlIG9wdGlvblxyXG4gICAgICogQHBhcmFtIHR5cGUgdGhlIHR5cGUgb2YgdGhlIHVwZ3JhZGUgb3B0aW9uXHJcbiAgICAgKiBAcGFyYW0gZGVzY3JpcHRpb24gdGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB1cGdyYWRlIG9wdGlvblxyXG4gICAgICogQHBhcmFtIGN1cnJlbnRWYWx1ZVxyXG4gICAgICogQHBhcmFtIG5lc3RlZE9wdGlvbnNcclxuICAgICAqIEBwYXJhbSBvbkluY3JlYXNlXHJcbiAgICAgKiBAcGFyYW0gb25EZWNyZWFzZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgY29zdDogbnVtYmVyLCB0eXBlOiBVcGdyYWRlT3B0aW9uVHlwZSwgZGVzY3JpcHRpb246IHN0cmluZywgY3VycmVudFZhbHVlOiBudW1iZXIgfCBib29sZWFuLFxyXG4gICAgICAgICAgICAgICAgbmVzdGVkT3B0aW9ucz86IFVwZ3JhZGVPcHRpb25bXSwgb25JbmNyZWFzZT86ICgpID0+IG51bWJlciB8IGJvb2xlYW4sIG9uRGVjcmVhc2UgPzogKCkgPT4gbnVtYmVyIHwgYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5jb3N0ID0gY29zdDtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRWYWx1ZTtcclxuICAgICAgICB0aGlzLm5lc3RlZE9wdGlvbnMgPSBuZXN0ZWRPcHRpb25zO1xyXG4gICAgICAgIGlmICh0aGlzLnR5cGUgPT09IFVwZ3JhZGVPcHRpb25UeXBlLk51bWJlclNlbGVjdGlvbikge1xyXG4gICAgICAgICAgICBpZiAob25JbmNyZWFzZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkluY3JlYXNlID0gb25JbmNyZWFzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm9uSW5jcmVhc2UgaXMgcmVxdWlyZWQgZm9yIE51bWJlclNlbGVjdGlvbiB0eXBlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvbkRlY3JlYXNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uRGVjcmVhc2UgPSBvbkRlY3JlYXNlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwib25EZWNyZWFzZSBpcyByZXF1aXJlZCBmb3IgTnVtYmVyU2VsZWN0aW9uIHR5cGVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE51bWJlclNlbGVjdGlvbiBVcGdyYWRlT3B0aW9uLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlTnVtYmVyU2VsZWN0aW9uKG5hbWU6IHN0cmluZywgY29zdDogbnVtYmVyLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBjdXJyZW50VmFsdWU6IG51bWJlciwgb25JbmNyZWFzZTogKCkgPT4gbnVtYmVyIHwgYm9vbGVhbiwgb25EZWNyZWFzZTogKCkgPT4gbnVtYmVyIHwgYm9vbGVhbik6IFVwZ3JhZGVPcHRpb24ge1xyXG4gICAgICAgIHJldHVybiBuZXcgVXBncmFkZU9wdGlvbihuYW1lLCBjb3N0LCBVcGdyYWRlT3B0aW9uVHlwZS5OdW1iZXJTZWxlY3Rpb24sIGRlc2NyaXB0aW9uLCBjdXJyZW50VmFsdWUsIHVuZGVmaW5lZCwgb25JbmNyZWFzZSwgb25EZWNyZWFzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFNpbmdsZVZhbHVlU2VsZWN0aW9uIFVwZ3JhZGVPcHRpb24uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVhdGVTaW5nbGVWYWx1ZVNlbGVjdGlvbihuYW1lOiBzdHJpbmcsIGNvc3Q6IG51bWJlciwgZGVzY3JpcHRpb246IHN0cmluZywgY3VycmVudFZhbHVlOiBib29sZWFuKTogVXBncmFkZU9wdGlvbiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBVcGdyYWRlT3B0aW9uKG5hbWUsIGNvc3QsIFVwZ3JhZGVPcHRpb25UeXBlLlNpbmdsZVZhbHVlU2VsZWN0aW9uLCBkZXNjcmlwdGlvbiwgY3VycmVudFZhbHVlKTtcclxuICAgIH1cclxufSIsIi8qKlxyXG4gKiBBIGdlbmVyaWMgcXVldWUgZGF0YSBzdHJ1Y3R1cmUgd2l0aCBhIGNvbmZpZ3VyYWJsZSBtYXhpbXVtIHNpemUuXHJcbiAqIFN1cHBvcnRzIGJhc2ljIHF1ZXVlIG9wZXJhdGlvbnMgbGlrZSBlbnF1ZXVlLCBkZXF1ZXVlLCBhbmQgaW5zcGVjdGlvbi5cclxuICpcclxuICogQHRlbXBsYXRlIFQgVGhlIHR5cGUgb2YgZWxlbWVudHMgaW4gdGhlIHF1ZXVlLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFF1ZXVlPFQ+IHtcclxuICAgIHByaXZhdGUgaXRlbXM6IEFycmF5PFQ+O1xyXG4gICAgcHVibGljIHJlYWRvbmx5IG1heFNpemU6IG51bWJlcjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgaW5zdGFuY2Ugb2YgUXVldWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFttYXhTaXplPUluZmluaXR5XSAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0aGF0IHRoZSBxdWV1ZSBjYW4gaG9sZC5cclxuICAgICAqIEBwYXJhbSBpdGVtcyAtIFRoZSBpdGVtcyB0byBpbml0aWFsaXplIHRoZSBxdWV1ZSB3aXRoLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihtYXhTaXplOiBudW1iZXIgPSBJbmZpbml0eSwgLi4uaXRlbXM6IFRbXSkge1xyXG4gICAgICAgIHRoaXMuaXRlbXMgPSBpdGVtcztcclxuICAgICAgICB0aGlzLm1heFNpemUgPSBtYXhTaXplO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBpbnN0YW5jZSBvZiBRdWV1ZSB3aXRoIHRoZSBzcGVjaWZpZWQgaXRlbXMgYW5kIG1heGltdW0gc2l6ZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1RbXX0gaXRlbXMgLSBUaGUgaXRlbXMgdG8gaW5pdGlhbGl6ZSB0aGUgcXVldWUgd2l0aC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIG9mPFU+KC4uLml0ZW1zOiBVW10pOiBRdWV1ZTxVPiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWV1ZTxVPihJbmZpbml0eSwgLi4uaXRlbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29udmVydHMgdGhpcyBxdWV1ZSB0byBhbiBhcnJheS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7VFtdfSBBbiBhcnJheSBjb250YWluaW5nIHRoZSBpdGVtcyBpbiB0aGUgcXVldWUuXHJcbiAgICAgKi9cclxuICAgIHRvQXJyYXkoKTogVFtdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5zbGljZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhbiBpdGVtIHRvIHRoZSBlbmQgb2YgdGhlIHF1ZXVlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7VH0gaXRlbSAtIFRoZSBpdGVtIHRvIGFkZCB0byB0aGUgcXVldWUuXHJcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHF1ZXVlIGlzIGF0IGl0cyBtYXhpbXVtIGNhcGFjaXR5LlxyXG4gICAgICovXHJcbiAgICBlbnF1ZXVlKGl0ZW06IFQpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5pc0Z1bGwoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJRdWV1ZSBvdmVyZmxvdyBlcnJvcjogYXR0ZW1wdGluZyB0byBlbnF1ZXVlIHRvIGEgZnVsbCBxdWV1ZS5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaXRlbXMucHVzaChpdGVtKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgYW5kIHJldHVybnMgdGhlIGl0ZW0gYXQgdGhlIGZyb250IG9mIHRoZSBxdWV1ZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7VCB8IHVuZGVmaW5lZH0gVGhlIGl0ZW0gYXQgdGhlIGZyb250IG9mIHRoZSBxdWV1ZSwgb3IgdW5kZWZpbmVkIGlmIHRoZSBxdWV1ZSBpcyBlbXB0eS5cclxuICAgICAqL1xyXG4gICAgZGVxdWV1ZSgpOiBUIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5zaGlmdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2tzIGlmIHRoZSBxdWV1ZSBpcyBlbXB0eS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgcXVldWUgaXMgZW1wdHksIGZhbHNlIG90aGVyd2lzZS5cclxuICAgICAqL1xyXG4gICAgaXNFbXB0eSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5sZW5ndGggPT09IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgaWYgdGhlIHF1ZXVlIGlzIGZ1bGwuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHF1ZXVlIGhhcyByZWFjaGVkIGl0cyBtYXhpbXVtIHNpemUsIGZhbHNlIG90aGVyd2lzZS5cclxuICAgICAqL1xyXG4gICAgaXNGdWxsKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zLmxlbmd0aCA+PSB0aGlzLm1heFNpemU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgaXRlbXMgaW4gdGhlIHF1ZXVlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSBudW1iZXIgb2YgaXRlbXMgaW4gdGhlIHF1ZXVlLlxyXG4gICAgICovXHJcbiAgICBzaXplKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBhbGwgaXRlbXMgZnJvbSB0aGUgcXVldWUuXHJcbiAgICAgKi9cclxuICAgIGNsZWFyKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaXRlbXMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlcyB0aGUgaXRlbSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IHdpdGhvdXQgcmVtb3ZpbmcgaXQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IC0gVGhlIHplcm8tYmFzZWQgaW5kZXggb2YgdGhlIGl0ZW0gdG8gcmV0cmlldmUuXHJcbiAgICAgKiBAcmV0dXJucyB7VCB8IHVuZGVmaW5lZH0gVGhlIGl0ZW0gYXQgdGhlIHNwZWNpZmllZCBpbmRleCwgb3IgdW5kZWZpbmVkIGlmIHRoZSBpbmRleCBpcyBvdXQgb2YgYm91bmRzLlxyXG4gICAgICovXHJcbiAgICBnZXQoaW5kZXg6IG51bWJlcik6IFQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdGhpcy5pdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsgLy8gT3V0IG9mIGJvdW5kc1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5pdGVtc1tpbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGFuZCByZXR1cm5zIHRoZSBpdGVtIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IC0gVGhlIHplcm8tYmFzZWQgaW5kZXggb2YgdGhlIGl0ZW0gdG8gcmVtb3ZlLlxyXG4gICAgICogQHJldHVybnMge1QgfCB1bmRlZmluZWR9IFRoZSByZW1vdmVkIGl0ZW0sIG9yIHVuZGVmaW5lZCBpZiB0aGUgaW5kZXggaXMgb3V0IG9mIGJvdW5kcy5cclxuICAgICAqL1xyXG4gICAgcmVtb3ZlKGluZGV4OiBudW1iZXIpOiBUIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMuaXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7IC8vIE91dCBvZiBib3VuZHNcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMuc3BsaWNlKGluZGV4LCAxKVswXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGl0ZW0gYXQgdGhlIGZyb250IG9mIHRoZSBxdWV1ZSB3aXRob3V0IHJlbW92aW5nIGl0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtUIHwgdW5kZWZpbmVkfSBUaGUgaXRlbSBhdCB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlLCBvciB1bmRlZmluZWQgaWYgdGhlIHF1ZXVlIGlzIGVtcHR5LlxyXG4gICAgICovXHJcbiAgICBwZWVrKCk6IFQgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTW92ZXMgYSBzcGVjaWZpZWQgbnVtYmVyIG9mIGl0ZW1zIGZyb20gdGhpcyBxdWV1ZSB0byBhbm90aGVyIHF1ZXVlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7UXVldWU8VD59IHRvIC0gVGhlIGRlc3RpbmF0aW9uIHF1ZXVlLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtjb3VudD10aGlzLnNpemUoKV0gLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdG8gbW92ZS5cclxuICAgICAqL1xyXG4gICAgbW92ZVRvKHRvOiBRdWV1ZTxUPiwgY291bnQ6IG51bWJlciA9IHRoaXMuc2l6ZSgpKTogdm9pZCB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLm1pbihjb3VudCwgdG8ubWF4U2l6ZSk7ICsraSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0VtcHR5KCkgfHwgdG8uaXNGdWxsKCkpIGJyZWFrO1xyXG4gICAgICAgICAgICB0by5lbnF1ZXVlKHRoaXMuZGVxdWV1ZSgpISk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2tzIGlmIHRoZSBxdWV1ZSBjb250YWlucyB0aGUgc3BlY2lmaWVkIGl0ZW0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtUfSBpdGVtIC0gVGhlIGl0ZW0gdG8gc2VhcmNoIGZvci5cclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBpdGVtIGlzIGZvdW5kLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAgICAgKi9cclxuICAgIGNvbnRhaW5zKGl0ZW06IFQpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5pbmNsdWRlcyhpdGVtKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyBpZiBhbnkgaXRlbSBpbiB0aGUgcXVldWUgc2F0aXNmaWVzIHRoZSBwcm92aWRlZCBwcmVkaWNhdGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihUKTogYm9vbGVhbn0gcHJlZGljYXRlIC0gVGhlIHByZWRpY2F0ZSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIGl0ZW0uXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgcHJlZGljYXRlIGlzIHNhdGlzZmllZCBieSBhbnkgaXRlbSwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gICAgICovXHJcbiAgICBzb21lKHByZWRpY2F0ZTogKGl0ZW06IFQpID0+IGJvb2xlYW4pOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5zb21lKHByZWRpY2F0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgaWYgYWxsIGl0ZW1zIGluIHRoZSBxdWV1ZSBzYXRpc2Z5IHRoZSBwcm92aWRlZCBwcmVkaWNhdGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihUKTogYm9vbGVhbn0gcHJlZGljYXRlIC0gVGhlIHByZWRpY2F0ZSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIGl0ZW0uXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgcHJlZGljYXRlIGlzIHNhdGlzZmllZCBieSBhbGwgaXRlbXMsIGZhbHNlIG90aGVyd2lzZS5cclxuICAgICAqL1xyXG4gICAgZXZlcnkocHJlZGljYXRlOiAoaXRlbTogVCkgPT4gYm9vbGVhbik6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zLmV2ZXJ5KHByZWRpY2F0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHF1ZXVlIGNvbnRhaW5pbmcgb25seSB0aGUgaXRlbXMgdGhhdCBzYXRpc2Z5IHRoZSBwcm92aWRlZCBwcmVkaWNhdGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihUKTogYm9vbGVhbn0gcHJlZGljYXRlIC0gVGhlIHByZWRpY2F0ZSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIGl0ZW0uXHJcbiAgICAgKiBAcmV0dXJucyB7UXVldWU8VD59IEEgbmV3IHF1ZXVlIGNvbnRhaW5pbmcgb25seSB0aGUgaXRlbXMgdGhhdCBzYXRpc2Z5IHRoZSBwcmVkaWNhdGUuXHJcbiAgICAgKi9cclxuICAgIGZpbHRlcihwcmVkaWNhdGU6IChpdGVtOiBUKSA9PiBib29sZWFuKTogUXVldWU8VD4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVldWU8VD4odGhpcy5tYXhTaXplLCAuLi50aGlzLml0ZW1zLmZpbHRlcihwcmVkaWNhdGUpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBzbGljZSBvZiB0aGUgcXVldWUgYXMgYSBuZXcgcXVldWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD0wXSAtIFRoZSBpbmRleCBhdCB3aGljaCB0byBiZWdpbiB0aGUgc2xpY2UuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW2VuZD10aGlzLnNpemUoKV0gLSBUaGUgaW5kZXggYXQgd2hpY2ggdG8gZW5kIHRoZSBzbGljZS5cclxuICAgICAqIEByZXR1cm5zIHtRdWV1ZTxUPn0gQSBuZXcgcXVldWUgY29udGFpbmluZyB0aGUgc3BlY2lmaWVkIHNsaWNlIG9mIGl0ZW1zLlxyXG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBzdGFydCBvciBlbmQgaW5kZXggaXMgb3V0IG9mIGJvdW5kcy5cclxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgc3RhcnQgaW5kZXggaXMgZ3JlYXRlciB0aGFuIHRoZSBlbmQgaW5kZXguXHJcbiAgICAgKi9cclxuICAgIHNsaWNlKHN0YXJ0OiBudW1iZXIgPSAwLCBlbmQ6IG51bWJlciA9IHRoaXMuc2l6ZSgpKTogUXVldWU8VD4ge1xyXG4gICAgICAgIGlmICh0aGlzLnNpemUoKSA9PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVldWU8VD4odGhpcy5tYXhTaXplKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLnNpemUoKSB8fCBlbmQgPCAwIHx8IGVuZCA+IHRoaXMuc2l6ZSgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluZGV4IG91dCBvZiBib3VuZHMgZXJyb3I6IGF0dGVtcHRpbmcgdG8gc2xpY2UgcXVldWUgb3V0c2lkZSBvZiBib3VuZHMuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RhcnQgPiBlbmQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpbmRleCBlcnJvcjogc3RhcnQgaW5kZXggbXVzdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gZW5kIGluZGV4LlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBRdWV1ZTxUPih0aGlzLm1heFNpemUsIC4uLnRoaXMuaXRlbXMuc2xpY2Uoc3RhcnQsIGVuZCkpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW4gaXRlcmF0b3IgZm9yIHRoZSBxdWV1ZSwgYWxsb3dpbmcgaXQgdG8gYmUgdXNlZCBpbiBmb3IuLi5vZiBsb29wcy5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7SXRlcmF0b3I8VD59IEFuIGl0ZXJhdG9yIGZvciB0aGUgcXVldWUuXHJcbiAgICAgKi9cclxuICAgIFtTeW1ib2wuaXRlcmF0b3JdKCk6IEl0ZXJhdG9yPFQ+IHtcclxuICAgICAgICBsZXQgcG9pbnRlciA9IDA7XHJcbiAgICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLml0ZW1zO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuZXh0KCk6IEl0ZXJhdG9yUmVzdWx0PFQ+IHtcclxuICAgICAgICAgICAgICAgIGlmIChwb2ludGVyIDwgaXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtkb25lOiBmYWxzZSwgdmFsdWU6IGl0ZW1zW3BvaW50ZXIrK119O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge2RvbmU6IHRydWUsIHZhbHVlOiBudWxsfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBxdWV1ZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfSBBIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgcXVldWUuXHJcbiAgICAgKi9cclxuICAgIHRvU3RyaW5nKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXMudG9TdHJpbmcoKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQge01lc2gsIE1lc2hCYXNpY01hdGVyaWFsLCBTY2VuZX0gZnJvbSBcInRocmVlXCI7XHJcbmltcG9ydCB7Q29tcHV0ZXJDaGlwfSBmcm9tIFwiLi4vLi4vQ29tcHV0ZXJDaGlwXCI7XHJcbmltcG9ydCB7RHJhd1V0aWxzfSBmcm9tIFwiLi4vLi4vLi4vRHJhd1V0aWxzXCI7XHJcbmltcG9ydCB7SW5zdHJ1Y3Rpb259IGZyb20gXCIuLi8uLi8uLi9kYXRhU3RydWN0dXJlcy9JbnN0cnVjdGlvblwiO1xyXG5cclxuLyoqXHJcbiAqIEFuIGFic3RyYWN0IGNsYXNzIHJlcHJlc2VudGluZyBhIG1hY3JvIGNvbXBvbmVudCBvZiBhIGNvbXB1dGVyIGNoaXAgd2l0aGluIGEgc2ltdWxhdGlvbi5cclxuICogVGhpcyBjbGFzcyBwcm92aWRlcyBhIGNvbW1vbiBzdHJ1Y3R1cmUgYW5kIGZ1bmN0aW9uYWxpdHkgZm9yIHZhcmlvdXMgbWFjcm8gZGF0YVN0cnVjdHVyZXNcclxuICogbGlrZSBBTFVzLCBtZW1vcnkgY2VsbHMsIGFuZCBvdGhlcnMgd2l0aGluIHRoZSBjaGlwIHNpbXVsYXRpb24uXHJcbiAqL1xyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ29tcHV0ZXJDaGlwTWFjcm8ge1xyXG4gICAgLyoqIFRoZSBUaHJlZS5qcyBzY2VuZSB0byB3aGljaCB0aGUgbWFjcm8gY29tcG9uZW50IGJlbG9uZ3MuICovXHJcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgc2NlbmU6IFNjZW5lO1xyXG5cclxuICAgIC8qKiBUaGUgcGFyZW50IENvbXB1dGVyQ2hpcCBvYmplY3QgdGhhdCB0aGlzIG1hY3JvIGNvbXBvbmVudCBpcyBhIHBhcnQgb2YuICovXHJcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgcGFyZW50OiBDb21wdXRlckNoaXA7XHJcblxyXG4gICAgLyoqIFRoZSBwb3NpdGlvbiBvZiB0aGUgbWFjcm8gY29tcG9uZW50IHdpdGhpbiB0aGUgc2NlbmUuICovXHJcbiAgICBwcm90ZWN0ZWQgcG9zaXRpb246IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfTtcclxuXHJcbiAgICAvKiogVGhlIGhlaWdodCBhbmQgd2lkdGggb2YgdGhlIG1hY3JvIGNvbXBvbmVudC4gKi9cclxuICAgIGhlaWdodDogbnVtYmVyO1xyXG4gICAgd2lkdGg6IG51bWJlcjtcclxuXHJcbiAgICAvKiogU3RhdGljIG1lc2hlcyB0aGF0IGRvIG5vdCBjaGFuZ2UgZHVyaW5nIHRoZSBzaW11bGF0aW9uLiAqL1xyXG4gICAgcHJvdGVjdGVkIHN0YXRpY01lc2hlczogTWVzaFtdID0gW107XHJcblxyXG4gICAgLyoqIE1lc2hlcyB0aGF0IG1heSBjaGFuZ2Ugb3IgdXBkYXRlIGR1cmluZyB0aGUgc2ltdWxhdGlvbi4gKi9cclxuICAgIHByb3RlY3RlZCBsaXZlTWVzaGVzOiBNZXNoW10gPSBbXTtcclxuXHJcbiAgICAvKiogTWVzaGVzIHVzZWQgdG8gaGlnaGxpZ2h0IHBhcnRzIG9mIHRoZSBjb21wb25lbnQgZHVyaW5nIGNlcnRhaW4gb3BlcmF0aW9ucy4gKi9cclxuICAgIHByb3RlY3RlZCBoaWdobGlnaHRNZXNoZXM6IE1lc2hbXSA9IFtdO1xyXG5cclxuICAgIC8qKiBNYXRlcmlhbHMgdXNlZCBmb3IgZGlmZmVyZW50IHBhcnRzIG9mIHRoZSBtYWNybyBkYXRhU3RydWN0dXJlcy4gKi9cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgQk9EWV9NQVRFUklBTDogTWVzaEJhc2ljTWF0ZXJpYWwgPSBuZXcgTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiBEcmF3VXRpbHMuQ09MT1JfUEFMRVRURS5nZXQoXCJEQVJLXCIpfSk7XHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIHJlYWRvbmx5IENPTVBPTkVOVF9NQVRFUklBTDogTWVzaEJhc2ljTWF0ZXJpYWwgPSBuZXcgTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiBEcmF3VXRpbHMuQ09MT1JfUEFMRVRURS5nZXQoXCJEQVJLRVJcIil9KTtcclxuICAgIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgVEVYVF9NQVRFUklBTDogTWVzaEJhc2ljTWF0ZXJpYWwgPSBuZXcgTWVzaEJhc2ljTWF0ZXJpYWwoe2NvbG9yOiBEcmF3VXRpbHMuQ09MT1JfUEFMRVRURS5nZXQoXCJMSUdIVFwiKX0pO1xyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBNRU1PUllfTUFURVJJQUw6IE1lc2hCYXNpY01hdGVyaWFsID0gbmV3IE1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogRHJhd1V0aWxzLkNPTE9SX1BBTEVUVEUuZ2V0KFwiTElHSFRfR1JFRU5cIil9KTtcclxuICAgIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgQUxVX01BVEVSSUFMOiBNZXNoQmFzaWNNYXRlcmlhbCA9IG5ldyBNZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IERyYXdVdGlscy5DT0xPUl9QQUxFVFRFLmdldChcIkxJR0hUX1JFRFwiKX0pO1xyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBCUkFOQ0hfTUFURVJJQUw6IE1lc2hCYXNpY01hdGVyaWFsID0gbmV3IE1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogRHJhd1V0aWxzLkNPTE9SX1BBTEVUVEUuZ2V0KFwiTElHSFRfQkxVRVwiKX0pO1xyXG5cclxuICAgIC8qKiBUaGUgc2l6ZSBvZiB0aGUgdGV4dCB1c2VkIHdpdGhpbiB0aGUgbWFjcm8gY29tcG9uZW50LiAqL1xyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyByZWFkb25seSBURVhUX1NJWkU6IG51bWJlciA9IDAuMDU7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENvbXB1dGVyQ2hpcE1hY3JvIGluc3RhbmNlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwYXJlbnQgVGhlIHBhcmVudCBDb21wdXRlckNoaXAgaW5zdGFuY2UuXHJcbiAgICAgKiBAcGFyYW0geE9mZnNldCBUaGUgeC1vZmZzZXQgZnJvbSB0aGUgcGFyZW50J3MgcG9zaXRpb24gdG8gcGxhY2UgdGhpcyBjb21wb25lbnQuXHJcbiAgICAgKiBAcGFyYW0geU9mZnNldCBUaGUgeS1vZmZzZXQgZnJvbSB0aGUgcGFyZW50J3MgcG9zaXRpb24gdG8gcGxhY2UgdGhpcyBjb21wb25lbnQuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3RvcihwYXJlbnQ6IENvbXB1dGVyQ2hpcCwgeE9mZnNldDogbnVtYmVyLCB5T2Zmc2V0OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcclxuICAgICAgICB0aGlzLnNjZW5lID0gcGFyZW50LnNjZW5lO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB7eDogcGFyZW50LnBvc2l0aW9uLnggKyB4T2Zmc2V0LCB5OiBwYXJlbnQucG9zaXRpb24ueSArIHlPZmZzZXR9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBBYnN0cmFjdCBtZXRob2QgdG8gdXBkYXRlIHRoZSBzdGF0ZSBvZiB0aGUgbWFjcm8gY29tcG9uZW50LiAqL1xyXG4gICAgcHVibGljIGFic3RyYWN0IHVwZGF0ZSgpOiB2b2lkO1xyXG5cclxuICAgIC8qKiBBYnN0cmFjdCBtZXRob2QgdG8gaW5pdGlhbGl6ZSB0aGUgZ3JhcGhpY3Mgb2YgdGhlIG1hY3JvIGNvbXBvbmVudC4gKi9cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBpbml0aWFsaXplR3JhcGhpY3MoKTogdm9pZDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc3Bvc2VzIG9mIHRoZSBtYWNybyBjb21wb25lbnQgYnkgcmVtb3ZpbmcgYW5kIGRpc3Bvc2luZyBhbGwgYXNzb2NpYXRlZCBtZXNoZXMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2xlYXJIaWdobGlnaHRzKCk7XHJcbiAgICAgICAgWy4uLnRoaXMuc3RhdGljTWVzaGVzLCAuLi50aGlzLmxpdmVNZXNoZXMsIC4uLnRoaXMuaGlnaGxpZ2h0TWVzaGVzXS5mb3JFYWNoKG1lc2ggPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZShtZXNoKTtcclxuICAgICAgICAgICAgbWVzaC5nZW9tZXRyeS5kaXNwb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgc3RhdGljIG1lc2ggdG8gdGhlIG1hY3JvIGNvbXBvbmVudCBhbmQgdGhlIHNjZW5lLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBtZXNoIFRoZSBtZXNoIHRvIGFkZC5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGFkZFN0YXRpY01lc2gobWVzaDogTWVzaCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc3RhdGljTWVzaGVzLnB1c2gobWVzaCk7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQobWVzaCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIG11bHRpcGxlIHN0YXRpYyBtZXNoZXMgdG8gdGhlIG1hY3JvIGNvbXBvbmVudCBhbmQgdGhlIHNjZW5lLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBtZXNoZXMgVGhlIG1lc2hlcyB0byBhZGQuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBhZGRTdGF0aWNNZXNoZXMoLi4ubWVzaGVzOiBNZXNoW10pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnN0YXRpY01lc2hlcy5wdXNoKC4uLm1lc2hlcyk7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQoLi4ubWVzaGVzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSBsaXZlIG1lc2ggdG8gdGhlIG1hY3JvIGNvbXBvbmVudCBhbmQgdGhlIHNjZW5lLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBtZXNoIFRoZSBtZXNoIHRvIGFkZC5cclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGFkZExpdmVNZXNoKG1lc2g6IE1lc2gpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmxpdmVNZXNoZXMucHVzaChtZXNoKTtcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZChtZXNoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSBoaWdobGlnaHQgbWVzaCB0byB0aGUgbWFjcm8gY29tcG9uZW50IGFuZCB0aGUgc2NlbmUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG1lc2ggVGhlIG1lc2ggdG8gYWRkLlxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgYWRkSGlnaGxpZ2h0TWVzaChtZXNoOiBNZXNoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5oaWdobGlnaHRNZXNoZXMucHVzaChtZXNoKTtcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZChtZXNoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENsZWFycyBhbGwgaGlnaGxpZ2h0IG1lc2hlcyBmcm9tIHRoZSBtYWNybyBjb21wb25lbnQgYW5kIHRoZSBzY2VuZS5cclxuICAgICAqL1xyXG4gICAgY2xlYXJIaWdobGlnaHRzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0TWVzaGVzLmZvckVhY2gobWVzaCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUucmVtb3ZlKG1lc2gpO1xyXG4gICAgICAgICAgICBtZXNoLmdlb21ldHJ5LmRpc3Bvc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmhpZ2hsaWdodE1lc2hlcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBpbnN0cnVjdGlvbk1hdGVyaWFsKGluc3RydWN0aW9uOiBJbnN0cnVjdGlvbik6IE1lc2hCYXNpY01hdGVyaWFsIHtcclxuICAgICAgICBpZiAoaW5zdHJ1Y3Rpb24uaXNNZW1vcnlPcGVyYXRpb24oKSlcclxuICAgICAgICAgICAgcmV0dXJuIENvbXB1dGVyQ2hpcE1hY3JvLk1FTU9SWV9NQVRFUklBTDtcclxuICAgICAgICBpZiAoaW5zdHJ1Y3Rpb24uaXNBcml0aG1ldGljKCkpXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wdXRlckNoaXBNYWNyby5BTFVfTUFURVJJQUw7XHJcbiAgICAgICAgcmV0dXJuIENvbXB1dGVyQ2hpcE1hY3JvLkJSQU5DSF9NQVRFUklBTDtcclxuICAgIH1cclxufSIsImltcG9ydCB7Q29tcHV0ZXJDaGlwTWFjcm99IGZyb20gXCIuL0NvbXB1dGVyQ2hpcE1hY3JvXCI7XHJcbmltcG9ydCB7TWVzaCwgUGxhbmVHZW9tZXRyeX0gZnJvbSBcInRocmVlXCI7XHJcbmltcG9ydCB7UXVldWV9IGZyb20gXCIuLi8uLi8uLi9kYXRhU3RydWN0dXJlcy9RdWV1ZVwiO1xyXG5pbXBvcnQge0luc3RydWN0aW9ufSBmcm9tIFwiLi4vLi4vLi4vZGF0YVN0cnVjdHVyZXMvSW5zdHJ1Y3Rpb25cIjtcclxuaW1wb3J0IHtDb21wdXRlckNoaXB9IGZyb20gXCIuLi8uLi9Db21wdXRlckNoaXBcIjtcclxuaW1wb3J0IHtEcmF3VXRpbHN9IGZyb20gXCIuLi8uLi8uLi9EcmF3VXRpbHNcIjtcclxuaW1wb3J0ICogYXMgQnVmZmVyR2VvbWV0cnlVdGlscyBmcm9tIFwidGhyZWUvZXhhbXBsZXMvanNtL3V0aWxzL0J1ZmZlckdlb21ldHJ5VXRpbHMuanNcIjtcclxuXHJcbi8qKlxyXG4gKiBBbiBhYnN0cmFjdCBjbGFzcyByZXByZXNlbnRpbmcgYSBidWZmZXIgZm9yIHN0b3JpbmcgaW5zdHJ1Y3Rpb25zIHdpdGhpbiBhIGNvbXB1dGVyIGNoaXAgc2ltdWxhdGlvbi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBJbnN0cnVjdGlvbkJ1ZmZlciBleHRlbmRzIENvbXB1dGVyQ2hpcE1hY3JvIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQlVGRkVSX0hFSUdIVDogbnVtYmVyID0gMC4xMTtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQlVGRkVSX0JBU0VfV0lEVEg6IG51bWJlciA9IDAuODtcclxuICAgIHN0YXRpYyByZWFkb25seSBJTk5FUl9TUEFDSU5HID0gMC4wMTtcclxuICAgIHByb3RlY3RlZCByZWFkb25seSBub09wTWVzaDogTWVzaDtcclxuICAgIHByb3RlY3RlZCByZWFkb25seSBidWZmZXJIaWdobGlnaHRHZW9tZXRyeTogUGxhbmVHZW9tZXRyeTtcclxuXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IHNwYWNpbmc6IG51bWJlcjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgcmVjdGFuZ2xlU2l6ZTogbnVtYmVyO1xyXG4gICAgcHJvdGVjdGVkIGJ1ZmZlck1lc2hPZmZzZXRzOiBudW1iZXJbXSA9IFtdO1xyXG4gICAgaGlnaGxpZ2h0ZWRCdWZmZXJNZXNoZXM6IG51bWJlcltdID0gW107XHJcblxyXG4gICAgcHVibGljIHJlYWRvbmx5IHNpemU6IG51bWJlcjtcclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgc3RvcmVkSW5zdHJ1Y3Rpb25zOiBRdWV1ZTxJbnN0cnVjdGlvbj47XHJcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgcmV2ZXJzZWQ6IGJvb2xlYW47XHJcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgaG9yaXpvbnRhbDogYm9vbGVhbjtcclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVhZHlUb0JlUmVhZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJvdGVjdGVkIHJlYWRUaW1lb3V0OiBudW1iZXIgPSAwO1xyXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IGRlbGF5OiBudW1iZXI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IEluc3RydWN0aW9uQnVmZmVyIGluc3RhbmNlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwYXJlbnQgVGhlIHBhcmVudCBDb21wdXRlckNoaXAgaW5zdGFuY2UuXHJcbiAgICAgKiBAcGFyYW0gc2l6ZSBUaGUgc2l6ZSBvZiB0aGUgaW5zdHJ1Y3Rpb24gYnVmZmVyLlxyXG4gICAgICogQHBhcmFtIHhPZmZzZXQgVGhlIHgtb2Zmc2V0IGZyb20gdGhlIHBhcmVudCdzIHBvc2l0aW9uIHRvIHBsYWNlIHRoaXMgY29tcG9uZW50LlxyXG4gICAgICogQHBhcmFtIHlPZmZzZXQgVGhlIHktb2Zmc2V0IGZyb20gdGhlIHBhcmVudCdzIHBvc2l0aW9uIHRvIHBsYWNlIHRoaXMgY29tcG9uZW50LlxyXG4gICAgICogQHBhcmFtIGRlbGF5IFdoZXRoZXIgdGhlIGluc3RydWN0aW9uIGJ1ZmZlciBoYXMgbm8gZGVsYXkuXHJcbiAgICAgKiBAcGFyYW0gcmV2ZXJzZWQgV2hldGhlciB0aGUgaW5zdHJ1Y3Rpb24gYnVmZmVyIGlzIHJldmVyc2VkLlxyXG4gICAgICogQHBhcmFtIGhvcml6b250YWwgV2hldGhlciB0aGUgaW5zdHJ1Y3Rpb24gYnVmZmVyIGlzIG9yaWVudGVkIGhvcml6b250YWxseS5cclxuICAgICAqIEBwYXJhbSBidWZmZXJXaWR0aCBUaGUgd2lkdGggb2YgdGhlIGluc3RydWN0aW9uIGJ1ZmZlci5cclxuICAgICAqIEBwYXJhbSBzcGFjaW5nIFRoZSBzcGFjaW5nIGJldHdlZW4gaW5zdHJ1Y3Rpb25zIGluIHRoZSBidWZmZXIuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHBhcmVudDogQ29tcHV0ZXJDaGlwLCBzaXplOiBudW1iZXIsIHhPZmZzZXQ6IG51bWJlciA9IDAsIHlPZmZzZXQ6IG51bWJlciA9IDAsIGRlbGF5OiBudW1iZXIgPSAwLFxyXG4gICAgICAgICAgICAgICAgcmV2ZXJzZWQ6IGJvb2xlYW4gPSBmYWxzZSwgaG9yaXpvbnRhbDogYm9vbGVhbiA9IGZhbHNlLCBidWZmZXJXaWR0aDogbnVtYmVyID0gSW5zdHJ1Y3Rpb25CdWZmZXIuQlVGRkVSX0JBU0VfV0lEVEgsXHJcbiAgICAgICAgICAgICAgICBzcGFjaW5nOiBudW1iZXIgPSBJbnN0cnVjdGlvbkJ1ZmZlci5JTk5FUl9TUEFDSU5HKSB7XHJcbiAgICAgICAgc3VwZXIocGFyZW50LCB4T2Zmc2V0LCB5T2Zmc2V0KTtcclxuICAgICAgICB0aGlzLnN0b3JlZEluc3RydWN0aW9ucyA9IG5ldyBRdWV1ZTxJbnN0cnVjdGlvbj4oc2l6ZSk7XHJcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcclxuICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XHJcbiAgICAgICAgdGhpcy5yZXZlcnNlZCA9IHJldmVyc2VkO1xyXG4gICAgICAgIHRoaXMuaG9yaXpvbnRhbCA9IGhvcml6b250YWw7XHJcbiAgICAgICAgY29uc3Qgc3BhY2VOZWVkZWQgPSBJbnN0cnVjdGlvbkJ1ZmZlci5CVUZGRVJfSEVJR0hUICogc2l6ZSArIEluc3RydWN0aW9uQnVmZmVyLklOTkVSX1NQQUNJTkcgKiAoc2l6ZSAtIDEpO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB0aGlzLmhvcml6b250YWwgPyBzcGFjZU5lZWRlZCA6IGJ1ZmZlcldpZHRoO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5ob3Jpem9udGFsID8gYnVmZmVyV2lkdGggOiBzcGFjZU5lZWRlZDtcclxuICAgICAgICB0aGlzLnNwYWNpbmcgPSBzcGFjaW5nO1xyXG5cclxuICAgICAgICBjb25zdCB0b3RhbFNwYWNpbmcgPSB0aGlzLnNwYWNpbmcgKiAodGhpcy5zaXplIC0gMSk7XHJcbiAgICAgICAgdGhpcy5yZWN0YW5nbGVTaXplID0gKCh0aGlzLmhvcml6b250YWwgPyB0aGlzLndpZHRoIDogdGhpcy5oZWlnaHQpIC0gdG90YWxTcGFjaW5nKSAvIHRoaXMuc2l6ZTtcclxuXHJcbiAgICAgICAgdGhpcy5ub09wTWVzaCA9IERyYXdVdGlscy5idWlsZFRleHRNZXNoKFwiTk9QXCIsIDAsIDAsIENvbXB1dGVyQ2hpcE1hY3JvLlRFWFRfU0laRSxcclxuICAgICAgICAgICAgQ29tcHV0ZXJDaGlwTWFjcm8uQk9EWV9NQVRFUklBTCwgdHJ1ZSwgdGhpcy5ob3Jpem9udGFsID8gTWF0aC5QSSAvIDIgOiAwKTtcclxuICAgICAgICB0aGlzLmJ1ZmZlckhpZ2hsaWdodEdlb21ldHJ5ID0gbmV3IFBsYW5lR2VvbWV0cnkodGhpcy5ob3Jpem9udGFsID8gdGhpcy5yZWN0YW5nbGVTaXplIDpcclxuICAgICAgICAgICAgdGhpcy53aWR0aCwgdGhpcy5ob3Jpem9udGFsID8gdGhpcy5oZWlnaHQgOiB0aGlzLnJlY3RhbmdsZVNpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgZGltZW5zaW9ucyBvZiB0aGUgaW5zdHJ1Y3Rpb24gYnVmZmVyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBzaXplIFRoZSBzaXplIG9mIHRoZSBpbnN0cnVjdGlvbiBidWZmZXIuXHJcbiAgICAgKiBAcGFyYW0gaG9yaXpvbnRhbCBXaGV0aGVyIHRoZSBpbnN0cnVjdGlvbiBidWZmZXIgaXMgb3JpZW50ZWQgaG9yaXpvbnRhbGx5LlxyXG4gICAgICogQHBhcmFtIHNwYWNpbmcgVGhlIHNwYWNpbmcgYmV0d2VlbiBpbnN0cnVjdGlvbnMgaW4gdGhlIGJ1ZmZlci5cclxuICAgICAqIEByZXR1cm5zIFRoZSBkaW1lbnNpb25zIG9mIHRoZSBpbnN0cnVjdGlvbiBidWZmZXIuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZGltZW5zaW9ucyhzaXplOiBudW1iZXIsIGhvcml6b250YWw6IGJvb2xlYW4sIHNwYWNpbmc6IG51bWJlciA9IEluc3RydWN0aW9uQnVmZmVyLklOTkVSX1NQQUNJTkcpOiB7XHJcbiAgICAgICAgd2lkdGg6IG51bWJlcixcclxuICAgICAgICBoZWlnaHQ6IG51bWJlclxyXG4gICAgfSB7XHJcbiAgICAgICAgY29uc3Qgc3BhY2VOZWVkZWQgPSBJbnN0cnVjdGlvbkJ1ZmZlci5CVUZGRVJfSEVJR0hUICogc2l6ZSArIHNwYWNpbmcgKiAoc2l6ZSAtIDEpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdpZHRoOiBob3Jpem9udGFsID8gc3BhY2VOZWVkZWQgOiBJbnN0cnVjdGlvbkJ1ZmZlci5CVUZGRVJfQkFTRV9XSURUSCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBob3Jpem9udGFsID8gSW5zdHJ1Y3Rpb25CdWZmZXIuQlVGRkVSX0JBU0VfV0lEVEggOiBzcGFjZU5lZWRlZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBwb3NpdGlvbiBvZiB0aGUgaW5zdHJ1Y3Rpb24gYnVmZmVyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwb3NpdGlvbiBUaGUgbmV3IHBvc2l0aW9uIG9mIHRoZSBpbnN0cnVjdGlvbiBidWZmZXJcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFBvc2l0aW9uKHBvc2l0aW9uOiBbbnVtYmVyLCBudW1iZXJdKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHt4OiBwb3NpdGlvblswXSwgeTogcG9zaXRpb25bMV19O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBpbnN0cnVjdGlvbiBidWZmZXIgaXMgZnVsbC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGlzRnVsbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdG9yZWRJbnN0cnVjdGlvbnMuc2l6ZSgpID09PSB0aGlzLnNpemU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhcnMgdGhlIGluc3RydWN0aW9uIGJ1ZmZlci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc3RvcmVkSW5zdHJ1Y3Rpb25zLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5zaGlmdE1lc2hlc0Rvd24oMSk7XHJcbiAgICAgICAgdGhpcy5jbGVhckhpZ2hsaWdodHMoKTtcclxuICAgICAgICB0aGlzLnJlYWR5VG9CZVJlYWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERldGVybWluZXMgd2hldGhlciB0aGUgaW5zdHJ1Y3Rpb24gYnVmZmVyIGlzIHJlYWR5IHRvIGJlIHJlYWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpc1JlYWR5VG9CZVJlYWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGVsYXkgPT0gMClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gZGVsYXkgaW5zdHJ1Y3Rpb24gYnVmZmVycyBhcmUgYWx3YXlzIHJlYWR5IHRvIGJlIHJlYWRcIik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZHlUb0JlUmVhZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFBlZWtzIGF0IHRoZSBuZXh0IGluc3RydWN0aW9uIGluIHRoZSBpbnN0cnVjdGlvbiBidWZmZXIuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBwZWVrKCk6IEluc3RydWN0aW9uIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICB0aGlzLmNsZWFySGlnaGxpZ2h0cygpO1xyXG4gICAgICAgIGlmICh0aGlzLnN0b3JlZEluc3RydWN0aW9ucy5wZWVrKCkpXHJcbiAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0QnVmZmVyKDApO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0b3JlZEluc3RydWN0aW9ucy5wZWVrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBc2tzIGZvciBpbnN0cnVjdGlvbnMgZnJvbSB0aGUgcGFyZW50IGNvbXB1dGVyIGNoaXAuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNoaXAgVGhlIHBhcmVudCBjb21wdXRlciBjaGlwLlxyXG4gICAgICogQHBhcmFtIG4gVGhlIG51bWJlciBvZiBpbnN0cnVjdGlvbnMgdG8gYXNrIGZvci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFza0Zvckluc3RydWN0aW9ucyhjaGlwOiBDb21wdXRlckNoaXAsIG46IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmRlbGF5ID09IDApXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZXJlIGlzIG5vIG5lZWQgdG8gYXNrIGZvciBpbnN0cnVjdGlvbnMgd2hlbiB0aGVyZSBpcyBubyBkZWxheVwiKTtcclxuICAgICAgICBpZiAodGhpcy5yZWFkVGltZW91dCA+IDApXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyArK2kpXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0b3JlZEluc3RydWN0aW9ucy5nZXQoaSkpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZ2hsaWdodEJ1ZmZlcihpKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWFkVGltZW91dCA9IGNoaXAuZ2V0Q2xvY2tGcmVxdWVuY3koKSAvIHRoaXMucGFyZW50LmdldENsb2NrRnJlcXVlbmN5KCkgKiB0aGlzLmRlbGF5O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVhZHMgaW5zdHJ1Y3Rpb25zIGZyb20gdGhlIGluc3RydWN0aW9uIGJ1ZmZlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcmVhZENvdW50IFRoZSBudW1iZXIgb2YgaW5zdHJ1Y3Rpb25zIHRvIHJlYWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZWFkKHJlYWRDb3VudDogbnVtYmVyKTogUXVldWU8SW5zdHJ1Y3Rpb24+IHtcclxuICAgICAgICBpZiAodGhpcy5kZWxheSAhPSAwICYmICF0aGlzLmlzUmVhZHlUb0JlUmVhZCgpKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluc3RydWN0aW9uIGJ1ZmZlciBmcm9tICR7dGhpcy5wYXJlbnQuZGlzcGxheU5hbWUoKX0gaXMgbm90IHJlYWR5IHRvIGJlIHJlYWRgKTtcclxuICAgICAgICBpZiAocmVhZENvdW50ID4gdGhpcy5zaXplKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgcmVhZCBtb3JlIGluc3RydWN0aW9ucyB0aGFuIHRoZSBzaXplIG9mIHRoZSBidWZmZXJcIik7XHJcbiAgICAgICAgaWYgKHJlYWRDb3VudCA+IHRoaXMuc3RvcmVkSW5zdHJ1Y3Rpb25zLnNpemUoKSlcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBRdWV1ZTxJbnN0cnVjdGlvbj4oMCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGluc3RydWN0aW9uc1RvUmVhZCA9IG5ldyBRdWV1ZTxJbnN0cnVjdGlvbj4ocmVhZENvdW50KVxyXG4gICAgICAgIHRoaXMuc3RvcmVkSW5zdHJ1Y3Rpb25zLm1vdmVUbyhpbnN0cnVjdGlvbnNUb1JlYWQsIHJlYWRDb3VudClcclxuICAgICAgICB0aGlzLnNoaWZ0TWVzaGVzRG93bihyZWFkQ291bnQpO1xyXG4gICAgICAgIHRoaXMuY2xlYXJIaWdobGlnaHRzKCk7XHJcbiAgICAgICAgdGhpcy5yZWFkeVRvQmVSZWFkID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIGluc3RydWN0aW9uc1RvUmVhZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFdyaXRlcyBpbnN0cnVjdGlvbnMgdG8gdGhlIGluc3RydWN0aW9uIGJ1ZmZlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5zdHJ1Y3Rpb25zIFRoZSBpbnN0cnVjdGlvbnMgdG8gd3JpdGUuXHJcbiAgICAgKiBAcGFyYW0gd3JpdGVDb3VudCBUaGUgbnVtYmVyIG9mIGluc3RydWN0aW9ucyB0byB3cml0ZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHdyaXRlKGluc3RydWN0aW9uczogUXVldWU8SW5zdHJ1Y3Rpb24+LCB3cml0ZUNvdW50ID0gaW5zdHJ1Y3Rpb25zLnNpemUoKSk6IHZvaWQge1xyXG4gICAgICAgIGlmICh3cml0ZUNvdW50ID4gdGhpcy5zaXplKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3Qgd3JpdGUgbW9yZSBpbnN0cnVjdGlvbnMgdGhhbiB0aGUgc2l6ZSBvZiB0aGUgYnVmZmVyXCIpO1xyXG5cclxuICAgICAgICBjb25zdCBvbGRTaXplID0gdGhpcy5zdG9yZWRJbnN0cnVjdGlvbnMuc2l6ZSgpO1xyXG4gICAgICAgIGluc3RydWN0aW9ucy5tb3ZlVG8odGhpcy5zdG9yZWRJbnN0cnVjdGlvbnMsIHdyaXRlQ291bnQpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSBvbGRTaXplOyBpIDwgdGhpcy5zdG9yZWRJbnN0cnVjdGlvbnMuc2l6ZSgpOyArK2kpIHtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmUodGhpcy5saXZlTWVzaGVzW2ldKTtcclxuICAgICAgICAgICAgdGhpcy5saXZlTWVzaGVzW2ldID0gdGhpcy5idWlsZEJ1ZmZlclRleHRNZXNoKGkpO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLmxpdmVNZXNoZXNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGVsYXkgPT0gMClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gZGVsYXkgaW5zdHJ1Y3Rpb24gYnVmZmVycyBkbyBub3QgbmVlZCB0byBiZSB1cGRhdGVkXCIpO1xyXG4gICAgICAgIGlmICh0aGlzLnJlYWRUaW1lb3V0ID4gMCAmJiB0aGlzLnN0b3JlZEluc3RydWN0aW9ucy5zaXplKCkgPiAwKSB7XHJcbiAgICAgICAgICAgIC0tdGhpcy5yZWFkVGltZW91dDtcclxuICAgICAgICAgICAgdGhpcy5yZWFkeVRvQmVSZWFkID0gdGhpcy5yZWFkVGltZW91dCA8PSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplR3JhcGhpY3MoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5hZGRTdGF0aWNNZXNoKHRoaXMuYnVpbGRCdWZmZXJzTWVzaCgpKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2l6ZTsgKytpKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGl2ZU1lc2hlc1tpXSA9IHRoaXMuYnVpbGRCdWZmZXJUZXh0TWVzaChpKTtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5hZGQodGhpcy5saXZlTWVzaGVzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgICAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgICAgICAgdGhpcy5idWZmZXJIaWdobGlnaHRHZW9tZXRyeS5kaXNwb3NlKCk7XHJcbiAgICAgICAgdGhpcy5ub09wTWVzaC5nZW9tZXRyeS5kaXNwb3NlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCdWlsZHMgYSB0ZXh0IG1lc2ggZm9yIHRoZSBpbnN0cnVjdGlvbiBidWZmZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGluZGV4IFRoZSBpbmRleCBvZiB0aGUgaW5zdHJ1Y3Rpb24gaW4gdGhlIGJ1ZmZlci5cclxuICAgICAqIEBwYXJhbSByZXBsYWNlU3RyaW5nIFRoZSBzdHJpbmcgdG8gcmVwbGFjZSB0aGUgaW5zdHJ1Y3Rpb24gd2l0aC5cclxuICAgICAqIEByZXR1cm5zIFRoZSB0ZXh0IG1lc2ggZm9yIHRoZSBpbnN0cnVjdGlvbiBidWZmZXIuXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBidWlsZEJ1ZmZlclRleHRNZXNoKGluZGV4OiBudW1iZXIsIHJlcGxhY2VTdHJpbmc/OiBzdHJpbmcpOiBNZXNoIHtcclxuICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMuc2l6ZSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW5kZXggb3V0IG9mIGJvdW5kc1wiKTtcclxuXHJcbiAgICAgICAgY29uc3QgeE9mZnNldCA9IHRoaXMuaG9yaXpvbnRhbCA/IHRoaXMuYnVmZmVyTWVzaE9mZnNldHNbaW5kZXhdIDogdGhpcy5wb3NpdGlvbi54O1xyXG4gICAgICAgIGNvbnN0IHlPZmZzZXQgPSB0aGlzLmhvcml6b250YWwgPyB0aGlzLnBvc2l0aW9uLnkgOiB0aGlzLmJ1ZmZlck1lc2hPZmZzZXRzW2luZGV4XTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RvcmVkSW5zdHJ1Y3Rpb25zLmdldChpbmRleCkpIHtcclxuICAgICAgICAgICAgY29uc3QgY29sb3IgPSB0aGlzLnN0b3JlZEluc3RydWN0aW9ucy5nZXQoaW5kZXgpIS5pc01lbW9yeU9wZXJhdGlvbigpID9cclxuICAgICAgICAgICAgICAgIENvbXB1dGVyQ2hpcE1hY3JvLk1FTU9SWV9NQVRFUklBTCA6ICh0aGlzLnN0b3JlZEluc3RydWN0aW9ucy5nZXQoaW5kZXgpIS5pc0FyaXRobWV0aWMoKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgQ29tcHV0ZXJDaGlwTWFjcm8uQUxVX01BVEVSSUFMIDogQ29tcHV0ZXJDaGlwTWFjcm8uQlJBTkNIX01BVEVSSUFMKTtcclxuICAgICAgICAgICAgcmV0dXJuIERyYXdVdGlscy5idWlsZFRleHRNZXNoKChyZXBsYWNlU3RyaW5nID8gcmVwbGFjZVN0cmluZyA6IHRoaXMuc3RvcmVkSW5zdHJ1Y3Rpb25zLmdldChpbmRleCkhLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAgICAgICAsIHhPZmZzZXQsIHlPZmZzZXQsXHJcbiAgICAgICAgICAgICAgICBDb21wdXRlckNoaXBNYWNyby5URVhUX1NJWkUsIGNvbG9yLCB0cnVlLCB0aGlzLmhvcml6b250YWwgPyBNYXRoLlBJIC8gMiA6IDBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2UgeyAvLyB1c2luZyBpbnN0YW5jaW5nIHRvIHNhdmUgbWVtb3J5XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vT3BNZXNoLmNsb25lKCkudHJhbnNsYXRlWCh4T2Zmc2V0KS50cmFuc2xhdGVZKHlPZmZzZXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNoaWZ0cyB0aGUgbWVzaGVzIGluIHRoZSBpbnN0cnVjdGlvbiBidWZmZXIgZG93biBieSBhIGNlcnRhaW4gbnVtYmVyIG9mIHBvc2l0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gblBvc2l0aW9ucyBUaGUgbnVtYmVyIG9mIHBvc2l0aW9ucyB0byBzaGlmdCBkb3duIGJ5LlxyXG4gICAgICogQHByb3RlY3RlZFxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgc2hpZnRNZXNoZXNEb3duKG5Qb3NpdGlvbnM6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGlmIChuUG9zaXRpb25zIDw9IDApXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBzaGlmdCBkb3duIGJ5IGEgbmVnYXRpdmUgbnVtYmVyIG9mIHBvc2l0aW9uc1wiKTtcclxuICAgICAgICBpZiAoblBvc2l0aW9ucyA+IHRoaXMuc2l6ZSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHNoaWZ0IGRvd24gYnkgbW9yZSB0aGFuIHRoZSBzaXplIG9mIHRoZSBidWZmZXJcIik7XHJcblxyXG4gICAgICAgIHRoaXMubGl2ZU1lc2hlcy5zcGxpY2UoMCwgblBvc2l0aW9ucykuZm9yRWFjaChtZXNoID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmUobWVzaCk7XHJcbiAgICAgICAgICAgIG1lc2guZ2VvbWV0cnkuZGlzcG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5ob3Jpem9udGFsKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGl2ZU1lc2hlcy5mb3JFYWNoKChtZXNoLCBpbmRleCkgPT5cclxuICAgICAgICAgICAgICAgIG1lc2gudHJhbnNsYXRlWCgtdGhpcy5idWZmZXJNZXNoT2Zmc2V0c1tpbmRleCArIG5Qb3NpdGlvbnNdICsgdGhpcy5idWZmZXJNZXNoT2Zmc2V0c1tpbmRleF0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5saXZlTWVzaGVzLmZvckVhY2goKG1lc2gsIGluZGV4KSA9PlxyXG4gICAgICAgICAgICAgICAgbWVzaC50cmFuc2xhdGVZKC10aGlzLmJ1ZmZlck1lc2hPZmZzZXRzW2luZGV4ICsgblBvc2l0aW9uc10gKyB0aGlzLmJ1ZmZlck1lc2hPZmZzZXRzW2luZGV4XSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZpbGwgdGhlIGVtcHR5IHNwYWNlcyB3aXRoIG5vT3BNZXNoXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuc2l6ZSAtIDE7IGkgPiB0aGlzLnNpemUgLSBuUG9zaXRpb25zIC0gMTsgLS1pKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGl2ZU1lc2hlc1tpXSA9IHRoaXMubm9PcE1lc2guY2xvbmUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyYW5zbGF0ZVgodGhpcy5ob3Jpem9udGFsID8gdGhpcy5idWZmZXJNZXNoT2Zmc2V0c1tpXSA6IHRoaXMucG9zaXRpb24ueClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmFuc2xhdGVZKHRoaXMuaG9yaXpvbnRhbCA/IHRoaXMucG9zaXRpb24ueSA6IHRoaXMuYnVmZmVyTWVzaE9mZnNldHNbaV0pO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLmxpdmVNZXNoZXNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhpZ2hsaWdodHMgYSBjZXJ0YWluIGluc3RydWN0aW9uIGluIHRoZSBpbnN0cnVjdGlvbiBidWZmZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGluZGV4IFRoZSBpbmRleCBvZiB0aGUgaW5zdHJ1Y3Rpb24gdG8gaGlnaGxpZ2h0LlxyXG4gICAgICogQHByb3RlY3RlZFxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgaGlnaGxpZ2h0QnVmZmVyKGluZGV4OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMuc2l6ZSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW5kZXggb3V0IG9mIGJvdW5kc1wiKTtcclxuXHJcbiAgICAgICAgdGhpcy5jbGVhckhpZ2hsaWdodHMoKTtcclxuICAgICAgICBjb25zdCBjb2xvciA9IHRoaXMuaW5zdHJ1Y3Rpb25NYXRlcmlhbCh0aGlzLnN0b3JlZEluc3RydWN0aW9ucy5nZXQoaW5kZXgpISk7XHJcbiAgICAgICAgY29uc3QgaGlnaGxpZ2h0TWVzaCA9IG5ldyBNZXNoKHRoaXMuYnVmZmVySGlnaGxpZ2h0R2VvbWV0cnksIGNvbG9yKTtcclxuICAgICAgICBoaWdobGlnaHRNZXNoLnBvc2l0aW9uLnNldCh0aGlzLmhvcml6b250YWwgPyB0aGlzLmJ1ZmZlck1lc2hPZmZzZXRzW2luZGV4XSA6IHRoaXMucG9zaXRpb24ueCxcclxuICAgICAgICAgICAgdGhpcy5ob3Jpem9udGFsID8gdGhpcy5wb3NpdGlvbi55IDogdGhpcy5idWZmZXJNZXNoT2Zmc2V0c1tpbmRleF0sIDAuMDEpO1xyXG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0TWVzaGVzLnB1c2goaGlnaGxpZ2h0TWVzaCk7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQoaGlnaGxpZ2h0TWVzaCk7XHJcbiAgICAgICAgdGhpcy5saXZlTWVzaGVzW2luZGV4XS5tYXRlcmlhbCA9IENvbXB1dGVyQ2hpcE1hY3JvLkNPTVBPTkVOVF9NQVRFUklBTDtcclxuICAgICAgICBpZiAodGhpcy5zdG9yZWRJbnN0cnVjdGlvbnMuZ2V0KGluZGV4KSlcclxuICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRlZEJ1ZmZlck1lc2hlcy5wdXNoKGluZGV4KTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhckhpZ2hsaWdodHMoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xlYXJIaWdobGlnaHRzKCk7XHJcbiAgICAgICAgdGhpcy5oaWdobGlnaHRlZEJ1ZmZlck1lc2hlcy5mb3JFYWNoKGluZGV4ID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RvcmVkSW5zdHJ1Y3Rpb25zLmdldChpbmRleCkgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpdmVNZXNoZXNbaW5kZXhdLm1hdGVyaWFsID0gdGhpcy5pbnN0cnVjdGlvbk1hdGVyaWFsKHRoaXMuc3RvcmVkSW5zdHJ1Y3Rpb25zLmdldChpbmRleCkhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0ZWRCdWZmZXJNZXNoZXMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEJ1aWxkcyB0aGUgYWdncmVnYXRlIG1lc2ggZm9yIHRoZSBpbnN0cnVjdGlvbiBidWZmZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHByb3RlY3RlZFxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgYnVpbGRCdWZmZXJzTWVzaCgpOiBNZXNoIHtcclxuICAgICAgICBjb25zdCBzdGFydE9mZnNldCA9IHRoaXMuaG9yaXpvbnRhbFxyXG4gICAgICAgICAgICA/IHRoaXMucG9zaXRpb24ueCArICh0aGlzLnJldmVyc2VkID8gLTEgOiAxKSAqICh0aGlzLnJlY3RhbmdsZVNpemUgLyAyIC0gdGhpcy53aWR0aCAvIDIpXHJcbiAgICAgICAgICAgIDogdGhpcy5wb3NpdGlvbi55ICsgKHRoaXMucmV2ZXJzZWQgPyAtMSA6IDEpICogKHRoaXMucmVjdGFuZ2xlU2l6ZSAvIDIgLSB0aGlzLmhlaWdodCAvIDIpO1xyXG5cclxuICAgICAgICBsZXQgZ2VvbWV0cmllcyA6IFBsYW5lR2VvbWV0cnlbXSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zaXplOyArK2kpIHtcclxuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gc3RhcnRPZmZzZXQgKyAodGhpcy5yZXZlcnNlZCA/IC0xIDogMSkgKiBpICogKHRoaXMucmVjdGFuZ2xlU2l6ZSArIHRoaXMuc3BhY2luZyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gdGhpcy5idWZmZXJIaWdobGlnaHRHZW9tZXRyeS5jbG9uZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ob3Jpem9udGFsID8gZ2VvbWV0cnkudHJhbnNsYXRlKG9mZnNldCwgdGhpcy5wb3NpdGlvbi55LCAwKSA6XHJcbiAgICAgICAgICAgICAgICBnZW9tZXRyeS50cmFuc2xhdGUodGhpcy5wb3NpdGlvbi54LCBvZmZzZXQsIDApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5idWZmZXJNZXNoT2Zmc2V0cy5wdXNoKG9mZnNldCk7XHJcbiAgICAgICAgICAgIGdlb21ldHJpZXMucHVzaChnZW9tZXRyeSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBtZXJnZWRHZW9tZXRyeSA9IEJ1ZmZlckdlb21ldHJ5VXRpbHMubWVyZ2VHZW9tZXRyaWVzKGdlb21ldHJpZXMsIGZhbHNlKTtcclxuICAgICAgICBpZiAoIW1lcmdlZEdlb21ldHJ5KVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gbWVyZ2UgZ2VvbWV0cmllc1wiKTtcclxuICAgICAgICByZXR1cm4gbmV3IE1lc2gobWVyZ2VkR2VvbWV0cnksIENvbXB1dGVyQ2hpcE1hY3JvLkNPTVBPTkVOVF9NQVRFUklBTCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge0NvbXB1dGVyQ2hpcE1hY3JvfSBmcm9tIFwiLi9Db21wdXRlckNoaXBNYWNyb1wiO1xyXG5pbXBvcnQge0NvbXB1dGVyQ2hpcH0gZnJvbSBcIi4uLy4uL0NvbXB1dGVyQ2hpcFwiO1xyXG5pbXBvcnQge01lc2gsIFBsYW5lR2VvbWV0cnl9IGZyb20gXCJ0aHJlZVwiO1xyXG5pbXBvcnQge0luc3RydWN0aW9uQnVmZmVyfSBmcm9tIFwiLi9JbnN0cnVjdGlvbkJ1ZmZlclwiO1xyXG5pbXBvcnQge0RyYXdVdGlsc30gZnJvbSBcIi4uLy4uLy4uL0RyYXdVdGlsc1wiO1xyXG5cclxuLyoqXHJcbiAqIEEgY291bnRlciBjb21wb25lbnQgZm9yIHVzZSB3aXRoaW4gYSBjb21wdXRlciBjaGlwLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvdW50ZXIgZXh0ZW5kcyBDb21wdXRlckNoaXBNYWNybyB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBXSURUSCA9IDAuMztcclxuICAgIHByaXZhdGUgY291bnQgPSAwO1xyXG4gICAgaGVpZ2h0OiBudW1iZXIgPSBJbnN0cnVjdGlvbkJ1ZmZlci5CVUZGRVJfSEVJR0hUO1xyXG5cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgaGlnaGxpZ2h0R2VvbWV0cnk6IFBsYW5lR2VvbWV0cnk7XHJcbiAgICBwcml2YXRlIGhpZ2hsaWdodGVkOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENvdW50ZXIgaW5zdGFuY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhcmVudCBUaGUgcGFyZW50IENvbXB1dGVyQ2hpcCBpbnN0YW5jZS5cclxuICAgICAqIEBwYXJhbSB4T2Zmc2V0IFRoZSB4LW9mZnNldCBmcm9tIHRoZSBwYXJlbnQncyBwb3NpdGlvbiB0byBwbGFjZSB0aGlzIGNvbXBvbmVudC5cclxuICAgICAqIEBwYXJhbSB5T2Zmc2V0IFRoZSB5LW9mZnNldCBmcm9tIHRoZSBwYXJlbnQncyBwb3NpdGlvbiB0byBwbGFjZSB0aGlzIGNvbXBvbmVudC5cclxuICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIGNvdW50ZXIgY29tcG9uZW50LlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQ6IENvbXB1dGVyQ2hpcCwgeE9mZnNldDogbnVtYmVyID0gMCwgeU9mZnNldDogbnVtYmVyID0gMCwgd2lkdGg6IG51bWJlciA9IENvdW50ZXIuV0lEVEgpIHtcclxuICAgICAgICBzdXBlcihwYXJlbnQsIHhPZmZzZXQsIHlPZmZzZXQpO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLmhpZ2hsaWdodEdlb21ldHJ5ID0gbmV3IFBsYW5lR2VvbWV0cnkodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZGltZW5zaW9ucygpOiB7IHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyIH0ge1xyXG4gICAgICAgIHJldHVybiB7d2lkdGg6IHRoaXMuV0lEVEgsIGhlaWdodDogSW5zdHJ1Y3Rpb25CdWZmZXIuQlVGRkVSX0hFSUdIVH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSBjb3VudGVyLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSB2YWx1ZSBvZiB0aGUgY291bnRlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbiBUaGUgbmV3IHZhbHVlIG9mIHRoZSBjb3VudGVyLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0KG46IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY291bnQgPSBuO1xyXG4gICAgICAgIERyYXdVdGlscy51cGRhdGVUZXh0KHRoaXMubGl2ZU1lc2hlc1swXSwgRHJhd1V0aWxzLnRvSGV4KHRoaXMuY291bnQpLCB0cnVlKTtcclxuICAgICAgICB0aGlzLmhpZ2hsaWdodGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmhpZ2hsaWdodCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShoaWdobGlnaHRzT25seT86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5oaWdobGlnaHRlZClcclxuICAgICAgICAgICAgdGhpcy5jbGVhckhpZ2hsaWdodHMoKVxyXG4gICAgICAgIGlmIChoaWdobGlnaHRzT25seSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIERyYXdVdGlscy51cGRhdGVUZXh0KHRoaXMubGl2ZU1lc2hlc1swXSwgRHJhd1V0aWxzLnRvSGV4KHRoaXMuY291bnQrKyksIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVHcmFwaGljcygpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBib2R5TWVzaCA9IG5ldyBNZXNoKHRoaXMuaGlnaGxpZ2h0R2VvbWV0cnksIENvdW50ZXIuQ09NUE9ORU5UX01BVEVSSUFMKTtcclxuICAgICAgICBib2R5TWVzaC5wb3NpdGlvbi5zZXQodGhpcy5wb3NpdGlvbi54LCB0aGlzLnBvc2l0aW9uLnksIDApO1xyXG4gICAgICAgIHRoaXMuYWRkU3RhdGljTWVzaChib2R5TWVzaCk7XHJcbiAgICAgICAgdGhpcy5saXZlTWVzaGVzLnB1c2goRHJhd1V0aWxzLmJ1aWxkVGV4dE1lc2goRHJhd1V0aWxzLnRvSGV4KHRoaXMuY291bnQpLCB0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSxcclxuICAgICAgICAgICAgQ29tcHV0ZXJDaGlwTWFjcm8uVEVYVF9TSVpFLCBDb21wdXRlckNoaXBNYWNyby5URVhUX01BVEVSSUFMLCBmYWxzZSkpO1xyXG4gICAgICAgIHRoaXMubGl2ZU1lc2hlc1swXS5nZW9tZXRyeS5jZW50ZXIoKTtcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLmxpdmVNZXNoZXNbMF0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICAgICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0R2VvbWV0cnkuZGlzcG9zZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFySGlnaGxpZ2h0cygpIHtcclxuICAgICAgICBzdXBlci5jbGVhckhpZ2hsaWdodHMoKTtcclxuICAgICAgICB0aGlzLmhpZ2hsaWdodGVkID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMubGl2ZU1lc2hlc1swXSlcclxuICAgICAgICAgICAgdGhpcy5saXZlTWVzaGVzWzBdLm1hdGVyaWFsID0gQ29tcHV0ZXJDaGlwTWFjcm8uVEVYVF9NQVRFUklBTDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhpZ2hsaWdodHMgdGhlIGNvdW50ZXIgY29tcG9uZW50LlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaGlnaGxpZ2h0KCkge1xyXG4gICAgICAgIGNvbnN0IGhpZ2hsaWdodE1lc2ggPSBuZXcgTWVzaCh0aGlzLmhpZ2hsaWdodEdlb21ldHJ5LCBDb21wdXRlckNoaXBNYWNyby5CUkFOQ0hfTUFURVJJQUwpO1xyXG4gICAgICAgIGhpZ2hsaWdodE1lc2gucG9zaXRpb24uc2V0KHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55LCAwKTtcclxuICAgICAgICB0aGlzLmhpZ2hsaWdodE1lc2hlcy5wdXNoKGhpZ2hsaWdodE1lc2gpO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkKGhpZ2hsaWdodE1lc2gpO1xyXG4gICAgICAgIHRoaXMubGl2ZU1lc2hlc1swXS5tYXRlcmlhbCA9IENvbXB1dGVyQ2hpcE1hY3JvLkNPTVBPTkVOVF9NQVRFUklBTDtcclxuICAgICAgICB0aGlzLmhpZ2hsaWdodGVkID0gdHJ1ZTtcclxuICAgIH1cclxufSIsImltcG9ydCB7Q29tcHV0ZXJDaGlwTWFjcm99IGZyb20gXCIuL3ByaW1pdGl2ZXMvQ29tcHV0ZXJDaGlwTWFjcm9cIjtcclxuaW1wb3J0IHtDb21wdXRlckNoaXB9IGZyb20gXCIuLi9Db21wdXRlckNoaXBcIjtcclxuaW1wb3J0IHtDb3VudGVyfSBmcm9tIFwiLi9wcmltaXRpdmVzL0NvdW50ZXJcIjtcclxuaW1wb3J0IHtJbnN0cnVjdGlvbkJ1ZmZlcn0gZnJvbSBcIi4vcHJpbWl0aXZlcy9JbnN0cnVjdGlvbkJ1ZmZlclwiO1xyXG5pbXBvcnQge0luc3RydWN0aW9ufSBmcm9tIFwiLi4vLi4vZGF0YVN0cnVjdHVyZXMvSW5zdHJ1Y3Rpb25cIjtcclxuaW1wb3J0IHtRdWV1ZX0gZnJvbSBcIi4uLy4uL2RhdGFTdHJ1Y3R1cmVzL1F1ZXVlXCI7XHJcbmltcG9ydCB7SW5zdHJ1Y3Rpb25DYWNoZX0gZnJvbSBcIi4vSW5zdHJ1Y3Rpb25DYWNoZVwiO1xyXG5pbXBvcnQge1NJU0RQcm9jZXNzb3J9IGZyb20gXCIuLi9TSVNEUHJvY2Vzc29yXCI7XHJcbmltcG9ydCB7QWRkcmVzc2VkSW5zdHJ1Y3Rpb25CdWZmZXJ9IGZyb20gXCIuL0FkZHJlc3NlZEluc3RydWN0aW9uQnVmZmVyXCI7XHJcblxyXG4vKipcclxuICogUmVwcmVzZW50cyB0aGUgaW5zdHJ1Y3Rpb24gZmV0Y2hlciBvZiBhIGNvbXB1dGVyIGNoaXAsIGhhbmRsaW5nIHRoZSBmZXRjaGluZyBvZiBpbnN0cnVjdGlvbnMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSW5zdHJ1Y3Rpb25GZXRjaGVyIGV4dGVuZHMgQ29tcHV0ZXJDaGlwTWFjcm8ge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgV0lEVEggPSAwLjk7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBTUEFDSU5HID0gMC4wMTtcclxuICAgIHByaXZhdGUgaW5zdHJ1Y3Rpb25NZW1vcnk6IEFkZHJlc3NlZEluc3RydWN0aW9uQnVmZmVyIHwgdW5kZWZpbmVkO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBpQ2FjaGU6IEluc3RydWN0aW9uQ2FjaGUgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBwYzogQ291bnRlcjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgaW5zdHJ1Y3Rpb25CdWZmZXI6IEluc3RydWN0aW9uQnVmZmVyO1xyXG4gICAgcHJpdmF0ZSBmZXRjaGluZ0FkZHJlc3M6IG51bWJlciA9IC0xO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgSW5zdHJ1Y3Rpb25GZXRjaGVyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Q29tcHV0ZXJDaGlwfSBwYXJlbnQgVGhlIHBhcmVudCBjb21wdXRlciBjaGlwIGNvbXBvbmVudC5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4T2Zmc2V0IFRoZSB4IG9mZnNldCBmcm9tIHRoZSBwYXJlbnQncyBwb3NpdGlvbi5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5T2Zmc2V0IFRoZSB5IG9mZnNldCBmcm9tIHRoZSBwYXJlbnQncyBwb3NpdGlvbi5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIGluc3RydWN0aW9uIGZldGNoZXIuXHJcbiAgICAgKiBAcGFyYW0gaUNhY2hlIFRoZSBpbnN0cnVjdGlvbiBjYWNoZSBhc3NvY2lhdGVkIHdpdGggdGhlIGluc3RydWN0aW9uIGZldGNoZXIuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHBhcmVudDogQ29tcHV0ZXJDaGlwLCB4T2Zmc2V0OiBudW1iZXIgPSAwLCB5T2Zmc2V0OiBudW1iZXIgPSAwLCB3aWR0aDogbnVtYmVyID0gSW5zdHJ1Y3Rpb25GZXRjaGVyLldJRFRILFxyXG4gICAgICAgICAgICAgICAgaUNhY2hlPzogSW5zdHJ1Y3Rpb25DYWNoZSkge1xyXG4gICAgICAgIHN1cGVyKHBhcmVudCwgeE9mZnNldCwgeU9mZnNldCk7XHJcbiAgICAgICAgdGhpcy5pQ2FjaGUgPSBpQ2FjaGU7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBJbnN0cnVjdGlvbkJ1ZmZlci5CVUZGRVJfSEVJR0hUO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLnBjID0gbmV3IENvdW50ZXIocGFyZW50LCB4T2Zmc2V0IC0gdGhpcy53aWR0aCAvIDIgKyBDb3VudGVyLmRpbWVuc2lvbnMoKS53aWR0aCAvIDIsIHlPZmZzZXQpO1xyXG4gICAgICAgIGNvbnN0IGJ1ZmZlcldpZHRoID0gdGhpcy53aWR0aCAtIENvdW50ZXIuZGltZW5zaW9ucygpLndpZHRoIC0gSW5zdHJ1Y3Rpb25GZXRjaGVyLlNQQUNJTkc7XHJcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbkJ1ZmZlciA9IG5ldyBJbnN0cnVjdGlvbkJ1ZmZlcihwYXJlbnQsIDEsXHJcbiAgICAgICAgICAgIHhPZmZzZXQgKyB0aGlzLndpZHRoIC8gMiAtIGJ1ZmZlcldpZHRoIC8gMiwgeU9mZnNldCwgMCwgZmFsc2UsXHJcbiAgICAgICAgICAgIGZhbHNlLCBidWZmZXJXaWR0aClcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGluc3RydWN0aW9uIG1lbW9yeSB0byBiZSB1c2VkIGJ5IHRoZSBpbnN0cnVjdGlvbiBmZXRjaGVyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7QWRkcmVzc2VkSW5zdHJ1Y3Rpb25CdWZmZXIgfCB1bmRlZmluZWR9IGluc3RydWN0aW9uTWVtb3J5IFRoZSBpbnN0cnVjdGlvbiBtZW1vcnkgdG8gYmUgdXNlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldEluc3RydWN0aW9uTWVtb3J5KGluc3RydWN0aW9uTWVtb3J5OiBBZGRyZXNzZWRJbnN0cnVjdGlvbkJ1ZmZlciB8IHVuZGVmaW5lZCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25NZW1vcnkgPSBpbnN0cnVjdGlvbk1lbW9yeTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGbHVzaGVzIHRoZSBpbnN0cnVjdGlvbiBidWZmZXIuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmbHVzaCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmluc3RydWN0aW9uQnVmZmVyLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5mZXRjaGluZ0FkZHJlc3MgPSAtMTtcclxuICAgICAgICB0aGlzLnBjLnNldCgwKTtcclxuICAgICAgICB0aGlzLnBjLnVwZGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVhZHMgdGhlIG5leHQgaW5zdHJ1Y3Rpb24gZnJvbSB0aGUgaW5zdHJ1Y3Rpb24gYnVmZmVyLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtJbnN0cnVjdGlvbn0gVGhlIG5leHQgaW5zdHJ1Y3Rpb24gdG8gYmUgZXhlY3V0ZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZWFkKCk6IEluc3RydWN0aW9uIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBjb25zdCBpbnN0cnVjdGlvbiA9IHRoaXMuaW5zdHJ1Y3Rpb25CdWZmZXIucmVhZCgxKTtcclxuICAgICAgICByZXR1cm4gaW5zdHJ1Y3Rpb24gPyBpbnN0cnVjdGlvbi5kZXF1ZXVlKCkgOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBwcm9ncmFtIGNvdW50ZXIgdG8gYSBuZXcgdmFsdWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG5ldyB2YWx1ZSBvZiB0aGUgcHJvZ3JhbSBjb3VudGVyLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0UHJvZ3JhbUNvdW50ZXIobjogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5wYy5zZXQobik7XHJcbiAgICAgICAgaWYgKHRoaXMuZmV0Y2hpbmdBZGRyZXNzICE9IG4pIC8vIGNsZWFyIHRoZSBmZXRjaCBidWZmZXIgaWYgdGhlIGZldGNoIGFkZHJlc3MgaXMgZGlmZmVyZW50IGZyb20gdGhlIG5ldyBQQ1xyXG4gICAgICAgICAgICB0aGlzLmluc3RydWN0aW9uQnVmZmVyLnJlYWQoMSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGZXRjaGVzIHRoZSBuZXh0IGluc3RydWN0aW9uIGZyb20gdGhlIGluc3RydWN0aW9uIG1lbW9yeS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIG5leHQoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5zdHJ1Y3Rpb25CdWZmZXIuaXNGdWxsKCkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmNoZWNrTWVtb3J5SXNSZWFkeSh0aGlzLnBjLmdldCgpKSkge1xyXG4gICAgICAgICAgICB0aGlzLmZldGNoaW5nQWRkcmVzcyA9IHRoaXMucGMuZ2V0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuYXNrRm9ySW5zdHJ1Y3Rpb25zQXQodGhpcy5wYy5nZXQoKSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb24gPSB0aGlzLmZldGNoSW5zdHJ1Y3Rpb25BdCh0aGlzLnBjLmdldCgpKTtcclxuICAgICAgICBpZiAoIWluc3RydWN0aW9uKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY29uc3QgcXVldWUgPSBuZXcgUXVldWU8SW5zdHJ1Y3Rpb24+KDEpO1xyXG4gICAgICAgIHF1ZXVlLmVucXVldWUoaW5zdHJ1Y3Rpb24pXHJcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbkJ1ZmZlci53cml0ZShxdWV1ZSwgMSk7XHJcbiAgICAgICAgdGhpcy5wYy51cGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gY2hlY2sgaWYgdGhlIG5leHQgbWVtb3J5IG1vZHVsZSBpcyByZWFkeSB0byBiZSByZWFkLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNoZWNrTWVtb3J5SXNSZWFkeShhZGRyZXNzOiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAodGhpcy5pQ2FjaGUpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlDYWNoZS5pc1JlYWR5VG9CZVJlYWQoYWRkcmVzcyk7XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5pbnN0cnVjdGlvbk1lbW9yeSAhPSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluc3RydWN0aW9uTWVtb3J5LmlzUmVhZHlUb0JlUmVhZCgpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXNrcyB0aGUgaW5zdHJ1Y3Rpb24gbWVtb3J5IGZvciB0aGUgaW5zdHJ1Y3Rpb24gYXQgdGhlIGdpdmVuIGFkZHJlc3MuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFkZHJlc3MgVGhlIGFkZHJlc3Mgb2YgdGhlIGluc3RydWN0aW9uIHRvIGJlIGZldGNoZWQuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXNrRm9ySW5zdHJ1Y3Rpb25zQXQoYWRkcmVzczogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5zdHJ1Y3Rpb25NZW1vcnkgPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIGxldCBbaW5kZXgsIG1hdGVyaWFsXSA9IHRoaXMuaUNhY2hlID8gdGhpcy5pQ2FjaGUuYXNrRm9ySW5zdHJ1Y3Rpb25BdChhZGRyZXNzKSA6XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25NZW1vcnkuYXNrRm9ySW5zdHJ1Y3Rpb25zQXQodGhpcy5wYXJlbnQsIDEsIGFkZHJlc3MpO1xyXG4gICAgICAgIGlmIChpbmRleCAhPSAtMSAmJiB0aGlzLnBhcmVudCBpbnN0YW5jZW9mIFNJU0RQcm9jZXNzb3IpIHtcclxuICAgICAgICAgICAgY29uc3QgY3B1ID0gdGhpcy5wYXJlbnQgYXMgU0lTRFByb2Nlc3NvcjtcclxuICAgICAgICAgICAgY3B1LmhpZ2hsaWdodEluc3RydWN0aW9uTWVtb3J5VHJhY2UoaW5kZXgsIG1hdGVyaWFsISk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmV0Y2hlcyB0aGUgaW5zdHJ1Y3Rpb24gYXQgdGhlIGdpdmVuIGFkZHJlc3MgZnJvbSB0aGUgaW5zdHJ1Y3Rpb24gbWVtb3J5LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhZGRyZXNzIFRoZSBhZGRyZXNzIG9mIHRoZSBpbnN0cnVjdGlvbiB0byBiZSBmZXRjaGVkLlxyXG4gICAgICogQHJldHVybnMge0luc3RydWN0aW9ufSBUaGUgaW5zdHJ1Y3Rpb24gYXQgdGhlIGdpdmVuIGFkZHJlc3MuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZmV0Y2hJbnN0cnVjdGlvbkF0KGFkZHJlc3M6IG51bWJlcik6IEluc3RydWN0aW9uIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAodGhpcy5pbnN0cnVjdGlvbk1lbW9yeSA9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluc3RydWN0aW9uIG1lbW9yeSBub3Qgc2V0XCIpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pQ2FjaGUpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlDYWNoZS5mZXRjaEluc3RydWN0aW9uQXQoYWRkcmVzcyk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnN0cnVjdGlvbk1lbW9yeS5mZXRjaEluc3RydWN0aW9uQXQoYWRkcmVzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZUdyYXBoaWNzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25CdWZmZXIuaW5pdGlhbGl6ZUdyYXBoaWNzKCk7XHJcbiAgICAgICAgdGhpcy5wYy5pbml0aWFsaXplR3JhcGhpY3MoKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW5zdHJ1Y3Rpb24gZmV0Y2hlciBzaG91bGQgbm90IGJlIHVwZGF0ZWQgbWFudWFsbHlcIik7XHJcbiAgICB9XHJcbn0iLCIvKipcclxuICogSVNBIGNsYXNzIGNvbnRhaW5zIHRoZSBpbnN0cnVjdGlvbiBzZXQgYXJjaGl0ZWN0dXJlIGZvciB0aGUgcHJvY2Vzc29yLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIElTQSB7XHJcbiAgICAvKiogVGhlIG9wZXJhdGlvbiBjb2RlcyBmb3IgQUxVIG9wZXJhdGlvbnMuICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEFMVV9PUENPREVTID0gW1wiQUREXCIsIFwiU1VCXCIsIFwiTVVMXCIsIFwiQU5EXCIsIFwiT1JcIiwgXCJHVFwiLCBcIkxUXCJdO1xyXG4gICAgLyoqIFRoZSBvcGVyYXRpb24gY29kZXMgZm9yIGltbWVkaWF0ZSBBTFUgb3BlcmF0aW9ucy4gKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQUxVX0lNTV9PUENPREVTID0gW1wiQURESVwiLCBcIlNVQklcIiwgXCJNVUxJXCJdO1xyXG4gICAgLyoqIFRoZSBvcGVyYXRpb24gY29kZXMgZm9yIG1lbW9yeSBvcGVyYXRpb25zLiAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBNRU1PUllfT1BDT0RFUyA9IFtcIkxPQURcIiwgXCJTVE9SRVwiXTtcclxuICAgIC8qKiBUaGUgb3BlcmF0aW9uIGNvZGVzIGZvciBicmFuY2ggb3BlcmF0aW9ucy4gKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQlJBTkNIX09QQ09ERVMgPSBbXCJCR1RcIiwgXCJCTFRcIl07XHJcbiAgICAvKiogVGhlIG51bWJlciBvZiByZWdpc3RlcnMgaW4gdGhlIHByb2Nlc3Nvci4gKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgUkVHSVNURVJfQ09VTlQgPSAxMjtcclxuICAgIC8qKiBUaGUgaW5kZXggb2YgdGhlIHplcm8gcmVnaXN0ZXIuICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFpFUk9fUkVHSVNURVIgPSAwO1xyXG4gICAgLyoqIFRoZSBsYXJnZXN0IHZhbHVlIHRoYXQgY2FuIGJlIHN0b3JlZCBpbiBhIGJ5dGUuICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE1BWF9CWVRFX1ZBTFVFID0gMiAqKiAxNi0gMTtcclxufSIsImltcG9ydCB7Q29tcHV0ZXJDaGlwTWFjcm99IGZyb20gXCIuL0NvbXB1dGVyQ2hpcE1hY3JvXCI7XHJcbmltcG9ydCB7Q29tcHV0ZXJDaGlwfSBmcm9tIFwiLi4vLi4vQ29tcHV0ZXJDaGlwXCI7XHJcbmltcG9ydCB7TWVzaCwgUGxhbmVHZW9tZXRyeX0gZnJvbSBcInRocmVlXCI7XHJcbmltcG9ydCB7SW5zdHJ1Y3Rpb25CdWZmZXJ9IGZyb20gXCIuL0luc3RydWN0aW9uQnVmZmVyXCI7XHJcbmltcG9ydCB7RHJhd1V0aWxzfSBmcm9tIFwiLi4vLi4vLi4vRHJhd1V0aWxzXCI7XHJcbmltcG9ydCB7SW5zdHJ1Y3Rpb259IGZyb20gXCIuLi8uLi8uLi9kYXRhU3RydWN0dXJlcy9JbnN0cnVjdGlvblwiO1xyXG5pbXBvcnQge0RhdGFDZWxsQXJyYXl9IGZyb20gXCIuL0RhdGFDZWxsQXJyYXlcIjtcclxuaW1wb3J0IHtTSVNEUHJvY2Vzc29yfSBmcm9tIFwiLi4vLi4vU0lTRFByb2Nlc3NvclwiO1xyXG5pbXBvcnQge0RlY29kZXJ9IGZyb20gXCIuLi9EZWNvZGVyXCI7XHJcbmltcG9ydCB7SVNBfSBmcm9tIFwiLi4vLi4vLi4vZGF0YVN0cnVjdHVyZXMvSVNBXCI7XHJcblxyXG4vKipcclxuICogUmVwcmVzZW50cyB0aGUgQXJpdGhtZXRpYyBMb2dpYyBVbml0IChBTFUpIG9mIGEgY29tcHV0ZXIgY2hpcCwgcGVyZm9ybWluZyBhcml0aG1ldGljIGFuZCBsb2dpY2FsIG9wZXJhdGlvbnMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQUxVIGV4dGVuZHMgQ29tcHV0ZXJDaGlwTWFjcm8ge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgV0lEVEggPSAwLjY7XHJcbiAgICBoZWlnaHQ6IG51bWJlciA9IEluc3RydWN0aW9uQnVmZmVyLkJVRkZFUl9IRUlHSFQ7XHJcbiAgICB0ZXh0U2l6ZTogbnVtYmVyID0gMC4wMztcclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBESVNUQU5DRV9UT19DRU5URVIgPSAwLjA3O1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgT1BfWV9PRkZTRVQgPSAtMC4wMztcclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFJFU19ZX09GRlNFVCA9IDAuMDI7XHJcblxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBoaWdobGlnaHRHZW9tZXRyeTogUGxhbmVHZW9tZXRyeTtcclxuICAgIHByaXZhdGUgbm9PcE1lc2g6IE1lc2g7XHJcbiAgICBwcml2YXRlIGhpZ2hsaWdodGVkOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgcHJpdmF0ZSBicmFuY2hTdGFsbGluZyA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBkZWNvZGVyOiBEZWNvZGVyO1xyXG5cclxuICAgIHByaXZhdGUgaW5zdHJ1Y3Rpb246IEluc3RydWN0aW9uIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIHJlZ2lzdGVyczogRGF0YUNlbGxBcnJheVtdO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBBTFUgaW5zdGFuY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtDb21wdXRlckNoaXB9IHBhcmVudCBUaGUgcGFyZW50IGNvbXB1dGVyIGNoaXAgY29tcG9uZW50LlxyXG4gICAgICogQHBhcmFtIHtEYXRhQ2VsbEFycmF5fSByZWdpc3RlcnMgVGhlIHJlZ2lzdGVycyBhc3NvY2lhdGVkIHdpdGggdGhlIEFMVS5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4T2Zmc2V0IFRoZSB4IG9mZnNldCBmcm9tIHRoZSBwYXJlbnQncyBwb3NpdGlvbi5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5T2Zmc2V0IFRoZSB5IG9mZnNldCBmcm9tIHRoZSBwYXJlbnQncyBwb3NpdGlvbi5cclxuICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIEFMVS5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocGFyZW50OiBDb21wdXRlckNoaXAsIHJlZ2lzdGVyczogRGF0YUNlbGxBcnJheVtdLCB4T2Zmc2V0OiBudW1iZXIgPSAwLCB5T2Zmc2V0OiBudW1iZXIgPSAwLCB3aWR0aDogbnVtYmVyID0gQUxVLldJRFRIKSB7XHJcbiAgICAgICAgc3VwZXIocGFyZW50LCB4T2Zmc2V0LCB5T2Zmc2V0KTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVycyA9IHJlZ2lzdGVycztcclxuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgdGhpcy5oaWdobGlnaHRHZW9tZXRyeSA9IG5ldyBQbGFuZUdlb21ldHJ5KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIEFMVS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBkaW1lbnNpb25zKCk6IHsgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgfSB7XHJcbiAgICAgICAgcmV0dXJuIHt3aWR0aDogQUxVLldJRFRILCBoZWlnaHQ6IEluc3RydWN0aW9uQnVmZmVyLkJVRkZFUl9IRUlHSFR9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmx1c2hlcyB0aGUgQUxVIG9mIGFueSBpbnN0cnVjdGlvbnMgY3VycmVudGx5IGJlaW5nIHByb2Nlc3NlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGZsdXNoKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb24gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYnJhbmNoU3RhbGxpbmcgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5oaWdobGlnaHRlZClcclxuICAgICAgICAgICAgdGhpcy5jbGVhckhpZ2hsaWdodHMoKVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyBpZiB0aGUgQUxVIGlzIHJlYWR5IGZvciBuZXcgaW5zdHJ1Y3Rpb25zLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIG5vIGluc3RydWN0aW9ucyBhcmUgY3VycmVudGx5IGJlaW5nIHByb2Nlc3NlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNSZWFkeSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0cnVjdGlvbiA9PSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJvY2Vzc2VzIGFuIGluc3RydWN0aW9uIGJ5IHBlcmZvcm1pbmcgYW4gYXJpdGhtZXRpYyBvciBsb2dpY2FsIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZGVjb2RlciBUaGUgZGVjb2RlciB0byB1c2UgZm9yIGJyYW5jaGluZy5cclxuICAgICAqIEBwYXJhbSB7SW5zdHJ1Y3Rpb259IGluc3RydWN0aW9uIFRoZSBpbnN0cnVjdGlvbiB0byBwcm9jZXNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29tcHV0ZShkZWNvZGVyOiBEZWNvZGVyLCBpbnN0cnVjdGlvbjogSW5zdHJ1Y3Rpb24gfCBudWxsKTogdm9pZCB7XHJcbiAgICAgICAgZnVuY3Rpb24gY29tcHV0ZUFMVVJlc3VsdChvcDE6IG51bWJlciwgb3AyOiBudW1iZXIsIG9wY29kZTogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgc3dpdGNoIChvcGNvZGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJBRERJXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiQUREXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wMSArIG9wMjtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJTVUJJXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiU1VCXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wMSAtIG9wMjtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJNVUxJXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiTVVMXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wMSAqIG9wMjtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJBTkRcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3AxICYgb3AyO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIk9SXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wMSB8IG9wMjtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJCR1RcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJHVFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvcDEgPiBvcDIgPyAxIDogMDtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJCTFRcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJMVFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvcDEgPCBvcDIgPyAxIDogMDtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBBTFUgb3Bjb2RlOiBcIiArIG9wY29kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb24gPSBpbnN0cnVjdGlvbjtcclxuICAgICAgICBpZiAoaW5zdHJ1Y3Rpb24gPT0gbnVsbClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuZHJhd0FMVVRleHQoKTtcclxuICAgICAgICB0aGlzLmhpZ2hsaWdodCgpO1xyXG5cclxuICAgICAgICBjb25zdCBvcDEgPSB0aGlzLnJlYWQoaW5zdHJ1Y3Rpb24uZ2V0T3AxUmVnKCkhKTtcclxuICAgICAgICBjb25zdCBvcDIgPSAoaW5zdHJ1Y3Rpb24uaXNJbW1lZGlhdGUoKSA/IGluc3RydWN0aW9uLmdldEltbWVkaWF0ZSgpISA6XHJcbiAgICAgICAgICAgIHRoaXMucmVhZChpbnN0cnVjdGlvbi5nZXRPcDJSZWcoKSEpKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuYnJhbmNoU3RhbGxpbmcpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gY29tcHV0ZUFMVVJlc3VsdChvcDEsIG9wMiwgaW5zdHJ1Y3Rpb24uZ2V0T3Bjb2RlKCkpO1xyXG4gICAgICAgICAgICBkZWNvZGVyLnRha2VCcmFuY2gocmVzdWx0ID09IDEpO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RydWN0aW9uID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5icmFuY2hTdGFsbGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaW5zdHJ1Y3Rpb24uaXNCcmFuY2goKSkge1xyXG4gICAgICAgICAgICB0aGlzLmJyYW5jaFN0YWxsaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5kZWNvZGVyID0gZGVjb2RlcjtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5wcmV2ZW50T3ZlcmZsb3coY29tcHV0ZUFMVVJlc3VsdChvcDEsIG9wMiwgaW5zdHJ1Y3Rpb24uZ2V0T3Bjb2RlKCkpKTtcclxuICAgICAgICB0aGlzLndyaXRlKGluc3RydWN0aW9uLmdldFJlc3VsdFJlZygpLCByZXN1bHQpO1xyXG4gICAgICAgIGlmICh0aGlzLnBhcmVudCBpbnN0YW5jZW9mIFNJU0RQcm9jZXNzb3IpXHJcbiAgICAgICAgICAgICh0aGlzLnBhcmVudCBhcyBTSVNEUHJvY2Vzc29yKS5ub3RpZnlJbnN0cnVjdGlvblJldGlyZWQoKTtcclxuICAgICAgICB0aGlzLmluc3RydWN0aW9uID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGlnaGxpZ2h0ZWQpXHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJIaWdobGlnaHRzKClcclxuICAgICAgICBpZiAodGhpcy5icmFuY2hTdGFsbGluZylcclxuICAgICAgICAgICAgdGhpcy5jb21wdXRlKHRoaXMuZGVjb2RlciwgdGhpcy5pbnN0cnVjdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZUdyYXBoaWNzKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGJvZHlNZXNoID0gbmV3IE1lc2godGhpcy5oaWdobGlnaHRHZW9tZXRyeSwgQUxVLkNPTVBPTkVOVF9NQVRFUklBTCk7XHJcbiAgICAgICAgYm9keU1lc2gucG9zaXRpb24uc2V0KHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55LCAwKTtcclxuICAgICAgICB0aGlzLmFkZFN0YXRpY01lc2goYm9keU1lc2gpO1xyXG4gICAgICAgIHRoaXMubm9PcE1lc2ggPSBEcmF3VXRpbHMuYnVpbGRUZXh0TWVzaChcIk5PUFwiLFxyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSxcclxuICAgICAgICAgICAgQ29tcHV0ZXJDaGlwTWFjcm8uVEVYVF9TSVpFLFxyXG4gICAgICAgICAgICBDb21wdXRlckNoaXBNYWNyby5CT0RZX01BVEVSSUFMLCB0cnVlKTtcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLm5vT3BNZXNoKTtcclxuICAgIH1cclxuXHJcbiAgICBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICAgICAgICB0aGlzLmhpZ2hsaWdodEdlb21ldHJ5LmRpc3Bvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhckhpZ2hsaWdodHMoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xlYXJIaWdobGlnaHRzKCk7XHJcbiAgICAgICAgdGhpcy5saXZlTWVzaGVzLmZvckVhY2gobWVzaCA9PiB0aGlzLnNjZW5lLnJlbW92ZShtZXNoKSk7XHJcbiAgICAgICAgdGhpcy5saXZlTWVzaGVzID0gW107XHJcbiAgICAgICAgdGhpcy5oaWdobGlnaHRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubm9PcE1lc2gudmlzaWJsZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIaWdobGlnaHRzIHRoZSBBTFUgdG8gaW5kaWNhdGUgdGhhdCBpdCBpcyBjdXJyZW50bHkgcHJvY2Vzc2luZyBhbiBpbnN0cnVjdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGhpZ2hsaWdodCgpIHtcclxuICAgICAgICBjb25zdCBoaWdobGlnaHRNZXNoID0gbmV3IE1lc2godGhpcy5oaWdobGlnaHRHZW9tZXRyeSwgQ29tcHV0ZXJDaGlwTWFjcm8uQUxVX01BVEVSSUFMKTtcclxuICAgICAgICBoaWdobGlnaHRNZXNoLnBvc2l0aW9uLnNldCh0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSwgMCk7XHJcbiAgICAgICAgdGhpcy5oaWdobGlnaHRNZXNoZXMucHVzaChoaWdobGlnaHRNZXNoKTtcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZChoaWdobGlnaHRNZXNoKTtcclxuICAgICAgICB0aGlzLmxpdmVNZXNoZXNbMF0ubWF0ZXJpYWwgPSBDb21wdXRlckNoaXBNYWNyby5DT01QT05FTlRfTUFURVJJQUw7XHJcbiAgICAgICAgdGhpcy5oaWdobGlnaHRlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3cyB0aGUgdGV4dCBvZiB0aGUgQUxVIHRvIGluZGljYXRlIHRoZSBjdXJyZW50IGluc3RydWN0aW9uIGJlaW5nIHByb2Nlc3NlZC5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGRyYXdBTFVUZXh0KCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGRyYXdBTFVUZXh0Q29tcG9uZW50ID0gKHRleHQ6IHN0cmluZywgeE9mZnNldDogbnVtYmVyLCB5T2Zmc2V0OiBudW1iZXIpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWVzaCA9IERyYXdVdGlscy5idWlsZFRleHRNZXNoKHRleHQsXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnggKyB4T2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi55ICsgeU9mZnNldCwgdGhpcy50ZXh0U2l6ZSwgQUxVLkNPTVBPTkVOVF9NQVRFUklBTClcclxuICAgICAgICAgICAgdGhpcy5saXZlTWVzaGVzLnB1c2gobWVzaCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuYWRkKG1lc2gpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IG9wY29kZVN5bWJvbCA9IChvcGNvZGU6IHN0cmluZyk6IHN0cmluZyA9PiB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3Bjb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiQUREXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiQURESVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIitcIjtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJTVUJcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJTVUJJXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiLVwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIk1VTFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIk1VTElcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ4XCI7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiQU5EXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiJlwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIk9SXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidlwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkJHVFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkdUXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiPlwiO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkJMVFwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIkxUXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiPFwiO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEFMVSBvcGNvZGU6IFwiICsgb3Bjb2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5ub09wTWVzaC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5zdHJ1Y3Rpb24gPT0gbnVsbClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGRyYXdBTFVUZXh0Q29tcG9uZW50KG9wY29kZVN5bWJvbCh0aGlzLmluc3RydWN0aW9uLmdldE9wY29kZSgpKSwgMCwgQUxVLk9QX1lfT0ZGU0VUKTtcclxuICAgICAgICBkcmF3QUxVVGV4dENvbXBvbmVudChcIlJcIiArIHRoaXMuaW5zdHJ1Y3Rpb24uZ2V0T3AxUmVnKCksIEFMVS5ESVNUQU5DRV9UT19DRU5URVIsIEFMVS5PUF9ZX09GRlNFVCk7XHJcbiAgICAgICAgZHJhd0FMVVRleHRDb21wb25lbnQoKHRoaXMuaW5zdHJ1Y3Rpb24uaXNJbW1lZGlhdGUoKSA/XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RydWN0aW9uLmdldEltbWVkaWF0ZSgpIS50b1N0cmluZygpIDogXCJSXCIgKyB0aGlzLmluc3RydWN0aW9uLmdldE9wMlJlZygpKSxcclxuICAgICAgICAgICAgLUFMVS5ESVNUQU5DRV9UT19DRU5URVIsIEFMVS5PUF9ZX09GRlNFVCk7XHJcbiAgICAgICAgZHJhd0FMVVRleHRDb21wb25lbnQoKHRoaXMuaW5zdHJ1Y3Rpb24uaXNCcmFuY2goKSA/IFwiREVDT0RFUlwiIDogXCJSXCIgKyB0aGlzLmluc3RydWN0aW9uLmdldFJlc3VsdFJlZygpKSxcclxuICAgICAgICAgICAgMCwgQUxVLlJFU19ZX09GRlNFVCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcmV2ZW50cyB0aGUgcmVzdWx0IGZyb20gb3ZlcmZsb3dpbmcgdGhlIG1heGltdW0gYnl0ZSB2YWx1ZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbiBUaGUgcmVzdWx0IHRvIHByZXZlbnQgZnJvbSBvdmVyZmxvd2luZy5cclxuICAgICAqIEByZXR1cm5zIFRoZSByZXN1bHQgdGhhdCBoYXMgYmVlbiBwcmV2ZW50ZWQgZnJvbSBvdmVyZmxvd2luZy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcHJldmVudE92ZXJmbG93KG46IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbiAlIElTQS5NQVhfQllURV9WQUxVRTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0ID49IDAgPyByZXN1bHQgOiByZXN1bHQgKyBJU0EuTUFYX0JZVEVfVkFMVUU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWFkcyB0aGUgdmFsdWUgb2YgYSByZWdpc3Rlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVnaXN0ZXIgVGhlIHJlZ2lzdGVyIHRvIHJlYWQuXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBUaGUgdmFsdWUgb2YgdGhlIHJlZ2lzdGVyLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVhZChyZWdpc3RlcjogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCByZWdQZXJCYW5rID0gdGhpcy5yZWdpc3RlcnNbMF0uZ2V0U2l6ZSgpXHJcbiAgICAgICAgY29uc3QgYmFuayA9IE1hdGguZmxvb3IocmVnaXN0ZXIgLyByZWdQZXJCYW5rKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlcnNbYmFua10ucmVhZChyZWdpc3RlciAlIHJlZ1BlckJhbmspO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogV3JpdGVzIGEgdmFsdWUgdG8gYSByZWdpc3Rlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVnaXN0ZXIgVGhlIHJlZ2lzdGVyIHRvIHdyaXRlIHRvLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFRoZSB2YWx1ZSB0byB3cml0ZSB0byB0aGUgcmVnaXN0ZXIuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB3cml0ZShyZWdpc3RlcjogbnVtYmVyLCB2YWx1ZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgcmVnUGVyQmFuayA9IHRoaXMucmVnaXN0ZXJzWzBdLmdldFNpemUoKVxyXG4gICAgICAgIGNvbnN0IGJhbmsgPSBNYXRoLmZsb29yKHJlZ2lzdGVyIC8gcmVnUGVyQmFuayk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlcnNbYmFua10ud3JpdGUocmVnaXN0ZXIgJSByZWdQZXJCYW5rLCB2YWx1ZSwgdGhpcyk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge0NvbXB1dGVyQ2hpcE1hY3JvfSBmcm9tIFwiLi9Db21wdXRlckNoaXBNYWNyb1wiO1xyXG5pbXBvcnQge0NvbXB1dGVyQ2hpcH0gZnJvbSBcIi4uLy4uL0NvbXB1dGVyQ2hpcFwiO1xyXG5pbXBvcnQge0J1ZmZlckdlb21ldHJ5LCBNZXNoLCBNZXNoQmFzaWNNYXRlcmlhbCwgUGxhbmVHZW9tZXRyeX0gZnJvbSBcInRocmVlXCI7XHJcbmltcG9ydCB7RHJhd1V0aWxzfSBmcm9tIFwiLi4vLi4vLi4vRHJhd1V0aWxzXCI7XHJcbmltcG9ydCAqIGFzIEJ1ZmZlckdlb21ldHJ5VXRpbHMgZnJvbSBcInRocmVlL2V4YW1wbGVzL2pzbS91dGlscy9CdWZmZXJHZW9tZXRyeVV0aWxzXCI7XHJcbmltcG9ydCB7QUxVfSBmcm9tIFwiLi9BTFVcIjtcclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGFuIGFycmF5IG9mIGRhdGEgY2VsbHMsIHVzZWQgdG8gc2ltdWxhdGUgbWVtb3J5IG9yIHJlZ2lzdGVycyB3aXRoaW4gYSBjb21wdXRlciBjaGlwIHNpbXVsYXRpb24uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRGF0YUNlbGxBcnJheSBleHRlbmRzIENvbXB1dGVyQ2hpcE1hY3JvIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQlVGRkVSX0hFSUdIVDogbnVtYmVyID0gMC4xMTtcclxuICAgIHByb3RlY3RlZCBzdGF0aWMgcmVhZG9ubHkgQlVGRkVSX1dJRFRIOiBudW1iZXIgPSAwLjM7XHJcblxyXG4gICAgLyoqIFRoZSBzcGFjaW5nIGJldHdlZW4gZWFjaCBjZWxsIGluIHRoZSBhcnJheS4gKi9cclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IElOTkVSX1NQQUNJTkcgPSAwLjAxO1xyXG5cclxuICAgIC8qKiBUaGUgaW5pdGlhbCB2YWx1ZSB3aXRoIHdoaWNoIGVhY2ggcmVnaXN0ZXIgaW4gdGhlIGFycmF5IGlzIGZpbGxlZC4gKi9cclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IElOSVRJQUxfUkVHX1ZBTFVFOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgaW5pdGlhbFRleHRNYXRlcmlhbCA9IENvbXB1dGVyQ2hpcE1hY3JvLlRFWFRfTUFURVJJQUwuY2xvbmUoKTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgcmVjZW50bHlVcGRhdGVkTWVzaGVzOiBNZXNoW10gPSBbXTtcclxuXHJcbiAgICAvKiogQW4gYXJyYXkgb2YgdHVwbGVzIHJlcHJlc2VudGluZyB0aGUgeCBhbmQgeSBwb3NpdGlvbnMgb2YgZWFjaCBjZWxsIGluIHRoZSAzRCBzcGFjZS4gKi9cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgY2VsbFBvc2l0aW9uczogW251bWJlciwgbnVtYmVyXVtdID0gW107XHJcblxyXG4gICAgLyoqIFRoZSBnZW9tZXRyeSB1c2VkIGZvciBoaWdobGlnaHRpbmcgYSBjZWxsIGluIHRoZSBhcnJheS4gKi9cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgY2VsbEhpZ2hsaWdodEdlb21ldHJ5OiBQbGFuZUdlb21ldHJ5O1xyXG5cclxuICAgIC8qKiBUaGUgbnVtYmVyIG9mIHdvcmRzIChncm91cHMgb2YgY2VsbHMpIGluIHRoZSBhcnJheS4gKi9cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgbnVtYmVyT2ZXb3JkczogbnVtYmVyO1xyXG5cclxuXHJcbiAgICAvKiogQW4gYXJyYXkgcmVwcmVzZW50aW5nIHRoZSBtZW1vcnkgdmFsdWVzIHN0b3JlZCBpbiBlYWNoIGNlbGwuICovXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IG1lbW9yeUFycmF5OiBudW1iZXJbXTtcclxuXHJcbiAgICAvKiogT3B0aW9uYWwgbmFtZSBmb3IgdGhlIGJhbmsgb2YgcmVnaXN0ZXJzIG9yIG1lbW9yeSBhcnJheS4gKi9cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgYmFua05hbWU/OiBzdHJpbmc7XHJcblxyXG4gICAgLyoqIE9wdGlvbmFsIGFycmF5IG9mIG5hbWVzIGZvciBlYWNoIHJlZ2lzdGVyIHdpdGhpbiB0aGUgYXJyYXkuICovXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IHJlZ2lzdGVyTmFtZXM/OiBzdHJpbmdbXTtcclxuXHJcbiAgICAvKiogRmxhZyBpbmRpY2F0aW5nIHdoZXRoZXIgbWVtb3J5IG9wZXJhdGlvbnMgc2hvdWxkIGJlIGluc3RhbnQgd2l0aG91dCBhbnkgZGVsYXkuICovXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGRlbGF5OiBudW1iZXI7XHJcblxyXG4gICAgLyoqIFRoZSB6ZXJvIHJlZ2lzdGVyIGluZGV4LiAqL1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSB6ZXJvUmVnaXN0ZXI6IG51bWJlciB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAvKiogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIGRhdGEgY2VsbCBhcnJheSBpcyByZWFkeSBmb3IgYSByZWFkIG9yIHdyaXRlIG9wZXJhdGlvbi4gKi9cclxuICAgIHByaXZhdGUgcmVhZHk6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICAvKiogVGhlIGluZGV4IG9mIHRoZSBjdXJyZW50bHkgaGlnaGxpZ2h0ZWQgbWVtb3J5IGNlbGwsIGlmIGFueS4gKi9cclxuICAgIHByaXZhdGUgaGlnaGxpZ2h0ZWRNZW1vcnlDZWxsOiBudW1iZXIgPSAtMTtcclxuXHJcbiAgICAvKiogQSB0aW1lb3V0IGNvdW50ZXIgdXNlZCB0byBzaW11bGF0ZSBvcGVyYXRpb24gZGVsYXkuICovXHJcbiAgICBwcml2YXRlIG1lbW9yeU9wZXJhdGlvblRpbWVvdXQ6IG51bWJlciA9IDA7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IERhdGFDZWxsQXJyYXkgaW5zdGFuY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhcmVudCBUaGUgcGFyZW50IENvbXB1dGVyQ2hpcCBpbnN0YW5jZS5cclxuICAgICAqIEBwYXJhbSB4T2Zmc2V0IFRoZSB4LW9mZnNldCBpbiB0aGUgM0Qgc3BhY2Ugd2hlcmUgdGhlIGRhdGEgY2VsbCBhcnJheSBzaG91bGQgYmUgcG9zaXRpb25lZC5cclxuICAgICAqIEBwYXJhbSB5T2Zmc2V0IFRoZSB5LW9mZnNldCBpbiB0aGUgM0Qgc3BhY2Ugd2hlcmUgdGhlIGRhdGEgY2VsbCBhcnJheSBzaG91bGQgYmUgcG9zaXRpb25lZC5cclxuICAgICAqIEBwYXJhbSBudW1iZXJPZldvcmRzIFRoZSBudW1iZXIgb2Ygd29yZHMgaW4gdGhlIGRhdGEgY2VsbCBhcnJheS5cclxuICAgICAqIEBwYXJhbSBkZWxheSBUaGUgbWVtb3J5IG9wZXJhdGlvbiBkZWxheSBpbiBjbG9jayBjeWNsZXMuXHJcbiAgICAgKiBAcGFyYW0gemVyb1JlZ2lzdGVyIFRoZSBpbmRleCBvZiB0aGUgemVybyByZWdpc3RlciBpbiB0aGUgYXJyYXkuXHJcbiAgICAgKiBAcGFyYW0gcmVnaXN0ZXJOYW1lcyBBbiBvcHRpb25hbCBhcnJheSBvZiBuYW1lcyBmb3IgZWFjaCByZWdpc3RlciBpbiB0aGUgYXJyYXkuXHJcbiAgICAgKiBAcGFyYW0gYmFua05hbWUgQW4gb3B0aW9uYWwgbmFtZSBmb3IgdGhlIGJhbmsgb2YgcmVnaXN0ZXJzIG9yIG1lbW9yeSBhcnJheS5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocGFyZW50OiBDb21wdXRlckNoaXAsIHhPZmZzZXQ6IG51bWJlciA9IDAsIHlPZmZzZXQ6IG51bWJlciA9IDAsIG51bWJlck9mV29yZHM6IG51bWJlciA9IDQsXHJcbiAgICAgICAgICAgICAgICBkZWxheTogbnVtYmVyID0gMCwgemVyb1JlZ2lzdGVyOiBudW1iZXIgfCB1bmRlZmluZWQsIHJlZ2lzdGVyTmFtZXM/OiBzdHJpbmdbXSwgYmFua05hbWU/OiBzdHJpbmcpIHtcclxuICAgICAgICBzdXBlcihwYXJlbnQsIHhPZmZzZXQsIHlPZmZzZXQpO1xyXG4gICAgICAgIHRoaXMubnVtYmVyT2ZXb3JkcyA9IG51bWJlck9mV29yZHM7XHJcbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xyXG4gICAgICAgIHRoaXMuemVyb1JlZ2lzdGVyID0gemVyb1JlZ2lzdGVyO1xyXG4gICAgICAgIHRoaXMuYmFua05hbWUgPSBiYW5rTmFtZTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyTmFtZXMgPSByZWdpc3Rlck5hbWVzO1xyXG4gICAgICAgIHRoaXMubWVtb3J5QXJyYXkgPSBuZXcgQXJyYXkodGhpcy5udW1iZXJPZldvcmRzKS5maWxsKERhdGFDZWxsQXJyYXkuSU5JVElBTF9SRUdfVkFMVUUpO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSBEYXRhQ2VsbEFycmF5LkJVRkZFUl9XSURUSDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IERhdGFDZWxsQXJyYXkuQlVGRkVSX0hFSUdIVCAqIG51bWJlck9mV29yZHMgKyBEYXRhQ2VsbEFycmF5LklOTkVSX1NQQUNJTkcgKiAobnVtYmVyT2ZXb3JkcyAtIDEpO1xyXG4gICAgICAgIHRoaXMuY2VsbEhpZ2hsaWdodEdlb21ldHJ5ID0gbmV3IFBsYW5lR2VvbWV0cnkoRGF0YUNlbGxBcnJheS5CVUZGRVJfV0lEVEgsIERhdGFDZWxsQXJyYXkuQlVGRkVSX0hFSUdIVCk7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsVGV4dE1hdGVyaWFsLnRyYW5zcGFyZW50ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmluaXRpYWxUZXh0TWF0ZXJpYWwub3BhY2l0eSA9IDAuMjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXB1dGVzIHRoZSBkaW1lbnNpb25zIG9mIHRoZSBkYXRhIGNlbGwgYXJyYXkgYmFzZWQgb24gdGhlIG51bWJlciBvZiB3b3JkcyBhbmQgdGhlIHdvcmQgc2l6ZS5cclxuICAgICAqIFRoaXMgaXMgdXNlZnVsIGZvciBwb3NpdGlvbmluZyB0aGUgZGF0YSBjZWxsIGFycmF5IGluIHRoZSBzY2VuZSByZWxhdGl2ZSB0byBvdGhlciBkYXRhU3RydWN0dXJlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbnVtYmVyT2ZXb3JkcyBUaGUgbnVtYmVyIG9mIHdvcmRzIGluIHRoZSBkYXRhIGNlbGwgYXJyYXkuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZGltZW5zaW9ucyhudW1iZXJPZldvcmRzOiBudW1iZXIpOiB7IHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyIH0ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdpZHRoOiBEYXRhQ2VsbEFycmF5LkJVRkZFUl9XSURUSCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBEYXRhQ2VsbEFycmF5LkJVRkZFUl9IRUlHSFQgKiBudW1iZXJPZldvcmRzICsgRGF0YUNlbGxBcnJheS5JTk5FUl9TUEFDSU5HICogKG51bWJlck9mV29yZHMgLSAxKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHNpemUgKG51bWJlciBvZiBlbGVtZW50cykgb2YgdGhlIGRhdGEgY2VsbCBhcnJheS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0U2l6ZSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1lbW9yeUFycmF5Lmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRydWUgaWYgdGhlIGRhdGEgY2VsbCBhcnJheSBpcyByZWFkeSB0byBiZSByZWFkIGZyb20gb3Igd3JpdHRlbiB0by5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgcHVibGljIGlzUmVhZHkoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGVsYXkgPT0gMCkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZHk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBc2tzIHRoZSBkYXRhIGNlbGwgYXJyYXkgdG8gcGVyZm9ybSBhIG1lbW9yeSBvcGVyYXRpb24gKHJlYWQgb3Igd3JpdGUpIGF0IHRoZSBnaXZlbiBhZGRyZXNzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjaGlwIFRoZSBjaGlwIHRoYXQgaXMgYXNraW5nIGZvciB0aGUgbWVtb3J5IG9wZXJhdGlvblxyXG4gICAgICogQHBhcmFtIGFkZHJlc3MgVGhlIGFkZHJlc3Mgb2YgdGhlIG1lbW9yeSBvcGVyYXRpb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFza0Zvck1lbW9yeU9wZXJhdGlvbihjaGlwOiBDb21wdXRlckNoaXAsIGFkZHJlc3M6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmRlbGF5ID09IDApXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZXJlIGlzIG5vIG5lZWQgdG8gYXNrIGZvciBtZW1vcnkgb3BlcmF0aW9ucyB3aGVuIHRoZXJlIGlzIG5vIGRlbGF5XCIpO1xyXG4gICAgICAgIGlmICh0aGlzLm1lbW9yeU9wZXJhdGlvblRpbWVvdXQgPiAwKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5yZWFkeSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0Q2VsbChhZGRyZXNzKTtcclxuICAgICAgICB0aGlzLm1lbW9yeU9wZXJhdGlvblRpbWVvdXQgPSBjaGlwLmdldENsb2NrRnJlcXVlbmN5KCkgLyB0aGlzLnBhcmVudC5nZXRDbG9ja0ZyZXF1ZW5jeSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVhZHMgdGhlIHZhbHVlIGF0IHRoZSBnaXZlbiBhZGRyZXNzIGZyb20gdGhlIGRhdGEgY2VsbCBhcnJheS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYWRkcmVzcyBUaGUgYWRkcmVzcyB0byByZWFkIGZyb21cclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSB2YWx1ZSBhdCB0aGUgZ2l2ZW4gYWRkcmVzc1xyXG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBhZGRyZXNzIGlzIG91dCBvZiBib3VuZHMgb3IgdGhlIGRhdGEgY2VsbCBhcnJheSBpcyBub3QgcmVhZHkgdG8gYmUgcmVhZCBmcm9tXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZWFkKGFkZHJlc3M6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgdGhpcy5lbnN1cmVBZGRyZXNzSXNJbkJvdW5kcyhhZGRyZXNzKTtcclxuICAgICAgICB0aGlzLmNoZWNrSWZSZWFkeSgpO1xyXG4gICAgICAgIHRoaXMucmVhZHkgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNsZWFySGlnaGxpZ2h0cygpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1lbW9yeUFycmF5W2FkZHJlc3NdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogV3JpdGVzIHRoZSBnaXZlbiB2YWx1ZSB0byB0aGUgZ2l2ZW4gYWRkcmVzcyBpbiB0aGUgZGF0YSBjZWxsIGFycmF5LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhZGRyZXNzIFRoZSBhZGRyZXNzIHRvIHdyaXRlIHRvXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHdyaXRlXHJcbiAgICAgKiBAcGFyYW0gY2hpcE1hY3JvIFRoZSBjaGlwIHRoYXQgaXMgd3JpdGluZyB0aGUgdmFsdWVcclxuICAgICAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgYWRkcmVzcyBpcyBvdXQgb2YgYm91bmRzIG9yIHRoZSBkYXRhIGNlbGwgYXJyYXkgaXMgbm90IHJlYWR5IHRvIGJlIHdyaXR0ZW4gdG9cclxuICAgICAqL1xyXG4gICAgcHVibGljIHdyaXRlKGFkZHJlc3M6IG51bWJlciwgdmFsdWU6IG51bWJlciwgY2hpcE1hY3JvPzogQ29tcHV0ZXJDaGlwTWFjcm8pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmVuc3VyZUFkZHJlc3NJc0luQm91bmRzKGFkZHJlc3MpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tJZlJlYWR5KCk7XHJcbiAgICAgICAgaWYgKGFkZHJlc3MgPT09IHRoaXMuemVyb1JlZ2lzdGVyKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5tZW1vcnlBcnJheVthZGRyZXNzXSA9IHZhbHVlO1xyXG4gICAgICAgIERyYXdVdGlscy51cGRhdGVUZXh0KHRoaXMubGl2ZU1lc2hlc1thZGRyZXNzXSwgRHJhd1V0aWxzLnRvSGV4KHZhbHVlKSwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5jbGVhckhpZ2hsaWdodHMoKTtcclxuICAgICAgICBpZiAodGhpcy5kZWxheSA9PSAwKVxyXG4gICAgICAgICAgICB0aGlzLmhpZ2hsaWdodENlbGwoYWRkcmVzcywgY2hpcE1hY3JvKTtcclxuICAgICAgICB0aGlzLnJlYWR5ID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLm1lbW9yeU9wZXJhdGlvblRpbWVvdXQgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVtb3J5T3BlcmF0aW9uVGltZW91dC0tO1xyXG4gICAgICAgICAgICB0aGlzLnJlYWR5ID0gdGhpcy5tZW1vcnlPcGVyYXRpb25UaW1lb3V0IDw9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmRlbGF5ID09IDAgJiYgdGhpcy5oaWdobGlnaHRNZXNoZXMubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgdGhpcy5jbGVhckhpZ2hsaWdodHMoKTtcclxuICAgICAgICBpZiAodGhpcy5yZWNlbnRseVVwZGF0ZWRNZXNoZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCB0b1JlbW92ZTogbnVtYmVyW10gPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5yZWNlbnRseVVwZGF0ZWRNZXNoZXMuZm9yRWFjaCgobWVzaCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VNYXRlcmlhbCA9IG1lc2gubWF0ZXJpYWwgYXMgTWVzaEJhc2ljTWF0ZXJpYWw7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2VNYXRlcmlhbC50cmFuc3BhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VNYXRlcmlhbC50cmFuc3BhcmVudCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBiYXNlTWF0ZXJpYWwub3BhY2l0eSAtPSAwLjAxO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJhc2VNYXRlcmlhbC5vcGFjaXR5IDw9IHRoaXMuaW5pdGlhbFRleHRNYXRlcmlhbC5vcGFjaXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZU1hdGVyaWFsLm9wYWNpdHkgPSB0aGlzLmluaXRpYWxUZXh0TWF0ZXJpYWwub3BhY2l0eTtcclxuICAgICAgICAgICAgICAgICAgICB0b1JlbW92ZS5wdXNoKGluZGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIERyYXdVdGlscy51cGRhdGVNYXRlcmlhbChtZXNoLCBiYXNlTWF0ZXJpYWwpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdG9SZW1vdmUuZm9yRWFjaChpbmRleCA9PiB0aGlzLnJlY2VudGx5VXBkYXRlZE1lc2hlcy5zcGxpY2UoaW5kZXgsIDEpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZUdyYXBoaWNzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYWRkU3RhdGljTWVzaGVzKC4uLnRoaXMuYnVpbGREYXRhQ2VsbE1lc2hlcyh0aGlzLnJlZ2lzdGVyTmFtZXMpKTtcclxuICAgICAgICBpZiAodGhpcy5iYW5rTmFtZSlcclxuICAgICAgICAgICAgdGhpcy5hZGRTdGF0aWNNZXNoKERyYXdVdGlscy5idWlsZFRleHRNZXNoKHRoaXMuYmFua05hbWUsIHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55XHJcbiAgICAgICAgICAgICAgICArIHRoaXMuaGVpZ2h0IC8gMiArIERyYXdVdGlscy5iYXNlVGV4dEhlaWdodCAvIDIsIERhdGFDZWxsQXJyYXkuVEVYVF9TSVpFLFxyXG4gICAgICAgICAgICAgICAgQ29tcHV0ZXJDaGlwTWFjcm8uVEVYVF9NQVRFUklBTCwgdHJ1ZSlcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1lbW9yeUFycmF5Lmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICB0aGlzLmFkZExpdmVNZXNoKHRoaXMuYnVpbGREYXRhQ2VsbENvbnRlbnRzTWVzaChpKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcG9zZSgpIHtcclxuICAgICAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgICAgICAgdGhpcy5jZWxsSGlnaGxpZ2h0R2VvbWV0cnkuZGlzcG9zZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFySGlnaGxpZ2h0cygpIHtcclxuICAgICAgICBzdXBlci5jbGVhckhpZ2hsaWdodHMoKTtcclxuICAgICAgICBpZiAodGhpcy5oaWdobGlnaHRlZE1lbW9yeUNlbGwgPj0gMCAmJiB0aGlzLmxpdmVNZXNoZXNbdGhpcy5oaWdobGlnaHRlZE1lbW9yeUNlbGxdKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGl2ZU1lc2hlc1t0aGlzLmhpZ2hsaWdodGVkTWVtb3J5Q2VsbF0ubWF0ZXJpYWwgPSBDb21wdXRlckNoaXBNYWNyby5URVhUX01BVEVSSUFMLmNsb25lKClcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnJlY2VudGx5VXBkYXRlZE1lc2hlcy5pbmNsdWRlcyh0aGlzLmxpdmVNZXNoZXNbdGhpcy5oaWdobGlnaHRlZE1lbW9yeUNlbGxdKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWNlbnRseVVwZGF0ZWRNZXNoZXMucHVzaCh0aGlzLmxpdmVNZXNoZXNbdGhpcy5oaWdobGlnaHRlZE1lbW9yeUNlbGxdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmhpZ2hsaWdodGVkTWVtb3J5Q2VsbCA9IC0xO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEJ1aWxkcyB0aGUgbWVzaCBmb3IgdGhlIGNvbnRlbnRzIG9mIGEgZGF0YSBjZWxsLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIGRhdGEgY2VsbCBpbiB0aGUgbWVtb3J5IGFycmF5LlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBidWlsZERhdGFDZWxsQ29udGVudHNNZXNoKGluZGV4OiBudW1iZXIpOiBNZXNoIHtcclxuICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMubWVtb3J5QXJyYXkubGVuZ3RoKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbmRleCBvdXQgb2YgYm91bmRzXCIpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tZW1vcnlBcnJheVtpbmRleF0gPT0gRGF0YUNlbGxBcnJheS5JTklUSUFMX1JFR19WQUxVRSkge1xyXG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuY2VsbFBvc2l0aW9uc1tpbmRleF07XHJcbiAgICAgICAgICAgIGNvbnN0IHRleHRNZXNoID0gRHJhd1V0aWxzLmJ1aWxkVGV4dE1lc2goXHJcbiAgICAgICAgICAgICAgICBEcmF3VXRpbHMudG9IZXgodGhpcy5tZW1vcnlBcnJheVtpbmRleF0pLCBwb3NpdGlvblswXSwgcG9zaXRpb25bMV0gLSBEYXRhQ2VsbEFycmF5LkJVRkZFUl9IRUlHSFQgLyAyICsgRHJhd1V0aWxzLmJhc2VUZXh0SGVpZ2h0IC8gMlxyXG4gICAgICAgICAgICAgICAgLCBEYXRhQ2VsbEFycmF5LlRFWFRfU0laRSwgdGhpcy5pbml0aWFsVGV4dE1hdGVyaWFsLmNsb25lKCksIGZhbHNlKTtcclxuICAgICAgICAgICAgdGV4dE1lc2guZ2VvbWV0cnkuY2VudGVyKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0ZXh0TWVzaDtcclxuICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdmFsaWQgZGF0YSB0byBkaXNwbGF5IChwb29yIGluaXRpYWxpemF0aW9uID8pXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGlnaGxpZ2h0cyBhIGNlbGwgaW4gdGhlIGRhdGEgY2VsbCBhcnJheS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBjZWxsIHRvIGhpZ2hsaWdodC5cclxuICAgICAqIEBwYXJhbSBjaGlwTWFjcm8gVGhlIGNoaXAgdGhhdCBpcyBoaWdobGlnaHRpbmcgdGhlIGNlbGwuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGhpZ2hsaWdodENlbGwoaW5kZXg6IG51bWJlciwgY2hpcE1hY3JvPzogQ29tcHV0ZXJDaGlwTWFjcm8pOiB2b2lkIHtcclxuICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMubWVtb3J5QXJyYXkubGVuZ3RoKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbmRleCBvdXQgb2YgYm91bmRzXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmNsZWFySGlnaGxpZ2h0cygpO1xyXG4gICAgICAgIGNvbnN0IGNvbG9yID0gY2hpcE1hY3JvICYmIGNoaXBNYWNybyBpbnN0YW5jZW9mIEFMVSA/IENvbXB1dGVyQ2hpcE1hY3JvLkFMVV9NQVRFUklBTCA6IENvbXB1dGVyQ2hpcE1hY3JvLk1FTU9SWV9NQVRFUklBTFxyXG4gICAgICAgIGNvbnN0IGhpZ2hsaWdodE1lc2ggPSBuZXcgTWVzaCh0aGlzLmNlbGxIaWdobGlnaHRHZW9tZXRyeSwgY29sb3IpO1xyXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5jZWxsUG9zaXRpb25zW2luZGV4XTtcclxuICAgICAgICBoaWdobGlnaHRNZXNoLnBvc2l0aW9uLnNldChwb3NpdGlvblswXSwgcG9zaXRpb25bMV0sIDApO1xyXG5cclxuICAgICAgICB0aGlzLmxpdmVNZXNoZXNbaW5kZXhdLm1hdGVyaWFsID0gQ29tcHV0ZXJDaGlwTWFjcm8uQk9EWV9NQVRFUklBTDsgLy8gYmFjayB0byBub3JtYWwgb3BhY2l0eVxyXG5cclxuICAgICAgICB0aGlzLmhpZ2hsaWdodGVkTWVtb3J5Q2VsbCA9IGluZGV4O1xyXG4gICAgICAgIHRoaXMuYWRkSGlnaGxpZ2h0TWVzaChoaWdobGlnaHRNZXNoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEJ1aWxkcyB0aGUgbWVzaGVzIGZvciB0aGUgZGF0YSBjZWxsIGFycmF5IGFuZCBpdHMgcmVnaXN0ZXIgbmFtZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHJlZ2lzdGVyTmFtZXMgQW4gb3B0aW9uYWwgYXJyYXkgb2YgbmFtZXMgZm9yIGVhY2ggcmVnaXN0ZXIgaW4gdGhlIGFycmF5LlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBidWlsZERhdGFDZWxsTWVzaGVzKHJlZ2lzdGVyTmFtZXM/OiBzdHJpbmdbXSk6IFtNZXNoLCBNZXNoXSB7XHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBzdGFydCBwb3NpdGlvbnNcclxuICAgICAgICBjb25zdCBzdGFydFggPSB0aGlzLmdldFN0YXJ0UG9zaXRpb25YKCk7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRZID0gdGhpcy5nZXRTdGFydFBvc2l0aW9uWSgpO1xyXG5cclxuICAgICAgICAvLyBQcmVwYXJlIGFycmF5cyBmb3IgZ2VvbWV0cmllc1xyXG4gICAgICAgIGNvbnN0IHJlZ2lzdGVyR2VvbWV0cmllczogQnVmZmVyR2VvbWV0cnlbXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHJlZ2lzdGVyTmFtZXNHZW9tZXRyaWVzOiBCdWZmZXJHZW9tZXRyeVtdID0gW107XHJcblxyXG4gICAgICAgIC8vIEdlbmVyYXRlIGdlb21ldHJpZXMgZm9yIHJlZ2lzdGVycyBhbmQgdGhlaXIgbmFtZXNcclxuICAgICAgICB0aGlzLmdlbmVyYXRlR2VvbWV0cmllcyhyZWdpc3Rlckdlb21ldHJpZXMsIHJlZ2lzdGVyTmFtZXNHZW9tZXRyaWVzLCByZWdpc3Rlck5hbWVzLCBzdGFydFgsIHN0YXJ0WSk7XHJcblxyXG4gICAgICAgIC8vIE1lcmdlIGdlb21ldHJpZXMgZm9yIGVmZmljaWVuY3lcclxuICAgICAgICBjb25zdCBtZXJnZWRHZW9tZXRyeSA9IEJ1ZmZlckdlb21ldHJ5VXRpbHMubWVyZ2VHZW9tZXRyaWVzKHJlZ2lzdGVyR2VvbWV0cmllcywgdHJ1ZSk7XHJcbiAgICAgICAgY29uc3QgbWVyZ2VkTmFtZXNHZW9tZXRyeSA9IEJ1ZmZlckdlb21ldHJ5VXRpbHMubWVyZ2VHZW9tZXRyaWVzKHJlZ2lzdGVyTmFtZXNHZW9tZXRyaWVzLCB0cnVlKTtcclxuXHJcbiAgICAgICAgLy8gVmFsaWRhdGUgbWVyZ2VkIGdlb21ldHJpZXNcclxuICAgICAgICBpZiAoIW1lcmdlZEdlb21ldHJ5IHx8ICFtZXJnZWROYW1lc0dlb21ldHJ5KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBtZXJnZSBnZW9tZXRyaWVzXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmV0dXJuIG1lc2hlcyBjcmVhdGVkIGZyb20gbWVyZ2VkIGdlb21ldHJpZXNcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBuZXcgTWVzaChtZXJnZWRHZW9tZXRyeSwgQ29tcHV0ZXJDaGlwTWFjcm8uQ09NUE9ORU5UX01BVEVSSUFMKSxcclxuICAgICAgICAgICAgbmV3IE1lc2gobWVyZ2VkTmFtZXNHZW9tZXRyeSwgQ29tcHV0ZXJDaGlwTWFjcm8uQk9EWV9NQVRFUklBTClcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgeC1jb29yZGluYXRlIG9mIHRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgZGF0YSBjZWxsIGFycmF5LlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRTdGFydFBvc2l0aW9uWCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLnggLSB0aGlzLndpZHRoIC8gMiArIERhdGFDZWxsQXJyYXkuQlVGRkVSX1dJRFRIIC8gMjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHktY29vcmRpbmF0ZSBvZiB0aGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIGRhdGEgY2VsbCBhcnJheS5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0U3RhcnRQb3NpdGlvblkoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbi55IC0gdGhpcy5oZWlnaHQgLyAyICsgRGF0YUNlbGxBcnJheS5CVUZGRVJfSEVJR0hUIC8gMjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyB0aGUgZ2VvbWV0cmllcyBmb3IgdGhlIHJlZ2lzdGVycyBhbmQgdGhlaXIgbmFtZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHJlZ2lzdGVyR2VvbWV0cmllcyBUaGUgYXJyYXkgb2YgZ2VvbWV0cmllcyBmb3IgdGhlIHJlZ2lzdGVycy5cclxuICAgICAqIEBwYXJhbSByZWdpc3Rlck5hbWVzR2VvbWV0cmllcyBUaGUgYXJyYXkgb2YgZ2VvbWV0cmllcyBmb3IgdGhlIHJlZ2lzdGVyIG5hbWVzLlxyXG4gICAgICogQHBhcmFtIHJlZ2lzdGVyTmFtZXMgQW4gb3B0aW9uYWwgYXJyYXkgb2YgbmFtZXMgZm9yIGVhY2ggcmVnaXN0ZXIgaW4gdGhlIGFycmF5LlxyXG4gICAgICogQHBhcmFtIHN0YXJ0WCBUaGUgeC1jb29yZGluYXRlIG9mIHRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgZGF0YSBjZWxsIGFycmF5LlxyXG4gICAgICogQHBhcmFtIHN0YXJ0WSBUaGUgeS1jb29yZGluYXRlIG9mIHRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgZGF0YSBjZWxsIGFycmF5LlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUdlb21ldHJpZXMocmVnaXN0ZXJHZW9tZXRyaWVzOiBCdWZmZXJHZW9tZXRyeVtdLCByZWdpc3Rlck5hbWVzR2VvbWV0cmllczogQnVmZmVyR2VvbWV0cnlbXSwgcmVnaXN0ZXJOYW1lczogc3RyaW5nW10gfCB1bmRlZmluZWQsIHN0YXJ0WDogbnVtYmVyLCBzdGFydFk6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5udW1iZXJPZldvcmRzOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgeU9mZnNldCA9IHN0YXJ0WSArIGkgKiAoRGF0YUNlbGxBcnJheS5CVUZGRVJfSEVJR0hUICsgRGF0YUNlbGxBcnJheS5JTk5FUl9TUEFDSU5HKTtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVDZWxsR2VvbWV0cnkocmVnaXN0ZXJHZW9tZXRyaWVzLCBzdGFydFgsIHlPZmZzZXQpO1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZU5hbWVHZW9tZXRyeShyZWdpc3Rlck5hbWVzR2VvbWV0cmllcywgcmVnaXN0ZXJOYW1lcywgaSwgc3RhcnRYLCB5T2Zmc2V0KTtcclxuICAgICAgICAgICAgdGhpcy5jZWxsUG9zaXRpb25zLnB1c2goW3N0YXJ0WCwgeU9mZnNldF0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgdGhlIGdlb21ldHJ5IGZvciBhIHJlZ2lzdGVyIGNlbGwgaW4gdGhlIGFycmF5LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSByZWdpc3Rlckdlb21ldHJpZXMgVGhlIGFycmF5IG9mIGdlb21ldHJpZXMgZm9yIHRoZSByZWdpc3RlcnMuXHJcbiAgICAgKiBAcGFyYW0geE9mZnNldCBUaGUgeC1vZmZzZXQgZm9yIHRoZSByZWdpc3RlciBjZWxsLlxyXG4gICAgICogQHBhcmFtIHlPZmZzZXQgVGhlIHktb2Zmc2V0IGZvciB0aGUgcmVnaXN0ZXIgY2VsbC5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY3JlYXRlQ2VsbEdlb21ldHJ5KHJlZ2lzdGVyR2VvbWV0cmllczogQnVmZmVyR2VvbWV0cnlbXSwgeE9mZnNldDogbnVtYmVyLCB5T2Zmc2V0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCByZWdpc3Rlckdlb21ldHJ5ID0gdGhpcy5jZWxsSGlnaGxpZ2h0R2VvbWV0cnkuY2xvbmUoKTtcclxuICAgICAgICByZWdpc3Rlckdlb21ldHJ5LnRyYW5zbGF0ZSh4T2Zmc2V0LCB5T2Zmc2V0LCAwKTtcclxuICAgICAgICByZWdpc3Rlckdlb21ldHJpZXMucHVzaChyZWdpc3Rlckdlb21ldHJ5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgdGhlIGdlb21ldHJ5IGZvciB0aGUgbmFtZSBvZiBhIHJlZ2lzdGVyIGluIHRoZSBhcnJheS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcmVnaXN0ZXJOYW1lc0dlb21ldHJpZXMgVGhlIGFycmF5IG9mIGdlb21ldHJpZXMgZm9yIHRoZSByZWdpc3RlciBuYW1lcy5cclxuICAgICAqIEBwYXJhbSByZWdpc3Rlck5hbWVzIEFuIG9wdGlvbmFsIGFycmF5IG9mIG5hbWVzIGZvciBlYWNoIHJlZ2lzdGVyIGluIHRoZSBhcnJheS5cclxuICAgICAqIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIGNvbHVtbiBpbiB0aGUgYXJyYXkuXHJcbiAgICAgKiBAcGFyYW0geE9mZnNldCBUaGUgeC1vZmZzZXQgZm9yIHRoZSByZWdpc3RlciBuYW1lLlxyXG4gICAgICogQHBhcmFtIHlPZmZzZXQgVGhlIHktb2Zmc2V0IGZvciB0aGUgcmVnaXN0ZXIgbmFtZS5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY3JlYXRlTmFtZUdlb21ldHJ5KHJlZ2lzdGVyTmFtZXNHZW9tZXRyaWVzOiBCdWZmZXJHZW9tZXRyeVtdLCByZWdpc3Rlck5hbWVzOiBzdHJpbmdbXSB8IHVuZGVmaW5lZCwgaW5kZXg6IG51bWJlciwgeE9mZnNldDogbnVtYmVyLCB5T2Zmc2V0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCByZWdpc3Rlck5hbWUgPSByZWdpc3Rlck5hbWVzID8gcmVnaXN0ZXJOYW1lc1tpbmRleF0gOiBEcmF3VXRpbHMudG9IZXgoaW5kZXgpO1xyXG4gICAgICAgIGNvbnN0IHJlZ2lzdGVyTmFtZUdlb21ldHJ5ID1cclxuICAgICAgICAgICAgRHJhd1V0aWxzLmJ1aWxkVGV4dE1lc2gocmVnaXN0ZXJOYW1lLCAwLCAwLCBEYXRhQ2VsbEFycmF5LlRFWFRfU0laRSAvIDIsIERhdGFDZWxsQXJyYXkuQk9EWV9NQVRFUklBTCkuZ2VvbWV0cnkuY2VudGVyKClcclxuICAgICAgICAgICAgICAgICAgICAgLnRyYW5zbGF0ZSh4T2Zmc2V0LCB5T2Zmc2V0ICsgRGF0YUNlbGxBcnJheS5CVUZGRVJfSEVJR0hUIC8gMiAtIERyYXdVdGlscy5iYXNlVGV4dEhlaWdodCAvIDQsIDApO1xyXG4gICAgICAgIHJlZ2lzdGVyTmFtZXNHZW9tZXRyaWVzLnB1c2gocmVnaXN0ZXJOYW1lR2VvbWV0cnkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRW5zdXJlcyB0aGF0IHRoZSBnaXZlbiBhZGRyZXNzIGlzIHdpdGhpbiB0aGUgYm91bmRzIG9mIHRoZSBkYXRhIGFycmF5LlxyXG4gICAgICogQHBhcmFtIGFkZHJlc3MgVGhlIGFkZHJlc3MgdG8gY2hlY2suXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBhZGRyZXNzIGlzIG91dCBvZiBib3VuZHMuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZW5zdXJlQWRkcmVzc0lzSW5Cb3VuZHMoYWRkcmVzczogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKGFkZHJlc3MgPj0gdGhpcy5tZW1vcnlBcnJheS5sZW5ndGggfHwgYWRkcmVzcyA8IDApXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFkZHJlc3MgXCIgKyBhZGRyZXNzICsgXCIgaXMgb3V0IG9mIGJvdW5kcyBmb3IgZGF0YSBhcnJheSBmcm9tIFwiICsgdGhpcy5wYXJlbnQuZGlzcGxheU5hbWUoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgaWYgdGhlIGRhdGEgYXJyYXkgaXMgcmVhZHkgdG8gYmUgcmVhZCBmcm9tIG9yIHdyaXR0ZW4gdG8uXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBkYXRhIGFycmF5IGlzIG5vdCByZWFkeS5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjaGVja0lmUmVhZHkoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCEodGhpcy5kZWxheSA9PT0gMCkgJiYgIXRoaXMucmVhZHkpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGEgYXJyYXkgZnJvbSBcIiArIHRoaXMucGFyZW50LmRpc3BsYXlOYW1lKCkgKyBcIiBpcyBub3QgcmVhZHkgdG8gYmUgcmVhZFwiKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7SW5zdHJ1Y3Rpb25CdWZmZXJ9IGZyb20gXCIuL3ByaW1pdGl2ZXMvSW5zdHJ1Y3Rpb25CdWZmZXJcIjtcclxuaW1wb3J0IHtDb21wdXRlckNoaXB9IGZyb20gXCIuLi9Db21wdXRlckNoaXBcIjtcclxuaW1wb3J0IHtRdWV1ZX0gZnJvbSBcIi4uLy4uL2RhdGFTdHJ1Y3R1cmVzL1F1ZXVlXCI7XHJcbmltcG9ydCB7SW5zdHJ1Y3Rpb259IGZyb20gXCIuLi8uLi9kYXRhU3RydWN0dXJlcy9JbnN0cnVjdGlvblwiO1xyXG5pbXBvcnQge0luc3RydWN0aW9uRmV0Y2hlcn0gZnJvbSBcIi4vSW5zdHJ1Y3Rpb25GZXRjaGVyXCI7XHJcbmltcG9ydCB7QUxVfSBmcm9tIFwiLi9wcmltaXRpdmVzL0FMVVwiO1xyXG5pbXBvcnQge0lPSW50ZXJmYWNlfSBmcm9tIFwiLi9JT0ludGVyZmFjZVwiO1xyXG5pbXBvcnQge1NJU0RQcm9jZXNzb3J9IGZyb20gXCIuLi9TSVNEUHJvY2Vzc29yXCI7XHJcblxyXG4vKipcclxuICogVGhlIERlY29kZXIgY2xhc3MgcmVwcmVzZW50cyB0aGUgZGVjb2RlciBjb21wb25lbnQgb2YgdGhlIGNvbXB1dGVyIGNoaXAuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRGVjb2RlciBleHRlbmRzIEluc3RydWN0aW9uQnVmZmVyIHtcclxuICAgIHByaXZhdGUgZmV0Y2hlcjogSW5zdHJ1Y3Rpb25GZXRjaGVyO1xyXG4gICAgcHJpdmF0ZSBhbHU6IEFMVTtcclxuICAgIHByaXZhdGUgaW86IElPSW50ZXJmYWNlO1xyXG5cclxuICAgIHByaXZhdGUgcGlwZWxpbmVkOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IERlY29kZXIgaW5zdGFuY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhcmVudCBUaGUgcGFyZW50IENvbXB1dGVyQ2hpcCBpbnN0YW5jZS5cclxuICAgICAqIEBwYXJhbSBmZXRjaGVyIFRoZSBpbnN0cnVjdGlvbiBmZXRjaGVyIG9mIHRoZSBjb21wdXRlciBjaGlwLlxyXG4gICAgICogQHBhcmFtIGFsdSBUaGUgQUxVIG9mIHRoZSBjb21wdXRlciBjaGlwLlxyXG4gICAgICogQHBhcmFtIGlvIFRoZSBJL08gaW50ZXJmYWNlIG9mIHRoZSBjb21wdXRlciBjaGlwLlxyXG4gICAgICogQHBhcmFtIHhPZmZzZXQgVGhlIHgtb2Zmc2V0IGZyb20gdGhlIHBhcmVudCdzIHBvc2l0aW9uIHRvIHBsYWNlIHRoaXMgY29tcG9uZW50LlxyXG4gICAgICogQHBhcmFtIHlPZmZzZXQgVGhlIHktb2Zmc2V0IGZyb20gdGhlIHBhcmVudCdzIHBvc2l0aW9uIHRvIHBsYWNlIHRoaXMgY29tcG9uZW50LlxyXG4gICAgICogQHBhcmFtIGJ1ZmZlcldpZHRoIFRoZSB3aWR0aCBvZiB0aGUgaW5zdHJ1Y3Rpb24gYnVmZmVyLlxyXG4gICAgICogQHBhcmFtIGhvcml6b250YWwgV2hldGhlciB0aGUgaW5zdHJ1Y3Rpb24gYnVmZmVyIGlzIG9yaWVudGVkIGhvcml6b250YWxseS5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocGFyZW50OiBDb21wdXRlckNoaXAsIGZldGNoZXI6IEluc3RydWN0aW9uRmV0Y2hlciwgYWx1OiBBTFUsIGlvOiBJT0ludGVyZmFjZSxcclxuICAgICAgICAgICAgICAgIHhPZmZzZXQ6IG51bWJlciA9IDAsIHlPZmZzZXQ6IG51bWJlciA9IDAsIGJ1ZmZlcldpZHRoOiBudW1iZXIgPSBEZWNvZGVyLkJVRkZFUl9CQVNFX1dJRFRILCBob3Jpem9udGFsOiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgICAgICBzdXBlcihwYXJlbnQsIDEsIHhPZmZzZXQsIHlPZmZzZXQsIDAsIGZhbHNlLCBob3Jpem9udGFsLCBidWZmZXJXaWR0aCwgMCk7XHJcbiAgICAgICAgdGhpcy5mZXRjaGVyID0gZmV0Y2hlcjtcclxuICAgICAgICB0aGlzLmFsdSA9IGFsdTtcclxuICAgICAgICB0aGlzLmlvID0gaW87XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBkZWNvZGVyIHRvIGJlIHBpcGVsaW5lZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFBpcGVsaW5lZCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnBpcGVsaW5lZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGbHVzaGVzIHRoZSBpbnN0cnVjdGlvbiBidWZmZXIuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmbHVzaCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIHRha2Ugb3Igbm90IGEgYnJhbmNoIGJhc2VkIG9uIHRoZSByZXN1bHQgb2YgYSBjb25kaXRpb24gY2hlY2suXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNvbmRpdGlvblJlc3VsdCBUaGUgcmVzdWx0IG9mIHRoZSBjb25kaXRpb24gY2hlY2suXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0YWtlQnJhbmNoKGNvbmRpdGlvblJlc3VsdDogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGlmIChjb25kaXRpb25SZXN1bHQpXHJcbiAgICAgICAgICAgIHRoaXMuZmV0Y2hlci5zZXRQcm9ncmFtQ291bnRlcih0aGlzLnN0b3JlZEluc3RydWN0aW9ucy5kZXF1ZXVlKCkhLmdldEFkZHJlc3MoKSEpO1xyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3JlZEluc3RydWN0aW9ucy5kZXF1ZXVlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBhcmVudCBpbnN0YW5jZW9mIFNJU0RQcm9jZXNzb3IpXHJcbiAgICAgICAgICAgICh0aGlzLnBhcmVudCBhcyBTSVNEUHJvY2Vzc29yKS5ub3RpZnlJbnN0cnVjdGlvblJldGlyZWQoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWNvZGVzIHRoZSBuZXh0IGluc3RydWN0aW9uIGluIHRoZSBpbnN0cnVjdGlvbiBidWZmZXIuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkZWNvZGUoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgZXhlY3V0aW9uVW5pdHNSZWFkeSA9IHRoaXMuYWx1LmlzUmVhZHkoKSAmJiB0aGlzLmlvLmlzUmVhZHkoKTtcclxuICAgICAgICBpZiAodGhpcy5zdG9yZWRJbnN0cnVjdGlvbnMuaXNFbXB0eSgpKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5waXBlbGluZWQgJiYgIWV4ZWN1dGlvblVuaXRzUmVhZHkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbiA9IHRoaXMuZmV0Y2hlci5yZWFkKCk7XHJcbiAgICAgICAgICAgIGlmICghaW5zdHJ1Y3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hlci5uZXh0KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5lbnF1ZXVlSW5zdHJ1Y3Rpb24oaW5zdHJ1Y3Rpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGlwZWxpbmVkICYmICF0aGlzLnN0b3JlZEluc3RydWN0aW9ucy5nZXQoMCkhLmlzQnJhbmNoKCkpXHJcbiAgICAgICAgICAgIHRoaXMuZmV0Y2hlci5uZXh0KCk7XHJcblxyXG4gICAgICAgIGlmIChleGVjdXRpb25Vbml0c1JlYWR5KVxyXG4gICAgICAgICAgICB0aGlzLmRlY29kZUluc3RydWN0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFbnF1ZXVlcyBhbiBpbnN0cnVjdGlvbiB0byBiZSBkZWNvZGVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnN0cnVjdGlvbiBUaGUgaW5zdHJ1Y3Rpb24gdG8gYmUgZW5xdWV1ZWQuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZW5xdWV1ZUluc3RydWN0aW9uKGluc3RydWN0aW9uOiBJbnN0cnVjdGlvbik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc3RvcmVkSW5zdHJ1Y3Rpb25zLmVucXVldWUoaW5zdHJ1Y3Rpb24pO1xyXG4gICAgICAgIGlmICh0aGlzLmxpdmVNZXNoZXNbMF0pXHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUucmVtb3ZlKHRoaXMubGl2ZU1lc2hlc1swXSk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1lc2ggPSB0aGlzLmJ1aWxkQnVmZmVyVGV4dE1lc2goMCk7XHJcbiAgICAgICAgdGhpcy5saXZlTWVzaGVzWzBdID0gbWVzaDtcclxuICAgICAgICB0aGlzLnNjZW5lLmFkZChtZXNoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERlY29kZXMgdGhlIG5leHQgaW5zdHJ1Y3Rpb24gaW4gdGhlIGluc3RydWN0aW9uIGJ1ZmZlci5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBkZWNvZGVJbnN0cnVjdGlvbigpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBzdG9yZWRJbnN0cnVjdGlvbiA9IHRoaXMuc3RvcmVkSW5zdHJ1Y3Rpb25zLnBlZWsoKTtcclxuICAgICAgICBpZiAoIXN0b3JlZEluc3RydWN0aW9uKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaWYgKHN0b3JlZEluc3RydWN0aW9uLmlzQXJpdGhtZXRpYygpKVxyXG4gICAgICAgICAgICB0aGlzLmFsdS5jb21wdXRlKHRoaXMsIHRoaXMuc3RvcmVkSW5zdHJ1Y3Rpb25zLmRlcXVldWUoKSEpO1xyXG4gICAgICAgIGVsc2UgaWYgKHN0b3JlZEluc3RydWN0aW9uLmlzTWVtb3J5T3BlcmF0aW9uKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5pby5wcm9jZXNzSU8odGhpcy5zdG9yZWRJbnN0cnVjdGlvbnMuZGVxdWV1ZSgpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHN0b3JlZEluc3RydWN0aW9uLmlzQnJhbmNoKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5hbHUuY29tcHV0ZSh0aGlzLCBzdG9yZWRJbnN0cnVjdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5saXZlTWVzaGVzWzBdICYmIHRoaXMuc3RvcmVkSW5zdHJ1Y3Rpb25zLmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZSh0aGlzLmxpdmVNZXNoZXNbMF0pO1xyXG4gICAgICAgICAgICB0aGlzLmxpdmVNZXNoZXNbMF0uZ2VvbWV0cnkuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmxpdmVNZXNoZXNbMF0gPSB0aGlzLmJ1aWxkQnVmZmVyVGV4dE1lc2goMCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuYWRkKHRoaXMubGl2ZU1lc2hlc1swXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGVjb2RlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZChfcmVhZENvdW50OiBudW1iZXIpOiBRdWV1ZTxJbnN0cnVjdGlvbj4ge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRlY29kZXIgc2hvdWxkIG5vdCBiZSByZWFkIGZyb21cIik7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge0luc3RydWN0aW9uQnVmZmVyfSBmcm9tIFwiLi9wcmltaXRpdmVzL0luc3RydWN0aW9uQnVmZmVyXCI7XHJcbmltcG9ydCB7Q29tcHV0ZXJDaGlwfSBmcm9tIFwiLi4vQ29tcHV0ZXJDaGlwXCI7XHJcbmltcG9ydCB7RGF0YUNlbGxBcnJheX0gZnJvbSBcIi4vcHJpbWl0aXZlcy9EYXRhQ2VsbEFycmF5XCI7XHJcbmltcG9ydCB7UXVldWV9IGZyb20gXCIuLi8uLi9kYXRhU3RydWN0dXJlcy9RdWV1ZVwiO1xyXG5pbXBvcnQge0luc3RydWN0aW9ufSBmcm9tIFwiLi4vLi4vZGF0YVN0cnVjdHVyZXMvSW5zdHJ1Y3Rpb25cIjtcclxuaW1wb3J0IHtXb3JraW5nTWVtb3J5fSBmcm9tIFwiLi4vV29ya2luZ01lbW9yeVwiO1xyXG5pbXBvcnQge0RyYXdVdGlsc30gZnJvbSBcIi4uLy4uL0RyYXdVdGlsc1wiO1xyXG5pbXBvcnQge1NJU0RQcm9jZXNzb3J9IGZyb20gXCIuLi9TSVNEUHJvY2Vzc29yXCI7XHJcblxyXG4vKipcclxuICogUmVwcmVzZW50cyB0aGUgSS9PIGludGVyZmFjZSBvZiBhIGNvbXB1dGVyIGNoaXAsIGhhbmRsaW5nIEkvTyBvcGVyYXRpb25zIHdpdGggaW5zdHJ1Y3Rpb25zLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIElPSW50ZXJmYWNlIGV4dGVuZHMgSW5zdHJ1Y3Rpb25CdWZmZXIge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSByZWdpc3RlcnM6IERhdGFDZWxsQXJyYXlbXTtcclxuICAgIHByaXZhdGUgbWVtb3J5OiBXb3JraW5nTWVtb3J5IHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgSU9JbnRlcmZhY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtDb21wdXRlckNoaXB9IHBhcmVudCBUaGUgcGFyZW50IGNvbXB1dGVyIGNoaXAgY29tcG9uZW50LlxyXG4gICAgICogQHBhcmFtIHtEYXRhQ2VsbEFycmF5fSByZWdpc3RlcnMgVGhlIHJlZ2lzdGVycyBhc3NvY2lhdGVkIHdpdGggdGhlIEkvTyBpbnRlcmZhY2UuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geE9mZnNldCBUaGUgeCBvZmZzZXQgZnJvbSB0aGUgcGFyZW50J3MgcG9zaXRpb24uXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geU9mZnNldCBUaGUgeSBvZmZzZXQgZnJvbSB0aGUgcGFyZW50J3MgcG9zaXRpb24uXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYnVmZmVyV2lkdGggVGhlIHdpZHRoIG9mIHRoZSBpbnN0cnVjdGlvbiBidWZmZXIuXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGhvcml6b250YWwgRGV0ZXJtaW5lcyBpZiB0aGUgYnVmZmVyIGlzIG9yaWVudGVkIGhvcml6b250YWxseS5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocGFyZW50OiBDb21wdXRlckNoaXAsIHJlZ2lzdGVyczogRGF0YUNlbGxBcnJheVtdLCB4T2Zmc2V0OiBudW1iZXIgPSAwLFxyXG4gICAgICAgICAgICAgICAgeU9mZnNldDogbnVtYmVyID0gMCwgYnVmZmVyV2lkdGg6IG51bWJlciA9IElPSW50ZXJmYWNlLkJVRkZFUl9CQVNFX1dJRFRILCBob3Jpem9udGFsOiBib29sZWFuID0gdHJ1ZSkge1xyXG4gICAgICAgIHN1cGVyKHBhcmVudCwgMSwgeE9mZnNldCwgeU9mZnNldCwgMCwgZmFsc2UsIGhvcml6b250YWwsIGJ1ZmZlcldpZHRoLCAwKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVycyA9IHJlZ2lzdGVycztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHdvcmtpbmcgbWVtb3J5IHRvIGJlIHVzZWQgYnkgdGhlIEkvTyBpbnRlcmZhY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtXb3JraW5nTWVtb3J5fSBtZW1vcnkgVGhlIHdvcmtpbmcgbWVtb3J5IHRvIGJlIHVzZWQuXHJcbiAgICAgKi9cclxuXHJcbiAgICBwdWJsaWMgc2V0V29ya2luZ01lbW9yeShtZW1vcnk6IFdvcmtpbmdNZW1vcnkgfCB1bmRlZmluZWQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm1lbW9yeSA9IG1lbW9yeTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZsdXNoZXMgdGhlIGluc3RydWN0aW9uIGJ1ZmZlci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGZsdXNoKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyBpZiB0aGUgSS9PIGludGVyZmFjZSBpcyByZWFkeSBmb3IgbmV3IGluc3RydWN0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBubyBpbnN0cnVjdGlvbnMgYXJlIGN1cnJlbnRseSBiZWluZyBwcm9jZXNzZWQsIGZhbHNlIG90aGVyd2lzZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGlzUmVhZHkoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmVkSW5zdHJ1Y3Rpb25zLmlzRW1wdHkoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFByb2Nlc3NlcyBhbiBpbnN0cnVjdGlvbiBieSByZWFkaW5nIG9yIHdyaXRpbmcgdG8gdGhlIG1lbW9yeS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0luc3RydWN0aW9ufSBpbnN0cnVjdGlvbiBUaGUgaW5zdHJ1Y3Rpb24gdG8gcHJvY2Vzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHByb2Nlc3NJTyhpbnN0cnVjdGlvbjogSW5zdHJ1Y3Rpb24gfCB1bmRlZmluZWQpOiB2b2lkIHtcclxuICAgICAgICBpZiAoaW5zdHJ1Y3Rpb24gPT0gdW5kZWZpbmVkIHx8IHRoaXMubWVtb3J5ID09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pc1JlYWR5KCkpXHJcbiAgICAgICAgICAgIHRoaXMuZW5xdWV1ZUluc3RydWN0aW9uKGluc3RydWN0aW9uKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc3RvcmVkSW5zdHJ1Y3Rpb24gPSB0aGlzLnN0b3JlZEluc3RydWN0aW9ucy5wZWVrKCk7XHJcbiAgICAgICAgaWYgKHN0b3JlZEluc3RydWN0aW9uID09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGlmICh0aGlzLm1lbW9yeS5pc1JlYWR5KHN0b3JlZEluc3RydWN0aW9uLmdldEFkZHJlc3MoKSEpKVxyXG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGVJbnN0cnVjdGlvbihzdG9yZWRJbnN0cnVjdGlvbik7XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVtb3J5LmFza0Zvck1lbW9yeU9wZXJhdGlvbih0aGlzLnBhcmVudCwgc3RvcmVkSW5zdHJ1Y3Rpb24uZ2V0QWRkcmVzcygpISk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudCBpbnN0YW5jZW9mIFNJU0RQcm9jZXNzb3IpIHtcclxuICAgICAgICAgICAgICAgICh0aGlzLnBhcmVudCBhcyBTSVNEUHJvY2Vzc29yKS5oaWdobGlnaHRNYWluTWVtb3J5VHJhY2UoXHJcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcihzdG9yZWRJbnN0cnVjdGlvbi5nZXRBZGRyZXNzKCkhKSwgSU9JbnRlcmZhY2UuTUVNT1JZX01BVEVSSUFMKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RvcmVkSW5zdHJ1Y3Rpb25zLmlzRW1wdHkoKSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQgaW5zdGFuY2VvZiBTSVNEUHJvY2Vzc29yKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3B1ID0gdGhpcy5wYXJlbnQgYXMgU0lTRFByb2Nlc3NvcjtcclxuICAgICAgICAgICAgICAgIGNwdS5jbGVhckhpZ2hsaWdodGVkVHJhY2VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnByb2Nlc3NJTyh0aGlzLnN0b3JlZEluc3RydWN0aW9ucy5wZWVrKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWQoX3JlYWRDb3VudDogbnVtYmVyKTogUXVldWU8SW5zdHJ1Y3Rpb24+IHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEZWNvZGVyIHNob3VsZCBub3QgYmUgcmVhZCBmcm9tLlwiKTtcclxuICAgIH1cclxuXHJcbiAgICB3cml0ZShpbnN0cnVjdGlvbnM6IFF1ZXVlPEluc3RydWN0aW9uPiwgX3dyaXRlQ291bnQ6IG51bWJlciA9IGluc3RydWN0aW9ucy5zaXplKCkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEZWNvZGVyIHNob3VsZCBub3QgYmUgd3JpdHRlbiB0bywgdXNlIHByb2Nlc3NJTygpIGluc3RlYWQuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRW5xdWV1ZXMgYW4gaW5zdHJ1Y3Rpb24gdG8gYmUgcHJvY2Vzc2VkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7SW5zdHJ1Y3Rpb259IGluc3RydWN0aW9uIFRoZSBpbnN0cnVjdGlvbiB0byBlbnF1ZXVlLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBlbnF1ZXVlSW5zdHJ1Y3Rpb24oaW5zdHJ1Y3Rpb246IEluc3RydWN0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zdG9yZWRJbnN0cnVjdGlvbnMuZW5xdWV1ZShpbnN0cnVjdGlvbik7XHJcbiAgICAgICAgaWYgKHRoaXMubGl2ZU1lc2hlc1swXSlcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmUodGhpcy5saXZlTWVzaGVzWzBdKTtcclxuICAgICAgICBjb25zdCBtZXNoID0gdGhpcy5idWlsZEJ1ZmZlclRleHRNZXNoKDAsIHRoaXMuc2hvcnRNZW1vcnlJbnN0cnVjdGlvbihpbnN0cnVjdGlvbikpO1xyXG4gICAgICAgIHRoaXMubGl2ZU1lc2hlc1swXSA9IG1lc2g7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQobWVzaCk7XHJcbiAgICAgICAgdGhpcy5oaWdobGlnaHRCdWZmZXIoMCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXhlY3V0ZXMgdGhlIGluc3RydWN0aW9uIGJ5IHJlYWRpbmcgb3Igd3JpdGluZyB0byB0aGUgbWVtb3J5LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBzdG9yZWRJbnN0cnVjdGlvbiBUaGUgaW5zdHJ1Y3Rpb24gdG8gZXhlY3V0ZS5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZXhlY3V0ZUluc3RydWN0aW9uKHN0b3JlZEluc3RydWN0aW9uOiBJbnN0cnVjdGlvbik6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLm1lbW9yeSA9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0UmVnID0gc3RvcmVkSW5zdHJ1Y3Rpb24uZ2V0UmVzdWx0UmVnKCk7XHJcbiAgICAgICAgaWYgKHN0b3JlZEluc3RydWN0aW9uLmdldE9wY29kZSgpID09IFwiTE9BRFwiKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlZ1BlckJhbmsgPSB0aGlzLnJlZ2lzdGVyc1swXS5nZXRTaXplKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlZyA9IHRoaXMucmVnaXN0ZXJzW01hdGguZmxvb3IocmVzdWx0UmVnIC8gcmVnUGVyQmFuayldO1xyXG4gICAgICAgICAgICByZWcud3JpdGUocmVzdWx0UmVnICUgcmVnUGVyQmFuaywgdGhpcy5tZW1vcnkucmVhZChzdG9yZWRJbnN0cnVjdGlvbi5nZXRBZGRyZXNzKCkhKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzdG9yZWRJbnN0cnVjdGlvbi5nZXRPcGNvZGUoKSA9PSBcIlNUT1JFXCIpXHJcbiAgICAgICAgICAgIHRoaXMubWVtb3J5LndyaXRlKHN0b3JlZEluc3RydWN0aW9uLmdldEFkZHJlc3MoKSEsIHJlc3VsdFJlZyk7XHJcbiAgICAgICAgdGhpcy5zdG9yZWRJbnN0cnVjdGlvbnMuZGVxdWV1ZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLnBhcmVudCBpbnN0YW5jZW9mIFNJU0RQcm9jZXNzb3IpXHJcbiAgICAgICAgICAgICh0aGlzLnBhcmVudCBhcyBTSVNEUHJvY2Vzc29yKS5ub3RpZnlJbnN0cnVjdGlvblJldGlyZWQoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUJ1ZmZlclRleHQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIGJ1ZmZlciB0ZXh0IHRvIHJlZmxlY3QgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGJ1ZmZlci5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHVwZGF0ZUJ1ZmZlclRleHQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmUodGhpcy5saXZlTWVzaGVzWzBdKTtcclxuICAgICAgICB0aGlzLmxpdmVNZXNoZXMgPSBbXTtcclxuICAgICAgICB0aGlzLmNsZWFySGlnaGxpZ2h0cygpO1xyXG4gICAgICAgIGNvbnN0IG1lc2ggPSB0aGlzLmJ1aWxkQnVmZmVyVGV4dE1lc2goMCk7XHJcbiAgICAgICAgdGhpcy5saXZlTWVzaGVzWzBdID0gbWVzaFxyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkKG1lc2gpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29udmVydHMgYW4gaW5zdHJ1Y3Rpb24gdG8gYSBzaG9ydCBtZW1vcnkgaW5zdHJ1Y3Rpb24gc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnN0cnVjdGlvbiBUaGUgaW5zdHJ1Y3Rpb24gdG8gY29udmVydC5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2hvcnRNZW1vcnlJbnN0cnVjdGlvbihpbnN0cnVjdGlvbjogSW5zdHJ1Y3Rpb24pOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiAoaW5zdHJ1Y3Rpb24uZ2V0T3Bjb2RlKCkgPT0gXCJMT0FEXCIgPyBcIkxEIFwiIDogXCJTVCBcIikgKyBcIltcIiArIERyYXdVdGlscy50b0hleChpbnN0cnVjdGlvbi5nZXRBZGRyZXNzKCkhKSArIFwiXVwiO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtDb21wdXRlckNoaXB9IGZyb20gXCIuLi9Db21wdXRlckNoaXBcIjtcclxuaW1wb3J0IHtDb21wdXRlckNoaXBNYWNyb30gZnJvbSBcIi4vcHJpbWl0aXZlcy9Db21wdXRlckNoaXBNYWNyb1wiO1xyXG5pbXBvcnQge0luc3RydWN0aW9uRmV0Y2hlcn0gZnJvbSBcIi4vSW5zdHJ1Y3Rpb25GZXRjaGVyXCI7XHJcbmltcG9ydCB7QUxVfSBmcm9tIFwiLi9wcmltaXRpdmVzL0FMVVwiO1xyXG5pbXBvcnQge0RhdGFDZWxsQXJyYXl9IGZyb20gXCIuL3ByaW1pdGl2ZXMvRGF0YUNlbGxBcnJheVwiO1xyXG5pbXBvcnQge0RlY29kZXJ9IGZyb20gXCIuL0RlY29kZXJcIjtcclxuaW1wb3J0IHtJT0ludGVyZmFjZX0gZnJvbSBcIi4vSU9JbnRlcmZhY2VcIjtcclxuaW1wb3J0IHtJU0F9IGZyb20gXCIuLi8uLi9kYXRhU3RydWN0dXJlcy9JU0FcIjtcclxuaW1wb3J0IHtJbnN0cnVjdGlvbk1lbW9yeX0gZnJvbSBcIi4uL0luc3RydWN0aW9uTWVtb3J5XCI7XHJcbmltcG9ydCB7V29ya2luZ01lbW9yeX0gZnJvbSBcIi4uL1dvcmtpbmdNZW1vcnlcIjtcclxuaW1wb3J0IHtJbnN0cnVjdGlvbkNhY2hlfSBmcm9tIFwiLi9JbnN0cnVjdGlvbkNhY2hlXCI7XHJcblxyXG4vKipcclxuICogQSBTaW5nbGUgSW5zdHJ1Y3Rpb24sIFNpbmdsZSBEYXRhIChTSVNEKSBwcm9jZXNzb3IgY29yZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTSVNEQ29yZSBleHRlbmRzIENvbXB1dGVyQ2hpcE1hY3JvIHtcclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IElOTkVSX1NQQUNJTkdfTCA9IDAuMDI7XHJcblxyXG4gICAgcHJpdmF0ZSBpbnN0cnVjdGlvbkZldGNoZXI6IEluc3RydWN0aW9uRmV0Y2hlcjtcclxuICAgIHByaXZhdGUgYWx1OiBBTFU7XHJcbiAgICBwcml2YXRlIHJlZ2lzdGVyczogRGF0YUNlbGxBcnJheVtdID0gW107XHJcbiAgICBwcml2YXRlIElPSW50ZXJmYWNlOiBJT0ludGVyZmFjZTtcclxuICAgIHByaXZhdGUgZGVjb2RlcjogRGVjb2RlcjtcclxuXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGlDYWNoZTogSW5zdHJ1Y3Rpb25DYWNoZSB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgU0lTRENvcmUgaW5zdGFuY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhcmVudCBUaGUgcGFyZW50IENvbXB1dGVyQ2hpcCBpbnN0YW5jZS5cclxuICAgICAqIEBwYXJhbSB4T2Zmc2V0IFRoZSB4LW9mZnNldCBmcm9tIHRoZSBwYXJlbnQncyBwb3NpdGlvbiB0byBwbGFjZSB0aGlzIGNvbXBvbmVudC5cclxuICAgICAqIEBwYXJhbSB5T2Zmc2V0IFRoZSB5LW9mZnNldCBmcm9tIHRoZSBwYXJlbnQncyBwb3NpdGlvbiB0byBwbGFjZSB0aGlzIGNvbXBvbmVudC5cclxuICAgICAqIEBwYXJhbSBpbnN0cnVjdGlvbkNhY2hlIFRoZSBpbnN0cnVjdGlvbiBjYWNoZSBmb3IgdGhlIFNJU0RDb3JlLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQ6IENvbXB1dGVyQ2hpcCwgeE9mZnNldDogbnVtYmVyID0gMCwgeU9mZnNldDogbnVtYmVyID0gMCwgaW5zdHJ1Y3Rpb25DYWNoZT86IEluc3RydWN0aW9uQ2FjaGUpIHtcclxuICAgICAgICBzdXBlcihwYXJlbnQsIHhPZmZzZXQsIHlPZmZzZXQpO1xyXG4gICAgICAgIHRoaXMuaUNhY2hlID0gaW5zdHJ1Y3Rpb25DYWNoZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIFNJU0RDb3JlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGRpbWVuc2lvbnMoKTogeyB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciB9IHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB3aWR0aDogSU9JbnRlcmZhY2UuQlVGRkVSX0hFSUdIVCArIERhdGFDZWxsQXJyYXkuZGltZW5zaW9ucyhJU0EuUkVHSVNURVJfQ09VTlQgLyA0KS53aWR0aCAqIDQgKyBTSVNEQ29yZS5JTk5FUl9TUEFDSU5HX0wgKiAzLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IEFMVS5kaW1lbnNpb25zKCkuaGVpZ2h0ICogMyArIFNJU0RDb3JlLklOTkVSX1NQQUNJTkdfTCAqIDQgKyBEYXRhQ2VsbEFycmF5LmRpbWVuc2lvbnMoSVNBLlJFR0lTVEVSX0NPVU5UIC8gNCkuaGVpZ2h0XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgaW5zdHJ1Y3Rpb24gbWVtb3J5IHRvIGJlIHVzZWQgYnkgdGhlIGNvcmUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRJbnN0cnVjdGlvbk1lbW9yeShpbnN0cnVjdGlvbk1lbW9yeTogSW5zdHJ1Y3Rpb25NZW1vcnkgfCB1bmRlZmluZWQpOiB2b2lkIHtcclxuICAgICAgICBpZiAoaW5zdHJ1Y3Rpb25NZW1vcnkgPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25GZXRjaGVyLnNldEluc3RydWN0aW9uTWVtb3J5KHVuZGVmaW5lZCk7XHJcbiAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25GZXRjaGVyLnNldEluc3RydWN0aW9uTWVtb3J5KGluc3RydWN0aW9uTWVtb3J5LmdldEluc3RydWN0aW9uQnVmZmVyKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgd29ya2luZyBtZW1vcnkgdG8gYmUgdXNlZCBieSB0aGUgY29yZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFdvcmtpbmdNZW1vcnkod29ya2luZ01lbW9yeTogV29ya2luZ01lbW9yeSB8IHVuZGVmaW5lZCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuSU9JbnRlcmZhY2Uuc2V0V29ya2luZ01lbW9yeSh3b3JraW5nTWVtb3J5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGNvcmUgdG8gYmUgcGlwZWxpbmVkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0UGlwZWxpbmVkKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZGVjb2Rlci5zZXRQaXBlbGluZWQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZsdXNoZXMgdGhlIHBpcGVsaW5lIG9mIHRoZSBjb3JlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZmx1c2hQaXBlbGluZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmluc3RydWN0aW9uRmV0Y2hlci5mbHVzaCgpO1xyXG4gICAgICAgIHRoaXMuZGVjb2Rlci5mbHVzaCgpO1xyXG4gICAgICAgIHRoaXMuYWx1LmZsdXNoKCk7XHJcbiAgICAgICAgdGhpcy5JT0ludGVyZmFjZS5mbHVzaCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVHcmFwaGljcygpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCByZWdDb2x1bW5zID0gNDtcclxuICAgICAgICBjb25zdCBhbHVEaW1zID0gQUxVLmRpbWVuc2lvbnMoKTtcclxuICAgICAgICBjb25zdCByZWdpc3RlckRpbXMgPSBEYXRhQ2VsbEFycmF5LmRpbWVuc2lvbnMoSVNBLlJFR0lTVEVSX0NPVU5UIC8gcmVnQ29sdW1ucyk7XHJcbiAgICAgICAgY29uc3QgYWx1V2lkdGggPSByZWdpc3RlckRpbXMud2lkdGggKiByZWdDb2x1bW5zICsgU0lTRENvcmUuSU5ORVJfU1BBQ0lOR19MICogKHJlZ0NvbHVtbnMgLSAxKTtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IGFsdURpbXMuaGVpZ2h0ICogMyArIFNJU0RDb3JlLklOTkVSX1NQQUNJTkdfTCAqIChJU0EuUkVHSVNURVJfQ09VTlQgLyByZWdDb2x1bW5zKSArIHJlZ2lzdGVyRGltcy5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IElPSW50ZXJmYWNlLkJVRkZFUl9IRUlHSFQgKyByZWdpc3RlckRpbXMud2lkdGggKiByZWdDb2x1bW5zICsgU0lTRENvcmUuSU5ORVJfU1BBQ0lOR19MICogcmVnQ29sdW1ucztcclxuXHJcbiAgICAgICAgY29uc3QgcmVnaXN0ZXJOYW1lcyA9IG5ldyBBcnJheShJU0EuUkVHSVNURVJfQ09VTlQpLmZpbGwoMCkubWFwKChfLCBpKSA9PiBgUiR7aX1gKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWdDb2x1bW5zOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgcmVnID0gbmV3IERhdGFDZWxsQXJyYXkodGhpcy5wYXJlbnQsXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnggLSB0aGlzLndpZHRoIC8gMiArIElPSW50ZXJmYWNlLkJVRkZFUl9IRUlHSFQgKyBTSVNEQ29yZS5JTk5FUl9TUEFDSU5HX0wgKyByZWdpc3RlckRpbXMud2lkdGggLyAyXHJcbiAgICAgICAgICAgICAgICArIGkgKiAocmVnaXN0ZXJEaW1zLndpZHRoICsgU0lTRENvcmUuSU5ORVJfU1BBQ0lOR19MKSxcclxuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueSArIHRoaXMuaGVpZ2h0IC8gMiAtIHJlZ2lzdGVyRGltcy5oZWlnaHQgLyAyLCBJU0EuUkVHSVNURVJfQ09VTlQgLyByZWdDb2x1bW5zLCAwLCBJU0EuWkVST19SRUdJU1RFUixcclxuICAgICAgICAgICAgICAgIHJlZ2lzdGVyTmFtZXMuc2xpY2UoaSAqIChJU0EuUkVHSVNURVJfQ09VTlQgLyByZWdDb2x1bW5zKSwgKGkgKyAxKSAqIChJU0EuUkVHSVNURVJfQ09VTlQgLyByZWdDb2x1bW5zKSkpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVycy5wdXNoKHJlZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBpb0xlbmd0aCA9IHJlZ2lzdGVyRGltcy5oZWlnaHQgKyBhbHVEaW1zLmhlaWdodCArIFNJU0RDb3JlLklOTkVSX1NQQUNJTkdfTDtcclxuICAgICAgICB0aGlzLklPSW50ZXJmYWNlID0gbmV3IElPSW50ZXJmYWNlKHRoaXMucGFyZW50LCB0aGlzLnJlZ2lzdGVycyxcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi54IC0gdGhpcy53aWR0aCAvIDIgKyBJT0ludGVyZmFjZS5CVUZGRVJfSEVJR0hUIC8gMixcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi55ICsgdGhpcy5oZWlnaHQgLyAyIC0gaW9MZW5ndGggLyAyLCBpb0xlbmd0aCwgdHJ1ZSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWx1ID0gbmV3IEFMVSh0aGlzLnBhcmVudCwgdGhpcy5yZWdpc3RlcnMsIHRoaXMucG9zaXRpb24ueCArIHRoaXMud2lkdGggLyAyIC0gYWx1V2lkdGggLyAyLFxyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnkgLSB0aGlzLmhlaWdodCAvIDIgKyBhbHVEaW1zLmhlaWdodCAqIDIgKyBTSVNEQ29yZS5JTk5FUl9TUEFDSU5HX0wgKiAyICsgYWx1RGltcy5oZWlnaHQgLyAyLCBhbHVXaWR0aCk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25GZXRjaGVyID0gbmV3IEluc3RydWN0aW9uRmV0Y2hlcih0aGlzLnBhcmVudCwgdGhpcy5wb3NpdGlvbi54LFxyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLnkgLSB0aGlzLmhlaWdodCAvIDIgKyBhbHVEaW1zLmhlaWdodCAvIDIsIHRoaXMud2lkdGgsIHRoaXMuaUNhY2hlKTtcclxuXHJcbiAgICAgICAgdGhpcy5kZWNvZGVyID0gbmV3IERlY29kZXIodGhpcy5wYXJlbnQsIHRoaXMuaW5zdHJ1Y3Rpb25GZXRjaGVyLCB0aGlzLmFsdSwgdGhpcy5JT0ludGVyZmFjZSxcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi54LCB0aGlzLnBvc2l0aW9uLnkgLSB0aGlzLmhlaWdodCAvIDIgKyBhbHVEaW1zLmhlaWdodCAvIDIgKyBTSVNEQ29yZS5JTk5FUl9TUEFDSU5HX0xcclxuICAgICAgICAgICAgKyBhbHVEaW1zLmhlaWdodCwgdGhpcy53aWR0aCk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25GZXRjaGVyLmluaXRpYWxpemVHcmFwaGljcygpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJzLmZvckVhY2gociA9PiByLmluaXRpYWxpemVHcmFwaGljcygpKTtcclxuICAgICAgICB0aGlzLmFsdS5pbml0aWFsaXplR3JhcGhpY3MoKTtcclxuICAgICAgICB0aGlzLklPSW50ZXJmYWNlLmluaXRpYWxpemVHcmFwaGljcygpO1xyXG4gICAgICAgIHRoaXMuZGVjb2Rlci5pbml0aWFsaXplR3JhcGhpY3MoKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlcnMuZm9yRWFjaChyID0+IHIudXBkYXRlKCkpO1xyXG4gICAgICAgIHRoaXMuYWx1LnVwZGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuSU9JbnRlcmZhY2UudXBkYXRlKCk7XHJcbiAgICAgICAgdGhpcy5kZWNvZGVyLnVwZGF0ZSgpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtDb21wdXRlckNoaXBNYWNyb30gZnJvbSBcIi4vcHJpbWl0aXZlcy9Db21wdXRlckNoaXBNYWNyb1wiO1xyXG5pbXBvcnQge0luc3RydWN0aW9ufSBmcm9tIFwiLi4vLi4vZGF0YVN0cnVjdHVyZXMvSW5zdHJ1Y3Rpb25cIjtcclxuaW1wb3J0IHtDb21wdXRlckNoaXB9IGZyb20gXCIuLi9Db21wdXRlckNoaXBcIjtcclxuaW1wb3J0IHtDb3VudGVyfSBmcm9tIFwiLi9wcmltaXRpdmVzL0NvdW50ZXJcIjtcclxuaW1wb3J0IHtJbnN0cnVjdGlvbkJ1ZmZlcn0gZnJvbSBcIi4vcHJpbWl0aXZlcy9JbnN0cnVjdGlvbkJ1ZmZlclwiO1xyXG5pbXBvcnQge1F1ZXVlfSBmcm9tIFwiLi4vLi4vZGF0YVN0cnVjdHVyZXMvUXVldWVcIjtcclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgbGluZSBpbiB0aGUgaW5zdHJ1Y3Rpb24gY2FjaGUgb2YgYSBjb21wdXRlciBjaGlwLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEluc3RydWN0aW9uQ2FjaGVMaW5lIGV4dGVuZHMgQ29tcHV0ZXJDaGlwTWFjcm8ge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgV0lEVEggPSAwLjk7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBTUEFDSU5HID0gMC4wMTtcclxuICAgIHByaXZhdGUgdmFsaWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgYWRkcmVzc1RhZzogQ291bnRlcjtcclxuICAgIHByaXZhdGUgaW5zdHJ1Y3Rpb25CdWZmZXI6IEluc3RydWN0aW9uQnVmZmVyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgSW5zdHJ1Y3Rpb25DYWNoZUxpbmUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtDb21wdXRlckNoaXB9IHBhcmVudCBUaGUgcGFyZW50IGNvbXB1dGVyIGNoaXAgY29tcG9uZW50LlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHhPZmZzZXQgVGhlIHggb2Zmc2V0IGZyb20gdGhlIHBhcmVudCdzIHBvc2l0aW9uLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHlPZmZzZXQgVGhlIHkgb2Zmc2V0IGZyb20gdGhlIHBhcmVudCdzIHBvc2l0aW9uLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgaW5zdHJ1Y3Rpb24gY2FjaGUgbGluZS5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocGFyZW50OiBDb21wdXRlckNoaXAsIHhPZmZzZXQ6IG51bWJlciA9IDAsIHlPZmZzZXQ6IG51bWJlciA9IDAsIHdpZHRoOiBudW1iZXIgPSBJbnN0cnVjdGlvbkNhY2hlTGluZS5XSURUSCkge1xyXG4gICAgICAgIHN1cGVyKHBhcmVudCwgeE9mZnNldCwgeU9mZnNldCk7XHJcbiAgICAgICAgdGhpcy5oZWlnaHQgPSBJbnN0cnVjdGlvbkJ1ZmZlci5CVUZGRVJfSEVJR0hUO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICB0aGlzLmFkZHJlc3NUYWcgPSBuZXcgQ291bnRlcihwYXJlbnQsIHhPZmZzZXQgLSB0aGlzLndpZHRoIC8gMiArIENvdW50ZXIuZGltZW5zaW9ucygpLndpZHRoIC8gMiwgeU9mZnNldCk7XHJcbiAgICAgICAgY29uc3QgYnVmZmVyV2lkdGggPSB0aGlzLndpZHRoIC0gQ291bnRlci5kaW1lbnNpb25zKCkud2lkdGggLSBJbnN0cnVjdGlvbkNhY2hlTGluZS5TUEFDSU5HO1xyXG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25CdWZmZXIgPSBuZXcgSW5zdHJ1Y3Rpb25CdWZmZXIocGFyZW50LCAxLFxyXG4gICAgICAgICAgICB4T2Zmc2V0ICsgdGhpcy53aWR0aCAvIDIgLSBidWZmZXJXaWR0aCAvIDIsIHlPZmZzZXQsIDAsIGZhbHNlLFxyXG4gICAgICAgICAgICBmYWxzZSwgYnVmZmVyV2lkdGgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgZGltZW5zaW9ucyBvZiB0aGUgaW5zdHJ1Y3Rpb24gY2FjaGUgbGluZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7e3dpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyfX0gVGhlIHdpZHRoIGFuZCBoZWlnaHQgb2YgdGhlIGluc3RydWN0aW9uIGNhY2hlIGxpbmUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZGltZW5zaW9ucygpOiB7IHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyIH0ge1xyXG4gICAgICAgIHJldHVybiB7d2lkdGg6IEluc3RydWN0aW9uQ2FjaGVMaW5lLldJRFRILCBoZWlnaHQ6IEluc3RydWN0aW9uQnVmZmVyLkJVRkZFUl9IRUlHSFR9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xlYXJzIHRoZSBpbnN0cnVjdGlvbiBzdG9yZWQgaW4gdGhlIGNhY2hlIGxpbmUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5hZGRyZXNzVGFnLnNldCgwKTtcclxuICAgICAgICB0aGlzLmluc3RydWN0aW9uQnVmZmVyLmNsZWFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZXRlcm1pbmVzIGlmIHRoZSBjYWNoZSBsaW5lIGlzIHZhbGlkLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBjYWNoZSBsaW5lIGlzIHZhbGlkLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpc1ZhbGlkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZhbGlkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgYWRkcmVzcyB0YWcgb2YgdGhlIGNhY2hlIGxpbmUuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge251bWJlcn0gVGhlIGFkZHJlc3MgdGFnIG9mIHRoZSBjYWNoZSBsaW5lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0QWRkcmVzc1RhZygpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZHJlc3NUYWcuZ2V0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWFkcyB0aGUgaW5zdHJ1Y3Rpb24gZnJvbSB0aGUgY2FjaGUgbGluZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7SW5zdHJ1Y3Rpb259IFRoZSBpbnN0cnVjdGlvbiByZWFkIGZyb20gdGhlIGNhY2hlIGxpbmUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZWFkKCk6IEluc3RydWN0aW9uIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICBpZiAoIXRoaXMudmFsaWQpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY2FjaGUgbGluZSByZWFkXCIpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RydWN0aW9uQnVmZmVyLnBlZWsoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFdyaXRlcyBhbiBpbnN0cnVjdGlvbiB0byB0aGUgY2FjaGUgbGluZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0luc3RydWN0aW9ufSBpbnN0cnVjdGlvbiBUaGUgaW5zdHJ1Y3Rpb24gdG8gYmUgd3JpdHRlbi5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhZGRyZXNzIFRoZSBhZGRyZXNzIG9mIHRoZSBpbnN0cnVjdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHdyaXRlKGluc3RydWN0aW9uOiBJbnN0cnVjdGlvbiwgYWRkcmVzczogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy52YWxpZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5hZGRyZXNzVGFnLnNldChhZGRyZXNzKTtcclxuICAgICAgICB0aGlzLmluc3RydWN0aW9uQnVmZmVyLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbkJ1ZmZlci53cml0ZShRdWV1ZS5vZihpbnN0cnVjdGlvbikpO1xyXG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25CdWZmZXIucGVlaygpOyAvLyBoYWNreSB3YXkgdG8gaGlnaGxpZ2h0IHRoZSBpbnN0cnVjdGlvblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW52YWxpZGF0ZXMgdGhlIGNhY2hlIGxpbmUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpbnZhbGlkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudmFsaWQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xlYXJIaWdobGlnaHRzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYWRkcmVzc1RhZy5jbGVhckhpZ2hsaWdodHMoKTtcclxuICAgICAgICB0aGlzLmluc3RydWN0aW9uQnVmZmVyLmNsZWFySGlnaGxpZ2h0cygpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVHcmFwaGljcygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmFkZHJlc3NUYWcuaW5pdGlhbGl6ZUdyYXBoaWNzKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbkJ1ZmZlci5pbml0aWFsaXplR3JhcGhpY3MoKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5hZGRyZXNzVGFnLnVwZGF0ZSh0cnVlKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7Q29tcHV0ZXJDaGlwTWFjcm99IGZyb20gXCIuL3ByaW1pdGl2ZXMvQ29tcHV0ZXJDaGlwTWFjcm9cIjtcclxuaW1wb3J0IHtDb21wdXRlckNoaXB9IGZyb20gXCIuLi9Db21wdXRlckNoaXBcIjtcclxuaW1wb3J0IHtJbnN0cnVjdGlvbkNhY2hlTGluZX0gZnJvbSBcIi4vSW5zdHJ1Y3Rpb25DYWNoZUxpbmVcIjtcclxuaW1wb3J0IHtBZGRyZXNzZWRJbnN0cnVjdGlvbkJ1ZmZlcn0gZnJvbSBcIi4vQWRkcmVzc2VkSW5zdHJ1Y3Rpb25CdWZmZXJcIjtcclxuaW1wb3J0IHtJbnN0cnVjdGlvbn0gZnJvbSBcIi4uLy4uL2RhdGFTdHJ1Y3R1cmVzL0luc3RydWN0aW9uXCI7XHJcbmltcG9ydCB7TWVzaEJhc2ljTWF0ZXJpYWx9IGZyb20gXCJ0aHJlZVwiO1xyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgdGhlIGluc3RydWN0aW9uIGNhY2hlIG9mIGEgY29tcHV0ZXIgY2hpcCwgaGFuZGxpbmcgdGhlIGNhY2hpbmcgb2YgaW5zdHJ1Y3Rpb25zLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEluc3RydWN0aW9uQ2FjaGUgZXh0ZW5kcyBDb21wdXRlckNoaXBNYWNybyB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGNhY2hlTGluZXM6IEluc3RydWN0aW9uQ2FjaGVMaW5lW107XHJcbiAgICBwcml2YXRlIGluc3RydWN0aW9uTWVtb3J5OiBBZGRyZXNzZWRJbnN0cnVjdGlvbkJ1ZmZlcjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgZGVsYXk6IG51bWJlcjtcclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IElOTkVSX1NQQUNJTkcgPSAwLjAxO1xyXG5cclxuICAgIHByaXZhdGUgcmVhZFRpbWVvdXQ6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIHJlYWR5VG9CZVJlYWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgcmVxdWVzdGVkQWRkcmVzczogbnVtYmVyID0gLTE7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBJbnN0cnVjdGlvbkNhY2hlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7Q29tcHV0ZXJDaGlwfSBwYXJlbnQgVGhlIHBhcmVudCBjb21wdXRlciBjaGlwIGNvbXBvbmVudC5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4T2Zmc2V0IFRoZSB4IG9mZnNldCBmcm9tIHRoZSBwYXJlbnQncyBwb3NpdGlvbi5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5T2Zmc2V0IFRoZSB5IG9mZnNldCBmcm9tIHRoZSBwYXJlbnQncyBwb3NpdGlvbi5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzaXplIFRoZSBudW1iZXIgb2YgbGluZXMgaW4gdGhlIGNhY2hlLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgY2FjaGUgbGluZXMuXHJcbiAgICAgKiBAcGFyYW0gZGVsYXkgVGhlIGZldGNoaW5nIGRlbGF5IG9mIHRoZSBpbnN0cnVjdGlvbiBidWZmZXIuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHBhcmVudDogQ29tcHV0ZXJDaGlwLCB4T2Zmc2V0OiBudW1iZXIgPSAwLCB5T2Zmc2V0OiBudW1iZXIgPSAwLCBzaXplOiBudW1iZXIgPSA0LCB3aWR0aDogbnVtYmVyID0gMC45LCBkZWxheTogbnVtYmVyID0gMSkge1xyXG4gICAgICAgIHN1cGVyKHBhcmVudCwgeE9mZnNldCwgeU9mZnNldCk7XHJcbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xyXG4gICAgICAgIHRoaXMuY2FjaGVMaW5lcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGNhY2hlTGluZUhlaWdodCA9IEluc3RydWN0aW9uQ2FjaGVMaW5lLmRpbWVuc2lvbnMoKS5oZWlnaHQ7XHJcbiAgICAgICAgY29uc3QgdG90YWxIZWlnaHQgPSBzaXplICogY2FjaGVMaW5lSGVpZ2h0ICsgKHNpemUgLSAxKSAqIEluc3RydWN0aW9uQ2FjaGUuSU5ORVJfU1BBQ0lORztcclxuXHJcbiAgICAgICAgbGV0IHN0YXJ0WU9mZnNldCA9IHlPZmZzZXQgLSB0b3RhbEhlaWdodCAvIDIgKyBjYWNoZUxpbmVIZWlnaHQgLyAyO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlTGluZXMucHVzaChuZXcgSW5zdHJ1Y3Rpb25DYWNoZUxpbmUocGFyZW50LFxyXG4gICAgICAgICAgICAgICAgeE9mZnNldCwgc3RhcnRZT2Zmc2V0ICsgaSAqIChjYWNoZUxpbmVIZWlnaHQgKyBJbnN0cnVjdGlvbkNhY2hlLklOTkVSX1NQQUNJTkcpLCB3aWR0aCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGluc3RydWN0aW9uIG1lbW9yeSB0byBiZSB1c2VkIGJ5IHRoZSBjYWNoZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldEluc3RydWN0aW9uTWVtb3J5KGluc3RydWN0aW9uTWVtb3J5OiBBZGRyZXNzZWRJbnN0cnVjdGlvbkJ1ZmZlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25NZW1vcnkgPSBpbnN0cnVjdGlvbk1lbW9yeTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZsdXNoZXMgdGhlIGNhY2hlLCBjbGVhcmluZyBhbGwgaW5zdHJ1Y3Rpb25zIHN0b3JlZCBpbiBpdC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGZsdXNoKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2FjaGVMaW5lcy5mb3JFYWNoKGxpbmUgPT4gbGluZS5jbGVhcigpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERldGVybWluZXMgaWYgdGhlIGNhY2hlIGlzIHJlYWR5IHRvIGJlIHJlYWQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFkZHJlc3MgVGhlIGFkZHJlc3Mgb2YgdGhlIGluc3RydWN0aW9uIHRvIGJlIHJlYWQuXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgY2FjaGUgaXMgcmVhZHkgdG8gYmUgcmVhZCwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNSZWFkeVRvQmVSZWFkKGFkZHJlc3M6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICh0aGlzLmRlbGF5ID09IDApXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGRlbGF5IGluc3RydWN0aW9uIGJ1ZmZlcnMgYXJlIGFsd2F5cyByZWFkeSB0byBiZSByZWFkXCIpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlYWR5VG9CZVJlYWQgJiYgdGhpcy5jYWNoZUxpbmVDb250YWluaW5nKGFkZHJlc3MpICE9IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFza3MgZm9yIHRoZSBpbnN0cnVjdGlvbiBhdCB0aGUgZ2l2ZW4gYWRkcmVzcyB0byBiZSBmZXRjaGVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhZGRyZXNzIFRoZSBhZGRyZXNzIG9mIHRoZSBpbnN0cnVjdGlvbiB0byBiZSBmZXRjaGVkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXNrRm9ySW5zdHJ1Y3Rpb25BdChhZGRyZXNzOiBudW1iZXIpOiBbbnVtYmVyLCBNZXNoQmFzaWNNYXRlcmlhbCB8IG51bGxdIHtcclxuICAgICAgICBpZiAodGhpcy5kZWxheSA9PSAwKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBkZWxheSBpbnN0cnVjdGlvbiBidWZmZXJzIGFyZSBhbHdheXMgcmVhZHkgdG8gYmUgcmVhZFwiKTtcclxuICAgICAgICBpZiAoYWRkcmVzcyA9PSB0aGlzLnJlcXVlc3RlZEFkZHJlc3MgJiYgdGhpcy5yZWFkVGltZW91dCA+IDApXHJcbiAgICAgICAgICAgIHJldHVybiBbLTEsIG51bGxdOyAvLyBubyBuZWVkIHRvIGFzayBmb3IgaW5zdHJ1Y3Rpb25zIGlmIHRoZXkgYXJlIGFscmVhZHkgYmVpbmcgZmV0Y2hlZFxyXG5cclxuICAgICAgICB0aGlzLnJlcXVlc3RlZEFkZHJlc3MgPSBhZGRyZXNzO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5jYWNoZUxpbmVDb250YWluaW5nKGFkZHJlc3MpICE9IHVuZGVmaW5lZCkgeyAvLyBjYWNoZSBoaXRcclxuICAgICAgICAgICAgdGhpcy5yZWFkVGltZW91dCA9IHRoaXMuZGVsYXk7XHJcbiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5pbnN0cnVjdGlvbk1lbW9yeS5pc1JlYWR5VG9CZVJlYWQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlTGluZXMuZm9yRWFjaChsaW5lID0+IGxpbmUuY2xlYXJIaWdobGlnaHRzKCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnN0cnVjdGlvbk1lbW9yeS5hc2tGb3JJbnN0cnVjdGlvbnNBdCh0aGlzLnBhcmVudCwgMSwgYWRkcmVzcyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZUxpbmVzWzBdLndyaXRlKHRoaXMuaW5zdHJ1Y3Rpb25NZW1vcnkuZmV0Y2hJbnN0cnVjdGlvbkF0KGFkZHJlc3MpISwgYWRkcmVzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVMaW5lcy5wdXNoKHRoaXMuY2FjaGVMaW5lcy5zaGlmdCgpISk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbLTEsIG51bGxdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVhZHMgdGhlIGluc3RydWN0aW9uIGF0IHRoZSBnaXZlbiBhZGRyZXNzIGZyb20gdGhlIGNhY2hlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhZGRyZXNzIFRoZSBhZGRyZXNzIG9mIHRoZSBpbnN0cnVjdGlvbiB0byBiZSByZWFkLlxyXG4gICAgICogQHJldHVybnMge0luc3RydWN0aW9ufSBUaGUgaW5zdHJ1Y3Rpb24gYXQgdGhlIGdpdmVuIGFkZHJlc3MuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmZXRjaEluc3RydWN0aW9uQXQoYWRkcmVzczogbnVtYmVyKTogSW5zdHJ1Y3Rpb24gfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmICh0aGlzLmRlbGF5ICE9IDAgJiYgIXRoaXMuaXNSZWFkeVRvQmVSZWFkKGFkZHJlc3MpKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluc3RydWN0aW9uIGJ1ZmZlciBmcm9tICR7dGhpcy5wYXJlbnQuZGlzcGxheU5hbWUoKX0gaXMgbm90IHJlYWR5IHRvIGJlIHJlYWRgKTtcclxuICAgICAgICBjb25zdCBsaW5lID0gdGhpcy5jYWNoZUxpbmVDb250YWluaW5nKGFkZHJlc3MpO1xyXG4gICAgICAgIGlmIChsaW5lID09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBZGRyZXNzICR7YWRkcmVzc30gbm90IGZvdW5kIGluIGNhY2hlYCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVhZHlUb0JlUmVhZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY2FjaGVMaW5lcy5mb3JFYWNoKGxpbmUgPT4gbGluZS5jbGVhckhpZ2hsaWdodHMoKSk7XHJcbiAgICAgICAgdGhpcy5jYWNoZUxpbmVzLnB1c2godGhpcy5jYWNoZUxpbmVzLnNwbGljZShsaW5lLCAxKVswXSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVMaW5lc1tsaW5lXS5yZWFkKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBkaW1lbnNpb25zIG9mIHRoZSBpbnN0cnVjdGlvbiBjYWNoZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2l6ZSBUaGUgbnVtYmVyIG9mIGxpbmVzIGluIHRoZSBjYWNoZS5cclxuICAgICAqIEByZXR1cm5zIHt7d2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXJ9fSBUaGUgZGltZW5zaW9ucyBvZiB0aGUgaW5zdHJ1Y3Rpb24gY2FjaGUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZGltZW5zaW9ucyhzaXplOiBudW1iZXIgPSA0KTogeyB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciB9IHtcclxuICAgICAgICBjb25zdCBjYWNoZUxpbmVEaW1lbnNpb25zID0gSW5zdHJ1Y3Rpb25DYWNoZUxpbmUuZGltZW5zaW9ucygpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdpZHRoOiBjYWNoZUxpbmVEaW1lbnNpb25zLndpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHNpemUgKiBjYWNoZUxpbmVEaW1lbnNpb25zLmhlaWdodCArIChzaXplIC0gMSkgKiBJbnN0cnVjdGlvbkNhY2hlLklOTkVSX1NQQUNJTkdcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZUdyYXBoaWNzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2FjaGVMaW5lcy5mb3JFYWNoKGxpbmUgPT4gbGluZS5pbml0aWFsaXplR3JhcGhpY3MoKSk7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IEluc3RydWN0aW9uQ2FjaGVMaW5lLmRpbWVuc2lvbnMoKS53aWR0aDtcclxuICAgICAgICB0aGlzLmhlaWdodCA9IEluc3RydWN0aW9uQ2FjaGUuZGltZW5zaW9ucyh0aGlzLmNhY2hlTGluZXMubGVuZ3RoKS5oZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2FjaGVMaW5lcy5mb3JFYWNoKGxpbmUgPT4gbGluZS51cGRhdGUoKSk7XHJcbiAgICAgICAgaWYgKHRoaXMucmVhZFRpbWVvdXQgPiAwKSB7XHJcbiAgICAgICAgICAgIC0tdGhpcy5yZWFkVGltZW91dDtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmVhZFRpbWVvdXQgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0ZWRBZGRyZXNzID0gLTE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlYWR5VG9CZVJlYWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGNhY2hlIGxpbmUgY29udGFpbmluZyB0aGUgZ2l2ZW4gYWRkcmVzcy5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjYWNoZUxpbmVDb250YWluaW5nKGFkZHJlc3M6IG51bWJlcik6IG51bWJlciB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNhY2hlTGluZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNhY2hlTGluZXNbaV0uaXNWYWxpZCgpICYmIHRoaXMuY2FjaGVMaW5lc1tpXS5nZXRBZGRyZXNzVGFnKCkgPT0gYWRkcmVzcylcclxuICAgICAgICAgICAgICAgIHJldHVybiBpO1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1N0YXR9IGZyb20gXCIuL1N0YXRcIjtcclxuaW1wb3J0IHtVcGdyYWRlT3B0aW9ufSBmcm9tIFwiLi9VcGdyYWRlT3B0aW9uXCI7XHJcblxyXG4vKiogUmVwcmVzZW50cyB0aGUgb3B0aW9ucyBhdmFpbGFibGUgZm9yIGEgY2hpcCBtZW51LiAqL1xyXG5leHBvcnQgY2xhc3MgQ2hpcE1lbnVPcHRpb25zIHtcclxuICAgIHJlYWRvbmx5IHN0YXRzOiBTdGF0W107XHJcbiAgICByZWFkb25seSB1cGdyYWRlT3B0aW9uczogVXBncmFkZU9wdGlvbltdO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZXMgdGhlIENoaXBNZW51T3B0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc3RhdHMgVGhlIHN0YXRzIHRvIGRpc3BsYXkuXHJcbiAgICAgKiBAcGFyYW0gdXBncmFkZU9wdGlvbnMgVGhlIHVwZ3JhZGUgb3B0aW9ucyB0byBkaXNwbGF5LlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihzdGF0czogU3RhdFtdLCB1cGdyYWRlT3B0aW9uczogVXBncmFkZU9wdGlvbltdKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0cyA9IHN0YXRzO1xyXG4gICAgICAgIHRoaXMudXBncmFkZU9wdGlvbnMgPSB1cGdyYWRlT3B0aW9ucztcclxuICAgIH1cclxufSIsImltcG9ydCB7RHJhd1V0aWxzfSBmcm9tIFwiLi4vRHJhd1V0aWxzXCI7XHJcbmltcG9ydCB7SVNBfSBmcm9tIFwiLi9JU0FcIjtcclxuXHJcbi8qKlxyXG4gKiBFbnVtIGZvciBpbnN0cnVjdGlvbiB0eXBlcy5cclxuICovXHJcbmVudW0gSW5zdHJ1Y3Rpb25UeXBlIHtcclxuICAgIEFMVSA9IFwiQUxVXCIsXHJcbiAgICBBTFVfSU1NID0gXCJBTFVfSU1NXCIsXHJcbiAgICBNRU1PUlkgPSBcIk1FTU9SWVwiLFxyXG4gICAgQlJBTkNIID0gXCJCUkFOQ0hcIlxyXG59XHJcblxyXG4vKipcclxuICogUmVwcmVzZW50cyBhbiBpbnN0cnVjdGlvbiBpbiB0aGUgcHJvY2Vzc29yIHNpbXVsYXRpb24uXHJcbiAqIEl0IHN1cHBvcnRzIGRpZmZlcmVudCB0eXBlcyBvZiBpbnN0cnVjdGlvbnMgaW5jbHVkaW5nIEFMVSwgTUVNT1JZLCBhbmQgQlJBTkNIIG9wZXJhdGlvbnMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSW5zdHJ1Y3Rpb24ge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBvcGNvZGU6IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgcmVzdWx0UmVnOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IG9wMVJlZzogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBvcDJSZWc6IG51bWJlcjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgYWRkcmVzczogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBpbW1lZGlhdGU6IG51bWJlcjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgdHlwZTogSW5zdHJ1Y3Rpb25UeXBlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0cnVjdGlvbiBpbnN0YW5jZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3Bjb2RlIC0gVGhlIG9wZXJhdGlvbiBjb2RlIG9mIHRoZSBpbnN0cnVjdGlvbi5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXN1bHRSZWcgLSBUaGUgbmFtZSBvZiB0aGUgcmVnaXN0ZXIgd2hlcmUgdGhlIHJlc3VsdCB3aWxsIGJlIHN0b3JlZC5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3AxUmVnXSAtIFRoZSBmaXJzdCBvcGVyYW5kIHJlZ2lzdGVyIChmb3IgQUxVIGFuZCBCUkFOQ0ggb3BlcmF0aW9ucykuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wMlJlZ10gLSBUaGUgc2Vjb25kIG9wZXJhbmQgcmVnaXN0ZXIgKGZvciBBTFUgYW5kIEJSQU5DSCBvcGVyYXRpb25zKS5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbYWRkcmVzc10gLSBUaGUgbWVtb3J5IGFkZHJlc3MgaW52b2x2ZWQgaW4gdGhlIG9wZXJhdGlvbiAoZm9yIE1FTU9SWSBhbmQgQlJBTkNIIG9wZXJhdGlvbnMpLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtpbW1lZGlhdGVdIC0gVGhlIGltbWVkaWF0ZSB2YWx1ZSB0byB1c2UgaW4gdGhlIG9wZXJhdGlvbiAoZm9yIEFMVV9JTU0gb3BlcmF0aW9ucykuXHJcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlcmUgYXJlIG1pc3Npbmcgb3IgZXh0cmFuZW91cyBwYXJhbWV0ZXJzIGZvciBhIGdpdmVuIG9wY29kZS5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcihvcGNvZGU6IHN0cmluZywgcmVzdWx0UmVnPzogbnVtYmVyLCBvcDFSZWc/OiBudW1iZXIsIG9wMlJlZz86IG51bWJlciwgYWRkcmVzcz86IG51bWJlciwgaW1tZWRpYXRlPzogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5vcGNvZGUgPSBvcGNvZGU7XHJcbiAgICAgICAgaWYgKElTQS5NRU1PUllfT1BDT0RFUy5pbmNsdWRlcyhvcGNvZGUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVNZW1vcnlPcGVyYXRpb24ocmVzdWx0UmVnLCBvcDFSZWcsIG9wMlJlZywgYWRkcmVzcyk7XHJcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IEluc3RydWN0aW9uVHlwZS5NRU1PUlk7XHJcbiAgICAgICAgICAgIHRoaXMucmVzdWx0UmVnID0gcmVzdWx0UmVnITtcclxuICAgICAgICAgICAgdGhpcy5hZGRyZXNzID0gYWRkcmVzcyE7XHJcbiAgICAgICAgfSBlbHNlIGlmIChJU0EuQUxVX09QQ09ERVMuaW5jbHVkZXMob3Bjb2RlKSkge1xyXG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlQWx1T3BlcmF0aW9uKHJlc3VsdFJlZywgb3AxUmVnLCBvcDJSZWcsIGFkZHJlc3MpO1xyXG4gICAgICAgICAgICB0aGlzLnR5cGUgPSBJbnN0cnVjdGlvblR5cGUuQUxVO1xyXG4gICAgICAgICAgICB0aGlzLm9wMVJlZyA9IG9wMVJlZyE7XHJcbiAgICAgICAgICAgIHRoaXMub3AyUmVnID0gb3AyUmVnITtcclxuICAgICAgICAgICAgdGhpcy5yZXN1bHRSZWcgPSByZXN1bHRSZWchO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoSVNBLkFMVV9JTU1fT1BDT0RFUy5pbmNsdWRlcyhvcGNvZGUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVBbHVJbW1PcGVyYXRpb24ocmVzdWx0UmVnLCBvcDFSZWcsIG9wMlJlZywgYWRkcmVzcywgaW1tZWRpYXRlKTtcclxuICAgICAgICAgICAgdGhpcy50eXBlID0gSW5zdHJ1Y3Rpb25UeXBlLkFMVV9JTU07XHJcbiAgICAgICAgICAgIHRoaXMucmVzdWx0UmVnID0gcmVzdWx0UmVnITtcclxuICAgICAgICAgICAgdGhpcy5vcDFSZWcgPSBvcDFSZWchO1xyXG4gICAgICAgICAgICB0aGlzLmltbWVkaWF0ZSA9IGltbWVkaWF0ZSE7XHJcbiAgICAgICAgfSBlbHNlIGlmIChJU0EuQlJBTkNIX09QQ09ERVMuaW5jbHVkZXMob3Bjb2RlKSkge1xyXG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlQnJhbmNoT3BlcmF0aW9uKHJlc3VsdFJlZywgb3AxUmVnLCBvcDJSZWcsIGFkZHJlc3MpO1xyXG4gICAgICAgICAgICB0aGlzLnR5cGUgPSBJbnN0cnVjdGlvblR5cGUuQlJBTkNIO1xyXG4gICAgICAgICAgICB0aGlzLm9wMVJlZyA9IG9wMVJlZyE7XHJcbiAgICAgICAgICAgIHRoaXMub3AyUmVnID0gb3AyUmVnITtcclxuICAgICAgICAgICAgdGhpcy5hZGRyZXNzID0gYWRkcmVzcyE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG9wY29kZTogJHtvcGNvZGV9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBtZW1vcnkgaW5zdHJ1Y3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG9wY29kZSAtIFRoZSBvcGVyYXRpb24gY29kZSBvZiB0aGUgaW5zdHJ1Y3Rpb24uXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzdWx0UmVnIC0gVGhlIG5hbWUgb2YgdGhlIHJlZ2lzdGVyIHdoZXJlIHRoZSByZXN1bHQgd2lsbCBiZSBzdG9yZWQuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYWRkcmVzcyAtIFRoZSBtZW1vcnkgYWRkcmVzcyBpbnZvbHZlZCBpbiB0aGUgb3BlcmF0aW9uLlxyXG4gICAgICogQHJldHVybnMge0luc3RydWN0aW9ufSBUaGUgbmV3IG1lbW9yeSBpbnN0cnVjdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBtZW1vcnkob3Bjb2RlOiBzdHJpbmcsIHJlc3VsdFJlZzogbnVtYmVyLCBhZGRyZXNzOiBudW1iZXIpOiBJbnN0cnVjdGlvbiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBJbnN0cnVjdGlvbihvcGNvZGUsIHJlc3VsdFJlZywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGFkZHJlc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBBTFUgaW5zdHJ1Y3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG9wY29kZSAtIFRoZSBvcGVyYXRpb24gY29kZSBvZiB0aGUgaW5zdHJ1Y3Rpb24uXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzdWx0UmVnIC0gVGhlIG5hbWUgb2YgdGhlIHJlZ2lzdGVyIHdoZXJlIHRoZSByZXN1bHQgd2lsbCBiZSBzdG9yZWQuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3AxUmVnIC0gVGhlIGZpcnN0IG9wZXJhbmQgcmVnaXN0ZXIuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3AyUmVnIC0gVGhlIHNlY29uZCBvcGVyYW5kIHJlZ2lzdGVyLlxyXG4gICAgICogQHJldHVybnMge0luc3RydWN0aW9ufSBUaGUgbmV3IEFMVSBpbnN0cnVjdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBhbHUob3Bjb2RlOiBzdHJpbmcsIHJlc3VsdFJlZzogbnVtYmVyLCBvcDFSZWc6IG51bWJlciwgb3AyUmVnOiBudW1iZXIpOiBJbnN0cnVjdGlvbiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBJbnN0cnVjdGlvbihvcGNvZGUsIHJlc3VsdFJlZywgb3AxUmVnLCBvcDJSZWcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBicmFuY2ggaW5zdHJ1Y3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG9wY29kZSAtIFRoZSBvcGVyYXRpb24gY29kZSBvZiB0aGUgaW5zdHJ1Y3Rpb24uXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3AxUmVnIC0gVGhlIGZpcnN0IG9wZXJhbmQgcmVnaXN0ZXIuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3AyUmVnIC0gVGhlIHNlY29uZCBvcGVyYW5kIHJlZ2lzdGVyLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldCAtIFRoZSBtZW1vcnkgdGFyZ2V0IGFkZHJlc3MuXHJcbiAgICAgKiBAcmV0dXJucyB7SW5zdHJ1Y3Rpb259IFRoZSBuZXcgYnJhbmNoIGluc3RydWN0aW9uLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGJyYW5jaChvcGNvZGU6IHN0cmluZywgb3AxUmVnOiBudW1iZXIsIG9wMlJlZzogbnVtYmVyLCB0YXJnZXQ6IG51bWJlcik6IEluc3RydWN0aW9uIHtcclxuICAgICAgICByZXR1cm4gbmV3IEluc3RydWN0aW9uKG9wY29kZSwgdW5kZWZpbmVkLCBvcDFSZWcsIG9wMlJlZywgdGFyZ2V0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgQUxVIGluc3RydWN0aW9uIHdpdGggYW4gaW1tZWRpYXRlIHZhbHVlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcGNvZGUgLSBUaGUgb3BlcmF0aW9uIGNvZGUgb2YgdGhlIGluc3RydWN0aW9uLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc3VsdFJlZyAtIFRoZSBuYW1lIG9mIHRoZSByZWdpc3RlciB3aGVyZSB0aGUgcmVzdWx0IHdpbGwgYmUgc3RvcmVkLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9wMVJlZyAtIFRoZSBmaXJzdCBvcGVyYW5kIHJlZ2lzdGVyLlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGltbWVkaWF0ZSAtIFRoZSBpbW1lZGlhdGUgdmFsdWUgdG8gdXNlIGluIHRoZSBvcGVyYXRpb24uXHJcbiAgICAgKiBAcmV0dXJucyB7SW5zdHJ1Y3Rpb259IFRoZSBuZXcgQUxVIGluc3RydWN0aW9uIHdpdGggYW4gaW1tZWRpYXRlIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFsdUltbShvcGNvZGU6IHN0cmluZywgcmVzdWx0UmVnOiBudW1iZXIsIG9wMVJlZzogbnVtYmVyLCBpbW1lZGlhdGU6IG51bWJlcik6IEluc3RydWN0aW9uIHtcclxuICAgICAgICByZXR1cm4gbmV3IEluc3RydWN0aW9uKG9wY29kZSwgcmVzdWx0UmVnLCBvcDFSZWcsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBpbW1lZGlhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2tzIGlmIHRoaXMgaW5zdHJ1Y3Rpb24gaXMgYSBtZW1vcnkgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBpbnN0cnVjdGlvbiBpcyBhIG1lbW9yeSBvcGVyYXRpb24sIGZhbHNlIG90aGVyd2lzZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGlzTWVtb3J5T3BlcmF0aW9uKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUgPT09IEluc3RydWN0aW9uVHlwZS5NRU1PUlk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgaWYgdGhpcyBpbnN0cnVjdGlvbiBpcyBhbiBBTFUgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBpbnN0cnVjdGlvbiBpcyBhbiBBTFUgb3BlcmF0aW9uLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpc0FyaXRobWV0aWMoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gSW5zdHJ1Y3Rpb25UeXBlLkFMVSB8fCB0aGlzLnR5cGUgPT09IEluc3RydWN0aW9uVHlwZS5BTFVfSU1NO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc0ltbWVkaWF0ZSgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50eXBlID09PSBJbnN0cnVjdGlvblR5cGUuQUxVX0lNTTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyBpZiB0aGlzIGluc3RydWN0aW9uIGlzIGEgYnJhbmNoIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgaW5zdHJ1Y3Rpb24gaXMgYSBicmFuY2ggb3BlcmF0aW9uLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpc0JyYW5jaCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50eXBlID09PSBJbnN0cnVjdGlvblR5cGUuQlJBTkNIO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgaW5zdHJ1Y3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge3N0cmluZ30gVGhlIHN0cmluZyByZXByZXNlbnRhdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBJbnN0cnVjdGlvblR5cGUuTUVNT1JZOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMub3Bjb2RlfSBSJHt0aGlzLnJlc3VsdFJlZ30sIFske0RyYXdVdGlscy50b0hleCh0aGlzLmFkZHJlc3MpfV1gO1xyXG4gICAgICAgICAgICBjYXNlIEluc3RydWN0aW9uVHlwZS5BTFU6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5vcGNvZGV9IFIke3RoaXMucmVzdWx0UmVnfSwgUiR7dGhpcy5vcDFSZWd9LCBSJHt0aGlzLm9wMlJlZ31gO1xyXG4gICAgICAgICAgICBjYXNlIEluc3RydWN0aW9uVHlwZS5CUkFOQ0g6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5vcGNvZGV9IFIke3RoaXMub3AxUmVnfSwgUiR7dGhpcy5vcDJSZWd9LCAke0RyYXdVdGlscy50b0hleCh0aGlzLmFkZHJlc3MpfWA7XHJcbiAgICAgICAgICAgIGNhc2UgSW5zdHJ1Y3Rpb25UeXBlLkFMVV9JTU06XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5vcGNvZGV9IFIke3RoaXMucmVzdWx0UmVnfSwgUiR7dGhpcy5vcDFSZWd9LCAke3RoaXMuaW1tZWRpYXRlfWA7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGluc3RydWN0aW9uIHR5cGVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiBHZXR0ZXIgbWV0aG9kcyBmb3IgaW5zdHJ1Y3Rpb24gcGFyYW1ldGVycyAqL1xyXG4gICAgcHVibGljIGdldE9wY29kZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9wY29kZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0T3AxUmVnKCk6IG51bWJlciB8IHVuZGVmaW5lZCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZSAhPT0gSW5zdHJ1Y3Rpb25UeXBlLk1FTU9SWSA/IHRoaXMub3AxUmVnIDogdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRPcDJSZWcoKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50eXBlICE9PSBJbnN0cnVjdGlvblR5cGUuTUVNT1JZID8gdGhpcy5vcDJSZWcgOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEltbWVkaWF0ZSgpOiBudW1iZXIgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUgPT09IEluc3RydWN0aW9uVHlwZS5BTFVfSU1NID8gdGhpcy5pbW1lZGlhdGUgOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFJlc3VsdFJlZygpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlc3VsdFJlZztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0QWRkcmVzcygpOiBudW1iZXIgfCB1bmRlZmluZWQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUgIT09IEluc3RydWN0aW9uVHlwZS5BTFUgPyB0aGlzLmFkZHJlc3MgOiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUHJpdmF0ZSBoZWxwZXIgbWV0aG9kcyBmb3IgdmFsaWRhdGluZyBpbnN0cnVjdGlvbiBwYXJhbWV0ZXJzXHJcbiAgICBwcml2YXRlIHZhbGlkYXRlTWVtb3J5T3BlcmF0aW9uKHJlc3VsdFJlZz86IG51bWJlciwgb3AxUmVnPzogbnVtYmVyLCBvcDJSZWc/OiBudW1iZXIsIGFkZHJlc3M/OiBudW1iZXIsIGltbWVkaWF0ZT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGlmIChhZGRyZXNzID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgbWVtb3J5IGFkZHJlc3MgZm9yIE1FTU9SWSBvcGVyYXRpb25cIik7XHJcbiAgICAgICAgaWYgKHJlc3VsdFJlZyA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHJlc3VsdCByZWdpc3RlciBmb3IgTUVNT1JZIG9wZXJhdGlvblwiKTtcclxuICAgICAgICBpZiAob3AxUmVnICE9PSB1bmRlZmluZWQgfHwgb3AyUmVnICE9PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBoYXZlIG9wZXJhbmQgcmVnaXN0ZXJzIGZvciBNRU1PUlkgb3BlcmF0aW9uXCIpO1xyXG4gICAgICAgIGlmIChpbW1lZGlhdGUgIT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGhhdmUgaW1tZWRpYXRlIHZhbHVlIGZvciBNRU1PUlkgb3BlcmF0aW9uXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdmFsaWRhdGVBbHVPcGVyYXRpb24ocmVzdWx0UmVnPzogbnVtYmVyLCBvcDFSZWc/OiBudW1iZXIsIG9wMlJlZz86IG51bWJlciwgYWRkcmVzcz86IG51bWJlciwgaW1tZWRpYXRlPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKG9wMVJlZyA9PT0gdW5kZWZpbmVkIHx8IG9wMlJlZyA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIG9wZXJhbmQgcmVnaXN0ZXIgZm9yIEFMVSBvcGVyYXRpb25cIik7XHJcbiAgICAgICAgaWYgKHJlc3VsdFJlZyA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHJlc3VsdCByZWdpc3RlciBmb3IgQUxVIG9wZXJhdGlvblwiKTtcclxuICAgICAgICBpZiAoYWRkcmVzcyAhPT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgaGF2ZSBhZGRyZXNzIGZvciBBTFUgb3BlcmF0aW9uXCIpO1xyXG4gICAgICAgIGlmIChpbW1lZGlhdGUgIT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGhhdmUgaW1tZWRpYXRlIHZhbHVlIGZvciBBTFUgb3BlcmF0aW9uXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdmFsaWRhdGVCcmFuY2hPcGVyYXRpb24ocmVzdWx0UmVnPzogbnVtYmVyLCBvcDFSZWc/OiBudW1iZXIsIG9wMlJlZz86IG51bWJlciwgYWRkcmVzcz86IG51bWJlciwgaW1tZWRpYXRlPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKG9wMVJlZyA9PT0gdW5kZWZpbmVkIHx8IG9wMlJlZyA9PT0gdW5kZWZpbmVkIHx8IGFkZHJlc3MgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBwYXJhbWV0ZXJzIGZvciBCUkFOQ0ggb3BlcmF0aW9uXCIpO1xyXG4gICAgICAgIGlmIChyZXN1bHRSZWcgIT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGhhdmUgcmVzdWx0IHJlZ2lzdGVyIGZvciBCUkFOQ0ggb3BlcmF0aW9uXCIpO1xyXG4gICAgICAgIGlmIChpbW1lZGlhdGUgIT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGhhdmUgaW1tZWRpYXRlIHZhbHVlIGZvciBCUkFOQ0ggb3BlcmF0aW9uXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdmFsaWRhdGVBbHVJbW1PcGVyYXRpb24ocmVzdWx0UmVnPzogbnVtYmVyLCBvcDFSZWc/OiBudW1iZXIsIG9wMlJlZz86IG51bWJlciwgYWRkcmVzcz86IG51bWJlciwgaW1tZWRpYXRlPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKG9wMVJlZyA9PT0gdW5kZWZpbmVkIHx8IGltbWVkaWF0ZSA9PT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIG9wZXJhbmQgcmVnaXN0ZXIgb3IgaW1tZWRpYXRlIHZhbHVlIGZvciBBTFVfSU1NIG9wZXJhdGlvblwiKTtcclxuICAgICAgICBpZiAocmVzdWx0UmVnID09PSB1bmRlZmluZWQpIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgcmVzdWx0IHJlZ2lzdGVyIGZvciBBTFVfSU1NIG9wZXJhdGlvblwiKTtcclxuICAgICAgICBpZiAob3AyUmVnICE9PSB1bmRlZmluZWQgfHwgYWRkcmVzcyAhPT0gdW5kZWZpbmVkKSB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgaGF2ZSBzZWNvbmQgb3BlcmFuZCByZWdpc3RlciBvclwiICtcclxuICAgICAgICAgICAgXCIgYWRkcmVzcyBmb3IgQUxVX0lNTSBvcGVyYXRpb25cIik7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1RleHRCdXR0b259IGZyb20gXCIuLi9odWRFbGVtZW50cy9UZXh0QnV0dG9uXCI7XHJcbmltcG9ydCB7VGV4dEJ1dHRvbkJ1aWxkZXJ9IGZyb20gXCIuLi9odWRFbGVtZW50cy9UZXh0QnV0dG9uQnVpbGRlclwiO1xyXG5cclxuLyoqIFJlcHJlc2VudHMgYSBzdGF0IGZvciBhIGNvbXB1dGVyIGNoaXAuICovXHJcbmV4cG9ydCBjbGFzcyBTdGF0IHtcclxuICAgIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcclxuICAgIHJlYWRvbmx5IHZhbHVlOiBzdHJpbmc7XHJcbiAgICByZWFkb25seSB1bml0OiBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcbiAgICByZWFkb25seSBidXR0b246IFRleHRCdXR0b25CdWlsZGVyIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0cyBhIG5ldyBTdGF0IGluc3RhbmNlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIHRoZSBuYW1lIG9mIHRoZSBzdGF0XHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgdGhlIHZhbHVlIG9mIHRoZSBzdGF0XHJcbiAgICAgKiBAcGFyYW0gdW5pdCB0aGUgdW5pdCBvZiB0aGUgc3RhdFxyXG4gICAgICogQHBhcmFtIGJ1dHRvbiBhIHBvdGVudGlhbCBidXR0b24gdG8gaW50ZXJhY3Qgd2l0aCB0aGUgc3RhdFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIHVuaXQ/OiBzdHJpbmcsIGJ1dHRvbj86IFRleHRCdXR0b25CdWlsZGVyKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy51bml0ID0gdW5pdDtcclxuICAgICAgICB0aGlzLmJ1dHRvbiA9IGJ1dHRvbjtcclxuICAgIH1cclxufSIsImltcG9ydCB7TWVzaCwgU2NlbmV9IGZyb20gXCJ0aHJlZVwiO1xyXG5pbXBvcnQge0RyYXdVdGlsc30gZnJvbSBcIi4uL0RyYXdVdGlsc1wiO1xyXG5cclxuLyoqXHJcbiAqIEFic3RyYWN0IGNsYXNzIGZvciBidXR0b25zIHVzZWQgaW4gdGhlIEhlYWRzLVVwIERpc3BsYXkuXHJcbiAqL1xyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RCdXR0b24ge1xyXG4gICAgLyoqIEV4cGVjdGFibGUgQnV0dG9uIGZ1bmN0aW9ucyAqL1xyXG4gICAgcHVibGljIG9uSG92ZXI6ICgpID0+IHZvaWQ7XHJcbiAgICBwdWJsaWMgb25VbmhvdmVyOiAoKSA9PiB2b2lkO1xyXG4gICAgcHVibGljIG9uQ2xpY2s6ICgpID0+IHZvaWQ7XHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKHByb3RlY3RlZCByZWFkb25seSBzY2VuZTogU2NlbmUpIHt9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBoaXRib3ggb2YgdGhlIGJ1dHRvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFic3RyYWN0IGdldEhpdGJveCgpOiBNZXNoO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBidXR0b24gaXMgY2xpY2thYmxlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNDbGlja2FibGUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub25DbGljayAhPT0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBidXR0b24gaXMgaG92ZXJhYmxlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNIb3ZlcmFibGUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICEodGhpcy5vbkhvdmVyID09PSB1bmRlZmluZWQgfHwgdGhpcy5vblVuaG92ZXIgPT09IHVuZGVmaW5lZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmUodGhpcy5nZXRIaXRib3goKSk7XHJcbiAgICAgICAgRHJhd1V0aWxzLmRpc3Bvc2VNZXNoKHRoaXMuZ2V0SGl0Ym94KCkpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtBYnN0cmFjdEJ1dHRvbn0gZnJvbSBcIi4vQWJzdHJhY3RCdXR0b25cIjtcclxuaW1wb3J0IHtNZXNoLCBNZXNoQmFzaWNNYXRlcmlhbCwgUGxhbmVHZW9tZXRyeSwgU2NlbmUsIFZlY3RvcjJ9IGZyb20gXCJ0aHJlZVwiO1xyXG5pbXBvcnQge0RyYXdVdGlsc30gZnJvbSBcIi4uL0RyYXdVdGlsc1wiO1xyXG5pbXBvcnQge0hVRH0gZnJvbSBcIi4uL0hVRFwiO1xyXG5pbXBvcnQge21lcmdlR2VvbWV0cmllc30gZnJvbSBcInRocmVlL2V4YW1wbGVzL2pzbS91dGlscy9CdWZmZXJHZW9tZXRyeVV0aWxzXCI7XHJcblxyXG4vKipcclxuICogQnV0dG9uIHRvIHBhdXNlIGFuZCBwbGF5IHRoZSBnYW1lLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFBhdXNlQnV0dG9uIGV4dGVuZHMgQWJzdHJhY3RCdXR0b24ge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBydW5NZXNoOiBNZXNoO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBwYXVzZU1lc2g6IE1lc2g7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGhpdGJveDogTWVzaDtcclxuICAgIHByaXZhdGUgaXNQYXVzZWQ6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBwYXVzZSBidXR0b24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNjZW5lIFRoZSBzY2VuZSB0byBhZGQgdGhlIGJ1dHRvbiB0by5cclxuICAgICAqIEBwYXJhbSBwb3NpdGlvbiBUaGUgcG9zaXRpb24gb2YgdGhlIGJ1dHRvbi5cclxuICAgICAqIEBwYXJhbSBtYXRlcmlhbCBUaGUgbWF0ZXJpYWwgb2YgdGhlIGJ1dHRvbi5cclxuICAgICAqIEBwYXJhbSBwYXVzZWQgVGhlIGluaXRpYWwgcGF1c2Ugc3RhdGUuXHJcbiAgICAgKiBAcGFyYW0gdG9nZ2xlUGF1c2UgVGhlIGZ1bmN0aW9uIHRvIHRvZ2dsZSB0aGUgcGF1c2Ugc3RhdGUuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lOiBTY2VuZSwgcG9zaXRpb246IFZlY3RvcjIsIG1hdGVyaWFsOiBNZXNoQmFzaWNNYXRlcmlhbCwgcGF1c2VkOiBib29sZWFuLCB0b2dnbGVQYXVzZTogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHN1cGVyKHNjZW5lKTtcclxuICAgICAgICB0aGlzLmhpdGJveCA9IERyYXdVdGlscy5idWlsZFF1YWRyaWxhdGVyYWxNZXNoKDAuMSwgMC4xLCBtYXRlcmlhbCwgcG9zaXRpb24pO1xyXG4gICAgICAgIHRoaXMuaGl0Ym94LnZpc2libGUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5ydW5NZXNoID0gRHJhd1V0aWxzLmJ1aWxkVHJpYW5nbGVNZXNoKDAuMSwgbWF0ZXJpYWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJhbnNsYXRlWChwb3NpdGlvbi54KS50cmFuc2xhdGVZKHBvc2l0aW9uLnkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucm90YXRlWigtTWF0aC5QSSAvIDIpO1xyXG5cclxuICAgICAgICBsZXQgcmVjdEdlb21ldHJ5PSBuZXcgUGxhbmVHZW9tZXRyeSgwLjAzLCAwLjEpO1xyXG4gICAgICAgIGxldCBwYXVzZUdlb21ldHJ5ID0gIG1lcmdlR2VvbWV0cmllcyhbXHJcbiAgICAgICAgICAgIHJlY3RHZW9tZXRyeS5jbG9uZSgpLnRyYW5zbGF0ZSgwLjAyNSwgMCwgMCksXHJcbiAgICAgICAgICAgIHJlY3RHZW9tZXRyeS5jbG9uZSgpLnRyYW5zbGF0ZSgtMC4wMjUsIDAsIDApXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIHRoaXMucGF1c2VNZXNoID0gbmV3IE1lc2gocGF1c2VHZW9tZXRyeSwgbWF0ZXJpYWwpO1xyXG4gICAgICAgIHRoaXMucGF1c2VNZXNoLnBvc2l0aW9uLnNldChwb3NpdGlvbi54LCBwb3NpdGlvbi55LCAwKTtcclxuXHJcbiAgICAgICAgaWYgKCFwYXVzZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5ydW5NZXNoLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5wYXVzZU1lc2gudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5ydW5NZXNoLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnBhdXNlTWVzaC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNjZW5lLmFkZCh0aGlzLnJ1bk1lc2gsIHRoaXMucGF1c2VNZXNoLCB0aGlzLmhpdGJveCk7XHJcblxyXG4gICAgICAgIHRoaXMub25DbGljayA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5pc1BhdXNlZCA9ICF0aGlzLmlzUGF1c2VkO1xyXG4gICAgICAgICAgICB0aGlzLnJ1bk1lc2gudmlzaWJsZSA9ICF0aGlzLmlzUGF1c2VkO1xyXG4gICAgICAgICAgICB0aGlzLnBhdXNlTWVzaC52aXNpYmxlID0gdGhpcy5pc1BhdXNlZDtcclxuICAgICAgICAgICAgdG9nZ2xlUGF1c2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMub25Ib3ZlciA9ICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IG1lc2ggPSB0aGlzLmlzUGF1c2VkID8gdGhpcy5wYXVzZU1lc2ggOiB0aGlzLnJ1bk1lc2g7XHJcbiAgICAgICAgICAgIFBhdXNlQnV0dG9uLmNoYW5nZU1lc2hBcHBlYXJhbmNlKG1lc2gsIEhVRC5IT1ZFUl9DT0xPUiwgSFVELkhPVkVSX1NDQUxFX0ZBQ1RPUik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub25VbmhvdmVyID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbWVzaCA9IHRoaXMuaXNQYXVzZWQgPyB0aGlzLnBhdXNlTWVzaCA6IHRoaXMucnVuTWVzaDtcclxuICAgICAgICAgICAgUGF1c2VCdXR0b24uY2hhbmdlTWVzaEFwcGVhcmFuY2UobWVzaCwgbWF0ZXJpYWwsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SGl0Ym94KCk6IE1lc2gge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhpdGJveDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBjaGFuZ2VNZXNoQXBwZWFyYW5jZShtZXNoOiBNZXNoLCBjb2xvcjogTWVzaEJhc2ljTWF0ZXJpYWwsIHNjYWxlPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgbWVzaC5tYXRlcmlhbCA9IGNvbG9yO1xyXG4gICAgICAgIGlmIChzY2FsZSkgbWVzaC5zY2FsZS5zZXQoc2NhbGUsIHNjYWxlLCBzY2FsZSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge0FwcH0gZnJvbSBcIi4uL2FwcFwiO1xyXG5pbXBvcnQge09ydGhvZ3JhcGhpY0NhbWVyYSwgUmF5Y2FzdGVyLCBWZWN0b3IyfSBmcm9tIFwidGhyZWVcIjtcclxuaW1wb3J0IHtBYnN0cmFjdEJ1dHRvbn0gZnJvbSBcIi4vQWJzdHJhY3RCdXR0b25cIjtcclxuaW1wb3J0IHtIVUR9IGZyb20gXCIuLi9IVURcIjtcclxuXHJcbi8qKlxyXG4gKiBIYW5kbGVzIHRoZSB1c2VyIGludGVyYWN0aW9uIGV2ZW50cyBpbiB0aGUgR2FtZSBIVUQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSFVERXZlbnRIYW5kbGVyIHtcclxuICAgIHByaXZhdGUgcmF5Y2FzdGVyID0gbmV3IFJheWNhc3RlcigpOyAvLyBtb3VzZSByYXljYXN0ZXJcclxuICAgIHByaXZhdGUgbW91c2UgPSBuZXcgVmVjdG9yMigpOyAvLyBtb3VzZSBjb29yZGluYXRlc1xyXG4gICAgcHJpdmF0ZSBtb3VzZURvd24gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgaW5pdGlhbE1vdXNlUG9zaXRpb24gPSBuZXcgVmVjdG9yMigpO1xyXG4gICAgY2hpcE1lbnVCdXR0b25zOiBBYnN0cmFjdEJ1dHRvbltdID0gW107XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgSFVEIGV2ZW50IGhhbmRsZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGh1ZCBUaGUgSFVEIHRvIGhhbmRsZSBldmVudHMgZm9yLlxyXG4gICAgICogQHBhcmFtIGFwcCBUaGUgYXBwbGljYXRpb24gdG8gaGFuZGxlIGV2ZW50cyBmb3IuXHJcbiAgICAgKiBAcGFyYW0gaHVkQ2FtZXJhIFRoZSBIVUQgY2FtZXJhLlxyXG4gICAgICogQHBhcmFtIGJ1dHRvbnMgVGhlIGJ1dHRvbnMgaW4gdGhlIEhVRC5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBodWQ6IEhVRCwgcHJpdmF0ZSBhcHA6IEFwcCwgcHJpdmF0ZSBodWRDYW1lcmE6IE9ydGhvZ3JhcGhpY0NhbWVyYSwgcHJpdmF0ZSBidXR0b25zOiBBYnN0cmFjdEJ1dHRvbltdKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uTW91c2VDbGljay5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZS5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bik7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlRHJhZyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIHRoaXMub25Nb3VzZVdoZWVsKTtcclxuXHJcbiAgICAgICAgLy8gVG91Y2ggZXZlbnQgbGlzdGVuZXJzIChzaW1pbGFyIHRvIG1vdXNlKVxyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLm9uVG91Y2hTdGFydC5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5vblRvdWNoTW92ZS5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLm9uVG91Y2hFbmQuYmluZCh0aGlzKSwgZmFsc2UpO1xyXG5cclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4gdGhpcy5vbldpbmRvd1Jlc2l6ZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIG1vdXNlIGNvb3JkaW5hdGVzLlxyXG4gICAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdXBkYXRlTW91c2VDb29yZGluYXRlcyhldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubW91c2UueCA9IChldmVudC5jbGllbnRYIC8gd2luZG93LmlubmVyV2lkdGgpICogMiAtIDE7XHJcbiAgICAgICAgdGhpcy5tb3VzZS55ID0gLShldmVudC5jbGllbnRZIC8gd2luZG93LmlubmVySGVpZ2h0KSAqIDIgKyAxO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB0aGUgbW91c2UgY2xpY2sgZXZlbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25Nb3VzZUNsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVNb3VzZUNvb3JkaW5hdGVzKGV2ZW50KTtcclxuXHJcbiAgICAgICAgdGhpcy5yYXljYXN0ZXIuc2V0RnJvbUNhbWVyYSh0aGlzLm1vdXNlLCB0aGlzLmh1ZENhbWVyYSk7XHJcblxyXG4gICAgICAgIHRoaXMuY2hpcE1lbnVCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcclxuICAgICAgICAgICAgaWYgKCFidXR0b24uaXNDbGlja2FibGUoKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0KGJ1dHRvbi5nZXRIaXRib3goKSkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uLm9uQ2xpY2soKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWJ1dHRvbi5pc0NsaWNrYWJsZSgpKSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3QoYnV0dG9uLmdldEhpdGJveCgpKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBidXR0b24ub25DbGljaygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3QoXHJcbiAgICAgICAgICAgIHRoaXMuaHVkLmdldENvbXB1dGVyQ2hpcE1lbnUoKS5iYWNrZ3JvdW5kTWVzaEhpdGJveCgpKS5sZW5ndGggPiAwXHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIHRoaXMucmF5Y2FzdGVyLnNldEZyb21DYW1lcmEodGhpcy5tb3VzZSwgdGhpcy5hcHAuY2FtZXJhKTtcclxuXHJcbiAgICAgICAgdGhpcy5hcHAuZ2FtZUFjdG9ycy5mb3JFYWNoKGFjdG9yID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdChhY3Rvci5nZXRIaXRCb3hNZXNoKCkpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaHVkLnNlbGVjdEFjdG9yKGFjdG9yKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgdGhlIG1vdXNlIGRvd24gZXZlbnQuXHJcbiAgICAgKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNlIGV2ZW50LlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uTW91c2VEb3duID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgdGhpcy5tb3VzZURvd24gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbE1vdXNlUG9zaXRpb24uc2V0KGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB0aGUgbW91c2UgdXAgZXZlbnQuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25Nb3VzZVVwID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMubW91c2VEb3duID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHRoZSBtb3VzZSB3aGVlbCBldmVudC5cclxuICAgICAqIEBwYXJhbSBldmVudCBUaGUgbW91c2Ugd2hlZWwgZXZlbnQuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25Nb3VzZVdoZWVsID0gKGV2ZW50OiBXaGVlbEV2ZW50KSA9PiB7XHJcbiAgICAgICAgdGhpcy5hcHAuY2FtZXJhLnpvb20gKz0gZXZlbnQuZGVsdGFZICogLUhVRC5aT09NX0ZBQ1RPUjtcclxuICAgICAgICB0aGlzLmFwcC5jYW1lcmEuem9vbSA9IE1hdGgubWF4KEhVRC5NQVhfWk9PTSwgdGhpcy5hcHAuY2FtZXJhLnpvb20pOyAvLyBwcmV2ZW50IHpvb21pbmcgdG9vIGZhciBpblxyXG4gICAgICAgIHRoaXMuYXBwLmNhbWVyYS56b29tID0gTWF0aC5taW4oSFVELk1JTl9aT09NLCB0aGlzLmFwcC5jYW1lcmEuem9vbSk7IC8vIHByZXZlbnQgem9vbWluZyB0b28gZmFyIG91dFxyXG4gICAgICAgIHRoaXMuYXBwLmNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHRoZSBtb3VzZSBkcmFnIGV2ZW50LlxyXG4gICAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBkcmFnIGV2ZW50LlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uTW91c2VEcmFnID0gKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLm1vdXNlRG93bikgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBkZWx0YVggPSAoZXZlbnQuY2xpZW50WCAtIHRoaXMuaW5pdGlhbE1vdXNlUG9zaXRpb24ueCkgLyB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICBjb25zdCBkZWx0YVkgPSAoZXZlbnQuY2xpZW50WSAtIHRoaXMuaW5pdGlhbE1vdXNlUG9zaXRpb24ueSkgLyB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcblxyXG4gICAgICAgIC8vIE1vdmUgdGhlIGNhbWVyYVxyXG4gICAgICAgIHRoaXMubW92ZUNhbWVyYShkZWx0YVgsIGRlbHRhWSk7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgaW5pdGlhbCBwb3NpdGlvblxyXG4gICAgICAgIHRoaXMuaW5pdGlhbE1vdXNlUG9zaXRpb24uc2V0KGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB0aGUgbW91c2UgbW92ZSBldmVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNlIGV2ZW50LlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBvbk1vdXNlTW92ZShldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudXBkYXRlTW91c2VDb29yZGluYXRlcyhldmVudCk7XHJcbiAgICAgICAgdGhpcy5jaGVja0hvdmVyU3RhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyB0aGUgaG92ZXIgc3RhdGUgb2YgdGhlIG1vdXNlLlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY2hlY2tIb3ZlclN0YXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucmF5Y2FzdGVyLnNldEZyb21DYW1lcmEodGhpcy5tb3VzZSwgdGhpcy5odWRDYW1lcmEpO1xyXG4gICAgICAgIHRoaXMuYnV0dG9ucy5jb25jYXQodGhpcy5jaGlwTWVudUJ1dHRvbnMpLmZvckVhY2goYnV0dG9uID0+IHtcclxuICAgICAgICAgICAgaWYgKGJ1dHRvbi5pc0hvdmVyYWJsZSgpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnRlcnNlY3RlZCA9IHRoaXMucmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdChidXR0b24uZ2V0SGl0Ym94KCkpLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJzZWN0ZWQpIGJ1dHRvbi5vbkhvdmVyKCk7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGJ1dHRvbi5vblVuaG92ZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB0aGUgdG91Y2ggc3RhcnQgZXZlbnQgZm9yIG1vYmlsZSBkZXZpY2VzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBldmVudFxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBvblRvdWNoU3RhcnQoZXZlbnQ6IFRvdWNoRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAgLy8gUHJldmVudCBkZWZhdWx0IGJyb3dzZXIgYmVoYXZpb3JcclxuICAgICAgICBjb25zdCB0b3VjaCA9IGV2ZW50LnRvdWNoZXNbMF07XHJcbiAgICAgICAgdGhpcy5tb3VzZURvd24gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbE1vdXNlUG9zaXRpb24uc2V0KHRvdWNoLmNsaWVudFgsIHRvdWNoLmNsaWVudFkpO1xyXG5cclxuICAgICAgICAvLyBDYWxsIG1vdXNlIGRvd24gbG9naWNcclxuICAgICAgICB0aGlzLm9uTW91c2VEb3duKHtjbGllbnRYOiB0b3VjaC5jbGllbnRYLCBjbGllbnRZOiB0b3VjaC5jbGllbnRZfSBhcyBNb3VzZUV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgdGhlIHRvdWNoIG1vdmUgZXZlbnQgZm9yIG1vYmlsZSBkZXZpY2VzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBldmVudCBUaGUgdG91Y2ggZXZlbnQuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uVG91Y2hNb3ZlKGV2ZW50OiBUb3VjaEV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLm1vdXNlRG93bikgcmV0dXJuOyAgLy8gT25seSBwcm9jZXNzIGlmIHRvdWNoIGlzIGFjdGl2ZSAoc2ltaWxhciB0byBtb3VzZURvd24pXHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgIC8vIFByZXZlbnQgZGVmYXVsdCBicm93c2VyIGJlaGF2aW9yXHJcblxyXG4gICAgICAgIGNvbnN0IHRvdWNoID0gZXZlbnQudG91Y2hlc1swXTtcclxuICAgICAgICBjb25zdCBkZWx0YVggPSAodG91Y2guY2xpZW50WCAtIHRoaXMuaW5pdGlhbE1vdXNlUG9zaXRpb24ueCkgLyB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICBjb25zdCBkZWx0YVkgPSAodG91Y2guY2xpZW50WSAtIHRoaXMuaW5pdGlhbE1vdXNlUG9zaXRpb24ueSkgLyB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcblxyXG4gICAgICAgIC8vIE1vdmUgdGhlIGNhbWVyYVxyXG4gICAgICAgIHRoaXMubW92ZUNhbWVyYShkZWx0YVgsIGRlbHRhWSk7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgaW5pdGlhbCBwb3NpdGlvblxyXG4gICAgICAgIHRoaXMuaW5pdGlhbE1vdXNlUG9zaXRpb24uc2V0KHRvdWNoLmNsaWVudFgsIHRvdWNoLmNsaWVudFkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB0aGUgdG91Y2ggZW5kIGV2ZW50IGZvciBtb2JpbGUgZGV2aWNlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIG9uVG91Y2hFbmQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm9uTW91c2VVcCgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgdGhlIHdpbmRvdyByZXNpemUgZXZlbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBvbldpbmRvd1Jlc2l6ZSgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBhc3BlY3RSYXRpbyA9IHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuYXBwLmNhbWVyYS5sZWZ0ID0gLWFzcGVjdFJhdGlvO1xyXG4gICAgICAgIHRoaXMuYXBwLmNhbWVyYS5yaWdodCA9IGFzcGVjdFJhdGlvO1xyXG4gICAgICAgIHRoaXMuaHVkQ2FtZXJhLmxlZnQgPSAtYXNwZWN0UmF0aW87XHJcbiAgICAgICAgdGhpcy5odWRDYW1lcmEucmlnaHQgPSBhc3BlY3RSYXRpbztcclxuXHJcbiAgICAgICAgdGhpcy5hcHAuY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcclxuICAgICAgICB0aGlzLmh1ZENhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XHJcbiAgICAgICAgdGhpcy5hcHAucmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcclxuICAgICAgICB0aGlzLmh1ZC5yZXNldCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTW92ZXMgdGhlIGNhbWVyYSBiYXNlZCBvbiB0aGUgaW5wdXQgZGVsdGFzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkZWx0YVggVGhlIGNoYW5nZSBpbiBYIGRpcmVjdGlvbi5cclxuICAgICAqIEBwYXJhbSBkZWx0YVkgVGhlIGNoYW5nZSBpbiBZIGRpcmVjdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBtb3ZlQ2FtZXJhKGRlbHRhWDogbnVtYmVyLCBkZWx0YVk6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGFzcGVjdFJhdGlvID0gd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgY29uc3Qgc2NhbGVYID0gYXNwZWN0UmF0aW8gKiBIVUQuU0NST0xMX1NQRUVEIC8gdGhpcy5hcHAuY2FtZXJhLnpvb207XHJcbiAgICAgICAgY29uc3Qgc2NhbGVZID0gSFVELlNDUk9MTF9TUEVFRCAvIHRoaXMuYXBwLmNhbWVyYS56b29tO1xyXG5cclxuICAgICAgICB0aGlzLmFwcC5jYW1lcmEucG9zaXRpb24ueCAtPSBkZWx0YVggKiBzY2FsZVg7XHJcbiAgICAgICAgdGhpcy5hcHAuY2FtZXJhLnBvc2l0aW9uLnggPSBNYXRoLm1heCgtSFVELk1BWF9DQU1FUkFfUE9TSVRJT05fWCwgdGhpcy5hcHAuY2FtZXJhLnBvc2l0aW9uLngpO1xyXG4gICAgICAgIHRoaXMuYXBwLmNhbWVyYS5wb3NpdGlvbi54ID0gTWF0aC5taW4oSFVELk1BWF9DQU1FUkFfUE9TSVRJT05fWCwgdGhpcy5hcHAuY2FtZXJhLnBvc2l0aW9uLngpO1xyXG5cclxuICAgICAgICB0aGlzLmFwcC5jYW1lcmEucG9zaXRpb24ueSArPSBkZWx0YVkgKiBzY2FsZVk7XHJcbiAgICAgICAgdGhpcy5hcHAuY2FtZXJhLnBvc2l0aW9uLnkgPSBNYXRoLm1heCgtSFVELk1BWF9DQU1FUkFfUE9TSVRJT05fWSwgdGhpcy5hcHAuY2FtZXJhLnBvc2l0aW9uLnkpO1xyXG4gICAgICAgIHRoaXMuYXBwLmNhbWVyYS5wb3NpdGlvbi55ID0gTWF0aC5taW4oSFVELk1BWF9DQU1FUkFfUE9TSVRJT05fWSwgdGhpcy5hcHAuY2FtZXJhLnBvc2l0aW9uLnkpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtEcmF3VXRpbHN9IGZyb20gXCIuLi9EcmF3VXRpbHNcIjtcclxuaW1wb3J0IHtNZXNoLCBTY2VuZSwgVmVjdG9yMn0gZnJvbSBcInRocmVlXCI7XHJcbmltcG9ydCB7SFVEfSBmcm9tIFwiLi4vSFVEXCI7XHJcbmltcG9ydCB7U0lTRFByb2Nlc3Nvcn0gZnJvbSBcIi4uL2FjdG9ycy9TSVNEUHJvY2Vzc29yXCI7XHJcblxyXG4vKipcclxuICogVGhlIEhVRCBlbGVtZW50IGZvciBkaXNwbGF5aW5nIHByb2Nlc3NvciBzdGF0aXN0aWNzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEhVRFByb2Nlc3NvclN0YXRzIHtcclxuICAgIHByaXZhdGUgc2NlbmU6IFNjZW5lO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBwb3NpdGlvbjogVmVjdG9yMjtcclxuXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IElQQ01lc2g6IE1lc2g7XHJcbiAgICBwcml2YXRlIElQQ01lc2hCYWNrZ3JvdW5kOiBNZXNoO1xyXG4gICAgcHJpdmF0ZSBpcGNTdHJpbmdMZW5ndGg6IG51bWJlcjtcclxuXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IElQU01lc2g6IE1lc2g7XHJcbiAgICBwcml2YXRlIElQU01lc2hCYWNrZ3JvdW5kOiBNZXNoO1xyXG4gICAgcHJpdmF0ZSBpcHNTdHJpbmdMZW5ndGg6IG51bWJlcjtcclxuXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IHRvdGFsRXhlY3V0ZWRJbnN0cnVjdGlvbnM6IE1lc2g7XHJcbiAgICBwcml2YXRlIHRvdGFsRXhlY3V0ZWRJbnN0cnVjdGlvbnNCYWNrZ3JvdW5kOiBNZXNoO1xyXG4gICAgcHJpdmF0ZSB0b3RhbEV4ZWN1dGVkSW5zdHJ1Y3Rpb25zU3RyaW5nTGVuZ3RoOiBudW1iZXI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IEhVRCBlbGVtZW50IGZvciBkaXNwbGF5aW5nIHByb2Nlc3NvciBzdGF0aXN0aWNzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBzY2VuZSBUaGUgc2NlbmUgdG8gYWRkIHRoZSBIVUQgZWxlbWVudCB0by5cclxuICAgICAqIEBwYXJhbSBwb3NpdGlvbiBUaGUgcG9zaXRpb24gb2YgdGhlIEhVRCBlbGVtZW50LlxyXG4gICAgICogQHBhcmFtIGNwdXMgVGhlIHByb2Nlc3NvcnMgdG8gZGlzcGxheSBzdGF0aXN0aWNzIGZvci5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Ioc2NlbmU6IFNjZW5lLCBwb3NpdGlvbjogVmVjdG9yMiwgcHJpdmF0ZSByZWFkb25seSBjcHVzOiBTSVNEUHJvY2Vzc29yW10pIHtcclxuICAgICAgICBjb25zdCBwYWRkaW5nID0gMC4xXHJcblxyXG4gICAgICAgIGxldCBpcGMgPSB0aGlzLmlwY1N0cmluZygpO1xyXG4gICAgICAgIHRoaXMuaXBjU3RyaW5nTGVuZ3RoID0gaXBjLmxlbmd0aDtcclxuICAgICAgICB0aGlzLklQQ01lc2ggPSBEcmF3VXRpbHMuYnVpbGRUZXh0TWVzaChcIklQQzogXCIgKyBpcGMsIHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIEhVRC5URVhUX1NJWkUsIEhVRC5CQVNFX0NPTE9SLCBmYWxzZSlcclxuICAgICAgICB0aGlzLklQQ01lc2hCYWNrZ3JvdW5kID0gRHJhd1V0aWxzLmFkZEJhY2tncm91bmRNZXNoKHRoaXMuSVBDTWVzaCwgcG9zaXRpb24sIEhVRC5NRU5VX0NPTE9SKVxyXG5cclxuICAgICAgICBsZXQgaXBzID0gdGhpcy5pcHNTdHJpbmcoKTtcclxuICAgICAgICB0aGlzLmlwc1N0cmluZ0xlbmd0aCA9IGlwcy5sZW5ndGg7XHJcbiAgICAgICAgdGhpcy5JUFNNZXNoID0gRHJhd1V0aWxzLmJ1aWxkVGV4dE1lc2goXCJJUFM6IFwiICsgaXBzLCBwb3NpdGlvbi54LCBwb3NpdGlvbi55ICsgcGFkZGluZywgSFVELlRFWFRfU0laRSwgSFVELkJBU0VfQ09MT1IsIGZhbHNlKVxyXG4gICAgICAgIHRoaXMuSVBTTWVzaEJhY2tncm91bmQgPSBEcmF3VXRpbHMuYWRkQmFja2dyb3VuZE1lc2godGhpcy5JUFNNZXNoLCBuZXcgVmVjdG9yMihwb3NpdGlvbi54LCBwb3NpdGlvbi55ICsgcGFkZGluZyksIEhVRC5NRU5VX0NPTE9SKVxyXG5cclxuICAgICAgICBsZXQgcmV0aXJlZEluc3RydWN0aW9ucyA9IHRoaXMucmV0aXJlZEluc3RydWN0aW9uc1N0cmluZygpO1xyXG4gICAgICAgIHRoaXMudG90YWxFeGVjdXRlZEluc3RydWN0aW9uc1N0cmluZ0xlbmd0aCA9IHJldGlyZWRJbnN0cnVjdGlvbnMubGVuZ3RoO1xyXG4gICAgICAgIHRoaXMudG90YWxFeGVjdXRlZEluc3RydWN0aW9ucyA9XHJcbiAgICAgICAgICAgIERyYXdVdGlscy5idWlsZFRleHRNZXNoKFwiUmV0aXJlZCBpbnN0cnVjdGlvbnM6IFwiICsgcmV0aXJlZEluc3RydWN0aW9ucywgcG9zaXRpb24ueCwgcG9zaXRpb24ueSArIDIgKiBwYWRkaW5nLCBIVUQuVEVYVF9TSVpFLCBIVUQuQkFTRV9DT0xPUiwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMudG90YWxFeGVjdXRlZEluc3RydWN0aW9uc0JhY2tncm91bmQgPVxyXG4gICAgICAgICAgICBEcmF3VXRpbHMuYWRkQmFja2dyb3VuZE1lc2godGhpcy50b3RhbEV4ZWN1dGVkSW5zdHJ1Y3Rpb25zLCBuZXcgVmVjdG9yMihwb3NpdGlvbi54LCBwb3NpdGlvbi55ICsgMiAqIHBhZGRpbmcpLCBIVUQuTUVOVV9DT0xPUik7XHJcblxyXG4gICAgICAgIHNjZW5lLmFkZCh0aGlzLklQQ01lc2gsIHRoaXMuSVBTTWVzaCwgdGhpcy50b3RhbEV4ZWN1dGVkSW5zdHJ1Y3Rpb25zLCB0aGlzLklQQ01lc2hCYWNrZ3JvdW5kLFxyXG4gICAgICAgICAgICB0aGlzLklQU01lc2hCYWNrZ3JvdW5kLCB0aGlzLnRvdGFsRXhlY3V0ZWRJbnN0cnVjdGlvbnNCYWNrZ3JvdW5kKTtcclxuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgSFVEIGVsZW1lbnRzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIGxldCBpcGMgPSB0aGlzLmNwdXMucmVkdWNlKChhY2MsIGNwdSkgPT4gYWNjICsgY3B1LmdldElQQygpLCAwKS50b0ZpeGVkKDIpO1xyXG4gICAgICAgIERyYXdVdGlscy51cGRhdGVUZXh0KHRoaXMuSVBDTWVzaCwgXCJJUEM6IFwiICsgaXBjLCBmYWxzZSk7XHJcbiAgICAgICAgaWYgKGlwYy5sZW5ndGggPiB0aGlzLmlwY1N0cmluZ0xlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZSh0aGlzLklQQ01lc2hCYWNrZ3JvdW5kKTtcclxuICAgICAgICAgICAgdGhpcy5JUENNZXNoQmFja2dyb3VuZCA9IERyYXdVdGlscy5hZGRCYWNrZ3JvdW5kTWVzaCh0aGlzLklQQ01lc2gsIHRoaXMucG9zaXRpb24sIEhVRC5NRU5VX0NPTE9SKTtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5hZGQodGhpcy5JUENNZXNoQmFja2dyb3VuZCk7XHJcbiAgICAgICAgICAgIHRoaXMuaXBjU3RyaW5nTGVuZ3RoID0gaXBjLmxlbmd0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCByZXRpcmVkSW5zdHJ1Y3Rpb25zID0gdGhpcy5jcHVzLnJlZHVjZSgoYWNjLCBjcHUpID0+IGFjYyArIGNwdS5nZXRBY2NSZXRpcmVkSW5zdHJ1Y3Rpb25zQ291bnQoKSwgMCk7XHJcbiAgICAgICAgRHJhd1V0aWxzLnVwZGF0ZVRleHQodGhpcy50b3RhbEV4ZWN1dGVkSW5zdHJ1Y3Rpb25zLCBcIlJldGlyZWQgaW5zdHJ1Y3Rpb25zOiBcIiArIHJldGlyZWRJbnN0cnVjdGlvbnMsIGZhbHNlKTtcclxuICAgICAgICBpZiAocmV0aXJlZEluc3RydWN0aW9ucy50b1N0cmluZygpLmxlbmd0aCA+IHRoaXMudG90YWxFeGVjdXRlZEluc3RydWN0aW9uc1N0cmluZ0xlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZSh0aGlzLnRvdGFsRXhlY3V0ZWRJbnN0cnVjdGlvbnNCYWNrZ3JvdW5kKTtcclxuICAgICAgICAgICAgdGhpcy50b3RhbEV4ZWN1dGVkSW5zdHJ1Y3Rpb25zQmFja2dyb3VuZCA9XHJcbiAgICAgICAgICAgICAgICBEcmF3VXRpbHMuYWRkQmFja2dyb3VuZE1lc2godGhpcy50b3RhbEV4ZWN1dGVkSW5zdHJ1Y3Rpb25zLCBuZXcgVmVjdG9yMih0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSArIDAuMiksIEhVRC5NRU5VX0NPTE9SKTtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5hZGQodGhpcy50b3RhbEV4ZWN1dGVkSW5zdHJ1Y3Rpb25zQmFja2dyb3VuZCk7XHJcbiAgICAgICAgICAgIHRoaXMudG90YWxFeGVjdXRlZEluc3RydWN0aW9uc1N0cmluZ0xlbmd0aCA9IHJldGlyZWRJbnN0cnVjdGlvbnMudG9TdHJpbmcoKS5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaXBzID0gdGhpcy5jcHVzLnJlZHVjZSgoYWNjLCBjcHUpID0+IGFjYyArIGNwdS5nZXRJUFMoKSwgMCkudG9GaXhlZCgyKTtcclxuICAgICAgICBEcmF3VXRpbHMudXBkYXRlVGV4dCh0aGlzLklQU01lc2gsIFwiSVBTOiBcIiArIGlwcywgZmFsc2UpO1xyXG4gICAgICAgIGlmIChpcHMubGVuZ3RoID4gdGhpcy5pcHNTdHJpbmdMZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmUodGhpcy5JUFNNZXNoQmFja2dyb3VuZCk7XHJcbiAgICAgICAgICAgIHRoaXMuSVBTTWVzaEJhY2tncm91bmQgPVxyXG4gICAgICAgICAgICAgICAgRHJhd1V0aWxzLmFkZEJhY2tncm91bmRNZXNoKHRoaXMuSVBTTWVzaCwgbmV3IFZlY3RvcjIodGhpcy5wb3NpdGlvbi54LCB0aGlzLnBvc2l0aW9uLnkgKyAwLjEpLCBIVUQuTUVOVV9DT0xPUik7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuYWRkKHRoaXMuSVBTTWVzaEJhY2tncm91bmQpO1xyXG4gICAgICAgICAgICB0aGlzLmlwc1N0cmluZ0xlbmd0aCA9IGlwcy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xlYXJzIHRoZSBIVUQgZWxlbWVudHMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZSh0aGlzLklQQ01lc2gsIHRoaXMuSVBTTWVzaCwgdGhpcy50b3RhbEV4ZWN1dGVkSW5zdHJ1Y3Rpb25zLFxyXG4gICAgICAgICAgICB0aGlzLklQQ01lc2hCYWNrZ3JvdW5kLCB0aGlzLklQU01lc2hCYWNrZ3JvdW5kLCB0aGlzLnRvdGFsRXhlY3V0ZWRJbnN0cnVjdGlvbnMpO1xyXG4gICAgICAgIERyYXdVdGlscy5kaXNwb3NlTWVzaGVzKHRoaXMuSVBDTWVzaCwgdGhpcy5JUFNNZXNoLCB0aGlzLnRvdGFsRXhlY3V0ZWRJbnN0cnVjdGlvbnMsXHJcbiAgICAgICAgICAgIHRoaXMuSVBDTWVzaEJhY2tncm91bmQsIHRoaXMuSVBTTWVzaEJhY2tncm91bmQsIHRoaXMudG90YWxFeGVjdXRlZEluc3RydWN0aW9uc0JhY2tncm91bmQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXBjU3RyaW5nKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3B1cy5yZWR1Y2UoKGFjYywgY3B1KSA9PiBhY2MgKyBjcHUuZ2V0SVBDKCksIDApLnRvRml4ZWQoMik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpcHNTdHJpbmcoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jcHVzLnJlZHVjZSgoYWNjLCBjcHUpID0+IGFjYyArIGNwdS5nZXRJUFMoKSwgMCkudG9GaXhlZCgyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJldGlyZWRJbnN0cnVjdGlvbnNTdHJpbmcoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jcHVzLnJlZHVjZSgoYWNjLCBjcHUpID0+IGFjYyArIGNwdS5nZXRBY2NSZXRpcmVkSW5zdHJ1Y3Rpb25zQ291bnQoKSwgMCkudG9TdHJpbmcoKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7RHJhd1V0aWxzfSBmcm9tIFwiLi4vRHJhd1V0aWxzXCI7XHJcbmltcG9ydCB7TWVzaCwgTWVzaEJhc2ljTWF0ZXJpYWwsIE9ydGhvZ3JhcGhpY0NhbWVyYSwgU2NlbmUsIFZlY3RvcjJ9IGZyb20gXCJ0aHJlZVwiO1xyXG5pbXBvcnQge1RleHRCdXR0b259IGZyb20gXCIuL1RleHRCdXR0b25cIjtcclxuaW1wb3J0IHtIVUR9IGZyb20gXCIuLi9IVURcIjtcclxuaW1wb3J0IHtDb21wdXRlckNoaXB9IGZyb20gXCIuLi9hY3RvcnMvQ29tcHV0ZXJDaGlwXCI7XHJcbmltcG9ydCB7Q2hpcE1lbnVPcHRpb25zfSBmcm9tIFwiLi4vZGF0YVN0cnVjdHVyZXMvQ2hpcE1lbnVPcHRpb25zXCI7XHJcbmltcG9ydCB7VXBncmFkZU9wdGlvbiwgVXBncmFkZU9wdGlvblR5cGV9IGZyb20gXCIuLi9kYXRhU3RydWN0dXJlcy9VcGdyYWRlT3B0aW9uXCI7XHJcblxyXG4vKipcclxuICogUmVwcmVzZW50cyB0aGUgbWVudSB1c2VkIHRvIGRpc3BsYXkgaW5mb3JtYXRpb24gYWJvdXQgYSBjb21wdXRlciBjaGlwLCBhcyB3ZWxsIGFzIHRoZSBidXR0b25zIHRvIGludGVyYWN0IHdpdGggaXQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29tcHV0ZXJDaGlwTWVudSB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBNRU5VX0NPTE9SOiBNZXNoQmFzaWNNYXRlcmlhbCA9XHJcbiAgICAgICAgbmV3IE1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogRHJhd1V0aWxzLkNPTE9SX1BBTEVUVEUuZ2V0KFwiTUVESVVNX0RBUktcIil9KTtcclxuXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IG1lbnVNZXNoOiBNZXNoO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSB0aXRsZTogTWVzaDtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgY2xvc2VCdXR0b246IFRleHRCdXR0b247XHJcbiAgICBwcml2YXRlIGJ1dHRvbnM6IFRleHRCdXR0b25bXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBjaGlwTWVudU1lc2hlczogTWVzaFtdID0gW107XHJcbiAgICBwcml2YXRlIGNoaXBNZW51QnV0dG9uczogVGV4dEJ1dHRvbltdID0gW107XHJcblxyXG4gICAgcHJpdmF0ZSByaWdodG1vc3RTdGF0WDogbnVtYmVyID0gMDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemVzIHRoZSBDb21wdXRlckNoaXBNZW51LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBzY2VuZSBUaGUgc2NlbmUgdG8gYWRkIHRoZSBtZW51IHRvLlxyXG4gICAgICogQHBhcmFtIGh1ZENhbWVyYSBUaGUgY2FtZXJhIHRvIGRpc3BsYXkgdGhlIG1lbnUgb24uXHJcbiAgICAgKiBAcGFyYW0gb25DbG9zZSBUaGUgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSBtZW51IGlzIGNsb3NlZC5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBzY2VuZTogU2NlbmUsIHByaXZhdGUgaHVkQ2FtZXJhOiBPcnRob2dyYXBoaWNDYW1lcmEsIG9uQ2xvc2U6ICgpID0+IHZvaWQpIHtcclxuICAgICAgICBsZXQgY2xvc2VYID0gdGhpcy5odWRDYW1lcmEucmlnaHQgLSAwLjI7XHJcbiAgICAgICAgbGV0IGNsb3NlWSA9IHRoaXMuaHVkQ2FtZXJhLmJvdHRvbSArIDAuNTtcclxuICAgICAgICB0aGlzLm1lbnVNZXNoID0gRHJhd1V0aWxzLmJ1aWxkUXVhZHJpbGF0ZXJhbE1lc2goaHVkQ2FtZXJhLnJpZ2h0ICogMiwgaHVkQ2FtZXJhLnRvcCAqIDAuOCwgQ29tcHV0ZXJDaGlwTWVudS5NRU5VX0NPTE9SLFxyXG4gICAgICAgICAgICBuZXcgVmVjdG9yMih0aGlzLmh1ZENhbWVyYS5wb3NpdGlvbi54LCB0aGlzLmh1ZENhbWVyYS5wb3NpdGlvbi55IC0gdGhpcy5odWRDYW1lcmEudG9wICogMC44KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5tZW51TWVzaC52aXNpYmxlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMudGl0bGUgPSBEcmF3VXRpbHMuYnVpbGRUZXh0TWVzaChcInVuZGVmaW5lZFwiLCB0aGlzLmh1ZENhbWVyYS5sZWZ0ICsgMC4xLCBjbG9zZVksIEhVRC5URVhUX1NJWkUsIEhVRC5IT1ZFUl9DT0xPUiwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMudGl0bGUudmlzaWJsZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLmNsb3NlQnV0dG9uID0gbmV3IFRleHRCdXR0b24odGhpcy5zY2VuZSwgXCJbWF1cIiwgbmV3IFZlY3RvcjIoY2xvc2VYLCBjbG9zZVkpLCAoKSA9PiBvbkNsb3NlKCkpO1xyXG4gICAgICAgIHRoaXMuY2xvc2VCdXR0b24ubWVzaC52aXNpYmxlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuYnV0dG9ucy5wdXNoKHRoaXMuY2xvc2VCdXR0b24pO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkKHRoaXMubWVudU1lc2gsIHRoaXMudGl0bGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgYnV0dG9ucyBpbiB0aGlzIG1lbnUsIHNvIHRoZXkgY2FuIGJlIHRha2VuIGNhcmUgb2YgYnkgdGhlIGV2ZW50IGhhbmRsZXIuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRCdXR0b25zKCk6IFRleHRCdXR0b25bXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYnV0dG9ucztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIG1lbnUgYnV0dG9ucyBpbiB0aGlzIG1lbnUsIHNvIHRoZXkgY2FuIGJlIHRha2VuIGNhcmUgb2YgYnkgdGhlIGV2ZW50IGhhbmRsZXIuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRNZW51QnV0dG9ucygpOiBUZXh0QnV0dG9uW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNoaXBNZW51QnV0dG9ucztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGJhY2tncm91bmQgbWVzaCBvZiB0aGUgbWVudS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGJhY2tncm91bmRNZXNoSGl0Ym94KCk6IE1lc2gge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1lbnVNZXNoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBzaG93IHRoZSBtZW51LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjaGlwIFRoZSBjaGlwIHRvIGRpc3BsYXkgaW5mb3JtYXRpb24gYWJvdXQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzaG93TWVudShjaGlwOiBDb21wdXRlckNoaXApOiB2b2lkIHtcclxuICAgICAgICBEcmF3VXRpbHMudXBkYXRlVGV4dCh0aGlzLnRpdGxlLCBjaGlwID8gY2hpcC5kaXNwbGF5TmFtZSgpIDogXCJ1bmRlZmluZWRcIiwgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMudGl0bGUucG9zaXRpb24ueCA9IHRoaXMuaHVkQ2FtZXJhLmxlZnQgKyAwLjE7XHJcbiAgICAgICAgdGhpcy5tZW51TWVzaC52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnRpdGxlLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY2xvc2VCdXR0b24ubWVzaC52aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnJlbmRlckNoaXBNZW51KGNoaXAuZ2V0TWVudU9wdGlvbnMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGhpZGUgdGhlIG1lbnUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBoaWRlTWVudSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm1lbnVNZXNoLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnRpdGxlLnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNsb3NlQnV0dG9uLm1lc2gudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY2xlYXJNZW51KCk7XHJcbiAgICAgICAgdGhpcy5yaWdodG1vc3RTdGF0WCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJDaGlwTWVudShjaGlwTWVudTogQ2hpcE1lbnVPcHRpb25zKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJTdGF0cyhjaGlwTWVudSk7XHJcbiAgICAgICAgY2hpcE1lbnUudXBncmFkZU9wdGlvbnMuZm9yRWFjaChcclxuICAgICAgICAgICAgKG9wdGlvbiwgaW5kZXgpID0+IHRoaXMucmVuZGVyVXBncmFkZU9wdGlvbihvcHRpb24sIGluZGV4LCBjaGlwTWVudS51cGdyYWRlT3B0aW9ucy5sZW5ndGgpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNsZWFyTWVudSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNoaXBNZW51TWVzaGVzLmZvckVhY2gobWVzaCA9PiB0aGlzLnNjZW5lLnJlbW92ZShtZXNoKSk7XHJcbiAgICAgICAgdGhpcy5jaGlwTWVudU1lc2hlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuY2hpcE1lbnVCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IGJ1dHRvbi5kaXNwb3NlKCkpO1xyXG4gICAgICAgIHRoaXMuY2hpcE1lbnVCdXR0b25zID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJVcGdyYWRlT3B0aW9uKG9wdGlvbjogVXBncmFkZU9wdGlvbiwgaW5kZXg6IG51bWJlciwgb3B0aW9uQ291bnQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IFt4LCB5XSA9IHRoaXMucmVuZGVyT3B0aW9uVGl0bGUob3B0aW9uLCBpbmRleCwgb3B0aW9uQ291bnQpOyAvLyBSZXR1cm5zIHRoZSB4IGFuZCB5IHBvc2l0aW9uIG9mIHRoZSB0aXRsZVxyXG4gICAgICAgIHRoaXMucmVuZGVyRGVzY3JpcHRpb24ob3B0aW9uLmRlc2NyaXB0aW9uLCB4LCB5KTtcclxuXHJcbiAgICAgICAgc3dpdGNoIChvcHRpb24udHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFVwZ3JhZGVPcHRpb25UeXBlLk51bWJlclNlbGVjdGlvbjpcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyTnVtYmVyU2VsZWN0aW9uKG9wdGlvbiwgeCwgeSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBVcGdyYWRlT3B0aW9uVHlwZS5TaW5nbGVWYWx1ZVNlbGVjdGlvbjpcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU2luZ2xlVmFsdWVTZWxlY3Rpb24ob3B0aW9uLCB4LCB5KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHVwZ3JhZGUgb3B0aW9uIHR5cGU6ICR7b3B0aW9uLnR5cGV9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyU3RhdHMoY2hpcE1lbnU6IENoaXBNZW51T3B0aW9ucyk6IHZvaWQge1xyXG4gICAgICAgIGNoaXBNZW51LnN0YXRzLmZvckVhY2goKHN0YXQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSBgJHtzdGF0Lm5hbWV9OiAke3N0YXQudmFsdWUgPyBzdGF0LnZhbHVlIDogXCJcIn0ke3N0YXQudW5pdCA/IHN0YXQudW5pdCA6IFwiXCJ9YDtcclxuICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMudGl0bGUucG9zaXRpb24ueSAtIDAuMDUgLSAoaW5kZXggKyAxKSAqIDAuMDY7XHJcbiAgICAgICAgICAgIGNvbnN0IHggPSB0aGlzLmh1ZENhbWVyYS5sZWZ0ICsgMC4xO1xyXG4gICAgICAgICAgICBjb25zdCBtZXNoID0gRHJhd1V0aWxzLmJ1aWxkVGV4dE1lc2godGV4dCwgeCwgeSwgSFVELlRFWFRfU0laRSAvIDIsIEhVRC5IT1ZFUl9DT0xPUiwgZmFsc2UpO1xyXG4gICAgICAgICAgICBtZXNoLmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpO1xyXG4gICAgICAgICAgICBpZiAobWVzaC5nZW9tZXRyeS5ib3VuZGluZ0JveCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQm91bmRpbmcgYm94IGlzIG51bGxcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbWF4WCA9IG1lc2guZ2VvbWV0cnkuYm91bmRpbmdCb3gubWF4Lng7XHJcbiAgICAgICAgICAgIGlmIChtYXhYID4gdGhpcy5yaWdodG1vc3RTdGF0WCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yaWdodG1vc3RTdGF0WCA9IG1heFg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbWluWCA9IG1lc2guZ2VvbWV0cnkuYm91bmRpbmdCb3gubWluLng7XHJcbiAgICAgICAgICAgIGlmIChzdGF0LmJ1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gc3RhdC5idXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAud2l0aFNjZW5lKHRoaXMuc2NlbmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLndpdGhQb3NpdGlvbihuZXcgVmVjdG9yMih4ICsgbWF4WCAtIG1pblggKyAwLjA1LCB5KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAud2l0aFRleHRTaXplKEhVRC5URVhUX1NJWkUgLyAyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC53aXRoQ2VudGVyZWQoZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJ1aWxkKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoaXBNZW51QnV0dG9ucy5wdXNoKGJ1dHRvbik7XHJcbiAgICAgICAgICAgICAgICBidXR0b24ubWVzaC5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKTtcclxuICAgICAgICAgICAgICAgIGlmIChidXR0b24ubWVzaC5nZW9tZXRyeS5ib3VuZGluZ0JveCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJvdW5kaW5nIGJveCBpcyBudWxsXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uTWF4WCA9IGJ1dHRvbi5tZXNoLmdlb21ldHJ5LmJvdW5kaW5nQm94Lm1heC54O1xyXG4gICAgICAgICAgICAgICAgaWYgKGJ1dHRvbk1heFggPiB0aGlzLnJpZ2h0bW9zdFN0YXRYKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yaWdodG1vc3RTdGF0WCA9IGJ1dHRvbk1heFg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5hZGQobWVzaCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpcE1lbnVNZXNoZXMucHVzaChtZXNoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlck9wdGlvblRpdGxlKG9wdGlvbjogVXBncmFkZU9wdGlvbiwgaW5kZXg6IG51bWJlciwgb3B0aW9uQ291bnQ6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl0ge1xyXG4gICAgICAgIGNvbnN0IHRleHQgPSBvcHRpb24ubmFtZTtcclxuICAgICAgICBjb25zdCBjYW52YXNXaWR0aCA9IHRoaXMuaHVkQ2FtZXJhLnJpZ2h0IC0gdGhpcy5odWRDYW1lcmEubGVmdCAtIHRoaXMucmlnaHRtb3N0U3RhdFg7XHJcbiAgICAgICAgY29uc3QgeSA9IHRoaXMuaHVkQ2FtZXJhLmJvdHRvbSArIDAuNDA7XHJcblxyXG4gICAgICAgIGxldCB4OiBudW1iZXIgPSB0aGlzLnJpZ2h0bW9zdFN0YXRYICsgMC4xO1xyXG4gICAgICAgIGlmIChvcHRpb25Db3VudCA9PT0gMSkge1xyXG4gICAgICAgICAgICB4ICs9IHRoaXMuaHVkQ2FtZXJhLmxlZnQgKyBjYW52YXNXaWR0aCAvIDI7IC8vIENlbnRlciBpZiBvbmx5IG9uZSBvcHRpb25cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzcGFjaW5nID0gY2FudmFzV2lkdGggKiAwLjQgLyAob3B0aW9uQ291bnQgLSAxKTtcclxuICAgICAgICAgICAgeCArPSB0aGlzLmh1ZENhbWVyYS5sZWZ0ICsgY2FudmFzV2lkdGggKiAwLjMgKyBpbmRleCAqIHNwYWNpbmc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBtZXNoID0gRHJhd1V0aWxzLmJ1aWxkVGV4dE1lc2godGV4dCwgeCwgeSwgSFVELlRFWFRfU0laRSAvIDIsIEhVRC5IT1ZFUl9DT0xPUiwgZmFsc2UpO1xyXG4gICAgICAgIG1lc2guZ2VvbWV0cnkuY2VudGVyKCk7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQobWVzaCk7XHJcbiAgICAgICAgdGhpcy5jaGlwTWVudU1lc2hlcy5wdXNoKG1lc2gpO1xyXG5cclxuICAgICAgICByZXR1cm4gW3gsIHldO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyRGVzY3JpcHRpb24oZGVzY3JpcHRpb246IHN0cmluZywgeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAvLyBTcGxpdCB0aGUgZGVzY3JpcHRpb24gaW50byBtdWx0aXBsZSBsaW5lcyBpZiBpdCBpcyB0b28gbG9uZywgb25seSBzcGxpdCBhdCBzcGFjZXMuXHJcbiAgICAgICAgY29uc3QgbWF4TGluZUxlbmd0aCA9IDIwO1xyXG4gICAgICAgIGxldCBsaW5lczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlc2NyaXB0aW9uLmxlbmd0aDsgaSArPSBtYXhMaW5lTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGxldCBsaW5lID0gZGVzY3JpcHRpb24uc3Vic3RyaW5nKGksIGkgKyBtYXhMaW5lTGVuZ3RoKTtcclxuICAgICAgICAgICAgaWYgKGxpbmUubGVuZ3RoID09PSBtYXhMaW5lTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGFzdFNwYWNlID0gbGluZS5sYXN0SW5kZXhPZihcIiBcIik7XHJcbiAgICAgICAgICAgICAgICBsaW5lID0gbGluZS5zdWJzdHJpbmcoMCwgbGFzdFNwYWNlKTtcclxuICAgICAgICAgICAgICAgIGkgLT0gKG1heExpbmVMZW5ndGggLSBsYXN0U3BhY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxpbmVzLnB1c2gobGluZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsaW5lcy5mb3JFYWNoKChsaW5lLCBpKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHlfbGluZSA9IHkgLSAwLjE1IC0gKGkgKyAxKSAqIDAuMDM1O1xyXG4gICAgICAgICAgICBjb25zdCBtZXNoID0gRHJhd1V0aWxzLmJ1aWxkVGV4dE1lc2gobGluZSwgeCwgeV9saW5lLCBIVUQuVEVYVF9TSVpFIC8gMiwgSFVELkhPVkVSX0NPTE9SLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIG1lc2guZ2VvbWV0cnkuY2VudGVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuYWRkKG1lc2gpO1xyXG4gICAgICAgICAgICB0aGlzLmNoaXBNZW51TWVzaGVzLnB1c2gobWVzaCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJOdW1iZXJTZWxlY3Rpb24ob3B0aW9uOiBVcGdyYWRlT3B0aW9uLCB4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlTWVzaCA9IERyYXdVdGlscy5idWlsZFRleHRNZXNoKG9wdGlvbi5jdXJyZW50VmFsdWUudG9TdHJpbmcoKSwgeCwgeSAtIDAuMSwgSFVELlRFWFRfU0laRSwgSFVELkhPVkVSX0NPTE9SLCBmYWxzZSk7XHJcbiAgICAgICAgdmFsdWVNZXNoLmdlb21ldHJ5LmNlbnRlcigpO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkKHZhbHVlTWVzaCk7XHJcbiAgICAgICAgdGhpcy5jaGlwTWVudU1lc2hlcy5wdXNoKHZhbHVlTWVzaCk7XHJcbiAgICAgICAgY29uc3QgcGx1c0J1dHRvbiA9IG5ldyBUZXh0QnV0dG9uKHRoaXMuc2NlbmUsIFwiWytdXCIsIG5ldyBWZWN0b3IyKHggKyAwLjEsIHkgLSAwLjEpLFxyXG4gICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb24uY3VycmVudFZhbHVlID0gb3B0aW9uLm9uSW5jcmVhc2UoKTtcclxuICAgICAgICAgICAgICAgIERyYXdVdGlscy51cGRhdGVUZXh0KHZhbHVlTWVzaCwgb3B0aW9uLmN1cnJlbnRWYWx1ZS50b1N0cmluZygpLCB0cnVlKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBtaW51c0J1dHRvbiA9IG5ldyBUZXh0QnV0dG9uKHRoaXMuc2NlbmUsIFwiWy1dXCIsIG5ldyBWZWN0b3IyKHggLSAwLjEsIHkgLSAwLjEpLFxyXG4gICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb24uY3VycmVudFZhbHVlID0gb3B0aW9uLm9uRGVjcmVhc2UoKTtcclxuICAgICAgICAgICAgICAgIERyYXdVdGlscy51cGRhdGVUZXh0KHZhbHVlTWVzaCwgb3B0aW9uLmN1cnJlbnRWYWx1ZS50b1N0cmluZygpLCB0cnVlKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNoaXBNZW51QnV0dG9ucy5wdXNoKHBsdXNCdXR0b24sIG1pbnVzQnV0dG9uKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlclNpbmdsZVZhbHVlU2VsZWN0aW9uKG9wdGlvbjogVXBncmFkZU9wdGlvbiwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICByZXR1cm47IC8vIFRPRE86IEltcGxlbWVudCB0aGlzXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZXN0cm95cyB0aGUgQ29tcHV0ZXJDaGlwTWVudS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmUodGhpcy5tZW51TWVzaCwgdGhpcy50aXRsZSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZUJ1dHRvbi5kaXNwb3NlKCk7XHJcbiAgICAgICAgdGhpcy5idXR0b25zLmZvckVhY2goYnV0dG9uID0+IGJ1dHRvbi5kaXNwb3NlKCkpO1xyXG4gICAgICAgIHRoaXMuY2hpcE1lbnVCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IGJ1dHRvbi5kaXNwb3NlKCkpO1xyXG4gICAgICAgIHRoaXMuY2hpcE1lbnVNZXNoZXMuZm9yRWFjaChtZXNoID0+IHRoaXMuc2NlbmUucmVtb3ZlKG1lc2gpKTtcclxuICAgICAgICBEcmF3VXRpbHMuZGlzcG9zZU1lc2hlcyh0aGlzLm1lbnVNZXNoLCB0aGlzLnRpdGxlLCAuLi50aGlzLmNoaXBNZW51TWVzaGVzKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQge01lc2gsIFNjZW5lLCBWZWN0b3IyfSBmcm9tIFwidGhyZWVcIjtcclxuaW1wb3J0IHtEcmF3VXRpbHN9IGZyb20gXCIuLi9EcmF3VXRpbHNcIjtcclxuaW1wb3J0IHtIVUR9IGZyb20gXCIuLi9IVURcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQbGF5ZXJTdGF0cyB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBJTklUSUFMX1BPV0VSOiBudW1iZXIgPSAxMDA7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBQT1dFUl9JTUc6IHN0cmluZyA9IFwicmVzL3Bvd2VyLnBuZ1wiO1xyXG4gICAgcHJpdmF0ZSBwb3dlckltZzogTWVzaDtcclxuICAgIHByaXZhdGUgdmFsdWVNZXNoOiBNZXNoO1xyXG4gICAgcHJpdmF0ZSBiZ01lc2g6IE1lc2g7XHJcbiAgICBwcml2YXRlIHBvd2VyOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGRpcnR5TWVzaCA9IGZhbHNlOyAvLyBVc2VkIHRvIGRldGVybWluZSBpZiB0aGUgbWVzaCBuZWVkcyB0byBiZSB1cGRhdGVkLlxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgc2NlbmU6IFNjZW5lLCBwcml2YXRlIHBvc2l0aW9uOiBWZWN0b3IyKSB7XHJcbiAgICAgICAgdGhpcy5wb3dlciA9IFBsYXllclN0YXRzLklOSVRJQUxfUE9XRVI7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplR3JhcGhpY3MoKS50aGVuKCk7IC8vIE5vdGhpbmcgdG8gZG8gd2l0aCB0aGUgcHJvbWlzZSwganVzdCB0byBzdXBwcmVzcyB0aGUgd2FybmluZy5cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemVzIHRoZSBncmFwaGljcyBmb3IgdGhlIHBsYXllciBzdGF0cy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGluaXRpYWxpemVHcmFwaGljcygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0aGlzLnBvd2VySW1nID0gYXdhaXQgRHJhd1V0aWxzLmJ1aWxkSW1hZ2VNZXNoKFBsYXllclN0YXRzLlBPV0VSX0lNRywgMC4xLCAwLjEpO1xyXG4gICAgICAgIHRoaXMudmFsdWVNZXNoID0gRHJhd1V0aWxzLmJ1aWxkVGV4dE1lc2godGhpcy5wb3dlci50b1N0cmluZygpLCB0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSwgSFVELlRFWFRfU0laRSwgSFVELkJBU0VfQ09MT1IsIGZhbHNlKTtcclxuICAgICAgICB0aGlzLnZhbHVlTWVzaC5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKTtcclxuICAgICAgICBpZiAodGhpcy52YWx1ZU1lc2guZ2VvbWV0cnkuYm91bmRpbmdCb3ggPT09IG51bGwpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJvdW5kaW5nIGJveCBpcyBudWxsXCIpO1xyXG4gICAgICAgIHRoaXMucG93ZXJJbWcucG9zaXRpb24uc2V0KHRoaXMudmFsdWVNZXNoLnBvc2l0aW9uLnggKyB0aGlzLnZhbHVlTWVzaC5nZW9tZXRyeS5ib3VuZGluZ0JveC5tYXgueCAtIHRoaXMudmFsdWVNZXNoLmdlb21ldHJ5LmJvdW5kaW5nQm94Lm1pbi54ICsgMC4wNSxcclxuICAgICAgICAgICAgdGhpcy52YWx1ZU1lc2gucG9zaXRpb24ueSArICh0aGlzLnZhbHVlTWVzaC5nZW9tZXRyeS5ib3VuZGluZ0JveC5tYXgueSAtIHRoaXMudmFsdWVNZXNoLmdlb21ldHJ5LmJvdW5kaW5nQm94Lm1pbi55KSAvMixcclxuICAgICAgICAgICAgMCk7XHJcbiAgICAgICAgdGhpcy5iZ01lc2ggPSBEcmF3VXRpbHMuYWRkQmFja2dyb3VuZE1lc2godGhpcy52YWx1ZU1lc2gsIG5ldyBWZWN0b3IyKHRoaXMudmFsdWVNZXNoLnBvc2l0aW9uLnggKyAwLjA0LCB0aGlzLnZhbHVlTWVzaC5wb3NpdGlvbi55KSwgSFVELk1FTlVfQ09MT1IsIDAuMSk7XHJcbiAgICAgICAgdGhpcy5zY2VuZS5hZGQodGhpcy5wb3dlckltZywgdGhpcy52YWx1ZU1lc2gsIHRoaXMuYmdNZXNoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIHBsYXllciBzdGF0cy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5kaXJ0eU1lc2gpIHtcclxuICAgICAgICAgICAgRHJhd1V0aWxzLnVwZGF0ZVRleHQodGhpcy52YWx1ZU1lc2gsIHRoaXMucG93ZXIudG9TdHJpbmcoKSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLmRpcnR5TWVzaCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIHBvd2VyIG9mIHRoZSBwbGF5ZXIuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRQb3dlcigpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBvd2VyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBjbGVhbiB1cCB0aGUgcGxheWVyIHN0YXRzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZSh0aGlzLnBvd2VySW1nLCB0aGlzLnZhbHVlTWVzaCwgdGhpcy5iZ01lc2gpO1xyXG4gICAgICAgIERyYXdVdGlscy5kaXNwb3NlTWVzaGVzKHRoaXMucG93ZXJJbWcsIHRoaXMudmFsdWVNZXNoLCB0aGlzLmJnTWVzaCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtNZXNoQmFzaWNNYXRlcmlhbCwgT3J0aG9ncmFwaGljQ2FtZXJhLCBTY2VuZSwgVmVjdG9yMn0gZnJvbSBcInRocmVlXCI7XHJcbmltcG9ydCB7RHJhd1V0aWxzfSBmcm9tIFwiLi9EcmF3VXRpbHNcIjtcclxuaW1wb3J0IHtBcHB9IGZyb20gXCIuL2FwcFwiO1xyXG5pbXBvcnQge0NvbXB1dGVyQ2hpcH0gZnJvbSBcIi4vYWN0b3JzL0NvbXB1dGVyQ2hpcFwiO1xyXG5pbXBvcnQge1BhdXNlQnV0dG9ufSBmcm9tIFwiLi9odWRFbGVtZW50cy9QYXVzZUJ1dHRvblwiO1xyXG5pbXBvcnQge0Fic3RyYWN0QnV0dG9ufSBmcm9tIFwiLi9odWRFbGVtZW50cy9BYnN0cmFjdEJ1dHRvblwiO1xyXG5pbXBvcnQge0hVREV2ZW50SGFuZGxlcn0gZnJvbSBcIi4vaHVkRWxlbWVudHMvSFVERXZlbnRIYW5kbGVyXCI7XHJcbmltcG9ydCB7SFVEUHJvY2Vzc29yU3RhdHN9IGZyb20gXCIuL2h1ZEVsZW1lbnRzL0hVRFByb2Nlc3NvclN0YXRzXCI7XHJcbmltcG9ydCB7Q29tcHV0ZXJDaGlwTWVudX0gZnJvbSBcIi4vaHVkRWxlbWVudHMvQ29tcHV0ZXJDaGlwTWVudVwiO1xyXG5pbXBvcnQge1BsYXllclN0YXRzfSBmcm9tIFwiLi9odWRFbGVtZW50cy9QbGF5ZXJTdGF0c1wiO1xyXG5cclxuLyoqXHJcbiAqIEhlYWRzLVVwIERpc3BsYXkgKEhVRCkgZm9yIHNob3dpbmcgZ2FtZSBpbmZvcm1hdGlvbi5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBIVUQge1xyXG4gICAgLyoqIFRoZSBiYXNlIGNvbG9yIGZvciBIVUQgZWxlbWVudHMuICovXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgQkFTRV9DT0xPUjogTWVzaEJhc2ljTWF0ZXJpYWwgPVxyXG4gICAgICAgIG5ldyBNZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IERyYXdVdGlscy5DT0xPUl9QQUxFVFRFLmdldChcIk1FRElVTV9MSUdIVFwiKX0pO1xyXG5cclxuICAgIC8qKiBUaGUgY29sb3IgZm9yIGhpZ2hsaWdodGVkIEhVRCBlbGVtZW50cy4gKi9cclxuICAgIHN0YXRpYyByZWFkb25seSBIT1ZFUl9DT0xPUjogTWVzaEJhc2ljTWF0ZXJpYWwgPVxyXG4gICAgICAgIG5ldyBNZXNoQmFzaWNNYXRlcmlhbCh7Y29sb3I6IERyYXdVdGlscy5DT0xPUl9QQUxFVFRFLmdldChcIkxJR0hUXCIpfSk7XHJcblxyXG4gICAgLyoqIFRoZSBjb2xvciBmb3IgbWVudSBlbGVtZW50cy4gKi9cclxuICAgIHN0YXRpYyByZWFkb25seSBNRU5VX0NPTE9SOiBNZXNoQmFzaWNNYXRlcmlhbCA9XHJcbiAgICAgICAgbmV3IE1lc2hCYXNpY01hdGVyaWFsKHtjb2xvcjogRHJhd1V0aWxzLkNPTE9SX1BBTEVUVEUuZ2V0KFwiTUVESVVNX0RBUktcIil9KTtcclxuXHJcbiAgICAvKiogVGhlIGZhY3RvciB0byBzY2FsZSB0aGUgYnV0dG9uIGJ5IHdoZW4gaG92ZXJpbmcuICovXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgSE9WRVJfU0NBTEVfRkFDVE9SOiBudW1iZXIgPSAxLjE7XHJcblxyXG4gICAgLyoqIFRoZSBzaXplIG9mIHRleHQgaW4gdGhlIEhVRC4gKi9cclxuICAgIHN0YXRpYyByZWFkb25seSBURVhUX1NJWkU6IG51bWJlciA9IDAuMDU7XHJcblxyXG4gICAgLyoqIFRoZSBmYWN0b3IgdG8gem9vbSBpbiBvciBvdXQgYnkuICovXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgWk9PTV9GQUNUT1I6IG51bWJlciA9IDAuMDAwMTtcclxuICAgIC8qKiBUaGUgbWF4aW11bSB6b29tIGxldmVsLiAqL1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IE1BWF9aT09NOiBudW1iZXIgPSAwLjI7XHJcbiAgICAvKiogVGhlIG1pbmltdW0gem9vbSBsZXZlbC4gKi9cclxuICAgIHN0YXRpYyByZWFkb25seSBNSU5fWk9PTTogbnVtYmVyID0gMTtcclxuICAgIC8qKiBUaGUgbWF4aW11bSBjYW1lcmEgcG9zaXRpb24gb24gdGhlIHgtYXhpcy4gKi9cclxuICAgIHN0YXRpYyByZWFkb25seSBNQVhfQ0FNRVJBX1BPU0lUSU9OX1ggPSA0O1xyXG4gICAgLyoqIFRoZSBtYXhpbXVtIGNhbWVyYSBwb3NpdGlvbiBvbiB0aGUgeS1heGlzLiAqL1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IE1BWF9DQU1FUkFfUE9TSVRJT05fWSA9IDQ7XHJcbiAgICAvKiogVGhlIHNwZWVkIGF0IHdoaWNoIHRoZSBjYW1lcmEgc2Nyb2xscy4gKi9cclxuICAgIHN0YXRpYyBTQ1JPTExfU1BFRUQ6IG51bWJlciA9IDI7XHJcblxyXG4gICAgLyoqIFRoZSBTdGF0cyBvZiB0aGUgY3B1IGV4ZWN1dGlvbnMgYXQgdGhlIHRvcCBsZWZ0ICovXHJcbiAgICBwcml2YXRlIEhVRFByb2Nlc3NvclN0YXRzOiBIVURQcm9jZXNzb3JTdGF0cztcclxuXHJcbiAgICAvKiogVGhlIG1lbnUgZWxlbWVudCB0aGF0IHNob3dzIHVwIHdoZW4gY2xpY2tpbmcgb24gYSBjaGlwICovXHJcbiAgICBwcml2YXRlIG1lbnU6IENvbXB1dGVyQ2hpcE1lbnU7XHJcblxyXG4gICAgLyoqIFRoZSBwbGF5ZXIgc3RhdHMuICovXHJcbiAgICBwcml2YXRlIHBsYXllclN0YXRzOiBQbGF5ZXJTdGF0cztcclxuXHJcbiAgICAvKiogVGhlIEhVRCBzY2VuZSBhbmQgY2FtZXJhLiAqL1xyXG4gICAgcHJpdmF0ZSBodWRTY2VuZTogU2NlbmU7XHJcbiAgICBwcml2YXRlIGh1ZENhbWVyYTogT3J0aG9ncmFwaGljQ2FtZXJhO1xyXG5cclxuICAgIC8qKiBBbGwgdGhlIGJ1dHRvbnMgaW4gdGhlIEhVRCwgdXNlZCBmb3IgbW91c2UgZXZlbnQgaGFuZGxpbmcuICovXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGJ1dHRvbnM6IEFic3RyYWN0QnV0dG9uW10gPSBbXTtcclxuXHJcbiAgICAvKiogVGhlIGN1cnJlbnRseSBzZWxlY3RlZCBhbmQgaGlnaGxpZ2h0ZWQgYWN0b3IuICovXHJcbiAgICBwcml2YXRlIHNlbGVjdGVkQWN0b3I6IENvbXB1dGVyQ2hpcCB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAvKiogRXZlbnQgaGFuZGxlciBmb3IgdGhlIEhVRC4gKi9cclxuICAgIHByaXZhdGUgZXZlbnRIYW5kbGVyOiBIVURFdmVudEhhbmRsZXI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgSFVELlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhcHAgVGhlIGFwcGxpY2F0aW9uIHRvIGRpc3BsYXkgdGhlIEhVRCBmb3IuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgYXBwOiBBcHApIHtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemVIVURTY2VuZSgpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRIYW5kbGVyID0gbmV3IEhVREV2ZW50SGFuZGxlcih0aGlzLCB0aGlzLmFwcCwgdGhpcy5odWRDYW1lcmEsIHRoaXMuYnV0dG9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBIVUQgc2NlbmUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRIVURTY2VuZSgpOiBTY2VuZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHVkU2NlbmU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBIVUQgY2FtZXJhLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0SFVEQ2FtZXJhKCk6IE9ydGhvZ3JhcGhpY0NhbWVyYSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHVkQ2FtZXJhO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgSFVELlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuSFVEUHJvY2Vzc29yU3RhdHMudXBkYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBtZW51IGZvciB0aGUgY29tcHV0ZXIgY2hpcC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldENvbXB1dGVyQ2hpcE1lbnUoKTogQ29tcHV0ZXJDaGlwTWVudSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWVudTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlbGVjdHMgYW4gYWN0b3IuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGFjdG9yIFRoZSBhY3RvciB0byBzZWxlY3QuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZWxlY3RBY3RvcihhY3RvcjogQ29tcHV0ZXJDaGlwKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRBY3Rvcikge1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkQWN0b3IuZGVzZWxlY3QoKTtcclxuICAgICAgICAgICAgdGhpcy5oaWRlTWVudSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlbGVjdGVkQWN0b3IgPSBhY3Rvci5zZWxlY3QoKVxyXG4gICAgICAgIHRoaXMuc2hvd01lbnUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRvZ2dsZXMgdGhlIHBhdXNlIHN0YXRlIG9mIHRoZSBnYW1lLlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0b2dnbGVQYXVzZVN0YXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYXBwLnBhdXNlZCA9ICF0aGlzLmFwcC5wYXVzZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgSFVELlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGluaXRpYWxpemVIVURTY2VuZSgpOiBIVUQge1xyXG4gICAgICAgIHRoaXMuaHVkU2NlbmUgPSBuZXcgU2NlbmUoKTtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemVDYW1lcmEoKTtcclxuICAgICAgICB0aGlzLkhVRFByb2Nlc3NvclN0YXRzID0gbmV3IEhVRFByb2Nlc3NvclN0YXRzKHRoaXMuaHVkU2NlbmUsIHRoaXMuc3RhdHNQb3NpdGlvbigpLCB0aGlzLmFwcC5jcHVzKTtcclxuICAgICAgICB0aGlzLm1lbnUgPSBuZXcgQ29tcHV0ZXJDaGlwTWVudSh0aGlzLmh1ZFNjZW5lLCB0aGlzLmh1ZENhbWVyYSwgKCkgPT4gdGhpcy5oaWRlTWVudSgpKTtcclxuICAgICAgICB0aGlzLmJ1dHRvbnMucHVzaChcclxuICAgICAgICAgICAgbmV3IFBhdXNlQnV0dG9uKHRoaXMuaHVkU2NlbmUsIHRoaXMucGF1c2VCdXR0b25Qb3NpdGlvbigpLCBIVUQuQkFTRV9DT0xPUiwgdGhpcy5hcHAucGF1c2VkLFxyXG4gICAgICAgICAgICAgICAgKCkgPT4gdGhpcy50b2dnbGVQYXVzZVN0YXRlKCkpLFxyXG4gICAgICAgICAgICAuLi50aGlzLm1lbnUuZ2V0QnV0dG9ucygpXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLnBsYXllclN0YXRzID0gbmV3IFBsYXllclN0YXRzKHRoaXMuaHVkU2NlbmUsIHRoaXMucGxheWVyU3RhdHNQb3NpdGlvbigpKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0cyB0aGUgSFVELlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5IVURQcm9jZXNzb3JTdGF0cy5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMuYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBidXR0b24uZGVzdHJveSgpKTtcclxuICAgICAgICB0aGlzLm1lbnUuZGVzdHJveSgpO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUhVRFNjZW5lKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgSFVEIGNhbWVyYS5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBpbml0aWFsaXplQ2FtZXJhKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGFzcGVjdCA9IHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuaHVkQ2FtZXJhID0gbmV3IE9ydGhvZ3JhcGhpY0NhbWVyYSgtYXNwZWN0LCBhc3BlY3QsIDEsIC0xLCAxLCAzKTtcclxuICAgICAgICB0aGlzLmh1ZENhbWVyYS5wb3NpdGlvbi5zZXQoMCwgMCwgMik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaG93cyB0aGUgbWVudSBmb3IgdGhlIHNlbGVjdGVkIGFjdG9yLlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2hvd01lbnUoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkQWN0b3IpIHJldHVybjtcclxuICAgICAgICB0aGlzLm1lbnUuc2hvd01lbnUodGhpcy5zZWxlY3RlZEFjdG9yKTtcclxuICAgICAgICB0aGlzLmV2ZW50SGFuZGxlci5jaGlwTWVudUJ1dHRvbnMgPSB0aGlzLm1lbnUuZ2V0TWVudUJ1dHRvbnMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhpZGVzIHRoZSBtZW51LlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaGlkZU1lbnUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5tZW51LmhpZGVNZW51KCk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEFjdG9yID0gdGhpcy5zZWxlY3RlZEFjdG9yPy5kZXNlbGVjdCgpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRIYW5kbGVyLmNoaXBNZW51QnV0dG9ucyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29tcHV0ZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSBzdGF0cyB0ZXh0LlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRzUG9zaXRpb24oKTogVmVjdG9yMiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMuaHVkQ2FtZXJhLmxlZnQgKyAwLjEsIHRoaXMuaHVkQ2FtZXJhLnRvcCAtIDAuMyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wdXRlcyB0aGUgcG9zaXRpb24gb2YgdGhlIHBsYXllciBzdGF0cy5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBwbGF5ZXJTdGF0c1Bvc2l0aW9uKCk6IFZlY3RvcjIge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMih0aGlzLmh1ZENhbWVyYS5yaWdodCAtIDAuNCwgdGhpcy5odWRDYW1lcmEudG9wIC0gMC4xMiAtICh0aGlzLmlzTW9iaWxlUmF0aW8oKSA/IDAuMSA6IDApKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqICBDb21wdXRlcyB0aGUgcG9zaXRpb24gb2YgdGhlIHBhdXNlIGJ1dHRvbi5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBwYXVzZUJ1dHRvblBvc2l0aW9uKCk6IFZlY3RvcjIge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMih0aGlzLmh1ZENhbWVyYS5yaWdodCAtIDAuMSwgdGhpcy5odWRDYW1lcmEudG9wIC0gMC4xIC0gKHRoaXMuaXNNb2JpbGVSYXRpbygpID8gMC4xIDogMCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGV0ZXJtaW5lcyBpZiB0aGUgYXNwZWN0IHJhdGlvIGlzIG1vYmlsZS5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBpc01vYmlsZVJhdGlvKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodCA8IDAuODtcclxuICAgIH1cclxufSIsImltcG9ydCB7QWJzdHJhY3RCdXR0b259IGZyb20gXCIuL0Fic3RyYWN0QnV0dG9uXCI7XHJcbmltcG9ydCB7TWVzaCwgU2NlbmUsIFZlY3RvcjJ9IGZyb20gXCJ0aHJlZVwiO1xyXG5pbXBvcnQge0RyYXdVdGlsc30gZnJvbSBcIi4uL0RyYXdVdGlsc1wiO1xyXG5pbXBvcnQge0hVRH0gZnJvbSBcIi4uL0hVRFwiO1xyXG5cclxuLyoqXHJcbiAqIFRoZSBtb3N0IGJhc2ljIGJ1dHRvbiB0aGF0IGNhbiBiZSBjcmVhdGVkLCBiYXNlZCBhIHRleHQgbWVzaC4gU3VwcG9ydHMgaG92ZXIgYW5kIGNsaWNrIGV2ZW50cy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUZXh0QnV0dG9uIGV4dGVuZHMgQWJzdHJhY3RCdXR0b24ge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBoaXRib3g6IE1lc2g7XHJcbiAgICBtZXNoOiBNZXNoO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0ZXh0IGJ1dHRvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc2NlbmUgVGhlIHNjZW5lIHRvIGFkZCB0aGUgYnV0dG9uIHRvLlxyXG4gICAgICogQHBhcmFtIHRleHQgVGhlIHRleHQgb2YgdGhlIGJ1dHRvbi5cclxuICAgICAqIEBwYXJhbSBwb3NpdGlvbiBUaGUgcG9zaXRpb24gb2YgdGhlIGJ1dHRvbi5cclxuICAgICAqIEBwYXJhbSBvbkNsaWNrIFRoZSBmdW5jdGlvbiB0byBleGVjdXRlIHdoZW4gdGhlIGJ1dHRvbiBpcyBjbGlja2VkLlxyXG4gICAgICogQHBhcmFtIHRleHRTaXplIFRoZSBzaXplIG9mIHRoZSB0ZXh0LlxyXG4gICAgICogQHBhcmFtIGNlbnRlcmVkIFdoZXRoZXIgdGhlIHRleHQgc2hvdWxkIGJlIGNlbnRlcmVkLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihzY2VuZTogU2NlbmUsIHRleHQ6IHN0cmluZywgcG9zaXRpb246IFZlY3RvcjIsIG9uQ2xpY2s6ICgpID0+IHZvaWQsIHRleHRTaXplOiBudW1iZXIgPSBIVUQuVEVYVF9TSVpFLCBjZW50ZXJlZDogYm9vbGVhbiA9IHRydWUpIHtcclxuICAgICAgICBzdXBlcihzY2VuZSk7XHJcbiAgICAgICAgdGhpcy5tZXNoID0gRHJhd1V0aWxzLmJ1aWxkVGV4dE1lc2godGV4dCwgcG9zaXRpb24ueCwgcG9zaXRpb24ueSwgdGV4dFNpemUsIEhVRC5CQVNFX0NPTE9SLCBjZW50ZXJlZCk7XHJcbiAgICAgICAgdGhpcy5tZXNoLmdlb21ldHJ5LmNvbXB1dGVCb3VuZGluZ0JveCgpO1xyXG4gICAgICAgIGlmICh0aGlzLm1lc2guZ2VvbWV0cnkuYm91bmRpbmdCb3ggPT09IG51bGwpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJvdW5kaW5nIGJveCBpcyBudWxsXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmhpdGJveCA9IERyYXdVdGlscy5idWlsZFF1YWRyaWxhdGVyYWxNZXNoKFxyXG4gICAgICAgICAgICB0aGlzLm1lc2guZ2VvbWV0cnkuYm91bmRpbmdCb3gubWF4LnggLSB0aGlzLm1lc2guZ2VvbWV0cnkuYm91bmRpbmdCb3gubWluLngsXHJcbiAgICAgICAgICAgIHRoaXMubWVzaC5nZW9tZXRyeS5ib3VuZGluZ0JveC5tYXgueSAtIHRoaXMubWVzaC5nZW9tZXRyeS5ib3VuZGluZ0JveC5taW4ueSxcclxuICAgICAgICAgICAgSFVELkJBU0VfQ09MT1IsIG5ldyBWZWN0b3IyKHBvc2l0aW9uLngsIHBvc2l0aW9uLnkpKTtcclxuICAgICAgICBpZiAoIWNlbnRlcmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzaC5nZW9tZXRyeS5jb21wdXRlQm91bmRpbmdCb3goKTtcclxuICAgICAgICAgICAgdGhpcy5oaXRib3gucG9zaXRpb24uc2V0KHBvc2l0aW9uLnggKyAodGhpcy5tZXNoLmdlb21ldHJ5LmJvdW5kaW5nQm94Lm1heC54IC0gdGhpcy5tZXNoLmdlb21ldHJ5LmJvdW5kaW5nQm94Lm1pbi54KSAvIDIgKyAwLjAxLFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb24ueSArICh0aGlzLm1lc2guZ2VvbWV0cnkuYm91bmRpbmdCb3gubWF4LnkgLSB0aGlzLm1lc2guZ2VvbWV0cnkuYm91bmRpbmdCb3gubWluLnkpIC8gMiAtIDAuMDA1LCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaGl0Ym94LnZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICBzY2VuZS5hZGQodGhpcy5tZXNoLCB0aGlzLmhpdGJveCk7XHJcbiAgICAgICAgdGhpcy5vbkNsaWNrID0gKCkgPT4gb25DbGljaygpO1xyXG4gICAgICAgIHRoaXMub25Ib3ZlciA9ICgpID0+IHRoaXMubWVzaC5tYXRlcmlhbCA9IEhVRC5IT1ZFUl9DT0xPUjtcclxuICAgICAgICB0aGlzLm9uVW5ob3ZlciA9ICgpID0+IHRoaXMubWVzaC5tYXRlcmlhbCA9IEhVRC5CQVNFX0NPTE9SO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRIaXRib3goKTogTWVzaCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGl0Ym94O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2NlbmUucmVtb3ZlKHRoaXMubWVzaCwgdGhpcy5oaXRib3gpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtTY2VuZSwgVmVjdG9yMn0gZnJvbSBcInRocmVlXCI7XHJcbmltcG9ydCB7VGV4dEJ1dHRvbn0gZnJvbSBcIi4vVGV4dEJ1dHRvblwiO1xyXG5cclxuLyoqXHJcbiAqIEEgYnVpbGRlciBmb3IgdGV4dCBidXR0b25zLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRleHRCdXR0b25CdWlsZGVyIHtcclxuXHJcbiAgICBwcml2YXRlIHNjZW5lOiBTY2VuZTtcclxuICAgIHByaXZhdGUgdGV4dDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBwb3NpdGlvbjogVmVjdG9yMjtcclxuICAgIHByaXZhdGUgb25DbGljazogKCkgPT4gdm9pZDtcclxuICAgIHByaXZhdGUgdGV4dFNpemU6IG51bWJlcjtcclxuICAgIHByaXZhdGUgY2VudGVyZWQ6IGJvb2xlYW47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IFRleHRCdXR0b25CdWlsZGVyIGluc3RhbmNlLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEJ1aWxkcyBhIG5ldyBUZXh0QnV0dG9uIGluc3RhbmNlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4gdGhlIG5ldyBUZXh0QnV0dG9uIGluc3RhbmNlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBidWlsZCgpOiBUZXh0QnV0dG9uIHtcclxuICAgICAgICByZXR1cm4gbmV3IFRleHRCdXR0b24odGhpcy5zY2VuZSwgdGhpcy50ZXh0LCB0aGlzLnBvc2l0aW9uLCB0aGlzLm9uQ2xpY2ssIHRoaXMudGV4dFNpemUsIHRoaXMuY2VudGVyZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgc2NlbmUgZm9yIHRoZSB0ZXh0IGJ1dHRvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc2NlbmUgdGhlIHNjZW5lIHRvIHNldFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgd2l0aFNjZW5lKHNjZW5lOiBTY2VuZSk6IFRleHRCdXR0b25CdWlsZGVyIHtcclxuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgdGV4dCBmb3IgdGhlIHRleHQgYnV0dG9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0ZXh0IHRoZSB0ZXh0IHRvIHNldFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgd2l0aFRleHQodGV4dDogc3RyaW5nKTogVGV4dEJ1dHRvbkJ1aWxkZXIge1xyXG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBwb3NpdGlvbiBmb3IgdGhlIHRleHQgYnV0dG9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwb3NpdGlvbiB0aGUgcG9zaXRpb24gdG8gc2V0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB3aXRoUG9zaXRpb24ocG9zaXRpb246IFZlY3RvcjIpOiBUZXh0QnV0dG9uQnVpbGRlciB7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgb25DbGljayBmb3IgdGhlIHRleHQgYnV0dG9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBvbkNsaWNrIHRoZSBvbkNsaWNrIHRvIHNldFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgd2l0aE9uQ2xpY2sob25DbGljazogKCkgPT4gdm9pZCk6IFRleHRCdXR0b25CdWlsZGVyIHtcclxuICAgICAgICB0aGlzLm9uQ2xpY2sgPSBvbkNsaWNrO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgdGV4dFNpemUgZm9yIHRoZSB0ZXh0IGJ1dHRvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdGV4dFNpemUgdGhlIHRleHRTaXplIHRvIHNldFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgd2l0aFRleHRTaXplKHRleHRTaXplOiBudW1iZXIpOiBUZXh0QnV0dG9uQnVpbGRlciB7XHJcbiAgICAgICAgdGhpcy50ZXh0U2l6ZSA9IHRleHRTaXplO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgY2VudGVyZWQgZm9yIHRoZSB0ZXh0IGJ1dHRvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY2VudGVyZWQgdGhlIGNlbnRlcmVkIHRvIHNldFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgd2l0aENlbnRlcmVkKGNlbnRlcmVkOiBib29sZWFuKTogVGV4dEJ1dHRvbkJ1aWxkZXIge1xyXG4gICAgICAgIHRoaXMuY2VudGVyZWQgPSBjZW50ZXJlZDtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufSIsImltcG9ydCB7R3JvdXAsIE1lc2gsIE1lc2hCYXNpY01hdGVyaWFsLCBTY2VuZX0gZnJvbSBcInRocmVlXCI7XHJcbmltcG9ydCB7Q29tcHV0ZXJDaGlwLCBTaWRlfSBmcm9tIFwiLi9Db21wdXRlckNoaXBcIjtcclxuaW1wb3J0IHtJbnN0cnVjdGlvbk1lbW9yeX0gZnJvbSBcIi4vSW5zdHJ1Y3Rpb25NZW1vcnlcIjtcclxuaW1wb3J0IHtXb3JraW5nTWVtb3J5fSBmcm9tIFwiLi9Xb3JraW5nTWVtb3J5XCI7XHJcbmltcG9ydCB7UXVldWV9IGZyb20gXCIuLi9kYXRhU3RydWN0dXJlcy9RdWV1ZVwiO1xyXG5pbXBvcnQge1NJU0RDb3JlfSBmcm9tIFwiLi9tYWNyb3MvU0lTRENvcmVcIjtcclxuaW1wb3J0IHtJbnN0cnVjdGlvbkNhY2hlfSBmcm9tIFwiLi9tYWNyb3MvSW5zdHJ1Y3Rpb25DYWNoZVwiO1xyXG5pbXBvcnQge0NoaXBNZW51T3B0aW9uc30gZnJvbSBcIi4uL2RhdGFTdHJ1Y3R1cmVzL0NoaXBNZW51T3B0aW9uc1wiO1xyXG5pbXBvcnQge1VwZ3JhZGVPcHRpb259IGZyb20gXCIuLi9kYXRhU3RydWN0dXJlcy9VcGdyYWRlT3B0aW9uXCI7XHJcbmltcG9ydCB7U3RhdH0gZnJvbSBcIi4uL2RhdGFTdHJ1Y3R1cmVzL1N0YXRcIjtcclxuaW1wb3J0IHtUZXh0QnV0dG9uQnVpbGRlcn0gZnJvbSBcIi4uL2h1ZEVsZW1lbnRzL1RleHRCdXR0b25CdWlsZGVyXCI7XHJcblxyXG4vKipcclxuICogQSBTaW5nbGUgSW5zdHJ1Y3Rpb24sIFNpbmdsZSBEYXRhIChTSVNEKSBwcm9jZXNzb3IuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU0lTRFByb2Nlc3NvciBleHRlbmRzIENvbXB1dGVyQ2hpcCB7XHJcbiAgICAvKiogVHJhY2UgY29uc3RhbnRzICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBUUkFDRV9PRkZTRVQgPSAwLjE7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBUUkFDRV9TUEFDSU5HID0gMC4wMztcclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBDT01QT05FTlRfU1BBQ0lORyA9IDAuMDU7XHJcbiAgICBwcml2YXRlIGNvcmU6IFNJU0RDb3JlO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBpQ2FjaGU6IEluc3RydWN0aW9uQ2FjaGU7XHJcblxyXG4gICAgcHJpdmF0ZSBpbnN0cnVjdGlvbk1lbW9yeTogSW5zdHJ1Y3Rpb25NZW1vcnkgfCB1bmRlZmluZWQ7XHJcbiAgICBwcml2YXRlIHdvcmtpbmdNZW1vcnk6IFdvcmtpbmdNZW1vcnkgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgLy8gdXNlZCBmb3IgY29tcHV0aW5nIFNJU0RDb3JlIG1ldHJpY3NcclxuICAgIHByaXZhdGUgcHJldmlvdXNSZXRpcmVkSW5zdHJ1Y3Rpb25Db3VudHM6IFF1ZXVlPG51bWJlcj4gPSBuZXcgUXVldWU8bnVtYmVyPig1MCk7XHJcbiAgICBwcml2YXRlIHJldGlyZWRJbnN0cnVjdGlvbkNvdW50OiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBhY2N1bXVsYXRlZEluc3RydWN0aW9uQ291bnQ6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIElQQzogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgSVBTOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIHByaXZhdGUgaGlnaGxpZ2h0ZWRUcmFjZXM6IEdyb3VwW10gPSBbXTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgU0lTRFByb2Nlc3NvciBpbnN0YW5jZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcG9zaXRpb24gVGhlIHBvc2l0aW9uIG9mIHRoZSBwcm9jZXNzb3Igd2l0aGluIHRoZSBzY2VuZS5cclxuICAgICAqIEBwYXJhbSBzY2VuZSBUaGUgVGhyZWUuanMgc2NlbmUgdG8gd2hpY2ggdGhlIHByb2Nlc3NvciBiZWxvbmdzLlxyXG4gICAgICogQHBhcmFtIGNsb2NrRnJlcXVlbmN5IFRoZSBjbG9jayBmcmVxdWVuY3kgb2YgdGhlIHByb2Nlc3Nvci5cclxuICAgICAqIEBwYXJhbSBjYWNoZVNpemUgVGhlIHNpemUgb2YgdGhlIGNhY2hlIG1lbW9yeSBvZiB0aGUgcHJvY2Vzc29yLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihwb3NpdGlvbjogW251bWJlciwgbnVtYmVyXSwgc2NlbmU6IFNjZW5lLCBjbG9ja0ZyZXF1ZW5jeTogbnVtYmVyLCBwcml2YXRlIGNhY2hlU2l6ZTogbnVtYmVyID0gMCkge1xyXG4gICAgICAgIHN1cGVyKHBvc2l0aW9uLCBzY2VuZSwgY2xvY2tGcmVxdWVuY3kpXHJcbiAgICAgICAgaWYgKGNhY2hlU2l6ZSA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgY29yZURpbWVuc2lvbnMgPSBTSVNEQ29yZS5kaW1lbnNpb25zKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlRGltZW5zaW9ucyA9IEluc3RydWN0aW9uQ2FjaGUuZGltZW5zaW9ucyhjYWNoZVNpemUpO1xyXG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBjb3JlRGltZW5zaW9ucy5oZWlnaHQgKyBjYWNoZURpbWVuc2lvbnMuaGVpZ2h0ICsgU0lTRFByb2Nlc3Nvci5DT05URU5UU19NQVJHSU4gKiAyXHJcbiAgICAgICAgICAgICAgICArIFNJU0RQcm9jZXNzb3IuQ09NUE9ORU5UX1NQQUNJTkc7XHJcbiAgICAgICAgICAgIHRoaXMuaUNhY2hlID0gbmV3IEluc3RydWN0aW9uQ2FjaGUodGhpcywgMCwgLWhlaWdodCAvIDIgKyBjYWNoZURpbWVuc2lvbnMuaGVpZ2h0IC8gMiArIFNJU0RQcm9jZXNzb3IuQ09OVEVOVFNfTUFSR0lOLFxyXG4gICAgICAgICAgICAgICAgY2FjaGVTaXplLCBjb3JlRGltZW5zaW9ucy53aWR0aCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29yZSA9IG5ldyBTSVNEQ29yZSh0aGlzLCAwLCBoZWlnaHQgLyAyIC0gY29yZURpbWVuc2lvbnMuaGVpZ2h0IC8gMiAtIFNJU0RQcm9jZXNzb3IuQ09OVEVOVFNfTUFSR0lOLCB0aGlzLmlDYWNoZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jb3JlID0gbmV3IFNJU0RDb3JlKHRoaXMsIDAsIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRpYWxpemVHcmFwaGljcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29ubmVjdHMgdGhlIHByb2Nlc3NvciB0byB0aGUgaW5zdHJ1Y3Rpb24gbWVtb3J5LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnN0cnVjdGlvbk1lbW9yeSBUaGUgaW5zdHJ1Y3Rpb24gbWVtb3J5IHRvIGNvbm5lY3QgdG8uXHJcbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIHRoZSBwb3NpdGlvbiBvZiB0aGUgYm90dG9tIHJpZ2h0IHBpbiBvZiB0aGUgcHJvY2Vzc29yLCBhbmQgdGhlIGRpc3RhbmNlIHRvIHRoZSBpbnN0cnVjdGlvblxyXG4gICAgICogICAgIG1lbW9yeS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbm5lY3RUb0luc3RydWN0aW9uTWVtb3J5KGluc3RydWN0aW9uTWVtb3J5OiBJbnN0cnVjdGlvbk1lbW9yeSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25NZW1vcnkgPSBpbnN0cnVjdGlvbk1lbW9yeTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaUNhY2hlKSB0aGlzLmlDYWNoZS5zZXRJbnN0cnVjdGlvbk1lbW9yeShpbnN0cnVjdGlvbk1lbW9yeS5nZXRJbnN0cnVjdGlvbkJ1ZmZlcigpKTtcclxuICAgICAgICB0aGlzLmNvcmUuc2V0SW5zdHJ1Y3Rpb25NZW1vcnkoaW5zdHJ1Y3Rpb25NZW1vcnkpO1xyXG5cclxuICAgICAgICBjb25zdCBwaW5Db3VudCA9IHRoaXMuaW5zdHJ1Y3Rpb25NZW1vcnkuc2l6ZTtcclxuICAgICAgICB0aGlzLmRyYXdQaW5zKHRoaXMuYm9keU1lc2ghLCBTaWRlLlJJR0hULCBwaW5Db3VudCk7XHJcbiAgICAgICAgY29uc3QgcGluUG9zaXRpb24gPSB0aGlzLnBpblBvc2l0aW9ucy5nZXQoU2lkZS5SSUdIVCkhWzBdO1xyXG4gICAgICAgIGNvbnN0IGRpc3RhbmNlID0gcGluQ291bnQgKiBTSVNEUHJvY2Vzc29yLlRSQUNFX1NQQUNJTkdcclxuICAgICAgICAgICAgKyBTSVNEUHJvY2Vzc29yLlRSQUNFX09GRlNFVCAqIDJcclxuICAgICAgICAgICAgKyBDb21wdXRlckNoaXAuUElOX1dJRFRIICogMzsgLy8ganVzdCBoYXJkY29kZWQgR1VJXHJcbiAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25NZW1vcnlEaW1lbnNpb25zID0gdGhpcy5pbnN0cnVjdGlvbk1lbW9yeS5kaW1lbnNpb25zKCk7XHJcbiAgICAgICAgaW5zdHJ1Y3Rpb25NZW1vcnkuc2V0UG9zaXRpb24oW1xyXG4gICAgICAgICAgICBwaW5Qb3NpdGlvbi54ICsgZGlzdGFuY2UgKyBpbnN0cnVjdGlvbk1lbW9yeURpbWVuc2lvbnMud2lkdGggLyAyLFxyXG4gICAgICAgICAgICBwaW5Qb3NpdGlvbi55ICsgaW5zdHJ1Y3Rpb25NZW1vcnlEaW1lbnNpb25zLmhlaWdodCAvIDIgLSBDb21wdXRlckNoaXAuUElOX01BUkdJTiAtIENvbXB1dGVyQ2hpcC5QSU5fV0lEVEhcclxuICAgICAgICBdKTtcclxuICAgICAgICBpbnN0cnVjdGlvbk1lbW9yeS5pbml0aWFsaXplR3JhcGhpY3MoKTtcclxuXHJcbiAgICAgICAgdGhpcy5kcmF3VHJhY2VzKFNpZGUuUklHSFQsIHRoaXMuaW5zdHJ1Y3Rpb25NZW1vcnksIFNpZGUuTEVGVCwgU0lTRFByb2Nlc3Nvci5UUkFDRV9PRkZTRVQsIFNJU0RQcm9jZXNzb3IuVFJBQ0VfU1BBQ0lORywgJ3knKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc2Nvbm5lY3RzIHRoZSBwcm9jZXNzb3IgZnJvbSB0aGUgaW5zdHJ1Y3Rpb24gbWVtb3J5LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGlzY29ubmVjdEluc3RydWN0aW9uTWVtb3J5KCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmluc3RydWN0aW9uTWVtb3J5ID09IHVuZGVmaW5lZCkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25NZW1vcnkuZGlzcG9zZUdyYXBoaWNzKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbk1lbW9yeSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmNvcmUuc2V0SW5zdHJ1Y3Rpb25NZW1vcnkodW5kZWZpbmVkKTtcclxuICAgICAgICB0aGlzLmNsZWFyVHJhY2VzQW5kUGlucyhTaWRlLlJJR0hUKTtcclxuICAgICAgICB0aGlzLmhpZ2hsaWdodGVkVHJhY2VzLmZvckVhY2godHJhY2UgPT4gdGhpcy5zY2VuZS5yZW1vdmUodHJhY2UpKTtcclxuICAgICAgICB0aGlzLmNvcmUuZmx1c2hQaXBlbGluZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLmlDYWNoZSkgdGhpcy5pQ2FjaGUuZmx1c2goKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbm5lY3RzIHRoZSBwcm9jZXNzb3IgdG8gdGhlIHdvcmtpbmcgbWVtb3J5LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB3b3JraW5nTWVtb3J5IFRoZSB3b3JraW5nIG1lbW9yeSB0byBjb25uZWN0IHRvLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29ubmVjdFRvV29ya2luZ01lbW9yeSh3b3JraW5nTWVtb3J5OiBXb3JraW5nTWVtb3J5KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy53b3JraW5nTWVtb3J5ID0gd29ya2luZ01lbW9yeTtcclxuXHJcbiAgICAgICAgdGhpcy5jb3JlLnNldFdvcmtpbmdNZW1vcnkod29ya2luZ01lbW9yeSk7XHJcbiAgICAgICAgY29uc3QgcGluQ291bnQgPSB3b3JraW5nTWVtb3J5Lm51bWJlck9mQmFua3M7XHJcbiAgICAgICAgdGhpcy5kcmF3UGlucyh0aGlzLmJvZHlNZXNoISwgU2lkZS5UT1AsIHBpbkNvdW50KTtcclxuICAgICAgICBjb25zdCBwaW5Qb3NpdGlvbiA9IHRoaXMucGluUG9zaXRpb25zLmdldChTaWRlLlRPUCkhW3BpbkNvdW50IC0gMV07XHJcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBwaW5Db3VudCAqIFNJU0RQcm9jZXNzb3IuVFJBQ0VfU1BBQ0lOR1xyXG4gICAgICAgICAgICArIFNJU0RQcm9jZXNzb3IuVFJBQ0VfT0ZGU0VUICogMlxyXG4gICAgICAgICAgICArIENvbXB1dGVyQ2hpcC5QSU5fV0lEVEggKiAzOyAvLyBqdXN0IGhhcmRjb2RlZCBHVUlcclxuICAgICAgICBjb25zdCB3b3JraW5nTWVtb3J5RGltZW5zaW9ucyA9IHdvcmtpbmdNZW1vcnkuZGltZW5zaW9ucygpO1xyXG4gICAgICAgIHdvcmtpbmdNZW1vcnkuc2V0UG9zaXRpb24oW1xyXG4gICAgICAgICAgICBwaW5Qb3NpdGlvbi54IC0gd29ya2luZ01lbW9yeURpbWVuc2lvbnMud2lkdGggLyAyICsgQ29tcHV0ZXJDaGlwLlBJTl9NQVJHSU4gKyBDb21wdXRlckNoaXAuUElOX1dJRFRILFxyXG4gICAgICAgICAgICBwaW5Qb3NpdGlvbi55ICsgZGlzdGFuY2UgKyB3b3JraW5nTWVtb3J5RGltZW5zaW9ucy5oZWlnaHQgLyAyXHJcbiAgICAgICAgXSk7XHJcbiAgICAgICAgd29ya2luZ01lbW9yeS5pbml0aWFsaXplR3JhcGhpY3MoKTtcclxuICAgICAgICB0aGlzLmRyYXdUcmFjZXMoU2lkZS5UT1AsIHRoaXMud29ya2luZ01lbW9yeSwgU2lkZS5CT1RUT00sIFNJU0RQcm9jZXNzb3IuVFJBQ0VfT0ZGU0VULCBTSVNEUHJvY2Vzc29yLlRSQUNFX1NQQUNJTkcsICd4Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNjb25uZWN0cyB0aGUgcHJvY2Vzc29yIGZyb20gdGhlIHdvcmtpbmcgbWVtb3J5LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGlzY29ubmVjdFdvcmtpbmdNZW1vcnkoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLndvcmtpbmdNZW1vcnkpIHJldHVybjtcclxuICAgICAgICB0aGlzLndvcmtpbmdNZW1vcnkuZGlzcG9zZUdyYXBoaWNzKCk7XHJcbiAgICAgICAgdGhpcy53b3JraW5nTWVtb3J5ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuY29yZS5zZXRXb3JraW5nTWVtb3J5KHVuZGVmaW5lZCk7XHJcbiAgICAgICAgdGhpcy5jbGVhclRyYWNlc0FuZFBpbnMoU2lkZS5UT1ApO1xyXG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0ZWRUcmFjZXMuZm9yRWFjaCh0cmFjZSA9PiB0aGlzLnNjZW5lLnJlbW92ZSh0cmFjZSkpO1xyXG4gICAgICAgIHRoaXMuY29yZS5mbHVzaFBpcGVsaW5lKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuaUNhY2hlKSB0aGlzLmlDYWNoZS5mbHVzaCgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIG1lbnUgb3B0aW9ucyBmb3IgdGhpcyBwcm9jZXNzb3IuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRNZW51T3B0aW9ucygpOiBDaGlwTWVudU9wdGlvbnMge1xyXG4gICAgICAgIGlmICghdGhpcy5jaGlwTWVudU9wdGlvbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0SW5zdHJ1Y3Rpb25NZW1vcnkgPSB0aGlzLmRpc2Nvbm5lY3RJbnN0cnVjdGlvbk1lbW9yeS5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBjb25zdCBkaXNjb25uZWN0SU1lbW9yeUJ1dHRvbiA9IG5ldyBUZXh0QnV0dG9uQnVpbGRlcigpXHJcbiAgICAgICAgICAgICAgICAud2l0aFRleHQoXCJbRGlzY29ubmVjdF1cIilcclxuICAgICAgICAgICAgICAgIC53aXRoT25DbGljayh0aGlzLmRpc2Nvbm5lY3RJbnN0cnVjdGlvbk1lbW9yeSlcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdFdvcmtpbmdNZW1vcnkgPSB0aGlzLmRpc2Nvbm5lY3RXb3JraW5nTWVtb3J5LmJpbmQodGhpcyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpc2Nvbm5lY3RXTWVtb3J5QnV0dG9uID0gbmV3IFRleHRCdXR0b25CdWlsZGVyKClcclxuICAgICAgICAgICAgICAgIC53aXRoVGV4dChcIltEaXNjb25uZWN0XVwiKVxyXG4gICAgICAgICAgICAgICAgLndpdGhPbkNsaWNrKHRoaXMuZGlzY29ubmVjdFdvcmtpbmdNZW1vcnkpXHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXRzID0gW1xyXG4gICAgICAgICAgICAgICAgbmV3IFN0YXQoXCJQb3dlciBDb25zdW1wdGlvblwiLCBTdHJpbmcoNTApLCBcIldcIiksXHJcbiAgICAgICAgICAgICAgICBuZXcgU3RhdChcIkluc3RydWN0aW9uIE1lbW9yeSBjb25uZWN0ZWRcIiwgdGhpcy5pbnN0cnVjdGlvbk1lbW9yeSA/IFwiVHJ1ZVwiIDogXCJGYWxzZVwiLCB1bmRlZmluZWQsIGRpc2Nvbm5lY3RJTWVtb3J5QnV0dG9uKSxcclxuICAgICAgICAgICAgICAgIG5ldyBTdGF0KFwiV29ya2luZyBNZW1vcnkgY29ubmVjdGVkXCIsIHRoaXMud29ya2luZ01lbW9yeSA/IFwiVHJ1ZVwiIDogXCJGYWxzZVwiLCB1bmRlZmluZWQsIGRpc2Nvbm5lY3RXTWVtb3J5QnV0dG9uKSxcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgY29uc3QgdXBncmFkZU9wdGlvbnMgPSBbXHJcbiAgICAgICAgICAgICAgICBVcGdyYWRlT3B0aW9uLmNyZWF0ZU51bWJlclNlbGVjdGlvbihcIkNsb2NrIEZyZXF1ZW5jeVwiLCAwLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiVGhlIGNsb2NrIGZyZXF1ZW5jeSBvZiB0aGUgcHJvY2Vzc29yLlwiLCB0aGlzLmdldENsb2NrRnJlcXVlbmN5KCksXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zYWZlSW5jcmVtZW50Q2xvY2ssIHRoaXMuc2FmZURlY3JlbWVudENsb2NrKSxcclxuICAgICAgICAgICAgICAgIFVwZ3JhZGVPcHRpb24uY3JlYXRlTnVtYmVyU2VsZWN0aW9uKFwiQ2FjaGUgU2l6ZVwiLCAwLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiVGhlIHNpemUgb2YgdGhlIGNhY2hlIG1lbW9yeS5cIiwgdGhpcy5jYWNoZVNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmNyZWFzZUNhY2hlU2l6ZSwgdGhpcy5kZWNyZWFzZUNhY2hlU2l6ZSksXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIHRoaXMuY2hpcE1lbnVPcHRpb25zID0gbmV3IENoaXBNZW51T3B0aW9ucyhzdGF0cywgdXBncmFkZU9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5jaGlwTWVudU9wdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBOb3RpZmllcyB0aGUgcHJvY2Vzc29yIHRoYXQgYW4gaW5zdHJ1Y3Rpb24gaGFzIGJlZW4gcmV0aXJlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIG5vdGlmeUluc3RydWN0aW9uUmV0aXJlZCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnJldGlyZWRJbnN0cnVjdGlvbkNvdW50Kys7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhpZ2hsaWdodE1haW5NZW1vcnlUcmFjZShpbmRleDogbnVtYmVyLCBjb2xvcjogTWVzaEJhc2ljTWF0ZXJpYWwpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMud29ya2luZ01lbW9yeSkgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0ZWRUcmFjZXMucHVzaChuZXcgR3JvdXAoKS5hZGQoXHJcbiAgICAgICAgICAgIG5ldyBNZXNoKHRoaXMucGluR2VvbWV0cmllcy5nZXQoU2lkZS5UT1ApIVtpbmRleF0sIGNvbG9yKSxcclxuICAgICAgICAgICAgbmV3IE1lc2godGhpcy53b3JraW5nTWVtb3J5LnBpbkdlb21ldHJpZXMuZ2V0KFNpZGUuQk9UVE9NKSFbaW5kZXhdLCBjb2xvciksXHJcbiAgICAgICAgICAgIHRoaXMuZHJhd1RyYWNlKGluZGV4LCBjb2xvciwgU2lkZS5UT1AsIHRoaXMud29ya2luZ01lbW9yeSwgU2lkZS5CT1RUT00sXHJcbiAgICAgICAgICAgICAgICBTSVNEUHJvY2Vzc29yLlRSQUNFX09GRlNFVCwgU0lTRFByb2Nlc3Nvci5UUkFDRV9TUEFDSU5HLCAneCcpXHJcbiAgICAgICAgKSk7XHJcbiAgICAgICAgdGhpcy5oaWdobGlnaHRlZFRyYWNlcy5mb3JFYWNoKHRyYWNlID0+IHRoaXMuc2NlbmUuYWRkKHRyYWNlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGhpZ2hsaWdodCBhIGdpdmVuIHRyYWNlIHdpdGggYSBzcGVjaWZpYyBjb2xvci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSB0cmFjZSB0byBoaWdobGlnaHQuXHJcbiAgICAgKiBAcGFyYW0gY29sb3IgVGhlIGNvbG9yIHRvIGhpZ2hsaWdodCB0aGUgdHJhY2Ugd2l0aC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGhpZ2hsaWdodEluc3RydWN0aW9uTWVtb3J5VHJhY2UoaW5kZXg6IG51bWJlciwgY29sb3I6IE1lc2hCYXNpY01hdGVyaWFsKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluc3RydWN0aW9uTWVtb3J5KSByZXR1cm47XHJcbiAgICAgICAgdGhpcy5oaWdobGlnaHRlZFRyYWNlcy5wdXNoKG5ldyBHcm91cCgpLmFkZChcclxuICAgICAgICAgICAgbmV3IE1lc2godGhpcy5waW5HZW9tZXRyaWVzLmdldChTaWRlLlJJR0hUKSFbaW5kZXhdLCBjb2xvciksXHJcbiAgICAgICAgICAgIG5ldyBNZXNoKHRoaXMuaW5zdHJ1Y3Rpb25NZW1vcnkucGluR2VvbWV0cmllcy5nZXQoU2lkZS5MRUZUKSFbaW5kZXhdLCBjb2xvciksXHJcbiAgICAgICAgICAgIHRoaXMuZHJhd1RyYWNlKGluZGV4LCBjb2xvciwgU2lkZS5SSUdIVCwgdGhpcy5pbnN0cnVjdGlvbk1lbW9yeSwgU2lkZS5MRUZULFxyXG4gICAgICAgICAgICAgICAgU0lTRFByb2Nlc3Nvci5UUkFDRV9PRkZTRVQsIFNJU0RQcm9jZXNzb3IuVFJBQ0VfU1BBQ0lORywgJ3knKSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0ZWRUcmFjZXMuZm9yRWFjaChtZXNoID0+IHRoaXMuc2NlbmUuYWRkKG1lc2gpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gY2xlYXIgYWxsIGhpZ2hsaWdodGVkIHRyYWNlcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNsZWFySGlnaGxpZ2h0ZWRUcmFjZXMoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5oaWdobGlnaHRlZFRyYWNlcy5mb3JFYWNoKHRyYWNlID0+IHRoaXMuc2NlbmUucmVtb3ZlKHRyYWNlKSk7XHJcbiAgICAgICAgdGhpcy5oaWdobGlnaHRlZFRyYWNlcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGNsb2NrIGZyZXF1ZW5jeSBvZiB0aGUgcHJvY2Vzc29yLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0SVBDKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuSVBDO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB0aGUgaW5zdHJ1Y3Rpb25zIHBlciBzZWNvbmQgKElQUykgb2YgdGhlIHByb2Nlc3Nvci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldElQUygpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLklQUztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIGFjY3VtdWxhdGVkIHJldGlyZWQgaW5zdHJ1Y3Rpb25zIGNvdW50LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0QWNjUmV0aXJlZEluc3RydWN0aW9uc0NvdW50KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjdW11bGF0ZWRJbnN0cnVjdGlvbkNvdW50O1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXlOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFwiQ1BVXCI7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKCkge1xyXG4gICAgICAgIHRoaXMuY29yZS51cGRhdGUoKTtcclxuICAgICAgICB0aGlzLmlDYWNoZT8udXBkYXRlKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVSZXRpcmVkSW5zdHJ1Y3Rpb25Db3VudGVycygpO1xyXG4gICAgICAgIHRoaXMuSVBDID0gdGhpcy5jYWxjdWxhdGVBdmVyYWdlSW5zdHJ1Y3Rpb25Db3VudCgpO1xyXG4gICAgICAgIHRoaXMuSVBTID0gdGhpcy5JUEMgKiB0aGlzLmdldENsb2NrRnJlcXVlbmN5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZUdyYXBoaWNzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY29yZS5pbml0aWFsaXplR3JhcGhpY3MoKTtcclxuICAgICAgICB0aGlzLmlDYWNoZT8uaW5pdGlhbGl6ZUdyYXBoaWNzKCk7XHJcbiAgICAgICAgbGV0IGJvZHlXaWR0aDogbnVtYmVyID0gdGhpcy5jb3JlLndpZHRoICsgU0lTRFByb2Nlc3Nvci5DT05URU5UU19NQVJHSU4gKiAyO1xyXG4gICAgICAgIGxldCBib2R5SGVpZ2h0OiBudW1iZXIgPSB0aGlzLmNvcmUuaGVpZ2h0ICsgU0lTRFByb2Nlc3Nvci5DT05URU5UU19NQVJHSU4gKiAyO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pQ2FjaGUpIHtcclxuICAgICAgICAgICAgYm9keVdpZHRoID0gTWF0aC5tYXgoYm9keVdpZHRoLCB0aGlzLmlDYWNoZS53aWR0aCk7XHJcbiAgICAgICAgICAgIGJvZHlIZWlnaHQgKz0gdGhpcy5pQ2FjaGUuaGVpZ2h0ICsgU0lTRFByb2Nlc3Nvci5DT01QT05FTlRfU1BBQ0lORztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYnVpbGRCb2R5TWVzaChib2R5V2lkdGgsIGJvZHlIZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgY291bnQgb2YgcmV0aXJlZCBpbnN0cnVjdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVSZXRpcmVkSW5zdHJ1Y3Rpb25Db3VudGVycygpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5wcmV2aW91c1JldGlyZWRJbnN0cnVjdGlvbkNvdW50cy5pc0Z1bGwoKSlcclxuICAgICAgICAgICAgdGhpcy5wcmV2aW91c1JldGlyZWRJbnN0cnVjdGlvbkNvdW50cy5kZXF1ZXVlKCk7XHJcbiAgICAgICAgdGhpcy5wcmV2aW91c1JldGlyZWRJbnN0cnVjdGlvbkNvdW50cy5lbnF1ZXVlKHRoaXMucmV0aXJlZEluc3RydWN0aW9uQ291bnQpO1xyXG4gICAgICAgIHRoaXMuYWNjdW11bGF0ZWRJbnN0cnVjdGlvbkNvdW50ICs9IHRoaXMucmV0aXJlZEluc3RydWN0aW9uQ291bnQ7XHJcbiAgICAgICAgdGhpcy5yZXRpcmVkSW5zdHJ1Y3Rpb25Db3VudCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGVzIHRoZSBhdmVyYWdlIGluc3RydWN0aW9uIGNvdW50IG92ZXIgdGhlIGxhc3QgbiBjeWNsZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVBdmVyYWdlSW5zdHJ1Y3Rpb25Db3VudCgpOiBudW1iZXIge1xyXG4gICAgICAgIGxldCBzdW0gPSAwO1xyXG4gICAgICAgIGNvbnN0IHNpemUgPSB0aGlzLnByZXZpb3VzUmV0aXJlZEluc3RydWN0aW9uQ291bnRzLnNpemUoKTtcclxuICAgICAgICBpZiAoc2l6ZSA9PT0gMCkgcmV0dXJuIDA7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgKytpKVxyXG4gICAgICAgICAgICBzdW0gKz0gdGhpcy5wcmV2aW91c1JldGlyZWRJbnN0cnVjdGlvbkNvdW50cy5nZXQoaSkhO1xyXG5cclxuICAgICAgICByZXR1cm4gc3VtIC8gc2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNhZmVJbmNyZW1lbnRDbG9jayA9ICgpOiBudW1iZXIgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLmdldENsb2NrRnJlcXVlbmN5KCkgPCBDb21wdXRlckNoaXAuTUFYX0NMT0NLX0ZSRVFVRU5DWSlcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlQ2xvY2sodGhpcy5nZXRDbG9ja0ZyZXF1ZW5jeSgpICsgMSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDbG9ja0ZyZXF1ZW5jeSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2FmZURlY3JlbWVudENsb2NrID0gKCk6IG51bWJlciA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0Q2xvY2tGcmVxdWVuY3koKSA+IDFcclxuICAgICAgICAgICAgJiYgKHRoaXMuaW5zdHJ1Y3Rpb25NZW1vcnkgPT0gdW5kZWZpbmVkIHx8IHRoaXMuZ2V0Q2xvY2tGcmVxdWVuY3koKSA+IHRoaXMuaW5zdHJ1Y3Rpb25NZW1vcnkuZ2V0Q2xvY2tGcmVxdWVuY3koKSAqIDMpXHJcbiAgICAgICAgICAgICYmICh0aGlzLndvcmtpbmdNZW1vcnkgPT0gdW5kZWZpbmVkIHx8IHRoaXMuZ2V0Q2xvY2tGcmVxdWVuY3koKSA+IHRoaXMud29ya2luZ01lbW9yeS5nZXRDbG9ja0ZyZXF1ZW5jeSgpICogMykpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUNsb2NrKHRoaXMuZ2V0Q2xvY2tGcmVxdWVuY3koKSAtIDEpXHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDbG9ja0ZyZXF1ZW5jeSgpXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbmNyZWFzZUNhY2hlU2l6ZSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlU2l6ZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRlY3JlYXNlQ2FjaGVTaXplKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVTaXplO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtJbnN0cnVjdGlvbkJ1ZmZlcn0gZnJvbSBcIi4vcHJpbWl0aXZlcy9JbnN0cnVjdGlvbkJ1ZmZlclwiO1xyXG5pbXBvcnQge01lc2gsIE1lc2hCYXNpY01hdGVyaWFsfSBmcm9tIFwidGhyZWVcIjtcclxuaW1wb3J0IHtDb21wdXRlckNoaXBNYWNyb30gZnJvbSBcIi4vcHJpbWl0aXZlcy9Db21wdXRlckNoaXBNYWNyb1wiO1xyXG5pbXBvcnQge0RyYXdVdGlsc30gZnJvbSBcIi4uLy4uL0RyYXdVdGlsc1wiO1xyXG5pbXBvcnQge0luc3RydWN0aW9uTWVtb3J5fSBmcm9tIFwiLi4vSW5zdHJ1Y3Rpb25NZW1vcnlcIjtcclxuaW1wb3J0IHtJbnN0cnVjdGlvbn0gZnJvbSBcIi4uLy4uL2RhdGFTdHJ1Y3R1cmVzL0luc3RydWN0aW9uXCI7XHJcbmltcG9ydCB7Q29tcHV0ZXJDaGlwfSBmcm9tIFwiLi4vQ29tcHV0ZXJDaGlwXCI7XHJcbmltcG9ydCB7UXVldWV9IGZyb20gXCIuLi8uLi9kYXRhU3RydWN0dXJlcy9RdWV1ZVwiO1xyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYW4gYWRkcmVzc2VkIHZlcnNpb24gb2YgdGhlIGluc3RydWN0aW9uIGJ1ZmZlciBpbiBhIGNvbXB1dGVyIGNoaXAuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQWRkcmVzc2VkSW5zdHJ1Y3Rpb25CdWZmZXIgZXh0ZW5kcyBJbnN0cnVjdGlvbkJ1ZmZlciB7XHJcbiAgICBwcml2YXRlIGFkZHJlc3NNZXNoZXM6IE1lc2hbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBhZGRyZXNzUmVhY2hlZDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBpdGVyYXRlTW9kZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIHByaXZhdGUgcmVxdWVzdGVkSW5zdHJ1Y3Rpb25BZGRyZXNzOiBudW1iZXIgPSAtMTtcclxuXHJcbiAgICBwcml2YXRlIGp1bXBJbnN0cnVjdGlvbnM6IE1hcDxudW1iZXIsIEluc3RydWN0aW9uPiA9IG5ldyBNYXA8bnVtYmVyLCBJbnN0cnVjdGlvbj4oKTtcclxuICAgIHByaXZhdGUgaGlnaGxpZ2h0ZWRKdW1wUENzOiBudW1iZXJbXSA9IFtdO1xyXG5cclxuICAgIHByaXZhdGUgZmxhZ2dlZEJ1ZmZlcnM6IG51bWJlcltdID0gW107XHJcbiAgICBwcml2YXRlIGZsYWdnZWRCdWZmZXJNZXNoZXM6IChNZXNoIHwgbnVsbCkgW10gPSBbXTtcclxuXHJcbiAgICBwdWJsaWMgY29ubmVjdGVkQ2hpcDogQ29tcHV0ZXJDaGlwO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgaGlnaGVzdCBpbnN0cnVjdGlvbiBhZGRyZXNzIHRoYXQgd2FzIHJlYWNoZWQgaW4gdGhlIGluc3RydWN0aW9uIGJ1ZmZlci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGhpZ2hlc3RJbnN0cnVjdGlvbkFkZHJlc3MoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGRyZXNzUmVhY2hlZCAtIHRoaXMuc3RvcmVkSW5zdHJ1Y3Rpb25zLm1heFNpemUgKyB0aGlzLnN0b3JlZEluc3RydWN0aW9ucy5zaXplKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBtYXAgdXNlZCB0byBrZWVwIHRyYWNrIG9mIGp1bXAgaW5zdHJ1Y3Rpb25zIGFuZCBkaXNwbGF5IHRoZW0gZ3JhcGhpY2FsbHkuXHJcbiAgICAgKiBAcGFyYW0gcGMgdGhlIHByb2dyYW0gY291bnRlciBvZiB0aGUgaW5zdHJ1Y3Rpb25cclxuICAgICAqIEBwYXJhbSBpbnN0cnVjdGlvbiB0aGUgaW5zdHJ1Y3Rpb24gdG8gc2V0IGFzIGEganVtcCBpbnN0cnVjdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0SnVtcEluc3RydWN0aW9uKHBjOiBudW1iZXIsIGluc3RydWN0aW9uOiBJbnN0cnVjdGlvbik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuanVtcEluc3RydWN0aW9ucy5zZXQocGMsIGluc3RydWN0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFza3MgZm9yIHRoZSBuZXh0IG4gaW5zdHJ1Y3Rpb25zIHRvIGJlIGZldGNoZWQgZnJvbSB0aGUgaW5zdHJ1Y3Rpb24gbWVtb3J5LlxyXG4gICAgICogQHBhcmFtIGNoaXAgdGhlIGNvbXB1dGVyIGNoaXAgaW5zdGFuY2VcclxuICAgICAqIEBwYXJhbSBuIHRoZSBudW1iZXIgb2YgaW5zdHJ1Y3Rpb25zIHRvIGZldGNoXHJcbiAgICAgKiBAcGFyYW0gYWRkcmVzcyB0aGUgYWRkcmVzcyBvZiB0aGUgZmlyc3QgaW5zdHJ1Y3Rpb24gdG8gZmV0Y2hcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFza0Zvckluc3RydWN0aW9uc0F0KGNoaXA6IENvbXB1dGVyQ2hpcCwgbjogbnVtYmVyLCBhZGRyZXNzOiBudW1iZXIpOiBbbnVtYmVyLCBNZXNoQmFzaWNNYXRlcmlhbCB8IG51bGxdIHtcclxuICAgICAgICBpZiAodGhpcy5kZWxheSA9PSAwKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGVyZSBpcyBubyBuZWVkIHRvIGFzayBmb3IgaW5zdHJ1Y3Rpb25zIHdoZW4gdGhlcmUgaXMgbm8gZGVsYXlcIik7XHJcbiAgICAgICAgdGhpcy5jb25uZWN0ZWRDaGlwID0gY2hpcDtcclxuICAgICAgICBjb25zdCBsb2NhbEFkZHJlc3MgPSB0aGlzLnRvTG9jYWxBZGRyZXNzKGFkZHJlc3MpO1xyXG4gICAgICAgIGlmIChhZGRyZXNzID09IHRoaXMucmVxdWVzdGVkSW5zdHJ1Y3Rpb25BZGRyZXNzICYmIHRoaXMucmVhZFRpbWVvdXQgPiAwKVxyXG4gICAgICAgICAgICByZXR1cm4gWy0xLCBudWxsXTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnN0b3JlZEluc3RydWN0aW9ucy5nZXQobG9jYWxBZGRyZXNzKSlcclxuICAgICAgICAgICAgcmV0dXJuIFstMSwgbnVsbF07XHJcblxyXG4gICAgICAgIHRoaXMucmVxdWVzdGVkSW5zdHJ1Y3Rpb25BZGRyZXNzID0gYWRkcmVzcztcclxuICAgICAgICBmb3IgKGxldCBpID0gbG9jYWxBZGRyZXNzOyBpIDwgbG9jYWxBZGRyZXNzICsgbjsgKytpKVxyXG4gICAgICAgICAgICBpZiAodGhpcy5zdG9yZWRJbnN0cnVjdGlvbnMuZ2V0KGkpKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRCdWZmZXIoaSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVhZFRpbWVvdXQgPSB0aGlzLmRlbGF5O1xyXG4gICAgICAgIHJldHVybiBbbG9jYWxBZGRyZXNzLCB0aGlzLmluc3RydWN0aW9uTWF0ZXJpYWwodGhpcy5zdG9yZWRJbnN0cnVjdGlvbnMuZ2V0KGxvY2FsQWRkcmVzcykhKV07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGZXRjaGVzIHRoZSBpbnN0cnVjdGlvbiBhdCB0aGUgZ2l2ZW4gYWRkcmVzcyBmcm9tIHRoZSBpbnN0cnVjdGlvbiBtZW1vcnkuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGFkZHJlc3MgdGhlIGFkZHJlc3Mgb2YgdGhlIGluc3RydWN0aW9uIHRvIGZldGNoXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBmZXRjaEluc3RydWN0aW9uQXQoYWRkcmVzczogbnVtYmVyKTogSW5zdHJ1Y3Rpb24gfCB1bmRlZmluZWQge1xyXG4gICAgICAgIGlmICh0aGlzLmRlbGF5ICE9IDAgJiYgIXRoaXMuaXNSZWFkeVRvQmVSZWFkKCkpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdHJ1Y3Rpb24gYnVmZmVyIGZyb20gJHt0aGlzLnBhcmVudC5kaXNwbGF5TmFtZSgpfSBpcyBub3QgcmVhZHkgdG8gYmUgcmVhZGApO1xyXG5cclxuICAgICAgICBjb25zdCBsb2NhbEFkZHJlc3MgPSB0aGlzLnRvTG9jYWxBZGRyZXNzKGFkZHJlc3MpO1xyXG4gICAgICAgIGNvbnN0IGluc3RydWN0aW9uID0gdGhpcy5zdG9yZWRJbnN0cnVjdGlvbnMuZ2V0KGxvY2FsQWRkcmVzcyk7XHJcblxyXG5cclxuICAgICAgICBpZiAoIWluc3RydWN0aW9uKVxyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICB0aGlzLmNsZWFySGlnaGxpZ2h0cygpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlSnVtcEluc3RydWN0aW9uR3JhcGhpY3MoKTtcclxuICAgICAgICBpZiAoIXRoaXMuaXRlcmF0ZU1vZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5zdG9yZWRJbnN0cnVjdGlvbnMucmVtb3ZlKGxvY2FsQWRkcmVzcyk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hpZnRNZXNoZXNEb3duKDEpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMubG93ZXN0QWRkcmVzc0lzSnVtcFRhcmdldChhZGRyZXNzKSkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXRlcmF0ZU1vZGUgJiYgbG9jYWxBZGRyZXNzID4gMClcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRm9yd2FyZEJyYW5jaChhZGRyZXNzKVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFySnVtcEluc3RydWN0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJlYWR5VG9CZVJlYWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnJlcXVlc3RlZEluc3RydWN0aW9uQWRkcmVzcyA9IC0xO1xyXG4gICAgICAgIHJldHVybiBpbnN0cnVjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgYSBmb3J3YXJkIGJyYW5jaCBpbnN0cnVjdGlvbiBieSByZW1vdmluZyB0aGUgaW5zdHJ1Y3Rpb25zIGJlZm9yZSB0aGUgYnJhbmNoIHRhcmdldC5cclxuICAgICAqIEBwYXJhbSByZXF1ZXN0ZWRBZGRyZXNzIHRoZSBhZGRyZXNzIG9mIHRoZSBicmFuY2ggaW5zdHJ1Y3Rpb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIGhhbmRsZUZvcndhcmRCcmFuY2gocmVxdWVzdGVkQWRkcmVzczogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy50b0xvY2FsQWRkcmVzcyhyZXF1ZXN0ZWRBZGRyZXNzKSArIDE7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvZmZzZXQ7ICsraSkgdGhpcy5zdG9yZWRJbnN0cnVjdGlvbnMuZGVxdWV1ZSgpO1xyXG4gICAgICAgIHRoaXMuc2hpZnRNZXNoZXNEb3duKG9mZnNldCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhcnMgdGhlIGp1bXAgaW5zdHJ1Y3Rpb24gZnJvbSB0aGUgaW5zdHJ1Y3Rpb24gYnVmZmVyIGFuZCByZXNldHMgdGhlIGdyYXBoaWNzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY2xlYXJKdW1wSW5zdHJ1Y3Rpb24oKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLml0ZXJhdGVNb2RlKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5pdGVyYXRlTW9kZSA9IGZhbHNlO1xyXG4gICAgICAgIGNvbnN0IGp1bXBQYyA9IHRoaXMuZmlyc3RJbnN0cnVjdGlvblRhcmdldGluZ0xvd2VzdEFkZHJlc3MoKTtcclxuICAgICAgICBjb25zdCBvZmZzZXQgPSB0aGlzLnRvTG9jYWxBZGRyZXNzKGp1bXBQYykgKyAxO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2Zmc2V0OyArK2kpIHRoaXMuc3RvcmVkSW5zdHJ1Y3Rpb25zLmRlcXVldWUoKTtcclxuICAgICAgICB0aGlzLnNoaWZ0TWVzaGVzRG93bihvZmZzZXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHdyaXRlKGluc3RydWN0aW9uczogUXVldWU8SW5zdHJ1Y3Rpb24+LCB3cml0ZUNvdW50OiBudW1iZXIgPSBpbnN0cnVjdGlvbnMuc2l6ZSgpKSB7XHJcbiAgICAgICAgc3VwZXIud3JpdGUoaW5zdHJ1Y3Rpb25zLCB3cml0ZUNvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplR3JhcGhpY3MoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaG9yaXpvbnRhbClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSG9yaXpvbnRhbCBpbnN0cnVjdGlvbiBidWZmZXJzIGFyZSBub3Qgc3VwcG9ydGVkIGZvciBBZGRyZXNzZWRJbnN0cnVjdGlvbkJ1ZmZlclwiKTtcclxuICAgICAgICBzdXBlci5pbml0aWFsaXplR3JhcGhpY3MoKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFkZHJlc3NNZXNoID0gRHJhd1V0aWxzLmJ1aWxkVGV4dE1lc2goRHJhd1V0aWxzLnRvSGV4KGkpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi54IC0gdGhpcy53aWR0aCAvIDIgLSBJbnN0cnVjdGlvbk1lbW9yeS5BRERSRVNTX01BUkdJTiAqIDAuNixcclxuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyTWVzaE9mZnNldHNbaV0sIENvbXB1dGVyQ2hpcE1hY3JvLlRFWFRfU0laRSAqIDAuOCxcclxuICAgICAgICAgICAgICAgIENvbXB1dGVyQ2hpcE1hY3JvLlRFWFRfTUFURVJJQUwsIHRydWUpXHJcbiAgICAgICAgICAgIHRoaXMuYWRkcmVzc01lc2hlc1tpXSA9IGFkZHJlc3NNZXNoO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmFkZChhZGRyZXNzTWVzaCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYWRkcmVzc1JlYWNoZWQgPSB0aGlzLnNpemU7XHJcbiAgICB9XHJcblxyXG4gICAgc2hpZnRNZXNoZXNEb3duKG5Qb3NpdGlvbnM6IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyLnNoaWZ0TWVzaGVzRG93bihuUG9zaXRpb25zKTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRyZXNzTWVzaGVzLnNwbGljZSgwLCBuUG9zaXRpb25zKS5mb3JFYWNoKG1lc2ggPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZShtZXNoKTtcclxuICAgICAgICAgICAgbWVzaC5nZW9tZXRyeS5kaXNwb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkcmVzc01lc2hlcy5mb3JFYWNoKChtZXNoLCBpbmRleCkgPT5cclxuICAgICAgICAgICAgbWVzaC50cmFuc2xhdGVZKHRoaXMuYnVmZmVyTWVzaE9mZnNldHNbaW5kZXhdIC0gdGhpcy5idWZmZXJNZXNoT2Zmc2V0c1tpbmRleCArIG5Qb3NpdGlvbnNdKSk7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBmbGFnZ2VkIGJ1ZmZlciBpbmRpY2VzIGFuZCB0aGVpciBtZXNoIHBvc2l0aW9uc1xyXG4gICAgICAgIHRoaXMuZmxhZ2dlZEJ1ZmZlcnMgPSB0aGlzLmZsYWdnZWRCdWZmZXJzLm1hcChpbmRleCA9PiBpbmRleCAtIG5Qb3NpdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuZmxhZ2dlZEJ1ZmZlck1lc2hlcy5mb3JFYWNoKChtZXNoLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobWVzaCA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdJbmRleCA9IHRoaXMuZmxhZ2dlZEJ1ZmZlcnNbaW5kZXhdO1xyXG4gICAgICAgICAgICBpZiAobmV3SW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgbWVzaC5wb3NpdGlvbi55ID0gdGhpcy5idWZmZXJNZXNoT2Zmc2V0c1tuZXdJbmRleF07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZShtZXNoKTtcclxuICAgICAgICAgICAgICAgIG1lc2guZ2VvbWV0cnkuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mbGFnZ2VkQnVmZmVyTWVzaGVzW2luZGV4XSA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmZsYWdnZWRCdWZmZXJzID0gdGhpcy5mbGFnZ2VkQnVmZmVycy5maWx0ZXIoaW5kZXggPT4gaW5kZXggPj0gMCk7XHJcbiAgICAgICAgdGhpcy5mbGFnZ2VkQnVmZmVyTWVzaGVzID0gdGhpcy5mbGFnZ2VkQnVmZmVyTWVzaGVzLmZpbHRlcihtZXNoID0+IG1lc2ggIT09IG51bGwpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5zaXplIC0gblBvc2l0aW9uczsgaSA8IHRoaXMuc2l6ZTsgKytpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFkZHJlc3NNZXNoID1cclxuICAgICAgICAgICAgICAgIERyYXdVdGlscy5idWlsZFRleHRNZXNoKERyYXdVdGlscy50b0hleCh0aGlzLmFkZHJlc3NSZWFjaGVkKyspLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueCAtIHRoaXMud2lkdGggLyAyIC0gSW5zdHJ1Y3Rpb25NZW1vcnkuQUREUkVTU19NQVJHSU4gKiAwLjYsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idWZmZXJNZXNoT2Zmc2V0c1tpXSwgQ29tcHV0ZXJDaGlwTWFjcm8uVEVYVF9TSVpFICogMC44LFxyXG4gICAgICAgICAgICAgICAgICAgIENvbXB1dGVyQ2hpcE1hY3JvLlRFWFRfTUFURVJJQUwsIHRydWUpXHJcbiAgICAgICAgICAgIHRoaXMuYWRkcmVzc01lc2hlc1tpXSA9IGFkZHJlc3NNZXNoO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLmFkZChhZGRyZXNzTWVzaCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hZGRyZXNzTWVzaGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFkZHJlc3NNZXNoID0gdGhpcy5hZGRyZXNzTWVzaGVzW2ldO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZShhZGRyZXNzTWVzaCk7XHJcbiAgICAgICAgICAgIGFkZHJlc3NNZXNoLmdlb21ldHJ5LmRpc3Bvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hZGRyZXNzTWVzaGVzID0gW107XHJcblxyXG4gICAgICAgIHRoaXMuanVtcEluc3RydWN0aW9ucy5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0ZWRKdW1wUENzID0gW107XHJcbiAgICAgICAgdGhpcy5mbGFnZ2VkQnVmZmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMuZmxhZ2dlZEJ1ZmZlck1lc2hlcy5mb3JFYWNoKG1lc2ggPT4ge1xyXG4gICAgICAgICAgICBpZiAobWVzaCA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnJlbW92ZShtZXNoKTtcclxuICAgICAgICAgICAgbWVzaC5nZW9tZXRyeS5kaXNwb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIaWdobGlnaHRzIHRoZSBidWZmZXIgYXQgdGhlIGdpdmVuIGluZGV4LCB1c2luZyB0aGUgQlJBTkNIX01BVEVSSUFMIGNvbG9yIGFuZCBhIGxvdyBvcGFjaXR5LlxyXG4gICAgICogQHBhcmFtIGluZGV4IHRoZSBpbmRleCBvZiB0aGUgYnVmZmVyIHRvIGhpZ2hsaWdodFxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBoaWdobGlnaHRGbGFnZ2VkQnVmZmVyKGluZGV4OiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmNsZWFySGlnaGxpZ2h0cygpO1xyXG4gICAgICAgIGNvbnN0IG1hdGVyaWFsID0gbmV3IE1lc2hCYXNpY01hdGVyaWFsKHtcclxuICAgICAgICAgICAgY29sb3I6IENvbXB1dGVyQ2hpcE1hY3JvLkJSQU5DSF9NQVRFUklBTC5jb2xvciwgLy8gVXNlIHRoZSBjb2xvciBmcm9tIEJSQU5DSF9NQVRFUklBTFxyXG4gICAgICAgICAgICB0cmFuc3BhcmVudDogdHJ1ZSxcclxuICAgICAgICAgICAgb3BhY2l0eTogMC4xLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGhpZ2hsaWdodE1lc2ggPSBuZXcgTWVzaCh0aGlzLmJ1ZmZlckhpZ2hsaWdodEdlb21ldHJ5LCBtYXRlcmlhbCk7XHJcbiAgICAgICAgaGlnaGxpZ2h0TWVzaC5wb3NpdGlvbi5zZXQodGhpcy5ob3Jpem9udGFsID8gdGhpcy5idWZmZXJNZXNoT2Zmc2V0c1tpbmRleF0gOiB0aGlzLnBvc2l0aW9uLngsXHJcbiAgICAgICAgICAgIHRoaXMuaG9yaXpvbnRhbCA/IHRoaXMucG9zaXRpb24ueSA6IHRoaXMuYnVmZmVyTWVzaE9mZnNldHNbaW5kZXhdLCAwLjAxKTtcclxuICAgICAgICB0aGlzLmZsYWdnZWRCdWZmZXJNZXNoZXMucHVzaChoaWdobGlnaHRNZXNoKTtcclxuICAgICAgICB0aGlzLmZsYWdnZWRCdWZmZXJzLnB1c2goaW5kZXgpO1xyXG4gICAgICAgIHRoaXMuc2NlbmUuYWRkKGhpZ2hsaWdodE1lc2gpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGlnaGxpZ2h0cyB0aGUgYWRkcmVzcyBtZXNoIG9mIHRoZSBnaXZlbiBpbnN0cnVjdGlvbiBhZGRyZXNzLlxyXG4gICAgICogQHBhcmFtIGFkZHJlc3MgdGhlIGFkZHJlc3MgdG8gaGlnaGxpZ2h0XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGhpZ2hsaWdodEp1bXBBZGRyZXNzKGFkZHJlc3M6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuYWRkcmVzc01lc2hlc1thZGRyZXNzXS5tYXRlcmlhbCA9IENvbXB1dGVyQ2hpcE1hY3JvLkJSQU5DSF9NQVRFUklBTDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnRzIHRoZSBnaXZlbiBhZGRyZXNzIHRvIGEgbG9jYWwgYWRkcmVzcyBpbiB0aGUgaW5zdHJ1Y3Rpb24gYnVmZmVyLlxyXG4gICAgICogQHBhcmFtIGFkZHJlc3MgdGhlIGFkZHJlc3MgdG8gY29udmVydFxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB0b0xvY2FsQWRkcmVzcyhhZGRyZXNzOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgLSB0aGlzLmFkZHJlc3NSZWFjaGVkICsgYWRkcmVzcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIGdyYXBoaWNzIG9mIGEgZ2l2ZW4ganVtcCBpbnN0cnVjdGlvbiBhbmQgdGhlIGludGVybWVkaWF0ZSBhZGRyZXNzZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB1cGRhdGVKdW1wSW5zdHJ1Y3Rpb25HcmFwaGljcygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmp1bXBJbnN0cnVjdGlvbnMuZm9yRWFjaCgoaW5zdHJ1Y3Rpb24sIHBjKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsUGMgPSB0aGlzLnRvTG9jYWxBZGRyZXNzKHBjKTtcclxuICAgICAgICAgICAgY29uc3QgbG9jYWxJbnN0cnVjdGlvbkFkZHJlc3MgPSB0aGlzLnRvTG9jYWxBZGRyZXNzKGluc3RydWN0aW9uLmdldEFkZHJlc3MoKSEpO1xyXG4gICAgICAgICAgICBpZiAoISh0aGlzLmhpZ2hsaWdodGVkSnVtcFBDcy5pbmNsdWRlcyhwYykpICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzQWRkcmVzc0luUmFuZ2UobG9jYWxQYykgJiYgdGhpcy5pc0FkZHJlc3NJblJhbmdlKGxvY2FsSW5zdHJ1Y3Rpb25BZGRyZXNzKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRlZEp1bXBQQ3MucHVzaChwYyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhpZ2hsaWdodEp1bXBBZGRyZXNzKGxvY2FsSW5zdHJ1Y3Rpb25BZGRyZXNzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0SW50ZXJtZWRpYXRlQWRkcmVzc2VzKGxvY2FsSW5zdHJ1Y3Rpb25BZGRyZXNzLCBsb2NhbFBjKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBhZGRyZXNzIGlzIGluIHRoZSByYW5nZSBvZiB0aGUgaW5zdHJ1Y3Rpb24gYnVmZmVyLlxyXG4gICAgICogQHBhcmFtIGFkZHJlc3MgdGhlIGFkZHJlc3MgdG8gY2hlY2tcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIHRoZSBhZGRyZXNzIGlzIGluIHJhbmdlLCBmYWxzZSBvdGhlcndpc2VcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaXNBZGRyZXNzSW5SYW5nZShhZGRyZXNzOiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gYWRkcmVzcyA8IHRoaXMuYWRkcmVzc01lc2hlcy5sZW5ndGggJiYgYWRkcmVzcyA+PSAwICYmIGFkZHJlc3MgPCB0aGlzLnN0b3JlZEluc3RydWN0aW9ucy5zaXplKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIaWdobGlnaHRzIHRoZSBpbnRlcm1lZGlhdGUgYWRkcmVzc2VzIGJldHdlZW4gdGhlIHN0YXJ0IGFuZCBlbmQgYWRkcmVzc2VzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBzdGFydCB0aGUgc3RhcnQgYWRkcmVzc1xyXG4gICAgICogQHBhcmFtIGVuZCB0aGUgZW5kIGFkZHJlc3NcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaGlnaGxpZ2h0SW50ZXJtZWRpYXRlQWRkcmVzc2VzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgYWN0dWFsU3RhcnQgPSBNYXRoLm1pbihzdGFydCwgZW5kKTtcclxuICAgICAgICBjb25zdCBhY3R1YWxFbmQgPSBNYXRoLm1heChzdGFydCwgZW5kKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gYWN0dWFsU3RhcnQ7IGkgPD0gYWN0dWFsRW5kOyArK2kpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWRkcmVzc0luUmFuZ2UoaSkpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaXNOb3RBbHJlYWR5RmxhZ2dlZCA9ICF0aGlzLmZsYWdnZWRCdWZmZXJzLmluY2x1ZGVzKGkpO1xyXG4gICAgICAgICAgICBpZiAoaXNOb3RBbHJlYWR5RmxhZ2dlZClcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0RmxhZ2dlZEJ1ZmZlcihpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgaWYgdGhlIGxvd2VzdCBhZGRyZXNzIGluIHRoZSBpbnN0cnVjdGlvbiBidWZmZXIgaXMgYSBqdW1wIHRhcmdldC5cclxuICAgICAqIEBwYXJhbSBmZXRjaGluZ1BjIHRoZSBwcm9ncmFtIGNvdW50ZXIgb2YgdGhlIGluc3RydWN0aW9uIGJlaW5nIGZldGNoZWRcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIHRoZSBsb3dlc3QgYWRkcmVzcyBpcyBhIGp1bXAgdGFyZ2V0LCBmYWxzZSBvdGhlcndpc2VcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbG93ZXN0QWRkcmVzc0lzSnVtcFRhcmdldChmZXRjaGluZ1BjOiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBsb3dlc3RBZGRyZXNzID0gdGhpcy5hZGRyZXNzUmVhY2hlZCAtIHRoaXMuc3RvcmVkSW5zdHJ1Y3Rpb25zLm1heFNpemU7XHJcbiAgICAgICAgZm9yIChjb25zdCBbcGMsIGluc3RydWN0aW9uXSBvZiB0aGlzLmp1bXBJbnN0cnVjdGlvbnMpXHJcbiAgICAgICAgICAgIGlmICgoZmV0Y2hpbmdQYyA8PSBwYykgJiYgKGluc3RydWN0aW9uLmdldEFkZHJlc3MoKSA9PT0gbG93ZXN0QWRkcmVzcykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXRlcmF0ZU1vZGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaW5kcyB0aGUgZmlyc3QgaW5zdHJ1Y3Rpb24gdGhhdCB0YXJnZXRzIHRoZSBsb3dlc3QgYWRkcmVzcyBpbiB0aGUgaW5zdHJ1Y3Rpb24gYnVmZmVyLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBmaXJzdEluc3RydWN0aW9uVGFyZ2V0aW5nTG93ZXN0QWRkcmVzcygpOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IGxvd2VzdEFkZHJlc3MgPSB0aGlzLmFkZHJlc3NSZWFjaGVkIC0gdGhpcy5zdG9yZWRJbnN0cnVjdGlvbnMubWF4U2l6ZTtcclxuICAgICAgICBmb3IgKGNvbnN0IFtwYywgaW5zdHJ1Y3Rpb25dIG9mIHRoaXMuanVtcEluc3RydWN0aW9ucylcclxuICAgICAgICAgICAgaWYgKGluc3RydWN0aW9uLmdldEFkZHJlc3MoKSA9PT0gbG93ZXN0QWRkcmVzcylcclxuICAgICAgICAgICAgICAgIHJldHVybiBwYztcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBpbnN0cnVjdGlvbiB0YXJnZXRzIHRoZSBsb3dlc3QgYWRkcmVzcyBpbiB0aGUgaW5zdHJ1Y3Rpb24gYnVmZmVyXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGFza0Zvckluc3RydWN0aW9ucyhfY2hpcDogQ29tcHV0ZXJDaGlwLCBfbjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZCBmb3IgQWRkcmVzc2VkSW5zdHJ1Y3Rpb25CdWZmZXIsIHVzZSBhc2tGb3JJbnN0cnVjdGlvbnNBdCBpbnN0ZWFkXCIpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtJbnN0cnVjdGlvbn0gZnJvbSBcIi4vSW5zdHJ1Y3Rpb25cIjtcclxuaW1wb3J0IHtRdWV1ZX0gZnJvbSBcIi4vUXVldWVcIjtcclxuaW1wb3J0IHtJU0F9IGZyb20gXCIuL0lTQVwiO1xyXG5pbXBvcnQge0FkZHJlc3NlZEluc3RydWN0aW9uQnVmZmVyfSBmcm9tIFwiLi4vYWN0b3JzL21hY3Jvcy9BZGRyZXNzZWRJbnN0cnVjdGlvbkJ1ZmZlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvZGVHZW5lcmF0b3Ige1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBNSU5fRE9VQkxFRF9MT09QX1NJWkU6IG51bWJlciA9IDc7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE1BWF9ET1VCTEVEX0xPT1BfU0laRTogbnVtYmVyID0gOTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE1JTl9MT09QX1NJWkU6IG51bWJlciA9IDQ7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE1BWF9MT09QX1NJWkU6IG51bWJlciA9IDY7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBNSU5fQlJBTkNIX1NJWkU6IG51bWJlciA9IDQ7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE1BWF9CUkFOQ0hfU0laRTogbnVtYmVyID0gODtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE1JTl9TRVFVRU5DRV9TSVpFOiBudW1iZXIgPSA0O1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBNQVhfU0VRVUVOQ0VfU0laRTogbnVtYmVyID0gNztcclxuXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGluc3RydWN0aW9uU3RyZWFtOiBRdWV1ZTxJbnN0cnVjdGlvbj47XHJcblxyXG4gICAgcHJpdmF0ZSBmb3JMb29wUHJvYmFiaWxpdHk6IG51bWJlciA9IDAuMztcclxuICAgIHByaXZhdGUgYnJhbmNoUHJvYmFiaWxpdHk6IG51bWJlciA9IDAuMjtcclxuICAgIHByaXZhdGUgZG91YmxlRm9yTG9vcFByb2JhYmlsaXR5OiBudW1iZXIgPSAwLjE7XHJcbiAgICBwcml2YXRlIGluaXRpYWxpemVSZWdpc3RlcnNQcm9iYWJpbGl0eTogbnVtYmVyID0gMC4zO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBjb2RlIGdlbmVyYXRvci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc2l6ZSBUaGUgc2l6ZSBvZiB0aGUgaW5zdHJ1Y3Rpb24gbWVtb3J5LlxyXG4gICAgICogQHBhcmFtIGluc3RydWN0aW9uQnVmZmVyIFRoZSBhZGRyZXNzZWQgaW5zdHJ1Y3Rpb24gYnVmZmVyLlxyXG4gICAgICogQHBhcmFtIHdvcmtpbmdNZW1vcnlTaXplIFRoZSBzaXplIG9mIHRoZSB3b3JraW5nIG1lbW9yeS5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBzaXplOiBudW1iZXIsIHByaXZhdGUgaW5zdHJ1Y3Rpb25CdWZmZXI6IEFkZHJlc3NlZEluc3RydWN0aW9uQnVmZmVyLCBwcml2YXRlIHdvcmtpbmdNZW1vcnlTaXplOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLmluc3RydWN0aW9uU3RyZWFtID0gbmV3IFF1ZXVlPEluc3RydWN0aW9uPigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgaW5zdHJ1Y3Rpb24gc3RyZWFtIG9mIHRoZSBjb2RlIGdlbmVyYXRvci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEluc3RydWN0aW9uU3RyZWFtKCk6IFF1ZXVlPEluc3RydWN0aW9uPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1Y3Rpb25TdHJlYW07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBpbnN0cnVjdGlvbiBzdHJlYW0gb2YgdGhlIGluc3RydWN0aW9uIG1lbW9yeSwgZW5zdXJpbmcgdGhhdCBpdCBpcyBhbHdheXMgZmlsbGVkIHdpdGggaW5zdHJ1Y3Rpb25zLlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB1cGRhdGVJbnN0cnVjdGlvblN0cmVhbSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaW5zdHJ1Y3Rpb25TdHJlYW0uaXNFbXB0eSgpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgbGV0IGFkZGVkSW5zdHJ1Y3Rpb25zID0gMDtcclxuICAgICAgICB3aGlsZSAodGhpcy5pbnN0cnVjdGlvblN0cmVhbS5zaXplKCkgPCB0aGlzLnNpemUgKiAyKSB7XHJcbiAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgdGhpcy5kb3VibGVGb3JMb29wUHJvYmFiaWxpdHkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBDb2RlR2VuZXJhdG9yLk1JTl9ET1VCTEVEX0xPT1BfU0laRSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqXHJcbiAgICAgICAgICAgICAgICAgICAgKENvZGVHZW5lcmF0b3IuTUFYX0RPVUJMRURfTE9PUF9TSVpFIC0gQ29kZUdlbmVyYXRvci5NSU5fRE9VQkxFRF9MT09QX1NJWkUpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZG91YmxlRm9yTG9vcChhZGRlZEluc3RydWN0aW9ucywgbikubW92ZVRvKHRoaXMuaW5zdHJ1Y3Rpb25TdHJlYW0pO1xyXG4gICAgICAgICAgICAgICAgYWRkZWRJbnN0cnVjdGlvbnMgKz0gbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IHRoaXMuZm9yTG9vcFByb2JhYmlsaXR5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IHRoaXMuaW5pdGlhbGl6ZVJlZ2lzdGVyc1Byb2JhYmlsaXR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IElTQS5SRUdJU1RFUl9DT1VOVCAtIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplUmVnaXN0ZXJzV29ya2xvYWQobikubW92ZVRvKHRoaXMuaW5zdHJ1Y3Rpb25TdHJlYW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZGVkSW5zdHJ1Y3Rpb25zICs9IG47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gQ29kZUdlbmVyYXRvci5NSU5fTE9PUF9TSVpFICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICpcclxuICAgICAgICAgICAgICAgICAgICAoQ29kZUdlbmVyYXRvci5NQVhfTE9PUF9TSVpFIC0gQ29kZUdlbmVyYXRvci5NSU5fTE9PUF9TSVpFKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR5cGljYWxGb3JMb29wKGFkZGVkSW5zdHJ1Y3Rpb25zLCBuKS5tb3ZlVG8odGhpcy5pbnN0cnVjdGlvblN0cmVhbSk7XHJcbiAgICAgICAgICAgICAgICBhZGRlZEluc3RydWN0aW9ucyArPSBuO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKE1hdGgucmFuZG9tKCkgPCB0aGlzLmJyYW5jaFByb2JhYmlsaXR5KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gQ29kZUdlbmVyYXRvci5NSU5fQlJBTkNIX1NJWkUgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKlxyXG4gICAgICAgICAgICAgICAgICAgIChDb2RlR2VuZXJhdG9yLk1BWF9CUkFOQ0hfU0laRSAtIENvZGVHZW5lcmF0b3IuTUlOX0JSQU5DSF9TSVpFKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmRpdGlvbmFsQnJhbmNoV29ya2xvYWQoYWRkZWRJbnN0cnVjdGlvbnMsIG4pLm1vdmVUbyh0aGlzLmluc3RydWN0aW9uU3RyZWFtKTtcclxuICAgICAgICAgICAgICAgIGFkZGVkSW5zdHJ1Y3Rpb25zICs9IG47XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gQ29kZUdlbmVyYXRvci5NSU5fU0VRVUVOQ0VfU0laRSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqXHJcbiAgICAgICAgICAgICAgICAgICAgKENvZGVHZW5lcmF0b3IuTUFYX1NFUVVFTkNFX1NJWkUgLSBDb2RlR2VuZXJhdG9yLk1JTl9TRVFVRU5DRV9TSVpFKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR5cGljYWxJbnN0cnVjdGlvblNlcXVlbmNlKG4pLm1vdmVUbyh0aGlzLmluc3RydWN0aW9uU3RyZWFtKTtcclxuICAgICAgICAgICAgICAgIGFkZGVkSW5zdHJ1Y3Rpb25zICs9IG47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZXMgYSB0eXBpY2FsIGluc3RydWN0aW9uIHdvcmtsb2FkIG9mIG4gaW5zdHJ1Y3Rpb25zLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuIFRoZSBudW1iZXIgb2YgaW5zdHJ1Y3Rpb25zIHRvIGdlbmVyYXRlLlxyXG4gICAgICogQHBhcmFtIGV4Y2VwdGVkIFRoZSByZWdpc3RlcnMgdG8gYXZvaWQuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHR5cGljYWxJbnN0cnVjdGlvblNlcXVlbmNlKG46IG51bWJlciwgZXhjZXB0ZWQgPzogbnVtYmVyW10pOiBRdWV1ZTxJbnN0cnVjdGlvbj4ge1xyXG4gICAgICAgIGNvbnN0IHR5cGljYWxXb3JrbG9hZCA9IG5ldyBRdWV1ZTxJbnN0cnVjdGlvbj4obik7XHJcbiAgICAgICAgY29uc3QgbG9hZGVkUmVnaXN0ZXJzID0gdGhpcy5sb2FkQ29uc2VjdXRpdmVBZGRyZXNzZXModHlwaWNhbFdvcmtsb2FkLCBuLCBleGNlcHRlZCk7XHJcbiAgICAgICAgY29uc3QgW3Jlc3VsdFJlZ2lzdGVycywgbnVtYmVyT2ZBTFVPcGVyYXRpb25zXSA9IHRoaXMuY29tcHV0ZU9uR2l2ZW5SZWdpc3RlcnModHlwaWNhbFdvcmtsb2FkLCBuLCBsb2FkZWRSZWdpc3RlcnMsIGV4Y2VwdGVkKTtcclxuICAgICAgICB0aGlzLnN0b3JlUmVzdWx0cyh0eXBpY2FsV29ya2xvYWQsIG4gLSBsb2FkZWRSZWdpc3RlcnMubGVuZ3RoIC0gbnVtYmVyT2ZBTFVPcGVyYXRpb25zLCByZXN1bHRSZWdpc3RlcnMpO1xyXG4gICAgICAgIHJldHVybiB0eXBpY2FsV29ya2xvYWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZXMgYSBzZXF1ZW5jZSBvZiBsb2FkIG9wZXJhdGlvbnNcclxuICAgICAqIEBwYXJhbSBxdWV1ZSBUaGUgcXVldWUgdG8gd2hpY2ggdGhlIGluc3RydWN0aW9ucyB3aWxsIGJlIGFkZGVkLlxyXG4gICAgICogQHBhcmFtIG4gVGhlIG51bWJlciBvZiBpbnN0cnVjdGlvbnMgdG8gZ2VuZXJhdGUuXHJcbiAgICAgKiBAcGFyYW0gZXhjZXB0ZWQgVGhlIHJlZ2lzdGVycyB0byBhdm9pZC5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgcmVnaXN0ZXJzIHRoYXQgd2VyZSBsb2FkZWQuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbG9hZENvbnNlY3V0aXZlQWRkcmVzc2VzKHF1ZXVlOiBRdWV1ZTxJbnN0cnVjdGlvbj4sIG46IG51bWJlciwgZXhjZXB0ZWQgPzogbnVtYmVyW10pOiBudW1iZXJbXSB7XHJcbiAgICAgICAgY29uc3QgbnVtYmVyT2ZMb2FkT3BlcmF0aW9ucyA9IHRoaXMuZ2V0UmFuZG9tKE1hdGguZmxvb3IobiAqIDAuNiksIDIpO1xyXG4gICAgICAgIGNvbnN0IGxvYWRlZFJlZ2lzdGVyczogbnVtYmVyW10gPSB0aGlzLnJhbmRvbUNvbnNlY3V0aXZlUmVncyhudW1iZXJPZkxvYWRPcGVyYXRpb25zLCBleGNlcHRlZCk7XHJcbiAgICAgICAgY29uc3QgcmFuZG9tQWRkcmVzc2VzID0gdGhpcy5yYW5kb21Db25zZWN1dGl2ZUFkZHJlc3NlcyhudW1iZXJPZkxvYWRPcGVyYXRpb25zKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlck9mTG9hZE9wZXJhdGlvbnM7ICsraSlcclxuICAgICAgICAgICAgcXVldWUuZW5xdWV1ZShJbnN0cnVjdGlvbi5tZW1vcnkoXCJMT0FEXCIsIGxvYWRlZFJlZ2lzdGVyc1tpXSwgcmFuZG9tQWRkcmVzc2VzW2ldKSk7XHJcbiAgICAgICAgcmV0dXJuIGxvYWRlZFJlZ2lzdGVycztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhIHNlcXVlbmNlIG9mIEFMVSBvcGVyYXRpb25zLlxyXG4gICAgICogQHBhcmFtIHF1ZXVlIFRoZSBxdWV1ZSB0byB3aGljaCB0aGUgaW5zdHJ1Y3Rpb25zIHdpbGwgYmUgYWRkZWQuXHJcbiAgICAgKiBAcGFyYW0gbiBUaGUgbnVtYmVyIG9mIGluc3RydWN0aW9ucyB0byBnZW5lcmF0ZS5cclxuICAgICAqIEBwYXJhbSBsb2FkZWRSZWdpc3RlcnMgVGhlIHJlZ2lzdGVycyB0aGF0IHdlcmUgbG9hZGVkLlxyXG4gICAgICogQHBhcmFtIGV4Y2VwdGVkIFRoZSByZWdpc3RlcnMgdG8gYXZvaWQuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHJldHVybnMgVGhlIHJlZ2lzdGVycyB0aGF0IHdlcmUgY29tcHV0ZWQgb24uXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgbnVtYmVyIG9mIEFMVSBvcGVyYXRpb25zIGFkZGVkLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvbXB1dGVPbkdpdmVuUmVnaXN0ZXJzKHF1ZXVlOiBRdWV1ZTxJbnN0cnVjdGlvbj4sIG46IG51bWJlciwgbG9hZGVkUmVnaXN0ZXJzOiBudW1iZXJbXSwgZXhjZXB0ZWQgPzogbnVtYmVyW10pOiBbU2V0PG51bWJlcj4sIG51bWJlcl0ge1xyXG4gICAgICAgIGNvbnN0IG51bWJlck9mQUxVT3BlcmF0aW9ucyA9IHRoaXMuZ2V0UmFuZG9tKE1hdGguZmxvb3IobiAqIDAuNSksIDEpO1xyXG4gICAgICAgIGxldCByZXN1bHRSZWdpc3RlcnM6IFNldDxudW1iZXI+ID0gbmV3IFNldCgpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtYmVyT2ZBTFVPcGVyYXRpb25zOyArK2kpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0UmVnID0gdGhpcy5yYW5kb21SZWcoZXhjZXB0ZWQpO1xyXG4gICAgICAgICAgICByZXN1bHRSZWdpc3RlcnMuYWRkKHJlc3VsdFJlZyk7XHJcbiAgICAgICAgICAgIHF1ZXVlLmVucXVldWUoSW5zdHJ1Y3Rpb24uYWx1KHRoaXMucmFuZG9tRnJvbShJU0EuQUxVX09QQ09ERVMpLCByZXN1bHRSZWcsXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJhbmRvbUZyb20obG9hZGVkUmVnaXN0ZXJzKSwgdGhpcy5yYW5kb21Gcm9tKGxvYWRlZFJlZ2lzdGVycykpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtyZXN1bHRSZWdpc3RlcnMsIG51bWJlck9mQUxVT3BlcmF0aW9uc107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZXMgYSBzZXF1ZW5jZSBvZiBzdG9yZSBvcGVyYXRpb25zLlxyXG4gICAgICogQHBhcmFtIHF1ZXVlIFRoZSBxdWV1ZSB0byB3aGljaCB0aGUgaW5zdHJ1Y3Rpb25zIHdpbGwgYmUgYWRkZWQuXHJcbiAgICAgKiBAcGFyYW0gbiBUaGUgbnVtYmVyIG9mIGluc3RydWN0aW9ucyB0byBnZW5lcmF0ZS5cclxuICAgICAqIEBwYXJhbSByZXN1bHRSZWdpc3RlcnMgVGhlIHJlZ2lzdGVycyB0aGF0IHdlcmUgY29tcHV0ZWQgb24uXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0b3JlUmVzdWx0cyhxdWV1ZTogUXVldWU8SW5zdHJ1Y3Rpb24+LCBuOiBudW1iZXIsIHJlc3VsdFJlZ2lzdGVyczogU2V0PG51bWJlcj4pOiB2b2lkIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47ICsraSkge1xyXG4gICAgICAgICAgICBjb25zdCByYW5kb21SZXN1bHRSZWdpc3RlciA9IHRoaXMucmFuZG9tRnJvbVNldChyZXN1bHRSZWdpc3RlcnMpO1xyXG4gICAgICAgICAgICBxdWV1ZS5lbnF1ZXVlKEluc3RydWN0aW9uLm1lbW9yeShcIlNUT1JFXCIsIHJhbmRvbVJlc3VsdFJlZ2lzdGVyLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRSYW5kb20odGhpcy53b3JraW5nTWVtb3J5U2l6ZSkpKTtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdFJlZ2lzdGVycy5zaXplID4gMSlcclxuICAgICAgICAgICAgICAgIHJlc3VsdFJlZ2lzdGVycy5kZWxldGUocmFuZG9tUmVzdWx0UmVnaXN0ZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhIHR5cGljYWwgZm9yIGxvb3AgaW5zdHJ1Y3Rpb24gd29ya2xvYWQgb2YgbiBpbnN0cnVjdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5QcmV2aW91c2x5QWRkZWRJbnN0cnVjdGlvbnMgVGhlIG51bWJlciBvZiBpbnN0cnVjdGlvbnMgcHJldmlvdXNseSBhZGRlZCB0byB0aGUgaW5zdHJ1Y3Rpb24gc3RyZWFtLlxyXG4gICAgICogQHBhcmFtIG4gVGhlIG51bWJlciBvZiBpbnN0cnVjdGlvbnMgdG8gZ2VuZXJhdGUuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHR5cGljYWxGb3JMb29wKG5QcmV2aW91c2x5QWRkZWRJbnN0cnVjdGlvbnM6IG51bWJlciwgbjogbnVtYmVyKTogUXVldWU8SW5zdHJ1Y3Rpb24+IHtcclxuICAgICAgICBjb25zdCB0eXBpY2FsV29ya2xvYWQgPSBuZXcgUXVldWU8SW5zdHJ1Y3Rpb24+KG4pO1xyXG5cclxuICAgICAgICBjb25zdCBpdCA9IHRoaXMucmFuZG9tUmVnKCk7XHJcbiAgICAgICAgY29uc3QgY29tcGFyZWRUbyA9IHRoaXMucmFuZG9tUmVnKFtpdF0pO1xyXG4gICAgICAgIHR5cGljYWxXb3JrbG9hZC5lbnF1ZXVlKEluc3RydWN0aW9uLmFsdUltbShcIkFERElcIiwgaXQsIGl0LCAwKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGxvb3BCb2R5U2l6ZSA9IG4gLSAzO1xyXG4gICAgICAgIGlmIChsb29wQm9keVNpemUgPiBDb2RlR2VuZXJhdG9yLk1JTl9TRVFVRU5DRV9TSVpFKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHlwaWNhbEluc3RydWN0aW9uU2VxdWVuY2UobG9vcEJvZHlTaXplLCBbaXQsIGNvbXBhcmVkVG9dKS5tb3ZlVG8odHlwaWNhbFdvcmtsb2FkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvb3BCb2R5U2l6ZTsgKytpKVxyXG4gICAgICAgICAgICAgICAgdHlwaWNhbFdvcmtsb2FkLmVucXVldWUoSW5zdHJ1Y3Rpb24uYWx1KHRoaXMucmFuZG9tRnJvbShJU0EuQUxVX09QQ09ERVMpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFuZG9tUmVnKFtpdCwgY29tcGFyZWRUb10pLCB0aGlzLnJhbmRvbVJlZygpLCB0aGlzLnJhbmRvbVJlZygpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0eXBpY2FsV29ya2xvYWQuZW5xdWV1ZShJbnN0cnVjdGlvbi5hbHVJbW0oXCJBRERJXCIsIGl0LCBpdCwgMSkpO1xyXG4gICAgICAgIGNvbnN0IGJyYW5jaFRhcmdldCA9IHRoaXMuaW5zdHJ1Y3Rpb25CdWZmZXIuaGlnaGVzdEluc3RydWN0aW9uQWRkcmVzcygpICsgblByZXZpb3VzbHlBZGRlZEluc3RydWN0aW9ucyArIDE7XHJcbiAgICAgICAgY29uc3QganVtcEluc3RydWN0aW9uID0gSW5zdHJ1Y3Rpb24uYnJhbmNoKHRoaXMucmFuZG9tRnJvbShJU0EuQlJBTkNIX09QQ09ERVMpLCBpdCwgY29tcGFyZWRUbywgYnJhbmNoVGFyZ2V0KTtcclxuICAgICAgICB0eXBpY2FsV29ya2xvYWQuZW5xdWV1ZShqdW1wSW5zdHJ1Y3Rpb24pO1xyXG5cclxuICAgICAgICB0aGlzLmluc3RydWN0aW9uQnVmZmVyLnNldEp1bXBJbnN0cnVjdGlvbihicmFuY2hUYXJnZXQgKyBuIC0gMiwganVtcEluc3RydWN0aW9uKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHR5cGljYWxXb3JrbG9hZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhIGNvbmRpdGlvbmFsIGJyYW5jaCBpbnN0cnVjdGlvbiB3b3JrbG9hZCBvZiBuIGluc3RydWN0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gblByZXZpb3VzbHlBZGRlZEluc3RydWN0aW9ucyBUaGUgbnVtYmVyIG9mIGluc3RydWN0aW9ucyBwcmV2aW91c2x5IGFkZGVkIHRvIHRoZSBpbnN0cnVjdGlvbiBzdHJlYW0uXHJcbiAgICAgKiBAcGFyYW0gbiBUaGUgbnVtYmVyIG9mIGluc3RydWN0aW9ucyB0byBnZW5lcmF0ZS5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY29uZGl0aW9uYWxCcmFuY2hXb3JrbG9hZChuUHJldmlvdXNseUFkZGVkSW5zdHJ1Y3Rpb25zOiBudW1iZXIsIG46IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IHdvcmtsb2FkID0gbmV3IFF1ZXVlPEluc3RydWN0aW9uPihuKTtcclxuICAgICAgICBjb25zdCBjbXBSZWcgPSB0aGlzLnJhbmRvbVJlZygpO1xyXG4gICAgICAgIGNvbnN0IGJyYW5jaEluc3RydWN0aW9uQWRkcmVzcyA9IHRoaXMuaW5zdHJ1Y3Rpb25CdWZmZXIuaGlnaGVzdEluc3RydWN0aW9uQWRkcmVzcygpICsgblByZXZpb3VzbHlBZGRlZEluc3RydWN0aW9ucztcclxuICAgICAgICBjb25zdCBicmFuY2hUYXJnZXQgPSBicmFuY2hJbnN0cnVjdGlvbkFkZHJlc3MgKyBuIC0gMTtcclxuICAgICAgICBjb25zdCBicmFuY2hJbnN0cnVjdGlvbiA9IEluc3RydWN0aW9uLmJyYW5jaCh0aGlzLnJhbmRvbUZyb20oSVNBLkJSQU5DSF9PUENPREVTKSwgY21wUmVnLCB0aGlzLnJhbmRvbVJlZyhbY21wUmVnXSksIGJyYW5jaFRhcmdldCk7XHJcbiAgICAgICAgd29ya2xvYWQuZW5xdWV1ZShicmFuY2hJbnN0cnVjdGlvbik7XHJcblxyXG4gICAgICAgIGNvbnN0IGxvb3BCb2R5U2l6ZSA9IG4gLSAxO1xyXG4gICAgICAgIGlmIChsb29wQm9keVNpemUgPiBDb2RlR2VuZXJhdG9yLk1JTl9TRVFVRU5DRV9TSVpFKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHlwaWNhbEluc3RydWN0aW9uU2VxdWVuY2UobG9vcEJvZHlTaXplKS5tb3ZlVG8od29ya2xvYWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9vcEJvZHlTaXplOyArK2kpXHJcbiAgICAgICAgICAgICAgICB3b3JrbG9hZC5lbnF1ZXVlKEluc3RydWN0aW9uLmFsdSh0aGlzLnJhbmRvbUZyb20oSVNBLkFMVV9PUENPREVTKSxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmRvbVJlZygpLCB0aGlzLnJhbmRvbVJlZygpLCB0aGlzLnJhbmRvbVJlZygpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmluc3RydWN0aW9uQnVmZmVyLnNldEp1bXBJbnN0cnVjdGlvbih0aGlzLmluc3RydWN0aW9uQnVmZmVyLmhpZ2hlc3RJbnN0cnVjdGlvbkFkZHJlc3MoKSArIG5QcmV2aW91c2x5QWRkZWRJbnN0cnVjdGlvbnMsIGJyYW5jaEluc3RydWN0aW9uKTtcclxuICAgICAgICByZXR1cm4gd29ya2xvYWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEdlbmVyYXRlcyBhIGRvdWJsZSBmb3IgbG9vcCBpbnN0cnVjdGlvbiB3b3JrbG9hZCBvZiBuIGluc3RydWN0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gblByZXZpb3VzbHlBZGRlZEluc3RydWN0aW9ucyBUaGUgbnVtYmVyIG9mIGluc3RydWN0aW9ucyBwcmV2aW91c2x5IGFkZGVkIHRvIHRoZSBpbnN0cnVjdGlvbiBzdHJlYW0uXHJcbiAgICAgKiBAcGFyYW0gbiBUaGUgbnVtYmVyIG9mIGluc3RydWN0aW9ucyB0byBnZW5lcmF0ZS5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZG91YmxlRm9yTG9vcChuUHJldmlvdXNseUFkZGVkSW5zdHJ1Y3Rpb25zOiBudW1iZXIsIG46IG51bWJlcik6IFF1ZXVlPEluc3RydWN0aW9uPiB7XHJcbiAgICAgICAgY29uc3Qgd29ya2xvYWQgPSBuZXcgUXVldWU8SW5zdHJ1Y3Rpb24+KG4pO1xyXG5cclxuICAgICAgICBjb25zdCBpbnNpZGVJdCA9IHRoaXMucmFuZG9tUmVnKCk7XHJcbiAgICAgICAgY29uc3QgaW5zaWRlQ29tcGFyZWRUbyA9IHRoaXMucmFuZG9tUmVnKFtpbnNpZGVJdF0pO1xyXG4gICAgICAgIGNvbnN0IG91dHNpZGVJdCA9IHRoaXMucmFuZG9tUmVnKFtpbnNpZGVJdCwgaW5zaWRlQ29tcGFyZWRUb10pO1xyXG4gICAgICAgIGNvbnN0IG91dHNpZGVDb21wYXJlZFRvID0gdGhpcy5yYW5kb21SZWcoW2luc2lkZUl0LCBpbnNpZGVDb21wYXJlZFRvLCBvdXRzaWRlSXRdKTtcclxuXHJcbiAgICAgICAgd29ya2xvYWQuZW5xdWV1ZShJbnN0cnVjdGlvbi5hbHVJbW0oXCJBRERJXCIsIG91dHNpZGVJdCwgb3V0c2lkZUl0LCAwKSk7XHJcbiAgICAgICAgd29ya2xvYWQuZW5xdWV1ZShJbnN0cnVjdGlvbi5hbHVJbW0oXCJBRERJXCIsIGluc2lkZUl0LCBpbnNpZGVJdCwgMCkpO1xyXG4gICAgICAgIGNvbnN0IGluc2lkZUxvb3BTaXplID0gbiAtIDY7XHJcblxyXG4gICAgICAgIGNvbnN0IG91dHNpZGVCcmFuY2hUYXJnZXQgPSB0aGlzLmluc3RydWN0aW9uQnVmZmVyLmhpZ2hlc3RJbnN0cnVjdGlvbkFkZHJlc3MoKSArIG5QcmV2aW91c2x5QWRkZWRJbnN0cnVjdGlvbnMgKyAxO1xyXG4gICAgICAgIGNvbnN0IGluc2lkZUJyYW5jaFRhcmdldCA9IG91dHNpZGVCcmFuY2hUYXJnZXQgKyAxXHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5zaWRlTG9vcFNpemU7ICsraSlcclxuICAgICAgICAgICAgd29ya2xvYWQuZW5xdWV1ZShJbnN0cnVjdGlvbi5hbHUodGhpcy5yYW5kb21Gcm9tKElTQS5BTFVfT1BDT0RFUyksIHRoaXMucmFuZG9tUmVnKFtpbnNpZGVJdCwgb3V0c2lkZUl0XSksIHRoaXMucmFuZG9tUmVnKCksIHRoaXMucmFuZG9tUmVnKCkpKTtcclxuXHJcblxyXG4gICAgICAgIHdvcmtsb2FkLmVucXVldWUoSW5zdHJ1Y3Rpb24uYWx1SW1tKFwiQURESVwiLCBpbnNpZGVJdCwgaW5zaWRlSXQsIDEpKTtcclxuICAgICAgICBjb25zdCBpbnNpZGVKdW1wSW5zdHJ1Y3Rpb24gPSBJbnN0cnVjdGlvbi5icmFuY2godGhpcy5yYW5kb21Gcm9tKElTQS5CUkFOQ0hfT1BDT0RFUyksIGluc2lkZUl0LCBpbnNpZGVDb21wYXJlZFRvLCBpbnNpZGVCcmFuY2hUYXJnZXQpO1xyXG4gICAgICAgIHdvcmtsb2FkLmVucXVldWUoaW5zaWRlSnVtcEluc3RydWN0aW9uKTtcclxuICAgICAgICB0aGlzLmluc3RydWN0aW9uQnVmZmVyLnNldEp1bXBJbnN0cnVjdGlvbihpbnNpZGVCcmFuY2hUYXJnZXQgKyBpbnNpZGVMb29wU2l6ZSArIDEsIGluc2lkZUp1bXBJbnN0cnVjdGlvbik7XHJcblxyXG4gICAgICAgIHdvcmtsb2FkLmVucXVldWUoSW5zdHJ1Y3Rpb24uYWx1SW1tKFwiQURESVwiLCBvdXRzaWRlSXQsIG91dHNpZGVJdCwgMSkpO1xyXG4gICAgICAgIGNvbnN0IG91dHNpZGVKdW1wSW5zdHJ1Y3Rpb24gPSBJbnN0cnVjdGlvbi5icmFuY2godGhpcy5yYW5kb21Gcm9tKElTQS5CUkFOQ0hfT1BDT0RFUyksIG91dHNpZGVJdCwgb3V0c2lkZUNvbXBhcmVkVG8sIG91dHNpZGVCcmFuY2hUYXJnZXQpO1xyXG4gICAgICAgIHdvcmtsb2FkLmVucXVldWUob3V0c2lkZUp1bXBJbnN0cnVjdGlvbik7XHJcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbkJ1ZmZlci5zZXRKdW1wSW5zdHJ1Y3Rpb24ob3V0c2lkZUJyYW5jaFRhcmdldCArIGluc2lkZUxvb3BTaXplICsgNCwgb3V0c2lkZUp1bXBJbnN0cnVjdGlvbik7XHJcblxyXG4gICAgICAgIHJldHVybiB3b3JrbG9hZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhIHdvcmtsb2FkIG9mIGluc3RydWN0aW9ucyB0aGF0IGluaXRpYWxpemUgcmVnaXN0ZXJzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuIFRoZSBudW1iZXIgb2YgaW5zdHJ1Y3Rpb25zIHRvIGdlbmVyYXRlLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBpbml0aWFsaXplUmVnaXN0ZXJzV29ya2xvYWQobjogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3Qgd29ya2xvYWQgPSBuZXcgUXVldWU8SW5zdHJ1Y3Rpb24+KG4pO1xyXG4gICAgICAgIGNvbnN0IHJlZ2lzdGVycyA9IHRoaXMucmFuZG9tQ29uc2VjdXRpdmVSZWdzKG4pO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgKytpKVxyXG4gICAgICAgICAgICB3b3JrbG9hZC5lbnF1ZXVlKEluc3RydWN0aW9uLmFsdUltbShcIkFERElcIiwgcmVnaXN0ZXJzW2ldLCAwLCB0aGlzLmdldFJhbmRvbShJU0EuTUFYX0JZVEVfVkFMVUUsIDEpKSk7XHJcbiAgICAgICAgcmV0dXJuIHdvcmtsb2FkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHJhbmRvbSBlbGVtZW50IGZyb20gdGhlIGdpdmVuIGFycmF5LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhcnJheSBUaGUgYXJyYXkgZnJvbSB3aGljaCB0byByZXR1cm4gYSByYW5kb20gZWxlbWVudC5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcmV0dXJucyBBIHJhbmRvbSBlbGVtZW50IGZyb20gdGhlIGdpdmVuIGFycmF5LlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJhbmRvbUZyb208VD4oYXJyYXk6IEFycmF5PFQ+KTogVCB7XHJcbiAgICAgICAgcmV0dXJuIGFycmF5W01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFycmF5Lmxlbmd0aCldO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHJhbmRvbSBlbGVtZW50IGZyb20gdGhlIGdpdmVuIHNldC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc2V0IFRoZSBzZXQgZnJvbSB3aGljaCB0byByZXR1cm4gYSByYW5kb20gZWxlbWVudC5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcmV0dXJucyBBIHJhbmRvbSBlbGVtZW50IGZyb20gdGhlIGdpdmVuIHNldC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByYW5kb21Gcm9tU2V0PFQ+KHNldDogU2V0PFQ+KTogVCB7XHJcbiAgICAgICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzZXQuc2l6ZSk7XHJcbiAgICAgICAgbGV0IGkgPSAwO1xyXG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBzZXQpIHtcclxuICAgICAgICAgICAgaWYgKGkgPT09IHJhbmRvbUluZGV4KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHNldC52YWx1ZXMoKS5uZXh0KCkudmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcmFuZG9tIHJlZ2lzdGVyIG51bWJlciB0aGF0IGlzIG5vdCBpbiB0aGUgZ2l2ZW4gYXJyYXksIHdpdGggYSBzYWZldHkgbGltaXQgb24gaXRlcmF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXhjZXB0ZWQgVGhlIHJlZ2lzdGVyIG51bWJlcnMgdG8gYXZvaWQuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJhbmRvbVJlZyhleGNlcHRlZCA/OiBudW1iZXJbXSk6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IHJhbmRvbVJlZ2lzdGVyTnVtYmVyOiBudW1iZXI7XHJcbiAgICAgICAgbGV0IGF0dGVtcHRzID0gMDtcclxuICAgICAgICBjb25zdCBtYXhBdHRlbXB0cyA9IDEwMDsgLy8gTWF4aW11bSBudW1iZXIgb2YgYXR0ZW1wdHMgdG8gZmluZCBhIG5vbi1leGNlcHRlZCByZWdpc3RlclxyXG5cclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIGlmIChhdHRlbXB0cysrID49IG1heEF0dGVtcHRzKSB0aHJvdyBuZXcgRXJyb3IoJ01heCBhdHRlbXB0cyByZWFjaGVkIGluIHJhbmRvbVJlZycpO1xyXG4gICAgICAgICAgICByYW5kb21SZWdpc3Rlck51bWJlciA9IHRoaXMuZ2V0UmFuZG9tKElTQS5SRUdJU1RFUl9DT1VOVCwgMSk7IC8vIDAgaXMgcmVzZXJ2ZWQgZm9yIHRoZSB6ZXJvIHJlZ2lzdGVyLlxyXG4gICAgICAgIH0gd2hpbGUgKGV4Y2VwdGVkICYmIGV4Y2VwdGVkLmluY2x1ZGVzKHJhbmRvbVJlZ2lzdGVyTnVtYmVyKSk7XHJcblxyXG4gICAgICAgIHJldHVybiByYW5kb21SZWdpc3Rlck51bWJlcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgbiByYW5kb20gY29uc2VjdXRpdmUgcmVnaXN0ZXIgbnVtYmVycywgc2tpcHBpbmcgdGhlIGV4Y2VwdGVkIG9uZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG4gVGhlIG51bWJlciBvZiBjb25zZWN1dGl2ZSByZWdpc3RlciBudW1iZXJzIHRvIHJldHVybi5cclxuICAgICAqIEBwYXJhbSBleGNlcHRlZCBUaGUgcmVnaXN0ZXIgbnVtYmVycyB0byBhdm9pZC5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmFuZG9tQ29uc2VjdXRpdmVSZWdzKG46IG51bWJlciwgZXhjZXB0ZWQgPzogbnVtYmVyW10pOiBudW1iZXJbXSB7XHJcbiAgICAgICAgbGV0IHJhbmRvbVJlZ2lzdGVyTnVtYmVyID0gdGhpcy5yYW5kb21SZWcoZXhjZXB0ZWQpO1xyXG4gICAgICAgIGxldCByYW5kb21SZWdpc3Rlck51bWJlcnM6IG51bWJlcltdID0gW107XHJcbiAgICAgICAgbGV0IGNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgd2hpbGUgKGNvdW50IDwgbikge1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgY3VycmVudCByZWdpc3RlciBudW1iZXIgaXMgbm90IGluIHRoZSBleGNlcHRlZCBsaXN0LCBhZGQgaXQgdG8gdGhlIHJlc3VsdFxyXG4gICAgICAgICAgICBpZiAoIShleGNlcHRlZCAmJiBleGNlcHRlZC5pbmNsdWRlcyhyYW5kb21SZWdpc3Rlck51bWJlcikpKSB7XHJcbiAgICAgICAgICAgICAgICByYW5kb21SZWdpc3Rlck51bWJlcnMucHVzaChyYW5kb21SZWdpc3Rlck51bWJlcik7XHJcbiAgICAgICAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIE1vdmUgdG8gdGhlIG5leHQgcmVnaXN0ZXIsIHdyYXAgYXJvdW5kIGlmIG5lY2Vzc2FyeVxyXG4gICAgICAgICAgICByYW5kb21SZWdpc3Rlck51bWJlciA9IChyYW5kb21SZWdpc3Rlck51bWJlciArIDEpICUgSVNBLlJFR0lTVEVSX0NPVU5UO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJhbmRvbVJlZ2lzdGVyTnVtYmVycztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgbiByYW5kb20gY29uc2VjdXRpdmUgbWVtb3J5IGFkZHJlc3Nlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbiBUaGUgbnVtYmVyIG9mIGNvbnNlY3V0aXZlIG1lbW9yeSBhZGRyZXNzZXMgdG8gcmV0dXJuLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByYW5kb21Db25zZWN1dGl2ZUFkZHJlc3NlcyhuOiBudW1iZXIpOiBudW1iZXJbXSB7XHJcbiAgICAgICAgY29uc3QgcmFuZG9tQWRkcmVzcyA9IHRoaXMuZ2V0UmFuZG9tKHRoaXMud29ya2luZ01lbW9yeVNpemUpO1xyXG4gICAgICAgIGNvbnN0IHJhbmRvbUFkZHJlc3NlczogbnVtYmVyW10gPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47ICsraSlcclxuICAgICAgICAgICAgcmFuZG9tQWRkcmVzc2VzLnB1c2goKHJhbmRvbUFkZHJlc3MgKyBpKSAlIHRoaXMud29ya2luZ01lbW9yeVNpemUpO1xyXG4gICAgICAgIHJldHVybiByYW5kb21BZGRyZXNzZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcmFuZG9tIG51bWJlciBiZXR3ZWVuIG1pbiBhbmQgbWF4LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBtYXggVGhlIG1heGltdW0gdmFsdWUuXHJcbiAgICAgKiBAcGFyYW0gbWluIFRoZSBtaW5pbXVtIHZhbHVlLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRSYW5kb20obWF4OiBudW1iZXIsIG1pbiA9IDApIHtcclxuICAgICAgICByZXR1cm4gbWluICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtDb21wdXRlckNoaXAsIFNpZGV9IGZyb20gXCIuL0NvbXB1dGVyQ2hpcFwiO1xyXG5pbXBvcnQge0FkZHJlc3NlZEluc3RydWN0aW9uQnVmZmVyfSBmcm9tIFwiLi9tYWNyb3MvQWRkcmVzc2VkSW5zdHJ1Y3Rpb25CdWZmZXJcIjtcclxuaW1wb3J0IHtDaGlwTWVudU9wdGlvbnN9IGZyb20gXCIuLi9kYXRhU3RydWN0dXJlcy9DaGlwTWVudU9wdGlvbnNcIjtcclxuaW1wb3J0IHtVcGdyYWRlT3B0aW9ufSBmcm9tIFwiLi4vZGF0YVN0cnVjdHVyZXMvVXBncmFkZU9wdGlvblwiO1xyXG5pbXBvcnQge0NvZGVHZW5lcmF0b3J9IGZyb20gXCIuLi9kYXRhU3RydWN0dXJlcy9Db2RlR2VuZXJhdG9yXCI7XHJcbmltcG9ydCB7QXBwfSBmcm9tIFwiLi4vYXBwXCI7XHJcblxyXG4vKipcclxuICogVGhlIEluc3RydWN0aW9uTWVtb3J5IGNsYXNzIHJlcHJlc2VudHMgdGhlIGluc3RydWN0aW9uIG1lbW9yeSBvZiB0aGUgY29tcHV0ZXIuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSW5zdHJ1Y3Rpb25NZW1vcnkgZXh0ZW5kcyBDb21wdXRlckNoaXAge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBBRERSRVNTX01BUkdJTjogbnVtYmVyID0gMC4yO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IHNpemU6IG51bWJlcjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgaW5zdHJ1Y3Rpb25CdWZmZXI6IEFkZHJlc3NlZEluc3RydWN0aW9uQnVmZmVyO1xyXG5cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgQ29kZUdlbjogQ29kZUdlbmVyYXRvcjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW5zdHJ1Y3Rpb24gbWVtb3J5LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhcHAgVGhlIG1haW4gYXBwbGljYXRpb24gY2xhc3MuXHJcbiAgICAgKiBAcGFyYW0gY2xvY2tGcmVxdWVuY3kgVGhlIGNsb2NrIGZyZXF1ZW5jeSBvZiB0aGUgY29tcHV0ZXIuXHJcbiAgICAgKiBAcGFyYW0gZGVsYXkgVGhlIGRlbGF5IG9mIHRoZSBpbnN0cnVjdGlvbiBtZW1vcnkuXHJcbiAgICAgKiBAcGFyYW0gd29ya2luZ01lbW9yeVNpemUgVGhlIHNpemUgb2YgdGhlIHdvcmtpbmcgbWVtb3J5LlxyXG4gICAgICogQHBhcmFtIHNpemUgVGhlIHNpemUgb2YgdGhlIGluc3RydWN0aW9uIG1lbW9yeS5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBhcHA6IEFwcCwgY2xvY2tGcmVxdWVuY3k6IG51bWJlciwgZGVsYXk6IG51bWJlciwgd29ya2luZ01lbW9yeVNpemU6IG51bWJlcixcclxuICAgICAgICAgICAgICAgIHNpemU6IG51bWJlciA9IDE2KSB7XHJcbiAgICAgICAgc3VwZXIoWzAsIDBdLCBhcHAuc2NlbmUsIGNsb2NrRnJlcXVlbmN5KTtcclxuICAgICAgICB0aGlzLnNpemUgPSBzaXplO1xyXG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25CdWZmZXIgPSBuZXcgQWRkcmVzc2VkSW5zdHJ1Y3Rpb25CdWZmZXIodGhpcywgc2l6ZSxcclxuICAgICAgICAgICAgSW5zdHJ1Y3Rpb25NZW1vcnkuQUREUkVTU19NQVJHSU4gKiAwLjYgKyBJbnN0cnVjdGlvbk1lbW9yeS5JTk5FUl9TUEFDSU5HIC0gSW5zdHJ1Y3Rpb25NZW1vcnkuQ09OVEVOVFNfTUFSR0lOLFxyXG4gICAgICAgICAgICAwLCBkZWxheSk7XHJcbiAgICAgICAgdGhpcy5Db2RlR2VuID0gbmV3IENvZGVHZW5lcmF0b3Ioc2l6ZSwgdGhpcy5pbnN0cnVjdGlvbkJ1ZmZlciwgd29ya2luZ01lbW9yeVNpemUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgaW5zdHJ1Y3Rpb24gYnVmZmVyIG9mIHRoZSBpbnN0cnVjdGlvbiBtZW1vcnkuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRJbnN0cnVjdGlvbkJ1ZmZlcigpOiBBZGRyZXNzZWRJbnN0cnVjdGlvbkJ1ZmZlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1Y3Rpb25CdWZmZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wdXRlcyB0aGUgZGltZW5zaW9ucyBvZiB0aGUgaW5zdHJ1Y3Rpb24gbWVtb3J5XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkaW1lbnNpb25zKCk6IHsgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgfSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgd2lkdGg6IHRoaXMuaW5zdHJ1Y3Rpb25CdWZmZXIud2lkdGggKyBJbnN0cnVjdGlvbk1lbW9yeS5DT05URU5UU19NQVJHSU4gKiAyLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaW5zdHJ1Y3Rpb25CdWZmZXIuaGVpZ2h0ICsgSW5zdHJ1Y3Rpb25NZW1vcnkuQ09OVEVOVFNfTUFSR0lOICogMlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoYW5nZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSBpbnN0cnVjdGlvbiBtZW1vcnkuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRQb3NpdGlvbihwb3NpdGlvbjogW251bWJlciwgbnVtYmVyXSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB7eDogcG9zaXRpb25bMF0sIHk6IHBvc2l0aW9uWzFdfTtcclxuICAgICAgICB0aGlzLmluc3RydWN0aW9uQnVmZmVyXHJcbiAgICAgICAgICAgIC5zZXRQb3NpdGlvbihbcG9zaXRpb25bMF0gKyBJbnN0cnVjdGlvbk1lbW9yeS5BRERSRVNTX01BUkdJTiAqIDAuNiArIEluc3RydWN0aW9uTWVtb3J5LklOTkVSX1NQQUNJTkcgLSBJbnN0cnVjdGlvbk1lbW9yeS5DT05URU5UU19NQVJHSU4sXHJcbiAgICAgICAgICAgIHBvc2l0aW9uWzFdXSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TWVudU9wdGlvbnMoKTogQ2hpcE1lbnVPcHRpb25zIHtcclxuICAgICAgICBpZiAoIXRoaXMuY2hpcE1lbnVPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXRzID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZ3JhZGVPcHRpb25zID0gW1xyXG4gICAgICAgICAgICAgICAgVXBncmFkZU9wdGlvbi5jcmVhdGVOdW1iZXJTZWxlY3Rpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgXCJDbG9jayBGcmVxdWVuY3lcIiwgMCxcclxuICAgICAgICAgICAgICAgICAgICBcIlRoZSBjbG9jayBmcmVxdWVuY3kgb2YgdGhlIGNoaXAuXCIsIHRoaXMuZ2V0Q2xvY2tGcmVxdWVuY3koKSxcclxuICAgICAgICAgICAgICAgICAgICAoKSA9PiB0aGlzLnNhZmVJbmNyZW1lbnRDbG9jaygpLFxyXG4gICAgICAgICAgICAgICAgICAgICgpID0+IHRoaXMuc2FmZURlY3JlbWVudENsb2NrKClcclxuICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIHRoaXMuY2hpcE1lbnVPcHRpb25zID0gbmV3IENoaXBNZW51T3B0aW9ucyhzdGF0cywgdXBncmFkZU9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5jaGlwTWVudU9wdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheU5hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gXCJJbnN0cnVjdGlvbiBNZW1vcnlcIjtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbkJ1ZmZlci51cGRhdGUoKTtcclxuICAgICAgICB0aGlzLkNvZGVHZW4udXBkYXRlSW5zdHJ1Y3Rpb25TdHJlYW0oKTtcclxuXHJcbiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjIpXHJcbiAgICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25CdWZmZXIud3JpdGUodGhpcy5Db2RlR2VuLmdldEluc3RydWN0aW9uU3RyZWFtKCksIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVHcmFwaGljcygpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBib2R5SGVpZ2h0ID0gdGhpcy5pbnN0cnVjdGlvbkJ1ZmZlci5oZWlnaHQgKyBJbnN0cnVjdGlvbk1lbW9yeS5DT05URU5UU19NQVJHSU4gKiAyO1xyXG4gICAgICAgIGNvbnN0IGJvZHlXaWR0aCA9IHRoaXMuaW5zdHJ1Y3Rpb25CdWZmZXIud2lkdGggKyBJbnN0cnVjdGlvbk1lbW9yeS5DT05URU5UU19NQVJHSU4gKiAyXHJcbiAgICAgICAgICAgICsgSW5zdHJ1Y3Rpb25NZW1vcnkuQUREUkVTU19NQVJHSU47XHJcbiAgICAgICAgdGhpcy5idWlsZEJvZHlNZXNoKGJvZHlXaWR0aCwgYm9keUhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5kcmF3UGlucyh0aGlzLmJvZHlNZXNoISwgU2lkZS5MRUZULCB0aGlzLnNpemUpO1xyXG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25CdWZmZXIuaW5pdGlhbGl6ZUdyYXBoaWNzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcG9zZUdyYXBoaWNzKCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLmRpc3Bvc2VCb2R5TWVzaCgpO1xyXG4gICAgICAgIHRoaXMuY2xlYXJUcmFjZXNBbmRQaW5zKFNpZGUuTEVGVCk7XHJcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbkJ1ZmZlci5kaXNwb3NlKCk7XHJcbiAgICAgICAgdGhpcy5hcHAucmVtb3ZlR2FtZUFjdG9yKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2FmZUluY3JlbWVudENsb2NrKCk6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5zdHJ1Y3Rpb25CdWZmZXIuY29ubmVjdGVkQ2hpcCAmJiB0aGlzLmdldENsb2NrRnJlcXVlbmN5KCkgPCAodGhpcy5pbnN0cnVjdGlvbkJ1ZmZlci5jb25uZWN0ZWRDaGlwLmdldENsb2NrRnJlcXVlbmN5KCkgLyAzKSlcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlQ2xvY2sodGhpcy5nZXRDbG9ja0ZyZXF1ZW5jeSgpICsgMSlcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENsb2NrRnJlcXVlbmN5KClcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNhZmVEZWNyZW1lbnRDbG9jaygpOiBudW1iZXIge1xyXG4gICAgICAgIGlmICh0aGlzLmdldENsb2NrRnJlcXVlbmN5KCkgPiAxKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVDbG9jayh0aGlzLmdldENsb2NrRnJlcXVlbmN5KCkgLSAxKVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2xvY2tGcmVxdWVuY3koKVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHtDb21wdXRlckNoaXAsIFNpZGV9IGZyb20gXCIuL0NvbXB1dGVyQ2hpcFwiO1xyXG5pbXBvcnQge1NjZW5lfSBmcm9tIFwidGhyZWVcIjtcclxuaW1wb3J0IHtEYXRhQ2VsbEFycmF5fSBmcm9tIFwiLi9tYWNyb3MvcHJpbWl0aXZlcy9EYXRhQ2VsbEFycmF5XCI7XHJcbmltcG9ydCB7RHJhd1V0aWxzfSBmcm9tIFwiLi4vRHJhd1V0aWxzXCI7XHJcbmltcG9ydCB7Q2hpcE1lbnVPcHRpb25zfSBmcm9tIFwiLi4vZGF0YVN0cnVjdHVyZXMvQ2hpcE1lbnVPcHRpb25zXCI7XHJcbmltcG9ydCB7VXBncmFkZU9wdGlvbn0gZnJvbSBcIi4uL2RhdGFTdHJ1Y3R1cmVzL1VwZ3JhZGVPcHRpb25cIjtcclxuaW1wb3J0IHtBcHB9IGZyb20gXCIuLi9hcHBcIjtcclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIHRoZSB3b3JraW5nIG1lbW9yeSBvZiBhIGNvbXB1dGVyIGNoaXAsIGNvbnNpc3Rpbmcgb2YgbXVsdGlwbGUgZGF0YSBiYW5rcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBXb3JraW5nTWVtb3J5IGV4dGVuZHMgQ29tcHV0ZXJDaGlwIHtcclxuICAgIHB1YmxpYyByZWFkb25seSBzaXplOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgbnVtYmVyT2ZCYW5rczogbnVtYmVyO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IG51bWJlck9mV29yZHM6IG51bWJlcjtcclxuXHJcbiAgICBwcml2YXRlIGRhdGFCYW5rczogRGF0YUNlbGxBcnJheVtdID0gW107XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBCQU5LX1NQQUNJTkc6IG51bWJlciA9IDAuMDQ7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBERUxBWTogbnVtYmVyID0gMTA7XHJcbiAgICBwcml2YXRlIGNvbm5lY3RlZENoaXA6IENvbXB1dGVyQ2hpcDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgV29ya2luZ01lbW9yeSBpbnN0YW5jZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYXBwIFRoZSBtYWluIGFwcGxpY2F0aW9uIGNsYXNzLlxyXG4gICAgICogQHBhcmFtIGNsb2NrRnJlcXVlbmN5IFRoZSBjbG9jayBmcmVxdWVuY3kgb2YgdGhlIHdvcmtpbmcgbWVtb3J5LlxyXG4gICAgICogQHBhcmFtIG51bWJlck9mQmFua3MgVGhlIG51bWJlciBvZiBkYXRhIGJhbmtzIGluIHRoZSB3b3JraW5nIG1lbW9yeS5cclxuICAgICAqIEBwYXJhbSBudW1iZXJPZldvcmRzIFRoZSBudW1iZXIgb2Ygd29yZHMgaW4gZWFjaCBkYXRhIGJhbmsuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgYXBwOiBBcHAsIGNsb2NrRnJlcXVlbmN5OiBudW1iZXIsIG51bWJlck9mQmFua3M6IG51bWJlciA9IDIsIG51bWJlck9mV29yZHM6IG51bWJlciA9IDQpIHtcclxuICAgICAgICBzdXBlcihbMCwgMF0sIGFwcC5zY2VuZSwgY2xvY2tGcmVxdWVuY3kpO1xyXG4gICAgICAgIHRoaXMubnVtYmVyT2ZXb3JkcyA9IG51bWJlck9mV29yZHM7XHJcbiAgICAgICAgdGhpcy5udW1iZXJPZkJhbmtzID0gbnVtYmVyT2ZCYW5rcztcclxuICAgICAgICB0aGlzLnNpemUgPSBudW1iZXJPZkJhbmtzICogbnVtYmVyT2ZXb3JkcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXB1dGVzIHRoZSBkaW1lbnNpb25zIG9mIHRoZSBpbnN0cnVjdGlvbiBtZW1vcnlcclxuICAgICAqL1xyXG4gICAgcHVibGljIGRpbWVuc2lvbnMoKTogeyB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciB9IHtcclxuICAgICAgICBjb25zdCBjZWxsQXJyYXlEaW1zID0gRGF0YUNlbGxBcnJheS5kaW1lbnNpb25zKHRoaXMubnVtYmVyT2ZXb3Jkcyk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgd2lkdGg6IGNlbGxBcnJheURpbXMud2lkdGggKiB0aGlzLm51bWJlck9mQmFua3MgKyBXb3JraW5nTWVtb3J5LkJBTktfU1BBQ0lORyAqICh0aGlzLm51bWJlck9mQmFua3MgLSAxKSArIFdvcmtpbmdNZW1vcnkuQ09OVEVOVFNfTUFSR0lOICogMixcclxuICAgICAgICAgICAgaGVpZ2h0OiBjZWxsQXJyYXlEaW1zLmhlaWdodCArIFdvcmtpbmdNZW1vcnkuQ09OVEVOVFNfTUFSR0lOICogMiArIFdvcmtpbmdNZW1vcnkuSU5ORVJfU1BBQ0lORyArIFdvcmtpbmdNZW1vcnkuVEVYVF9TSVpFXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hhbmdlcyB0aGUgcG9zaXRpb24gb2YgdGhlIGluc3RydWN0aW9uIG1lbW9yeS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFBvc2l0aW9uKHBvc2l0aW9uOiBbbnVtYmVyLCBudW1iZXJdKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHt4OiBwb3NpdGlvblswXSwgeTogcG9zaXRpb25bMV19O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2tzIGlmIHRoZSBkYXRhIGJhbmsgY29udGFpbmluZyB0aGUgc3BlY2lmaWVkIGFkZHJlc3MgaXMgcmVhZHkgZm9yIG9wZXJhdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGFkZHJlc3MgVGhlIG1lbW9yeSBhZGRyZXNzIHRvIGNoZWNrLlxyXG4gICAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgYmFuayBpcyByZWFkeSwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNSZWFkeShhZGRyZXNzOiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYW5rT2YoYWRkcmVzcykuaXNSZWFkeSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVxdWVzdHMgYSBtZW1vcnkgb3BlcmF0aW9uIG9uIGEgc3BlY2lmaWMgYWRkcmVzcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY2hpcCBUaGUgY29tcHV0ZXIgY2hpcCByZXF1ZXN0aW5nIHRoZSBvcGVyYXRpb24uXHJcbiAgICAgKiBAcGFyYW0gYWRkcmVzcyBUaGUgbWVtb3J5IGFkZHJlc3Mgb24gd2hpY2ggdGhlIG9wZXJhdGlvbiBpcyByZXF1ZXN0ZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhc2tGb3JNZW1vcnlPcGVyYXRpb24oY2hpcDogQ29tcHV0ZXJDaGlwLCBhZGRyZXNzOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNvbm5lY3RlZENoaXAgPSBjaGlwO1xyXG4gICAgICAgIHRoaXMuYmFua09mKGFkZHJlc3MpLmFza0Zvck1lbW9yeU9wZXJhdGlvbihjaGlwLCBhZGRyZXNzICUgdGhpcy5iYW5rT2YoYWRkcmVzcykuZ2V0U2l6ZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlYWRzIGEgdmFsdWUgZnJvbSBhIHNwZWNpZmljIG1lbW9yeSBhZGRyZXNzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhZGRyZXNzIFRoZSBtZW1vcnkgYWRkcmVzcyB0byByZWFkIGZyb20uXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgdmFsdWUgc3RvcmVkIGF0IHRoZSBzcGVjaWZpZWQgYWRkcmVzcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlYWQoYWRkcmVzczogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYW5rT2YoYWRkcmVzcykucmVhZChhZGRyZXNzICUgdGhpcy5iYW5rT2YoYWRkcmVzcykuZ2V0U2l6ZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFdyaXRlcyBhIHZhbHVlIHRvIGEgc3BlY2lmaWMgbWVtb3J5IGFkZHJlc3MuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGFkZHJlc3MgVGhlIG1lbW9yeSBhZGRyZXNzIHRvIHdyaXRlIHRvLlxyXG4gICAgICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBiZSB3cml0dGVuLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgd3JpdGUoYWRkcmVzczogbnVtYmVyLCB2YWx1ZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5iYW5rT2YoYWRkcmVzcykud3JpdGUoYWRkcmVzcyAlIHRoaXMuYmFua09mKGFkZHJlc3MpLmdldFNpemUoKSwgdmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE1lbnVPcHRpb25zKCk6IENoaXBNZW51T3B0aW9ucyB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNoaXBNZW51T3B0aW9ucykge1xyXG4gICAgICAgICAgICBjb25zdCBzdGF0cyA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCB1cGdyYWRlT3B0aW9ucyA9IFtcclxuICAgICAgICAgICAgICAgIFVwZ3JhZGVPcHRpb24uY3JlYXRlTnVtYmVyU2VsZWN0aW9uKFwiQ2xvY2sgRnJlcXVlbmN5XCIsIDAsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJUaGUgY2xvY2sgZnJlcXVlbmN5IG9mIHRoZSBjaGlwLlwiLCB0aGlzLmdldENsb2NrRnJlcXVlbmN5KCksXHJcbiAgICAgICAgICAgICAgICAgICAgKCkgPT4gdGhpcy5zYWZlSW5jcmVtZW50Q2xvY2soKSxcclxuICAgICAgICAgICAgICAgICAgICAoKSA9PiB0aGlzLnNhZmVEZWNyZW1lbnRDbG9jaygpKSxcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgdGhpcy5jaGlwTWVudU9wdGlvbnMgPSBuZXcgQ2hpcE1lbnVPcHRpb25zKHN0YXRzLCB1cGdyYWRlT3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNoaXBNZW51T3B0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBkaXNwbGF5TmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBcIk1haW4gTWVtb3J5XCI7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZGF0YUJhbmtzLmZvckVhY2goZGF0YUJhbmsgPT4gZGF0YUJhbmsudXBkYXRlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVHcmFwaGljcygpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBjZWxsQXJyYXlEaW1lbnNpb25zID0gRGF0YUNlbGxBcnJheS5kaW1lbnNpb25zKHRoaXMubnVtYmVyT2ZXb3Jkcyk7XHJcbiAgICAgICAgY29uc3QgYm9keUhlaWdodCA9IGNlbGxBcnJheURpbWVuc2lvbnMuaGVpZ2h0ICsgV29ya2luZ01lbW9yeS5DT05URU5UU19NQVJHSU4gKiAyXHJcbiAgICAgICAgICAgICsgV29ya2luZ01lbW9yeS5JTk5FUl9TUEFDSU5HICsgV29ya2luZ01lbW9yeS5URVhUX1NJWkU7XHJcbiAgICAgICAgbGV0IGJvZHlXaWR0aCA9IGNlbGxBcnJheURpbWVuc2lvbnMud2lkdGggKiB0aGlzLm51bWJlck9mQmFua3MgKyBXb3JraW5nTWVtb3J5LkNPTlRFTlRTX01BUkdJTiAqIDJcclxuICAgICAgICAgICAgKyAodGhpcy5udW1iZXJPZkJhbmtzIC0gMSkgKiBXb3JraW5nTWVtb3J5LkJBTktfU1BBQ0lORztcclxuXHJcbiAgICAgICAgY29uc3Qgc3RhcnRPZmZzZXQgPSAtYm9keVdpZHRoIC8gMiArIGNlbGxBcnJheURpbWVuc2lvbnMud2lkdGggLyAyICsgV29ya2luZ01lbW9yeS5DT05URU5UU19NQVJHSU47XHJcbiAgICAgICAgY29uc3QgYmFua1NpemUgPSB0aGlzLm51bWJlck9mV29yZHM7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm51bWJlck9mQmFua3M7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjZWxsTmFtZXMgOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJhbmtTaXplOyBqKyspXHJcbiAgICAgICAgICAgICAgICBjZWxsTmFtZXMucHVzaChEcmF3VXRpbHMudG9IZXgoaSAqIGJhbmtTaXplICsgaikpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YUJhbmsgPSBuZXcgRGF0YUNlbGxBcnJheSh0aGlzLFxyXG4gICAgICAgICAgICAgICAgc3RhcnRPZmZzZXQgKyBpICogKGNlbGxBcnJheURpbWVuc2lvbnMud2lkdGggKyBXb3JraW5nTWVtb3J5LkJBTktfU1BBQ0lORyksXHJcbiAgICAgICAgICAgICAgICAoLVdvcmtpbmdNZW1vcnkuSU5ORVJfU1BBQ0lORyAtIFdvcmtpbmdNZW1vcnkuVEVYVF9TSVpFKSAvIDIsXHJcbiAgICAgICAgICAgICAgICB0aGlzLm51bWJlck9mV29yZHMsIFdvcmtpbmdNZW1vcnkuREVMQVksIHVuZGVmaW5lZCwgY2VsbE5hbWVzLCBgREIke2l9YCk7XHJcbiAgICAgICAgICAgIGRhdGFCYW5rLmluaXRpYWxpemVHcmFwaGljcygpO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFCYW5rc1tpXSA9IGRhdGFCYW5rO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5idWlsZEJvZHlNZXNoKGJvZHlXaWR0aCwgYm9keUhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5kcmF3UGlucyh0aGlzLmJvZHlNZXNoISwgU2lkZS5CT1RUT00sIHRoaXMubnVtYmVyT2ZCYW5rcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcG9zZUdyYXBoaWNzKCk6IHZvaWQge1xyXG4gICAgICAgIHN1cGVyLmRpc3Bvc2VCb2R5TWVzaCgpO1xyXG4gICAgICAgIHRoaXMuY2xlYXJUcmFjZXNBbmRQaW5zKFNpZGUuQk9UVE9NKTtcclxuICAgICAgICB0aGlzLmRhdGFCYW5rcy5mb3JFYWNoKGRhdGFCYW5rID0+IGRhdGFCYW5rLmRpc3Bvc2UoKSk7XHJcbiAgICAgICAgdGhpcy5hcHAucmVtb3ZlR2FtZUFjdG9yKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmVzIHRoZSBkYXRhIGJhbmsgcmVzcG9uc2libGUgZm9yIHRoZSBzcGVjaWZpZWQgYWRkcmVzcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYWRkcmVzcyBUaGUgbWVtb3J5IGFkZHJlc3MgdG8gbG9jYXRlIHRoZSBjb3JyZXNwb25kaW5nIGRhdGEgYmFuayBmb3IuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgZGF0YSBiYW5rIGNvbnRhaW5pbmcgdGhlIHNwZWNpZmllZCBhZGRyZXNzLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGJhbmtPZihhZGRyZXNzOiBudW1iZXIpOiBEYXRhQ2VsbEFycmF5IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhQmFua3NbTWF0aC5mbG9vcihhZGRyZXNzIC8gdGhpcy5udW1iZXJPZldvcmRzKV07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTYWZlbHkgaW5jcmVtZW50cyB0aGUgY2xvY2sgZnJlcXVlbmN5IG9mIHRoZSB3b3JraW5nIG1lbW9yeS5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNhZmVJbmNyZW1lbnRDbG9jaygpOiBudW1iZXIge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3RlZENoaXAgJiYgKHRoaXMuZ2V0Q2xvY2tGcmVxdWVuY3koKSA8ICh0aGlzLmNvbm5lY3RlZENoaXAuZ2V0Q2xvY2tGcmVxdWVuY3koKSAvIDMpKSlcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlQ2xvY2sodGhpcy5nZXRDbG9ja0ZyZXF1ZW5jeSgpICsgMSlcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENsb2NrRnJlcXVlbmN5KClcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNhZmVseSBkZWNyZW1lbnRzIHRoZSBjbG9jayBmcmVxdWVuY3kgb2YgdGhlIHdvcmtpbmcgbWVtb3J5LlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2FmZURlY3JlbWVudENsb2NrKCk6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0Q2xvY2tGcmVxdWVuY3koKSA+IDEpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUNsb2NrKHRoaXMuZ2V0Q2xvY2tGcmVxdWVuY3koKSAtIDEpXHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDbG9ja0ZyZXF1ZW5jeSgpXHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtPcnRob2dyYXBoaWNDYW1lcmEsIFNjZW5lLCBXZWJHTFJlbmRlcmVyfSBmcm9tIFwidGhyZWVcIjtcclxuaW1wb3J0IHtEcmF3VXRpbHN9IGZyb20gXCIuL0RyYXdVdGlsc1wiO1xyXG5pbXBvcnQge1NJU0RQcm9jZXNzb3J9IGZyb20gXCIuL2FjdG9ycy9TSVNEUHJvY2Vzc29yXCI7XHJcbmltcG9ydCB7Q29tcHV0ZXJDaGlwfSBmcm9tIFwiLi9hY3RvcnMvQ29tcHV0ZXJDaGlwXCI7XHJcbmltcG9ydCB7SW5zdHJ1Y3Rpb25NZW1vcnl9IGZyb20gXCIuL2FjdG9ycy9JbnN0cnVjdGlvbk1lbW9yeVwiO1xyXG5pbXBvcnQge1dvcmtpbmdNZW1vcnl9IGZyb20gXCIuL2FjdG9ycy9Xb3JraW5nTWVtb3J5XCI7XHJcbmltcG9ydCB7SFVEfSBmcm9tIFwiLi9IVURcIjtcclxuXHJcbi8qKlxyXG4gKiBNYWluIGFwcGxpY2F0aW9uIGNsYXNzIHJlc3BvbnNpYmxlIGZvciBpbml0aWFsaXppbmcgYW5kIG1hbmFnaW5nIHRoZSBnYW1lIHN0YXRlLFxyXG4gKiBpbmNsdWRpbmcgdGhlIHJlbmRlcmluZyBwaXBlbGluZSwgc2NlbmUgc2V0dXAsIGFuZCBnYW1lIGxvb3AuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQXBwIHtcclxuICAgIC8qKiBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpbiBhIHNlY29uZCwgdXNlZCBmb3IgYXBwIHRpbWluZy4gKi9cclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IE9ORV9TRUNPTkQ6IG51bWJlciA9IDEwMDA7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBGUFM6IG51bWJlciA9IDYwO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZnJhbWVDb3VudDogbnVtYmVyID0gMDtcclxuXHJcbiAgICAvLyBDUFUgaW5pdGlhbCBwYXJhbWV0ZXJzXHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBDUFVfUE9TSVRJT046IFtudW1iZXIsIG51bWJlcl0gPSBbMCwgMF07XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBDUFVfQ0xPQ0tfRlJFUVVFTkNZOiBudW1iZXIgPSAzMDtcclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IENQVV9DQUNIRV9TSVpFOiBudW1iZXIgPSA2O1xyXG5cclxuICAgIC8vIEluc3RydWN0aW9uIE1lbW9yeSBpbml0aWFsIHBhcmFtZXRlcnNcclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IElOU1RSVUNUSU9OX01FTU9SWV9DTE9DS19GUkVRVUVOQ1k6IG51bWJlciA9IDU7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBJTlNUUlVDVElPTl9NRU1PUllfREVMQVk6IG51bWJlciA9IDM7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBJTlNUUlVDVElPTl9NRU1PUllfU0laRTogbnVtYmVyID0gMzI7XHJcblxyXG4gICAgLy8gTWVtb3J5IGluaXRpYWwgcGFyYW1ldGVyc1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgTUVNT1JZX0NMT0NLX0ZSRVFVRU5DWTogbnVtYmVyID0gNTtcclxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IE1FTU9SWV9CQU5LUzogbnVtYmVyID0gMTI7XHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBNRU1PUllfV09SRFNfUEVSX0JBTks6IG51bWJlciA9IDE2O1xyXG5cclxuICAgIC8qKiBUaGUgbWFpbiBzY2VuZSB3aGVyZSBhbGwgb2JqZWN0cyBhcmUgcGxhY2VkLiAqL1xyXG4gICAgc2NlbmU6IFNjZW5lID0gbmV3IFNjZW5lKCk7XHJcblxyXG4gICAgLyoqIFJlbmRlcmVyIGZvciBkcmF3aW5nIHRoZSBzY2VuZSBvbnRvIHRoZSBjYW52YXMuICovXHJcbiAgICByZW5kZXJlcjogV2ViR0xSZW5kZXJlcjtcclxuXHJcbiAgICAvKiogQ2FtZXJhIHRvIHZpZXcgdGhlIHNjZW5lLiAqL1xyXG4gICAgY2FtZXJhOiBPcnRob2dyYXBoaWNDYW1lcmE7XHJcblxyXG4gICAgLyoqIEZsYWcgdG8gcGF1c2UgdGhlIGdhbWUgbG9vcC4gKi9cclxuICAgIHBhdXNlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiBDZW50cmFsIFByb2Nlc3NpbmcgVW5pdCAoQ1BVKSBzaW11bGF0aW9uLiAqL1xyXG4gICAgY3B1czogU0lTRFByb2Nlc3NvcltdID0gW107XHJcblxyXG4gICAgLyoqIENvbGxlY3Rpb24gb2YgYWxsIGNvbXB1dGVyIGNoaXAgYWN0b3JzIHdpdGhpbiB0aGUgc2ltdWxhdGlvbi4gKi9cclxuICAgIGdhbWVBY3RvcnM6IENvbXB1dGVyQ2hpcFtdID0gW107XHJcblxyXG4gICAgLyoqIEhlYWRzLVVwIERpc3BsYXkgKEhVRCkgZm9yIHNob3dpbmcgZ2FtZSBpbmZvcm1hdGlvbi4gKi9cclxuICAgIHByaXZhdGUgaHVkOiBIVUQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkUmVzb3VyY2VzKCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIgPSB0aGlzLnNldHVwUmVuZGVyZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5zZXR1cENhbWVyYSgpO1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRHYW1lKCk7XHJcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0R2FtZUxvb3AoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFzeW5jaHJvbm91c2x5IGxvYWRzIHJlcXVpcmVkIHJlc291cmNlcyBiZWZvcmUgc3RhcnRpbmcgdGhlIGFwcGxpY2F0aW9uLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIGxvYWRSZXNvdXJjZXMoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgYXdhaXQgRHJhd1V0aWxzLmxvYWRGb250KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHVwIHRoZSBXZWJHTCByZW5kZXJlciB3aXRoIGFwcHJvcHJpYXRlIHNldHRpbmdzLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtXZWJHTFJlbmRlcmVyfSBUaGUgY29uZmlndXJlZCByZW5kZXJlci5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzZXR1cFJlbmRlcmVyKCk6IFdlYkdMUmVuZGVyZXIge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBuZXcgV2ViR0xSZW5kZXJlcih7YW50aWFsaWFzOiB0cnVlLCBhbHBoYTogdHJ1ZX0pO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldENsZWFyQ29sb3IoRHJhd1V0aWxzLkNPTE9SX1BBTEVUVEUuZ2V0KFwiREFSS0VTVFwiKSEsIDEpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5hdXRvQ2xlYXIgPSBmYWxzZTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMucmVuZGVyZXIuZG9tRWxlbWVudCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgY2FtZXJhIHVzZWQgdG8gdmlldyB0aGUgc2NlbmUuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2V0dXBDYW1lcmEoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgYXNwZWN0ID0gd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEgPSBuZXcgT3J0aG9ncmFwaGljQ2FtZXJhKC1hc3BlY3QsIGFzcGVjdCwgMSwgLTEsIDEsIDMpO1xyXG4gICAgICAgIHRoaXMuY2FtZXJhLnBvc2l0aW9uLnNldCgwLCAwLjgsIDIpO1xyXG4gICAgICAgIHRoaXMuY2FtZXJhLnpvb20gPSAwLjQ7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQW5pbWF0aW9uIGxvb3AgZm9yIHJlbmRlcmluZyB0aGUgc2NlbmUgYW5kIEhVRC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhbmltYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmFuaW1hdGUoKSk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKHRoaXMuc2NlbmUsIHRoaXMuY2FtZXJhKTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLmNsZWFyRGVwdGgoKTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLmh1ZC5nZXRIVURTY2VuZSgpLCB0aGlzLmh1ZC5nZXRIVURDYW1lcmEoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydHMgdGhlIG1haW4gZ2FtZSBsb29wIHdpdGggdXBkYXRlcyBiYXNlZCBvbiB0aGUgQ1BVJ3MgY2xvY2sgZnJlcXVlbmN5LlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXJ0R2FtZUxvb3AoKTogdm9pZCB7XHJcbiAgICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wYXVzZWQpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZUFjdG9ycy5mb3JFYWNoKGFjdG9yID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lSW50ZXJ2YWwgPSBNYXRoLnJvdW5kKEFwcC5GUFMgLyBhY3Rvci5nZXRDbG9ja0ZyZXF1ZW5jeSgpKTtcclxuICAgICAgICAgICAgICAgIGlmIChBcHAuZnJhbWVDb3VudCAlIGZyYW1lSW50ZXJ2YWwgPT09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0b3IudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5odWQudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIEFwcC5mcmFtZUNvdW50Kys7XHJcbiAgICAgICAgfSwgQXBwLk9ORV9TRUNPTkQgLyBBcHAuRlBTKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvYWRzIGFuZCBpbml0aWFsaXplcyBnYW1lIGRhdGFTdHJ1Y3R1cmVzIGxpa2UgdGhlIEhVRCBhbmQgZ2FtZSBhY3RvcnMuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgbG9hZEdhbWUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5hZGRHYW1lQWN0b3JzKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuY3B1cy5sZW5ndGggPT09IDApXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIENQVXMgZm91bmQgaW4gdGhlIHNpbXVsYXRpb24uXCIpO1xyXG4gICAgICAgIHRoaXMuaHVkID0gbmV3IEhVRCh0aGlzKTtcclxuICAgICAgICBEcmF3VXRpbHMuZHJhd0dyaWQodGhpcy5zY2VuZSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgZ2FtZSBhY3RvcnMgbGlrZSB0aGUgQ1BVIGFuZCBtZW1vcnkgbW9kdWxlcyB0byB0aGUgc2ltdWxhdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhZGRHYW1lQWN0b3JzKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHdvcmtpbmdNZW1vcnkgPSBuZXcgV29ya2luZ01lbW9yeSh0aGlzLCBBcHAuTUVNT1JZX0NMT0NLX0ZSRVFVRU5DWSwgQXBwLk1FTU9SWV9CQU5LUywgQXBwLk1FTU9SWV9XT1JEU19QRVJfQkFOSyk7XHJcbiAgICAgICAgY29uc3Qgd29ya2luZ01lbW9yeVNpemUgPSBBcHAuTUVNT1JZX0JBTktTICogQXBwLk1FTU9SWV9XT1JEU19QRVJfQkFOSztcclxuICAgICAgICBjb25zdCBpbnN0cnVjdGlvbk1lbW9yeSA9IG5ldyBJbnN0cnVjdGlvbk1lbW9yeSh0aGlzLCBBcHAuSU5TVFJVQ1RJT05fTUVNT1JZX0NMT0NLX0ZSRVFVRU5DWSxcclxuICAgICAgICAgICAgQXBwLklOU1RSVUNUSU9OX01FTU9SWV9ERUxBWSwgd29ya2luZ01lbW9yeVNpemUsIEFwcC5JTlNUUlVDVElPTl9NRU1PUllfU0laRSk7XHJcbiAgICAgICAgY29uc3QgY3B1ID0gbmV3IFNJU0RQcm9jZXNzb3IoQXBwLkNQVV9QT1NJVElPTiwgdGhpcy5zY2VuZSwgQXBwLkNQVV9DTE9DS19GUkVRVUVOQ1ksIEFwcC5DUFVfQ0FDSEVfU0laRSk7XHJcbiAgICAgICAgLy8gc2xlZXAgZm9yIGEgYml0IHRvIGFsbG93IHRoZSBDUFUgdG8gaW5pdGlhbGl6ZVxyXG4gICAgICAgIGNwdS5jb25uZWN0VG9JbnN0cnVjdGlvbk1lbW9yeShpbnN0cnVjdGlvbk1lbW9yeSk7XHJcbiAgICAgICAgY3B1LmNvbm5lY3RUb1dvcmtpbmdNZW1vcnkod29ya2luZ01lbW9yeSk7XHJcblxyXG4gICAgICAgIHRoaXMuY3B1cy5wdXNoKGNwdSk7XHJcbiAgICAgICAgdGhpcy5nYW1lQWN0b3JzLnB1c2goY3B1LCBpbnN0cnVjdGlvbk1lbW9yeSwgd29ya2luZ01lbW9yeSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGEgZ2FtZSBhY3RvciBmcm9tIHRoZSBzaW11bGF0aW9uLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVtb3ZlR2FtZUFjdG9yKGFjdG9yOiBDb21wdXRlckNoaXApOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZ2FtZUFjdG9ycy5pbmRleE9mKGFjdG9yKTtcclxuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVBY3RvcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbm5ldyBBcHAoKTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0NzkyOiAwXG59O1xuXG4vLyBubyBjaHVuayBvbiBkZW1hbmQgbG9hZGluZ1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG5fX3dlYnBhY2tfcmVxdWlyZV9fLk8uaiA9IChjaHVua0lkKSA9PiAoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwKTtcblxuLy8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG52YXIgd2VicGFja0pzb25wQ2FsbGJhY2sgPSAocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24sIGRhdGEpID0+IHtcblx0dmFyIFtjaHVua0lkcywgbW9yZU1vZHVsZXMsIHJ1bnRpbWVdID0gZGF0YTtcblx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG5cdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuXHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwO1xuXHRpZihjaHVua0lkcy5zb21lKChpZCkgPT4gKGluc3RhbGxlZENodW5rc1tpZF0gIT09IDApKSkge1xuXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuXHRcdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcblx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYocnVudGltZSkgdmFyIHJlc3VsdCA9IHJ1bnRpbWUoX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cdH1cblx0aWYocGFyZW50Q2h1bmtMb2FkaW5nRnVuY3Rpb24pIHBhcmVudENodW5rTG9hZGluZ0Z1bmN0aW9uKGRhdGEpO1xuXHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuXHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oaW5zdGFsbGVkQ2h1bmtzLCBjaHVua0lkKSAmJiBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcblx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSgpO1xuXHRcdH1cblx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuXHR9XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLk8ocmVzdWx0KTtcbn1cblxudmFyIGNodW5rTG9hZGluZ0dsb2JhbCA9IHNlbGZbXCJ3ZWJwYWNrQ2h1bmttaW5pY3B1XCJdID0gc2VsZltcIndlYnBhY2tDaHVua21pbmljcHVcIl0gfHwgW107XG5jaHVua0xvYWRpbmdHbG9iYWwuZm9yRWFjaCh3ZWJwYWNrSnNvbnBDYWxsYmFjay5iaW5kKG51bGwsIDApKTtcbmNodW5rTG9hZGluZ0dsb2JhbC5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2suYmluZChudWxsLCBjaHVua0xvYWRpbmdHbG9iYWwucHVzaC5iaW5kKGNodW5rTG9hZGluZ0dsb2JhbCkpOyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgZGVwZW5kcyBvbiBvdGhlciBsb2FkZWQgY2h1bmtzIGFuZCBleGVjdXRpb24gbmVlZCB0byBiZSBkZWxheWVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18uTyh1bmRlZmluZWQsIFszODddLCAoKSA9PiAoX193ZWJwYWNrX3JlcXVpcmVfXyg5NjkpKSlcbl9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fLk8oX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4iXSwibmFtZXMiOlsiZGVmZXJyZWQiLCJTaWRlIiwibG9hZEZvbnQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZvbnQiLCJGb250TG9hZGVyIiwibG9hZCIsIkZPTlRfRElSIiwibWVzaCIsImJ1aWxkVGV4dE1lc2giLCJjb2xvciIsIkNPTE9SX1BBTEVUVEUiLCJnZXQiLCJnZW9tZXRyeSIsImNvbXB1dGVCb3VuZGluZ0JveCIsImJvdW5kaW5nQm94IiwiRXJyb3IiLCJiYXNlVGV4dEhlaWdodCIsIm1heCIsInkiLCJtaW4iLCJiYXNlVGV4dFdpZHRoIiwieCIsInVuZGVmaW5lZCIsImJ1aWxkUXVhZHJpbGF0ZXJhbE1lc2giLCJ3aWR0aCIsImhlaWdodCIsIm1hdGVyaWFsIiwicG9zaXRpb24iLCJzZXQiLCJ0ZXh0IiwieE9mZnNldCIsInlPZmZzZXQiLCJzaXplIiwiY2VudGVyZWQiLCJ6Um90YXRpb24iLCJ0aGlzIiwiVGV4dEdlb21ldHJ5IiwiY2VudGVyIiwicm90YXRlWiIsInVwZGF0ZVRleHQiLCJkaXNwb3NlIiwiRHJhd1V0aWxzIiwicGFyYW1ldGVycyIsIm9wdGlvbnMiLCJ1cGRhdGVNYXRlcmlhbCIsImRyYXdHcmlkIiwic2NlbmUiLCJncmlkQ29sb3IiLCJncmlkSGVscGVyIiwicm90YXRlWCIsIk1hdGgiLCJQSSIsImRlcHRoV3JpdGUiLCJhZGQiLCJidWlsZFRyaWFuZ2xlTWVzaCIsInNpZGUiLCJzcXJ0IiwidmVydGljZXMiLCJGbG9hdDMyQXJyYXkiLCJzZXRBdHRyaWJ1dGUiLCJidWlsZEltYWdlTWVzaCIsImltYWdlIiwidGV4dHVyZUxvYWRlciIsInRleHR1cmUiLCJtYXAiLCJ0cmFuc3BhcmVudCIsImFkZEJhY2tncm91bmRNZXNoIiwicGFkZGluZyIsImJhY2tncm91bmQiLCJnZXRTaXplIiwiYnVpbGRMaW5lTWVzaCIsInYxIiwidjIiLCJkaXNwb3NlTWVzaGVzIiwibWVzaGVzIiwiZm9yRWFjaCIsImRpc3Bvc2VNZXNoIiwiQXJyYXkiLCJpc0FycmF5IiwidG9IZXgiLCJ2YWx1ZSIsInRvU3RyaW5nIiwidG9VcHBlckNhc2UiLCJwYWRTdGFydCIsIk1hcCIsIlVwZ3JhZGVPcHRpb25UeXBlIiwiY2xvY2tGcmVxdWVuY3kiLCJwaW5Qb3NpdGlvbnMiLCJwaW5HZW9tZXRyaWVzIiwicGluc01lc2hlcyIsInRyYWNlcyIsImdldENsb2NrRnJlcXVlbmN5IiwiZ2V0SGl0Qm94TWVzaCIsImJvZHlNZXNoIiwic2VsZWN0Iiwic2VsZWN0ZWRNZXNoIiwiZGVzZWxlY3QiLCJyZW1vdmUiLCJkcmF3UGlucyIsInBhcmVudCIsInBpbkNvdW50IiwiaG9yaXpvbnRhbCIsIlRPUCIsIkJPVFRPTSIsInBpblNwYWNpbmciLCJDb21wdXRlckNoaXAiLCJQSU5fTUFSR0lOIiwiUElOX1dJRFRIIiwiaSIsIm9mZnNldCIsIkxFRlQiLCJwaW5HZW9tZXRyeSIsInRyYW5zbGF0ZSIsInB1c2giLCJtZXJnZWRHZW9tZXRyeSIsIkJ1ZmZlckdlb21ldHJ5VXRpbHMiLCJtZXJnZWRNZXNoIiwiUElOX01BVEVSSUFMIiwiYnVpbGRUcmFjZSIsInBpblBvc2l0aW9uMSIsInNpZGUxIiwicGluUG9zaXRpb24yIiwic2lkZTIiLCJleHRlbmRlZFN0YXJ0IiwiY2FsY3VsYXRlRXh0ZW5kZWRQb2ludCIsImV4dGVuZGVkRW5kIiwiaW50ZXJtZWRpYXRlUG9pbnQiLCJwb2ludHMiLCJzZXRGcm9tUG9pbnRzIiwibGluZU1hdGVyaWFsIiwiZHJhd1RyYWNlIiwiaW5kZXgiLCJ0aGlzU2lkZSIsIm90aGVyIiwib3RoZXJTaWRlIiwiYmFzZU9mZnNldCIsImRpbWVuc2lvbiIsInRoaXNQaW5zIiwib3RoZXJQaW5zIiwic3RhcnRJbmRleFRoaXNTaWRlIiwic3RhcnRJbmRleE90aGVyU2lkZSIsImxlbmd0aCIsImFkanVzdGVkSW5kZXhUaGlzU2lkZSIsImFkanVzdGVkSW5kZXhPdGhlclNpZGUiLCJhYnMiLCJkcmF3VHJhY2VzIiwiY2xlYXJUcmFjZXNBbmRQaW5zIiwiY2hpbGRyZW4iLCJ0cmFjZSIsIlJJR0hUIiwiYnVpbGRCb2R5TWVzaCIsImJvZHlXaWR0aCIsImJvZHlIZWlnaHQiLCJCT0RZX01BVEVSSUFMIiwiYnVpbGRTZWxlY3RlZE1lc2giLCJkaXNwb3NlQm9keU1lc2giLCJ1cGRhdGVDbG9jayIsIm5ld1ZhbHVlIiwiSFVEX1RFWFRfTUFURVJJQUwiLCJURVhUX1NJWkUiLCJDT05URU5UU19NQVJHSU4iLCJJTk5FUl9TUEFDSU5HIiwiTUFYX0NMT0NLX0ZSRVFVRU5DWSIsIm1heFNpemUiLCJpdGVtcyIsIm9mIiwiUXVldWUiLCJJbmZpbml0eSIsInRvQXJyYXkiLCJzbGljZSIsImVucXVldWUiLCJpdGVtIiwiaXNGdWxsIiwiZGVxdWV1ZSIsInNoaWZ0IiwiaXNFbXB0eSIsImNsZWFyIiwic3BsaWNlIiwicGVlayIsIm1vdmVUbyIsInRvIiwiY291bnQiLCJjb250YWlucyIsImluY2x1ZGVzIiwic29tZSIsInByZWRpY2F0ZSIsImV2ZXJ5IiwiZmlsdGVyIiwic3RhcnQiLCJlbmQiLCJTeW1ib2wiLCJpdGVyYXRvciIsInBvaW50ZXIiLCJuZXh0IiwiZG9uZSIsInN0YXRpY01lc2hlcyIsImxpdmVNZXNoZXMiLCJoaWdobGlnaHRNZXNoZXMiLCJjbGVhckhpZ2hsaWdodHMiLCJhZGRTdGF0aWNNZXNoIiwiYWRkU3RhdGljTWVzaGVzIiwiYWRkTGl2ZU1lc2giLCJhZGRIaWdobGlnaHRNZXNoIiwiaW5zdHJ1Y3Rpb25NYXRlcmlhbCIsImluc3RydWN0aW9uIiwiaXNNZW1vcnlPcGVyYXRpb24iLCJDb21wdXRlckNoaXBNYWNybyIsIk1FTU9SWV9NQVRFUklBTCIsImlzQXJpdGhtZXRpYyIsIkFMVV9NQVRFUklBTCIsIkJSQU5DSF9NQVRFUklBTCIsIkNPTVBPTkVOVF9NQVRFUklBTCIsIlRFWFRfTUFURVJJQUwiLCJkZWxheSIsInJldmVyc2VkIiwiYnVmZmVyV2lkdGgiLCJzcGFjaW5nIiwiSW5zdHJ1Y3Rpb25CdWZmZXIiLCJCVUZGRVJfQkFTRV9XSURUSCIsImJ1ZmZlck1lc2hPZmZzZXRzIiwiaGlnaGxpZ2h0ZWRCdWZmZXJNZXNoZXMiLCJyZWFkeVRvQmVSZWFkIiwicmVhZFRpbWVvdXQiLCJzdG9yZWRJbnN0cnVjdGlvbnMiLCJzcGFjZU5lZWRlZCIsIkJVRkZFUl9IRUlHSFQiLCJ0b3RhbFNwYWNpbmciLCJyZWN0YW5nbGVTaXplIiwibm9PcE1lc2giLCJidWZmZXJIaWdobGlnaHRHZW9tZXRyeSIsImRpbWVuc2lvbnMiLCJzZXRQb3NpdGlvbiIsInNoaWZ0TWVzaGVzRG93biIsImlzUmVhZHlUb0JlUmVhZCIsImhpZ2hsaWdodEJ1ZmZlciIsImFza0Zvckluc3RydWN0aW9ucyIsImNoaXAiLCJuIiwicmVhZCIsInJlYWRDb3VudCIsImRpc3BsYXlOYW1lIiwiaW5zdHJ1Y3Rpb25zVG9SZWFkIiwid3JpdGUiLCJpbnN0cnVjdGlvbnMiLCJ3cml0ZUNvdW50Iiwib2xkU2l6ZSIsImJ1aWxkQnVmZmVyVGV4dE1lc2giLCJ1cGRhdGUiLCJpbml0aWFsaXplR3JhcGhpY3MiLCJidWlsZEJ1ZmZlcnNNZXNoIiwicmVwbGFjZVN0cmluZyIsImNsb25lIiwidHJhbnNsYXRlWCIsInRyYW5zbGF0ZVkiLCJuUG9zaXRpb25zIiwiaGlnaGxpZ2h0TWVzaCIsInN0YXJ0T2Zmc2V0IiwiZ2VvbWV0cmllcyIsIkNvdW50ZXIiLCJXSURUSCIsImhpZ2hsaWdodGVkIiwiaGlnaGxpZ2h0R2VvbWV0cnkiLCJoaWdobGlnaHQiLCJoaWdobGlnaHRzT25seSIsImlDYWNoZSIsIkluc3RydWN0aW9uRmV0Y2hlciIsImZldGNoaW5nQWRkcmVzcyIsInBjIiwiU1BBQ0lORyIsImluc3RydWN0aW9uQnVmZmVyIiwic2V0SW5zdHJ1Y3Rpb25NZW1vcnkiLCJpbnN0cnVjdGlvbk1lbW9yeSIsImZsdXNoIiwic2V0UHJvZ3JhbUNvdW50ZXIiLCJjaGVja01lbW9yeUlzUmVhZHkiLCJhc2tGb3JJbnN0cnVjdGlvbnNBdCIsImZldGNoSW5zdHJ1Y3Rpb25BdCIsInF1ZXVlIiwiYWRkcmVzcyIsImFza0Zvckluc3RydWN0aW9uQXQiLCJTSVNEUHJvY2Vzc29yIiwiaGlnaGxpZ2h0SW5zdHJ1Y3Rpb25NZW1vcnlUcmFjZSIsIkFMVV9PUENPREVTIiwiQUxVX0lNTV9PUENPREVTIiwiTUVNT1JZX09QQ09ERVMiLCJCUkFOQ0hfT1BDT0RFUyIsIlJFR0lTVEVSX0NPVU5UIiwiWkVST19SRUdJU1RFUiIsIk1BWF9CWVRFX1ZBTFVFIiwicmVnaXN0ZXJzIiwiQUxVIiwidGV4dFNpemUiLCJicmFuY2hTdGFsbGluZyIsImlzUmVhZHkiLCJjb21wdXRlIiwiZGVjb2RlciIsImNvbXB1dGVBTFVSZXN1bHQiLCJvcDEiLCJvcDIiLCJvcGNvZGUiLCJkcmF3QUxVVGV4dCIsImdldE9wMVJlZyIsImlzSW1tZWRpYXRlIiwiZ2V0SW1tZWRpYXRlIiwiZ2V0T3AyUmVnIiwiZ2V0T3Bjb2RlIiwidGFrZUJyYW5jaCIsImlzQnJhbmNoIiwicmVzdWx0IiwicHJldmVudE92ZXJmbG93IiwiZ2V0UmVzdWx0UmVnIiwibm90aWZ5SW5zdHJ1Y3Rpb25SZXRpcmVkIiwidmlzaWJsZSIsImRyYXdBTFVUZXh0Q29tcG9uZW50Iiwib3Bjb2RlU3ltYm9sIiwiT1BfWV9PRkZTRVQiLCJESVNUQU5DRV9UT19DRU5URVIiLCJSRVNfWV9PRkZTRVQiLCJJU0EiLCJyZWdpc3RlciIsInJlZ1BlckJhbmsiLCJiYW5rIiwiZmxvb3IiLCJudW1iZXJPZldvcmRzIiwiemVyb1JlZ2lzdGVyIiwicmVnaXN0ZXJOYW1lcyIsImJhbmtOYW1lIiwiaW5pdGlhbFRleHRNYXRlcmlhbCIsInJlY2VudGx5VXBkYXRlZE1lc2hlcyIsImNlbGxQb3NpdGlvbnMiLCJyZWFkeSIsImhpZ2hsaWdodGVkTWVtb3J5Q2VsbCIsIm1lbW9yeU9wZXJhdGlvblRpbWVvdXQiLCJtZW1vcnlBcnJheSIsImZpbGwiLCJEYXRhQ2VsbEFycmF5IiwiSU5JVElBTF9SRUdfVkFMVUUiLCJCVUZGRVJfV0lEVEgiLCJjZWxsSGlnaGxpZ2h0R2VvbWV0cnkiLCJvcGFjaXR5IiwiYXNrRm9yTWVtb3J5T3BlcmF0aW9uIiwiaGlnaGxpZ2h0Q2VsbCIsImVuc3VyZUFkZHJlc3NJc0luQm91bmRzIiwiY2hlY2tJZlJlYWR5IiwiY2hpcE1hY3JvIiwiYmFzZU1hdGVyaWFsIiwiYnVpbGREYXRhQ2VsbE1lc2hlcyIsImJ1aWxkRGF0YUNlbGxDb250ZW50c01lc2giLCJ0ZXh0TWVzaCIsInN0YXJ0WCIsImdldFN0YXJ0UG9zaXRpb25YIiwic3RhcnRZIiwiZ2V0U3RhcnRQb3NpdGlvblkiLCJyZWdpc3Rlckdlb21ldHJpZXMiLCJyZWdpc3Rlck5hbWVzR2VvbWV0cmllcyIsImdlbmVyYXRlR2VvbWV0cmllcyIsIm1lcmdlZE5hbWVzR2VvbWV0cnkiLCJjcmVhdGVDZWxsR2VvbWV0cnkiLCJjcmVhdGVOYW1lR2VvbWV0cnkiLCJyZWdpc3Rlckdlb21ldHJ5IiwicmVnaXN0ZXJOYW1lIiwicmVnaXN0ZXJOYW1lR2VvbWV0cnkiLCJmZXRjaGVyIiwiYWx1IiwiaW8iLCJEZWNvZGVyIiwicGlwZWxpbmVkIiwic2V0UGlwZWxpbmVkIiwiY29uZGl0aW9uUmVzdWx0IiwiZ2V0QWRkcmVzcyIsImRlY29kZSIsImV4ZWN1dGlvblVuaXRzUmVhZHkiLCJlbnF1ZXVlSW5zdHJ1Y3Rpb24iLCJkZWNvZGVJbnN0cnVjdGlvbiIsInN0b3JlZEluc3RydWN0aW9uIiwicHJvY2Vzc0lPIiwiX3JlYWRDb3VudCIsIklPSW50ZXJmYWNlIiwic2V0V29ya2luZ01lbW9yeSIsIm1lbW9yeSIsImV4ZWN1dGVJbnN0cnVjdGlvbiIsImhpZ2hsaWdodE1haW5NZW1vcnlUcmFjZSIsImNsZWFySGlnaGxpZ2h0ZWRUcmFjZXMiLCJfd3JpdGVDb3VudCIsInNob3J0TWVtb3J5SW5zdHJ1Y3Rpb24iLCJyZXN1bHRSZWciLCJ1cGRhdGVCdWZmZXJUZXh0IiwiaW5zdHJ1Y3Rpb25DYWNoZSIsIlNJU0RDb3JlIiwiSU5ORVJfU1BBQ0lOR19MIiwiaW5zdHJ1Y3Rpb25GZXRjaGVyIiwiZ2V0SW5zdHJ1Y3Rpb25CdWZmZXIiLCJ3b3JraW5nTWVtb3J5IiwiZmx1c2hQaXBlbGluZSIsImFsdURpbXMiLCJyZWdpc3RlckRpbXMiLCJhbHVXaWR0aCIsIl8iLCJyZWciLCJpb0xlbmd0aCIsInIiLCJJbnN0cnVjdGlvbkNhY2hlTGluZSIsInZhbGlkIiwiYWRkcmVzc1RhZyIsImlzVmFsaWQiLCJnZXRBZGRyZXNzVGFnIiwiaW52YWxpZGF0ZSIsInJlcXVlc3RlZEFkZHJlc3MiLCJjYWNoZUxpbmVzIiwiY2FjaGVMaW5lSGVpZ2h0Iiwic3RhcnRZT2Zmc2V0IiwiSW5zdHJ1Y3Rpb25DYWNoZSIsImxpbmUiLCJjYWNoZUxpbmVDb250YWluaW5nIiwiY2FjaGVMaW5lRGltZW5zaW9ucyIsInN0YXRzIiwidXBncmFkZU9wdGlvbnMiLCJJbnN0cnVjdGlvblR5cGUiLCJuYW1lIiwiY29zdCIsInR5cGUiLCJkZXNjcmlwdGlvbiIsImN1cnJlbnRWYWx1ZSIsIm5lc3RlZE9wdGlvbnMiLCJvbkluY3JlYXNlIiwib25EZWNyZWFzZSIsIk51bWJlclNlbGVjdGlvbiIsImNyZWF0ZU51bWJlclNlbGVjdGlvbiIsIlVwZ3JhZGVPcHRpb24iLCJjcmVhdGVTaW5nbGVWYWx1ZVNlbGVjdGlvbiIsIlNpbmdsZVZhbHVlU2VsZWN0aW9uIiwidW5pdCIsImJ1dHRvbiIsImlzQ2xpY2thYmxlIiwib25DbGljayIsImlzSG92ZXJhYmxlIiwib25Ib3ZlciIsIm9uVW5ob3ZlciIsImRlc3Ryb3kiLCJnZXRIaXRib3giLCJwYXVzZWQiLCJ0b2dnbGVQYXVzZSIsImlzUGF1c2VkIiwiaGl0Ym94IiwicnVuTWVzaCIsInJlY3RHZW9tZXRyeSIsInBhdXNlR2VvbWV0cnkiLCJwYXVzZU1lc2giLCJQYXVzZUJ1dHRvbiIsImNoYW5nZU1lc2hBcHBlYXJhbmNlIiwiSFVEIiwiSE9WRVJfQ09MT1IiLCJIT1ZFUl9TQ0FMRV9GQUNUT1IiLCJzY2FsZSIsIkFic3RyYWN0QnV0dG9uIiwiaHVkIiwiYXBwIiwiaHVkQ2FtZXJhIiwiYnV0dG9ucyIsInJheWNhc3RlciIsIm1vdXNlIiwibW91c2VEb3duIiwiaW5pdGlhbE1vdXNlUG9zaXRpb24iLCJjaGlwTWVudUJ1dHRvbnMiLCJvbk1vdXNlRG93biIsImV2ZW50IiwiY2xpZW50WCIsImNsaWVudFkiLCJvbk1vdXNlVXAiLCJvbk1vdXNlV2hlZWwiLCJjYW1lcmEiLCJ6b29tIiwiZGVsdGFZIiwiWk9PTV9GQUNUT1IiLCJNQVhfWk9PTSIsIk1JTl9aT09NIiwidXBkYXRlUHJvamVjdGlvbk1hdHJpeCIsIm9uTW91c2VEcmFnIiwiZGVsdGFYIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwibW92ZUNhbWVyYSIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uTW91c2VDbGljayIsImJpbmQiLCJvbk1vdXNlTW92ZSIsIm9uVG91Y2hTdGFydCIsIm9uVG91Y2hNb3ZlIiwib25Ub3VjaEVuZCIsIm9uV2luZG93UmVzaXplIiwidXBkYXRlTW91c2VDb29yZGluYXRlcyIsInNldEZyb21DYW1lcmEiLCJpbnRlcnNlY3RPYmplY3QiLCJnZXRDb21wdXRlckNoaXBNZW51IiwiYmFja2dyb3VuZE1lc2hIaXRib3giLCJnYW1lQWN0b3JzIiwiYWN0b3IiLCJzZWxlY3RBY3RvciIsImNoZWNrSG92ZXJTdGF0ZSIsImNvbmNhdCIsInByZXZlbnREZWZhdWx0IiwidG91Y2giLCJ0b3VjaGVzIiwiYXNwZWN0UmF0aW8iLCJsZWZ0IiwicmlnaHQiLCJyZW5kZXJlciIsInNldFNpemUiLCJyZXNldCIsInNjYWxlWCIsIlNDUk9MTF9TUEVFRCIsInNjYWxlWSIsIk1BWF9DQU1FUkFfUE9TSVRJT05fWCIsIk1BWF9DQU1FUkFfUE9TSVRJT05fWSIsImNwdXMiLCJpcGMiLCJpcGNTdHJpbmciLCJpcGNTdHJpbmdMZW5ndGgiLCJJUENNZXNoIiwiQkFTRV9DT0xPUiIsIklQQ01lc2hCYWNrZ3JvdW5kIiwiTUVOVV9DT0xPUiIsImlwcyIsImlwc1N0cmluZyIsImlwc1N0cmluZ0xlbmd0aCIsIklQU01lc2giLCJJUFNNZXNoQmFja2dyb3VuZCIsInJldGlyZWRJbnN0cnVjdGlvbnMiLCJyZXRpcmVkSW5zdHJ1Y3Rpb25zU3RyaW5nIiwidG90YWxFeGVjdXRlZEluc3RydWN0aW9uc1N0cmluZ0xlbmd0aCIsInRvdGFsRXhlY3V0ZWRJbnN0cnVjdGlvbnMiLCJ0b3RhbEV4ZWN1dGVkSW5zdHJ1Y3Rpb25zQmFja2dyb3VuZCIsInJlZHVjZSIsImFjYyIsImNwdSIsImdldElQQyIsInRvRml4ZWQiLCJnZXRBY2NSZXRpcmVkSW5zdHJ1Y3Rpb25zQ291bnQiLCJnZXRJUFMiLCJvbkNsb3NlIiwiY2hpcE1lbnVNZXNoZXMiLCJyaWdodG1vc3RTdGF0WCIsImNsb3NlWCIsImNsb3NlWSIsImJvdHRvbSIsIm1lbnVNZXNoIiwidG9wIiwiQ29tcHV0ZXJDaGlwTWVudSIsInRpdGxlIiwiY2xvc2VCdXR0b24iLCJUZXh0QnV0dG9uIiwiZ2V0QnV0dG9ucyIsImdldE1lbnVCdXR0b25zIiwic2hvd01lbnUiLCJyZW5kZXJDaGlwTWVudSIsImdldE1lbnVPcHRpb25zIiwiaGlkZU1lbnUiLCJjbGVhck1lbnUiLCJjaGlwTWVudSIsInJlbmRlclN0YXRzIiwib3B0aW9uIiwicmVuZGVyVXBncmFkZU9wdGlvbiIsIm9wdGlvbkNvdW50IiwicmVuZGVyT3B0aW9uVGl0bGUiLCJyZW5kZXJEZXNjcmlwdGlvbiIsInJlbmRlck51bWJlclNlbGVjdGlvbiIsInJlbmRlclNpbmdsZVZhbHVlU2VsZWN0aW9uIiwic3RhdCIsIm1heFgiLCJtaW5YIiwid2l0aFNjZW5lIiwid2l0aFBvc2l0aW9uIiwid2l0aFRleHRTaXplIiwid2l0aENlbnRlcmVkIiwiYnVpbGQiLCJidXR0b25NYXhYIiwiY2FudmFzV2lkdGgiLCJsaW5lcyIsInN1YnN0cmluZyIsImxhc3RTcGFjZSIsImxhc3RJbmRleE9mIiwieV9saW5lIiwidmFsdWVNZXNoIiwicGx1c0J1dHRvbiIsIm1pbnVzQnV0dG9uIiwiZGlydHlNZXNoIiwicG93ZXIiLCJQbGF5ZXJTdGF0cyIsIklOSVRJQUxfUE9XRVIiLCJ0aGVuIiwiUE9XRVJfSU1HIiwicG93ZXJJbWciLCJiZ01lc2giLCJnZXRQb3dlciIsImluaXRpYWxpemVIVURTY2VuZSIsImV2ZW50SGFuZGxlciIsIkhVREV2ZW50SGFuZGxlciIsImdldEhVRFNjZW5lIiwiaHVkU2NlbmUiLCJnZXRIVURDYW1lcmEiLCJIVURQcm9jZXNzb3JTdGF0cyIsIm1lbnUiLCJzZWxlY3RlZEFjdG9yIiwidG9nZ2xlUGF1c2VTdGF0ZSIsImluaXRpYWxpemVDYW1lcmEiLCJzdGF0c1Bvc2l0aW9uIiwicGF1c2VCdXR0b25Qb3NpdGlvbiIsInBsYXllclN0YXRzIiwicGxheWVyU3RhdHNQb3NpdGlvbiIsImFzcGVjdCIsImlzTW9iaWxlUmF0aW8iLCJ3aXRoVGV4dCIsIndpdGhPbkNsaWNrIiwiY2FjaGVTaXplIiwicHJldmlvdXNSZXRpcmVkSW5zdHJ1Y3Rpb25Db3VudHMiLCJyZXRpcmVkSW5zdHJ1Y3Rpb25Db3VudCIsImFjY3VtdWxhdGVkSW5zdHJ1Y3Rpb25Db3VudCIsIklQQyIsIklQUyIsImhpZ2hsaWdodGVkVHJhY2VzIiwic2FmZUluY3JlbWVudENsb2NrIiwic2FmZURlY3JlbWVudENsb2NrIiwiY29yZURpbWVuc2lvbnMiLCJjYWNoZURpbWVuc2lvbnMiLCJDT01QT05FTlRfU1BBQ0lORyIsImNvcmUiLCJjb25uZWN0VG9JbnN0cnVjdGlvbk1lbW9yeSIsInBpblBvc2l0aW9uIiwiZGlzdGFuY2UiLCJUUkFDRV9TUEFDSU5HIiwiVFJBQ0VfT0ZGU0VUIiwiaW5zdHJ1Y3Rpb25NZW1vcnlEaW1lbnNpb25zIiwiZGlzY29ubmVjdEluc3RydWN0aW9uTWVtb3J5IiwiZGlzcG9zZUdyYXBoaWNzIiwiY29ubmVjdFRvV29ya2luZ01lbW9yeSIsIm51bWJlck9mQmFua3MiLCJ3b3JraW5nTWVtb3J5RGltZW5zaW9ucyIsImRpc2Nvbm5lY3RXb3JraW5nTWVtb3J5IiwiY2hpcE1lbnVPcHRpb25zIiwiZGlzY29ubmVjdElNZW1vcnlCdXR0b24iLCJUZXh0QnV0dG9uQnVpbGRlciIsImRpc2Nvbm5lY3RXTWVtb3J5QnV0dG9uIiwiU3RhdCIsIlN0cmluZyIsImluY3JlYXNlQ2FjaGVTaXplIiwiZGVjcmVhc2VDYWNoZVNpemUiLCJDaGlwTWVudU9wdGlvbnMiLCJ1cGRhdGVSZXRpcmVkSW5zdHJ1Y3Rpb25Db3VudGVycyIsImNhbGN1bGF0ZUF2ZXJhZ2VJbnN0cnVjdGlvbkNvdW50Iiwic3VtIiwiYWRkcmVzc01lc2hlcyIsIml0ZXJhdGVNb2RlIiwicmVxdWVzdGVkSW5zdHJ1Y3Rpb25BZGRyZXNzIiwianVtcEluc3RydWN0aW9ucyIsImhpZ2hsaWdodGVkSnVtcFBDcyIsImZsYWdnZWRCdWZmZXJzIiwiZmxhZ2dlZEJ1ZmZlck1lc2hlcyIsImhpZ2hlc3RJbnN0cnVjdGlvbkFkZHJlc3MiLCJhZGRyZXNzUmVhY2hlZCIsInNldEp1bXBJbnN0cnVjdGlvbiIsImNvbm5lY3RlZENoaXAiLCJsb2NhbEFkZHJlc3MiLCJ0b0xvY2FsQWRkcmVzcyIsInVwZGF0ZUp1bXBJbnN0cnVjdGlvbkdyYXBoaWNzIiwibG93ZXN0QWRkcmVzc0lzSnVtcFRhcmdldCIsImhhbmRsZUZvcndhcmRCcmFuY2giLCJjbGVhckp1bXBJbnN0cnVjdGlvbiIsImp1bXBQYyIsImZpcnN0SW5zdHJ1Y3Rpb25UYXJnZXRpbmdMb3dlc3RBZGRyZXNzIiwiYWRkcmVzc01lc2giLCJJbnN0cnVjdGlvbk1lbW9yeSIsIkFERFJFU1NfTUFSR0lOIiwibmV3SW5kZXgiLCJoaWdobGlnaHRGbGFnZ2VkQnVmZmVyIiwiaGlnaGxpZ2h0SnVtcEFkZHJlc3MiLCJsb2NhbFBjIiwibG9jYWxJbnN0cnVjdGlvbkFkZHJlc3MiLCJpc0FkZHJlc3NJblJhbmdlIiwiaGlnaGxpZ2h0SW50ZXJtZWRpYXRlQWRkcmVzc2VzIiwiYWN0dWFsU3RhcnQiLCJhY3R1YWxFbmQiLCJmZXRjaGluZ1BjIiwibG93ZXN0QWRkcmVzcyIsIl9jaGlwIiwiX24iLCJvcDFSZWciLCJvcDJSZWciLCJpbW1lZGlhdGUiLCJ2YWxpZGF0ZU1lbW9yeU9wZXJhdGlvbiIsIk1FTU9SWSIsInZhbGlkYXRlQWx1T3BlcmF0aW9uIiwidmFsaWRhdGVBbHVJbW1PcGVyYXRpb24iLCJBTFVfSU1NIiwidmFsaWRhdGVCcmFuY2hPcGVyYXRpb24iLCJCUkFOQ0giLCJJbnN0cnVjdGlvbiIsImJyYW5jaCIsInRhcmdldCIsImFsdUltbSIsIndvcmtpbmdNZW1vcnlTaXplIiwiZm9yTG9vcFByb2JhYmlsaXR5IiwiYnJhbmNoUHJvYmFiaWxpdHkiLCJkb3VibGVGb3JMb29wUHJvYmFiaWxpdHkiLCJpbml0aWFsaXplUmVnaXN0ZXJzUHJvYmFiaWxpdHkiLCJpbnN0cnVjdGlvblN0cmVhbSIsImdldEluc3RydWN0aW9uU3RyZWFtIiwidXBkYXRlSW5zdHJ1Y3Rpb25TdHJlYW0iLCJhZGRlZEluc3RydWN0aW9ucyIsInJhbmRvbSIsIkNvZGVHZW5lcmF0b3IiLCJNSU5fRE9VQkxFRF9MT09QX1NJWkUiLCJNQVhfRE9VQkxFRF9MT09QX1NJWkUiLCJkb3VibGVGb3JMb29wIiwiaW5pdGlhbGl6ZVJlZ2lzdGVyc1dvcmtsb2FkIiwiTUlOX0xPT1BfU0laRSIsIk1BWF9MT09QX1NJWkUiLCJ0eXBpY2FsRm9yTG9vcCIsIk1JTl9CUkFOQ0hfU0laRSIsIk1BWF9CUkFOQ0hfU0laRSIsImNvbmRpdGlvbmFsQnJhbmNoV29ya2xvYWQiLCJNSU5fU0VRVUVOQ0VfU0laRSIsIk1BWF9TRVFVRU5DRV9TSVpFIiwidHlwaWNhbEluc3RydWN0aW9uU2VxdWVuY2UiLCJleGNlcHRlZCIsInR5cGljYWxXb3JrbG9hZCIsImxvYWRlZFJlZ2lzdGVycyIsImxvYWRDb25zZWN1dGl2ZUFkZHJlc3NlcyIsImNvbXB1dGVPbkdpdmVuUmVnaXN0ZXJzIiwicmVzdWx0UmVnaXN0ZXJzIiwibnVtYmVyT2ZBTFVPcGVyYXRpb25zIiwic3RvcmVSZXN1bHRzIiwibnVtYmVyT2ZMb2FkT3BlcmF0aW9ucyIsImdldFJhbmRvbSIsInJhbmRvbUNvbnNlY3V0aXZlUmVncyIsInJhbmRvbUFkZHJlc3NlcyIsInJhbmRvbUNvbnNlY3V0aXZlQWRkcmVzc2VzIiwiU2V0IiwicmFuZG9tUmVnIiwicmFuZG9tRnJvbSIsInJhbmRvbVJlc3VsdFJlZ2lzdGVyIiwicmFuZG9tRnJvbVNldCIsImRlbGV0ZSIsIm5QcmV2aW91c2x5QWRkZWRJbnN0cnVjdGlvbnMiLCJpdCIsImNvbXBhcmVkVG8iLCJsb29wQm9keVNpemUiLCJicmFuY2hUYXJnZXQiLCJqdW1wSW5zdHJ1Y3Rpb24iLCJ3b3JrbG9hZCIsImNtcFJlZyIsImJyYW5jaEluc3RydWN0aW9uIiwiaW5zaWRlSXQiLCJpbnNpZGVDb21wYXJlZFRvIiwib3V0c2lkZUl0Iiwib3V0c2lkZUNvbXBhcmVkVG8iLCJpbnNpZGVMb29wU2l6ZSIsIm91dHNpZGVCcmFuY2hUYXJnZXQiLCJpbnNpZGVCcmFuY2hUYXJnZXQiLCJpbnNpZGVKdW1wSW5zdHJ1Y3Rpb24iLCJvdXRzaWRlSnVtcEluc3RydWN0aW9uIiwiYXJyYXkiLCJyYW5kb21JbmRleCIsInZhbHVlcyIsInJhbmRvbVJlZ2lzdGVyTnVtYmVyIiwiYXR0ZW1wdHMiLCJyYW5kb21SZWdpc3Rlck51bWJlcnMiLCJyYW5kb21BZGRyZXNzIiwiQWRkcmVzc2VkSW5zdHJ1Y3Rpb25CdWZmZXIiLCJDb2RlR2VuIiwicmVtb3ZlR2FtZUFjdG9yIiwiZGF0YUJhbmtzIiwiY2VsbEFycmF5RGltcyIsIldvcmtpbmdNZW1vcnkiLCJCQU5LX1NQQUNJTkciLCJiYW5rT2YiLCJkYXRhQmFuayIsImNlbGxBcnJheURpbWVuc2lvbnMiLCJiYW5rU2l6ZSIsImNlbGxOYW1lcyIsImoiLCJERUxBWSIsImxvYWRSZXNvdXJjZXMiLCJzZXR1cFJlbmRlcmVyIiwic2V0dXBDYW1lcmEiLCJsb2FkR2FtZSIsImFuaW1hdGUiLCJzdGFydEdhbWVMb29wIiwiYW50aWFsaWFzIiwiYWxwaGEiLCJzZXRDbGVhckNvbG9yIiwic2V0UGl4ZWxSYXRpbyIsImRldmljZVBpeGVsUmF0aW8iLCJhdXRvQ2xlYXIiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJkb21FbGVtZW50IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwicmVuZGVyIiwiY2xlYXJEZXB0aCIsInNldEludGVydmFsIiwiZnJhbWVJbnRlcnZhbCIsInJvdW5kIiwiQXBwIiwiRlBTIiwiZnJhbWVDb3VudCIsIk9ORV9TRUNPTkQiLCJhZGRHYW1lQWN0b3JzIiwiTUVNT1JZX0NMT0NLX0ZSRVFVRU5DWSIsIk1FTU9SWV9CQU5LUyIsIk1FTU9SWV9XT1JEU19QRVJfQkFOSyIsIklOU1RSVUNUSU9OX01FTU9SWV9DTE9DS19GUkVRVUVOQ1kiLCJJTlNUUlVDVElPTl9NRU1PUllfREVMQVkiLCJJTlNUUlVDVElPTl9NRU1PUllfU0laRSIsIkNQVV9QT1NJVElPTiIsIkNQVV9DTE9DS19GUkVRVUVOQ1kiLCJDUFVfQ0FDSEVfU0laRSIsImluZGV4T2YiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm0iLCJPIiwiY2h1bmtJZHMiLCJmbiIsInByaW9yaXR5Iiwibm90RnVsZmlsbGVkIiwiZnVsZmlsbGVkIiwiT2JqZWN0Iiwia2V5cyIsImtleSIsImQiLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpbnN0YWxsZWRDaHVua3MiLCJjaHVua0lkIiwid2VicGFja0pzb25wQ2FsbGJhY2siLCJwYXJlbnRDaHVua0xvYWRpbmdGdW5jdGlvbiIsImRhdGEiLCJtb3JlTW9kdWxlcyIsInJ1bnRpbWUiLCJpZCIsImNodW5rTG9hZGluZ0dsb2JhbCIsInNlbGYiLCJfX3dlYnBhY2tfZXhwb3J0c19fIl0sInNvdXJjZVJvb3QiOiIifQ==